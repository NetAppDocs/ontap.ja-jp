= 
:allow-uri-read: 


. 権限レベルをadvancedに変更します。
+
[source, cli]
----
set -privilege advanced
----
. クラスター内でイプシロンを持つノードを識別します：
+
[source, cli]
----
cluster show
----
+
次の例では、「node0」は現在イプシロンを保持しています：

+
[listing]
----
cluster::*>
Node                 Health  Eligibility  Epsilon
-------------------- ------- ------------ ------------
node0                true    true         true
node1                true    true         false
node2                true    true         false
node3                true    true         false
----
. [[epsilon-true]]削除するノードがepsilonを保持している場合：
+
.. 削除するノードからイプシロンを移動します：
+
[source, cli]
----
cluster modify -node <name_of_node_to_be_removed> -epsilon false
----
.. 削除しないノードにepsilonを移動します：
+
[source, cli]
----
cluster modify -node <node_name> -epsilon true
----


. 現在のマスター ノードを特定します。
+
[source, cli]
----
cluster ring show
----
+
マスターノードは、 `mgmt`、 `vldb`、 `vifmgr`、 `bcomd`、 `crs`などのプロセスを保持するノードです。

. 削除するノードが現在のマスター ノードである場合は、クラスター内の別のノードをマスター ノードとして選出できるようにします：
+
.. 現在のマスターノードをクラスタに参加できないようにします：
+
[source, cli]
----
cluster modify -node <node_name> -eligibility false
----
+
適格性が回復されるまで、ノードは異常としてマークされます。マスターノードが不適格になると、残りのノードの1つがクラスタークォーラムによって新しいマスターとして選出されます。

+
[NOTE]
====
HAペアの最初のノードでこの手順を実行する場合は、そのノードのみを不適格としてマークしてください。HAパートナーのステータスは変更しないでください。

パートナー ノードが新しいマスターとして選択された場合は、そのノードが不適格となる前にイプシロンを保持しているかどうかを確認する必要があります。パートナー ノードがイプシロンを保持している場合は、そのノードを不適格にする前に、クラスター内に残っている別のノードにイプシロンを移動する必要があります。パートナー ノードを削除するためにこれらの手順を繰り返すときに、これを実行します。

====
.. 以前のマスター ノードを再びクラスタに参加できるようにします。
+
[source, cli]
----
cluster modify -node <node_name> -eligibility true
----


. クラスタから削除しないノード上のリモート ノード管理 LIF またはクラスタ管理 LIF にログインします。
. クラスターからノードを削除します：
+
|===
| ONTAPバージョン | 使用するコマンド 


 a| 
ONTAP 9.3
 a| 
[source, cli]
----
cluster unjoin
----


 a| 
ONTAP 9.4以降
 a| 
ノード名：

[source, cli]
----
cluster remove-node -node <node_name>
----
ノード IP の場合：

[source, cli]
----
cluster remove-node -cluster_ip <node_ip>
----
|===
+
混合バージョンのクラスタがあり、最後の下位バージョンのノードを削除する場合は、これらのコマンドで `-skip-last-low-version-node-check`パラメータを使用します。

+
次の内容のメッセージが表示されます。

+
** ノードのフェイルオーバー パートナーをクラスタから削除する必要があること。
** ノードを削除した後、そのノードをクラスターに再度参加させる前に、ブートメニューオプション*(4) Clean configuration and initialize all disks*またはオプション*(9) Configure Advanced Drive Partitioning*を使用して、ノードの構成を消去し、すべてのディスクを初期化する必要があります。
+
ノードを削除する前に対処が必要な条件がある場合は、エラー メッセージが表示されます。メッセージの内容は、たとえば、ノードに削除が必要な共有リソースがある、あるいはノードのクラスタHA構成またはストレージ フェイルオーバー構成を無効にする必要があるなどの場合があります。

+
ノードがクォーラム マスターの場合、クラスタのクォーラムがいったん失われて、すぐに戻ります。クォーラムが失われるのは一時的であり、データの操作には影響しません。



. 失敗メッセージにエラー状態が示されている場合は、それらの状態に対処して、 `cluster remove-node`または `cluster unjoin`コマンドを再実行します。
+
ノードはクラスターから正常に削除された後、自動的に再起動します。

. ノードを転用する場合は、ノードの設定を消去し、すべてのディスクを初期化します。
+
.. ブート プロセス時に、プロンプトに応じてCtrl+Cキーを押してブート メニューを表示します。
.. ブートメニューオプション*（4）構成をクリーンアップし、すべてのディスクを初期化する*を選択します。


. [[return-admin]]管理者権限レベルに戻る：
+
[source, cli]
----
set -privilege admin
----

