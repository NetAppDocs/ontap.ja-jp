---
sidebar: sidebar 
permalink: concepts/capacity-measurements-in-sm-concept.html 
keywords: capacity, measurement, physical, logical, storage, used storage, local tier capacity, aggregate capacity, block, capacity concern, add capacity, volume, used capacity, available capacity, total capacity, inactive capacity, static insights, dynamic insights, snapshot copy, snapshot copies, inactive data, overprovision, overflows, snapshot copy policy, snapshot copy reserves, reserves, policy, top volumes 
summary: システム容量は、物理スペースと論理スペースのどちらかで測定できます。ONTAP 9 .7以降では、System Managerで物理容量と論理容量の両方を測定できます。 
---
= System Managerでの容量測定
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
システム容量は、物理スペースと論理スペースのどちらかで測定できます。ONTAP 9 .7以降では、System Managerで物理容量と論理容量の両方を測定できます。

次の説明では、2つの測定値の違いについて説明します。

* *物理容量*：物理スペースは、ボリュームまたはローカル階層で使用されているストレージの物理ブロックを表します。Storage Efficiency機能（重複排除や圧縮など）によってデータが削減されるため、通常、使用済み物理容量の値は使用済み論理容量の値よりも小さくなります。
* *論理容量*：論理スペースは、ボリュームまたはローカル階層で使用可能なスペース（論理ブロック）です。論理スペースとは、重複排除や圧縮の結果を考慮せずに理論上のスペースをどのように使用できるかを指します。使用済み論理スペースの値は、使用済み物理スペースの量に、設定されているStorage Efficiency機能（重複排除や圧縮など）による削減量を加えた値になります。この測定値にはSnapshot、クローン、その他のコンポーネントが含まれ、データ圧縮などの物理スペースの削減量が反映されていないため、使用済み物理容量よりも多く表示されることがあります。したがって、合計論理容量がプロビジョニング済みスペースよりも大きくなる可能性があります。



NOTE: System Managerでは、容量表現にルートストレージ階層（アグリゲート）の容量は考慮されません。



== 使用済み容量の測定値

使用済み容量の測定値は、次の表で説明するように、使用しているSystem Managerのバージョンによって表示されます。

[cols="30,30,40"]
|===


| System Manager のバージョン | 容量に使用される用語 | 参照される容量のタイプ 


 a| 
9.9.1以降
 a| 
使用済み論理容量
 a| 
使用済み論理スペース（Storage Efficiencyの設定が有効になっている場合）



 a| 
9.7および9.8
 a| 
使用済み
 a| 
使用済みの論理スペース（ Storage Efficiency の設定が有効になっている場合）



 a| 
9.5 および 9.6 （クラシックビュー）
 a| 
使用済み
 a| 
使用済みの物理スペース

|===


== 容量の測定条件

容量の定義には次の用語が使用されます。

* *割り当て容量*：Storage VM内のボリュームに割り当てられているスペースの量。
* *使用可能*：Storage VMまたはローカル階層でデータの格納やボリュームのプロビジョニングに使用できる物理スペースの量。
* *ボリューム間の容量*：Storage VM上のすべてのボリュームの使用済みストレージと使用可能なストレージの合計。
* *クライアントデータ*：クライアントデータに使用されているスペースの量（物理または論理）。
+
** ONTAP 9.13.1以降では、クライアントデータで使用されている容量を*論理使用済み*と呼び、Snapshotで使用されている容量が別 々 に表示されます。
** ONTAP 9.12.1以前では、クライアントデータで使用されている容量がSnapshotで使用されている容量に追加された容量を*論理使用済み*と呼びます。


* * Committed *：ローカル階層のコミット済み容量。
* *データ削減*：取り込まれたデータのサイズと格納されたデータのサイズの比率。
+
** ONTAP 9 .13.1以降、データ削減機能では、重複排除や圧縮など、ほとんどのストレージ効率化機能の結果が考慮されますが、Snapshotやシンプロビジョニングはデータ削減率に含まれません。
** ONTAP 9.12.1以前では、データ削減比率は次のように表示されます。
+
*** [容量]*パネルに表示されるデータ削減値は、使用済みの物理スペースに対するすべての使用済み論理スペースの総削減率であり、Snapshotやその他のStorage Efficiency機能を使用することによるメリットも含まれます。
*** 詳細パネルを表示すると、概要パネルに表示された*「全体」*の比率と、クライアントデータのみで使用されている物理的な使用済みスペースと比較した、クライアントデータのみで使用されている論理スペースの比率（スナップショットおよびクローンなし*）の両方が表示されます。




* *使用済み論理容量*：
+
** ONTAP 9.13.1以降では、クライアントデータで使用されている容量を*論理使用済み*と呼び、Snapshotで使用されている容量が別 々 に表示されます。
** ONTAP 9.12.1以前では、クライアントデータで使用されている容量がSnapshotで使用されている容量に追加された容量を「* Logical Used *」と呼びます。


* * Logical Used %*：現在の使用済み論理容量に対するプロビジョニング済みサイズの割合（Snapshotリザーブを除く）。この値にはボリュームでの効率化による削減も含まれるため、100%を超える場合があります。
* *最大容量*：Storage VM上のボリュームに割り当てられる最大スペース。
* *使用済み物理容量*：ボリュームまたはローカル階層の物理ブロックで使用されている容量。
* * Physical Used %*：ボリュームの物理ブロックで使用されている容量の、プロビジョニングされたサイズに対する割合。
* *プロビジョニングされた容量*：Cloud Volumes ONTAPシステムから割り当てられ、ユーザやアプリケーションのデータを格納できる状態にあるファイルシステム（ボリューム）。
* * Reserved *：ローカル階層ですでにプロビジョニングされているボリューム用にリザーブされているスペースの量。
* *使用済み*：データが格納されているスペースの量。
* * usedおよびreserved *：使用済みの物理スペースとリザーブスペースの合計です。




== Storage VMの容量

Storage VMの最大容量は、ボリュームに割り当てられている合計スペースに未割り当ての残りスペースを足したものです。

* ボリュームの割り当てスペースは、FlexVol、FlexGroup、およびFlexCacheの使用済み容量と使用可能容量の合計です。
* ボリュームの容量は、制限されている場合、オフラインの場合、または削除後にリカバリキューに格納されている場合でも、合計に含まれます。
* ボリュームに自動拡張が設定されている場合は、ボリュームの最大オートサイズの値が合計で使用されます。自動拡張を使用しない場合は、ボリュームの実際の容量が合計で使用されます。


次のグラフは、ボリューム間の容量の測定値と最大容量の関係を示しています。

image:max-cap-limit-cap-x-volumes.gif["最大容量制限は割り当て済みスペースと使用可能スペースで構成され、ボリューム全体の容量は割り当て済みスペースのみを占有します。"]

ONTAP 9 .13.1以降では、クラスタ管理者が使用できますlink:../manage-max-cap-limit-svm-in-sm-task.html["Storage VMの最大容量制限を有効にする"]。ただし、データ保護、SnapMirror関係、またはMetroCluster構成のボリュームを含むStorage VMに対してストレージ制限を設定することはできません。また、Storage VMの最大容量を超えるようにクォータを設定することはできません。

最大容量制限の設定後は、現在割り当てられている容量よりも小さいサイズに変更することはできません。

Storage VMが最大容量に達すると、一部の処理を実行できなくなります。System Managerには、の次の手順link:../insights-system-optimization-task.html["*インサイト*"]に関する推奨事項が表示されます。



== 容量の測定単位

System Manager は、 1024 （ 2^10^ ）バイトのバイナリ単位に基づいてストレージ容量を計算します。

* .10.1以降では、ONTAP 9 Managerにストレージ容量の単位がKiB、MiB、GiB、TiB、およびPiBとして表示されます。
* ONTAP 9 .10.0以前では、これらの単位は、System ManagerにKB、MB、GB、TB、およびPBとして表示されます。



NOTE: System Managerでスループットに使用される単位は、ONTAPのすべてのリリースで、KB/秒、MB/秒、GB/秒、TB/秒、およびPB/秒のままです。

[cols="20,20,30,30"]
|===


| ONTAP 9.10.0 以前の System Manager で表示される容量の単位 | ONTAP 9.10.1以降のSystem Managerに表示される容量単位 | 計算 | バイト単位の値 


 a| 
KB
 a| 
KiB
 a| 
1024
 a| 
1024バイト



 a| 
MB
 a| 
MIB
 a| 
1024 * 1024
 a| 
1、048、576バイト



 a| 
GB
 a| 
GIB
 a| 
1024 * 1024 * 1024
 a| 
1、073、741、824バイト



 a| 
TB
 a| 
TiB
 a| 
1024 * 1024 * 1024 * 1024
 a| 
1、099、511、627、776バイト



 a| 
PB
 a| 
PIB
 a| 
1024 * 1024 * 1024 * 1024 * 1024
 a| 
1、125、899、906、842、624バイト

|===
.関連情報
link:../task_admin_monitor_capacity_in_sm.html["System Managerでクラスタ、階層、SVMの容量を監視する"]

link:../volumes/logical-space-reporting-enforcement-concept.html["ボリュームの論理スペースのレポートと適用"]
