---
permalink: concepts/high-availability-pairs-concept.html 
sidebar: sidebar 
keywords: high-availability pairs 
summary: クラスタノードは、フォールトトレランスとノンストップオペレーションを実現するためにハイアベイラビリティ（HA）ペアで構成されます。ノードに障害が発生した場合や定期的なメンテナンスのためにノードを停止する必要がある場合は、パートナーがストレージをテイクオーバーしてデータの提供を継続できます。ノードがオンラインに戻ったら、パートナーはストレージをギブバックします。 
---
= ハイアベイラビリティペア
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラスタノードは、フォールトトレランスとノンストップオペレーションを実現するために、 _high-availability （ HA ）ペア _ で構成されます。ノードに障害が発生した場合や定期的なメンテナンスのためにノードを停止する必要がある場合、パートナーはそのストレージをテイクオーバーしてデータの提供を継続できます。ノードがオンラインに戻ったときに、 partner_ギ ブバック _storage を提供します。

HAペアは、必ず同じようなコントローラモデルで構成されます。通常、コントローラは冗長電源装置を備えた同じシャーシに配置されます。

HAペアは、フォールト トレラントなノードです。ペアになっているノードがさまざまな方法で通信し、パートナーが機能しているかを継続的にチェックしたり、パートナーの不揮発性メモリのログ データをミラーリングしたりできます。一方のノードへの書き込み要求が発生した場合、両方のノードのNVRAMに要求が記録されたのち、クライアントまたはホストに応答が返されます。フェイルオーバーの際は、障害が発生したノードのコミットされていない書き込み要求が稼働しているパートナーによってディスクにコミットされてデータの一貫性が維持されます。存続しているノードは、以前は障害が発生したノードのNVRAMのミラーとして機能していたNVRAMパーティションへの書き込みを記録し続けます。

もう一方のコントローラのストレージメディアへの接続により、テイクオーバー時に各ノードがもう一方のストレージにアクセスできるようになります。ネットワークパスのフェイルオーバーメカニズムにより、クライアントとホストは稼働しているノードと引き続き通信できます。

可用性を確保するには、フェイルオーバー時の追加のワークロードに対応できるように、どちらかのノードのパフォーマンス容量利用率を50%に抑える必要があります。同じ理由で、1つのノードに設定できるNAS仮想ネットワークインターフェイスの最大数の50%を超えないようにすることもできます。

image:high-availability.gif["ハイアベイラビリティペア"]

|===


 a| 
*_ 仮想 ONTAP 実装でのテイクオーバーとギブバック _ *

ONTAP Selectのような仮想化された「shared-nothing」 ONTAP実装では、ノード間でストレージは共有されません。一方のノードが停止した場合、そのノードのデータの同期ミラーリングされたコピーを使用してパートナーがデータの提供を継続します。パートナーはノードのストレージはテイクオーバーせず、データ提供機能だけをテイクオーバーします。

|===