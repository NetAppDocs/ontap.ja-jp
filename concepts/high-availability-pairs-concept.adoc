---
permalink: concepts/high-availability-pairs-concept.html 
sidebar: sidebar 
keywords: high-availability pairs 
summary: クラスタ ノードは、フォールト トレランスとノンストップ オペレーションを実現するためにハイアベイラビリティ（HA）ペアとして構成されます。ノードに障害が発生した場合や定期的なメンテナンスのためにノードを停止する必要がある場合、パートナーがストレージをテイクオーバーしてデータの提供を続けることができます。ノードがオンラインに戻ったら、パートナーはストレージをギブバックします。 
---
= ハイアベイラビリティ ペア
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラスタノードは、フォールトトレランスと無停止運用を実現するために、_高可用性（HA）ペア_で構成されます。ノードに障害が発生した場合、または定期メンテナンスのためにノードを停止する必要がある場合、そのノードのパートナーがストレージを_引き継ぎ_、引き続きそこからデータを提供します。ノードがオンラインに戻ると、パートナーはストレージを_返還_します。

HAペアは、必ず同じシリーズのコントローラ モデルで構成されます。通常、コントローラは冗長電源装置を備えた同じシャーシに配置されます。

HAペアは、異なる方法で相互通信できるフォールトトレラントノードです。これにより、各ノードはパートナーノードの動作状態を継続的に確認し、もう一方のノードの不揮発性メモリのログデータをミラーリングできます。ノードへの書き込み要求は、クライアントまたはホストに応答が返される前に、両方のノードのNVRAMに記録されます。フェイルオーバー時には、存続しているパートナーノードが障害の発生したノードの未コミットの書き込み要求をディスクにコミットすることで、データの整合性を確保します。存続しているノードは、以前は障害の発生したノードのNVRAMのミラーとして機能していたNVRAMパーティションに書き込みを記録し続けます。

パートナー ノードのコントローラのストレージ メディアとの接続が確保されているため、テイクオーバー時に各ノードはパートナーのストレージにアクセスできます。ネットワーク パスのフェイルオーバー メカニズムにより、クライアントとホストは稼働しているノードと引き続き通信することが可能です。

可用性を確保するためには、フェイルオーバー時の追加のワークロードに対応できるように、各ノードのパフォーマンス容量利用率を50%に抑える必要があります。同じ理由で、1つのノードに割り当てるNAS仮想ネットワーク インターフェイスは最大数の半分までにすることを推奨します。

image:high-availability.gif["高可用性ペア"]

|===


 a| 
*_仮想化されたONTAP実装におけるテイクオーバーとギブバック_*

ONTAP Selectのような仮想化された「`shared-nothing`」ONTAP実装では、ストレージはノード間で共有されません。ノードがダウンした場合、そのパートナーはノードのデータの同期ミラーコピーからデータの提供を継続します。パートナーはノードのストレージを引き継ぐのではなく、データ提供機能のみを引き継ぎます。

|===