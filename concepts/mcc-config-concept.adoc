---
permalink: concepts/mcc-config-concept.html 
sidebar: sidebar 
keywords: metrocluster continuous availability 
summary: MetroCluster構成は、物理的に分離された2つのミラークラスタを実装することでデータを保護します。各クラスタが、もう一方のクラスタのデータとSVMの設定を同期的にレプリケートします。一方のサイトで災害が発生した場合、管理者は、ミラーされたSVMをアクティブ化し、サバイバーサイトからデータの提供を開始できます。 
---
= MetroClusterの継続的可用性
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
MetroCluster構成は、物理的に分離された2つのミラークラスタを実装することでデータを保護します。各クラスタが、もう一方のクラスタのデータとSVMの設定を同期的にレプリケートします。一方のサイトで災害が発生した場合、管理者は、ミラーされたSVMをアクティブ化し、サバイバーサイトからデータの提供を開始できます。

* _ファブリック接続型MetroCluster _および_ MetroCluster IP _構成は、メトロポリタン規模のクラスタをサポートします。
* _Stretch MetroCluster _configurations は、キャンパス全体のクラスタをサポートします。


どちらの場合も、クラスタ間でピア関係を確立する必要があります。

MetroCluster では、 _ SyncMirror _ という ONTAP 機能を使用して、もう一方のクラスタのストレージでコピーまたは _フレ ツクス _ の形式で各クラスタのアグリゲートデータを同期的にミラーリングします。スイッチオーバーでは、サバイバークラスタ上のリモートプレックスがオンラインになり、セカンダリSVMがデータの提供を開始します。

image:metrocluster.gif["サイトBからデータを提供するMetroCluster を示す図"]

|===


 a| 
*_ MetroCluster 以外の実装で SyncMirror を使用する _ オプションで MetroCluster 以外の実装で SyncMirror を使用することにより 'RAID タイプで保護されるディスク数よりも多くのディスクで障害が発生した場合や 'RAID グループのディスクへの接続が失われた場合のデータ損失を防ぐことができますこの機能はHAペアに対してのみ使用できます。

アグリゲートデータは、別 々 のディスクシェルフに格納されたプレックスにミラーリングされます。いずれかのシェルフが使用できなくなった場合、障害の原因を修正しながら、影響を受けていないプレックスが引き続きデータを提供します。

SyncMirrorを使用してミラーリングされたアグリゲートには、ミラーされていないアグリゲートの2倍のストレージが必要であることに注意してください。各プレックスに、ミラーリングするプレックスと同じ数のディスクが必要です。たとえば、 1 、 440GB のアグリゲートをミラーリングするには、プレックス 1 つにつき 1 、 440GB 、合計で 2 、 880GB のディスクスペースが必要です。

SyncMirrorでは、ストレージのパフォーマンスと可用性を最適化するために、ミラーアグリゲート用に少なくとも20%の空きスペースを確保することを推奨します。ミラーされていないアグリゲートでは10%が推奨されますが、追加の10%のスペースはファイルシステムで増分変更に対応するために使用できます。増分変更を行うと、ONTAPのcopy-on-write Snapshotベースのアーキテクチャにより、ミラーされたアグリゲートのスペース使用率が向上します。これらのベストプラクティスに従わないと、SyncMirrorの再同期のパフォーマンスが低下し、非共有クラウド環境のNDUやMetroCluster環境のスイッチバックなどの運用ワークフローに間接的に影響します。

|===