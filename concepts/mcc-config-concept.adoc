---
permalink: concepts/mcc-config-concept.html 
sidebar: sidebar 
keywords: metrocluster continuous availability 
summary: MetroCluster構成は、物理的に分離された2つのミラー クラスタを実装することでデータを保護します。各クラスタが、もう一方のクラスタのデータおよびSVM設定を同期的にレプリケートします。一方のサイトで災害が発生したときは、管理者はミラーリングされたSVMをアクティブ化し、ミラーリングされたデータをセカンダリ サイトから提供できます。 
---
= MetroClusterの継続的可用性
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
MetroCluster構成は、物理的に分離された2つのミラー クラスタを実装することでデータを保護します。各クラスタが、もう一方のクラスタのデータおよびSVM設定を同期的にレプリケートします。一方のサイトで災害が発生したときは、管理者はミラーリングされたSVMをアクティブ化し、ミラーリングされたデータをセカンダリ サイトから提供できます。

* _ファブリック接続 MetroCluster_ および _MetroCluster IP_ 構成は、メトロポリタン全体のクラスターをサポートします。
* _Stretch MetroCluster_構成は、キャンパス全体のクラスターをサポートします。


いずれの場合も、クラスタ間でピア関係を確立する必要があります。

MetroClusterは、ONTAPの_SyncMirror_と呼ばれる機能を使用して、各クラスタのアグリゲートデータをコピー（_プレックス_）として他のクラスタのストレージに同期的にミラーリングします。スイッチオーバーが発生すると、残存クラスタのリモート プレックスがオンラインになり、セカンダリSVMがデータの提供を開始します。

image:metrocluster.gif["サイトBからデータを提供するMetroClusterを示す図。"]

|===


 a| 
*_非MetroCluster環境でのSyncMirrorの使用_* 非MetroCluster環境でも、RAIDタイプが保護できる以上のディスク障害やRAIDグループディスクへの接続喪失によるデータ損失を防ぐために、オプションでSyncMirrorを使用できます。この機能はHAペアでのみ利用可能です。

アグリゲート データは、別々のディスク シェルフに格納されたプレックス間でミラーリングされます。一方のシェルフが使用できなくなった場合、影響を受けていないプレックスが障害からの復旧作業中も引き続きデータを提供します。

SyncMirrorを使用してミラーリングされたアグリゲートには、ミラーされていないアグリゲートの2倍のストレージが必要であることに注意してください。各プレックスには、ミラーリングするプレックスと同じ数のディスクが必要です。例えば、1,440 GBのアグリゲートをミラーリングするには、プレックスごとに1,440 GB、つまり2,880 GBのディスク容量が必要になります。

SyncMirrorでは、ストレージのパフォーマンスと可用性を最適化するために、ミラーリングされたアグリゲートに少なくとも20%の空きスペースを確保することをお勧めします。ミラーリングされていないアグリゲートの推奨値は10%ですが、追加の10%のスペースは、ファイルシステムが増分変更を吸収するために使用される場合があります。ONTAPのcopy-on-writeスナップショットベースのアーキテクチャにより、増分変更によってミラーリングされたアグリゲートのスペース使用率が上昇します。これらのベストプラクティスに従わないと、SyncMirror再同期のパフォーマンスに悪影響を与える可能性があり、非共有クラウド環境のNDUやMetroCluster環境のスイッチバックなどの運用ワークフローに間接的に影響を及ぼします。

|===