---
permalink: concepts/san-path-failover-concept.html 
sidebar: sidebar 
keywords: san path failover 
summary: リンク障害が発生した場合、SANホストはALUA（非対称論理ユニットアクセス）とMPIO（マルチパスI/O）を使用して、稼働しているLIFにトラフィックを再ルーティングします。SVM が提供する LUN への使用可能なルートは、事前に定義されたパスで決まります。 
---
= SANパスのフェイルオーバー
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
リンク障害が発生した場合、SANホストはALUA（非対称論理ユニットアクセス）とMPIO（マルチパスI/O）を使用して、稼働しているLIFにトラフィックを再ルーティングします。SVM が提供する LUN への使用可能なルートは、事前に定義されたパスで決まります。

SAN 環境では、ホストは lun_targets への要求の _ イニシエータ _ とみなされます。 _MPIO を使用すると、イニシエータからターゲットへの複数のパスを使用できます。ALUA は、「 _optimized paths 」と呼ばれる最も直接パスを特定します。 _

通常は、LUNの所有者ノード上のLIFへの最適パスと、HAパートナー上のLIFへの最適化されていないパスをそれぞれ複数設定します。所有者ノードの1つのポートで障害が発生すると、稼働しているポートにトラフィックがルーティングされます。すべてのポートで障害が発生した場合は、最適化されていないパスを介してトラフィックがルーティングされます。

ONTAP選択的LUNマップ（SLM）では、ホストからLUNへのパスの数がデフォルトで制限されます。新しく作成したLUNには、そのLUNを所有するノードまたはそのHAパートナーへのパス経由でのみアクセスできます。また、イニシエータに対して _port set_ で LIF を設定して、 LUN へのアクセスを制限することもできます。

image:san-host-rerouting.gif["SANパスのフェイルオーバーの例"]

|===


 a| 
*_ SAN 環境でのボリュームの移動 _ *

デフォルトでは、 ONTAP の選択的 LUN マップ（ SLM ） _ は、 SAN ホストから LUN へのパスの数を制限します。新しく作成した LUN には、 LUN を所有するノードまたは HA パートナーである LUN の _reporting nodes _ へのパス経由でのみアクセスできます。

つまり、ボリュームを別のHAペアのノードに移動する場合は、デスティネーションHAペアのレポートノードをLUNマッピングに追加する必要があります。その後、MPIOセットアップで新しいパスを指定できます。ボリュームの移動が完了したら、ソースHAペアのレポートノードをマッピングから削除できます。

|===