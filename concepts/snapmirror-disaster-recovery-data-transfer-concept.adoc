---
permalink: concepts/snapmirror-disaster-recovery-data-transfer-concept.html 
sidebar: sidebar 
keywords: snapmirror disaster recovery, data transfer 
summary: SnapMirrorは、地理的に離れたサイトのプライマリ ストレージからセカンダリ ストレージへのフェイルオーバー用に設計されたディザスタ リカバリ テクノロジです。名前が示すように、SnapMirrorは本番データの複製（ミラー）をセカンダリ ストレージに作成し、プライマリ サイトに災害が発生しても、セカンダリ ストレージから引き続きデータを提供できるようにします。 
---
= SnapMirrorによるディザスタ リカバリとデータ転送
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
_SnapMirror_ は、地理的に離れたサイトにあるプライマリ ストレージからセカンダリ システムへのフェイルオーバーを目的とした災害復旧テクノロジーです。その名の通り、SnapMirrorはセカンダリ ストレージに作業データのレプリカ（_ミラー_）を作成します。プライマリ サイトで災害が発生した場合でも、このミラーから引き続きデータを提供できます。

データはボリューム レベルでミラーリングされます。プライマリ ストレージのソース ボリュームとセカンダリ ストレージのデスティネーション ボリュームの関係は、_データ保護関係_と呼ばれます。ボリュームが存在するクラスタと、ボリュームからデータを提供するSVMは、_ピアリング_されている必要があります。ピア関係により、クラスタとSVMは安全にデータを交換できます。

[TIP]
====
SVM間にもデータ保護関係を作成できます。このタイプの関係では、SVMのすべてまたは一部の設定がNFSエクスポートおよびSMB共有からRBACにレプリケートされます。また、SVMが所有するボリューム内のデータもレプリケートされます。

====
ONTAP 9.10.1以降では、SnapMirror S3を使用してS3バケット間にデータ保護関係を作成できます。デスティネーション バケットは、ローカルまたはリモートのONTAPシステム、あるいはStorageGRIDやAWSなどのONTAP以外のシステムに配置できます。

SnapMirrorを初めて起動すると、ソースボリュームからデスティネーションボリュームへの_ベースライン転送_が実行されます。ベースライン転送には通常、以下の手順が含まれます：

* ソースボリュームのスナップショットを作成します。
* スナップショットとそれが参照するすべてのデータ ブロックを宛先ボリュームに転送します。
* 「`active`」ミラーが破損した場合に備えて、ソース ボリュームに残っている、それほど新しくないスナップショットを宛先ボリュームに転送します。


ベースライン転送が完了すると、SnapMirrorは新しいスナップショットのみをミラーに転送します。更新は非同期で、設定されたスケジュールに従って行われます。保持ポリシーは、ソース上のスナップショット ポリシーをミラーリングします。プライマリ サイトで災害が発生した場合、最小限の中断でデスティネーション ボリュームをアクティブ化し、サービスが復旧したらソース ボリュームを再アクティブ化できます。

SnapMirrorはベースライン作成後はスナップショットのみを転送するため、レプリケーションは高速かつ無停止で実行されます。フェイルオーバーのユースケースからもわかるように、ミラーリングされたストレージから効率的にデータを提供するには、セカンダリ システムのコントローラはプライマリ システムのコントローラと同等、またはほぼ同等である必要があります。

image:snapmirror.gif["ソース ボリュームと宛先ボリューム間のSnapMirror関係"]

|===


 a| 
*_SnapMirrorを使用したデータ転送_*

SnapMirrorを使用して、NetAppデータファブリック内のエンドポイント間でデータを複製することもできます。SnapMirrorポリシーの作成時に、1回限りのレプリケーションと定期的なレプリケーションのどちらかを選択できます。

|===