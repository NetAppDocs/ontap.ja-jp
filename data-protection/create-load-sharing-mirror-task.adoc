---
permalink: data-protection/create-load-sharing-mirror-task.html 
sidebar: sidebar 
keywords: create, initialize, load-sharing, mirror, relationship 
summary: クラスタ内のルートボリュームごとに負荷共有ミラー（LSM）を作成する必要があります。LSMは、ルートボリュームを含んでいない任意のノード（HAペアのパートナーノードなど）または別のHAペアに作成できます。2ノードクラスタの場合は、ルートボリュームがあるノードのパートナーにLSMを作成する必要があります。 
---
= 負荷共有ミラー関係の作成と初期化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラスタ内のNASデータを提供する各SVMルートボリュームについて、負荷共有ミラー（LSM）を作成する必要があります。2つ以上のHAペアで構成されるクラスタでは、HAペアの両方のノードで障害が発生した場合に引き続きクライアントからネームスペースにアクセスできるように、SVMルートボリュームの負荷共有ミラーを検討する必要があります。負荷共有ミラーは、単一のHAペアで構成されるクラスタには適していません。

.タスクの内容
同じノードにLSMを作成し、そのノードが使用できない場合は、単一点障害が発生します。また、クライアントから引き続きデータにアクセスできるようにするための2つ目のコピーは作成されません。ただし、ルートボリュームを含むノード以外のノードや別のHAペアにLSMを作成すると、障害が発生してもデータに引き続きアクセスできます。

たとえば、3つのノードにルートボリュームがある4ノードクラスタの場合は、次のようになります。

* HA 1のノード1のルートボリュームについて、HA 2のノード1またはHA 2のノード2にLSMを作成します。
* HA 1のノード2のルートボリュームについて、HA 2のノード1またはHA 2のノード2にLSMを作成します。
* HA 2のノード1のルートボリュームについて、HA 1のノード1またはHA 1のノード2にLSMを作成します。


.手順
. LSMのデスティネーションボリュームを作成します。
+
[source, cli]
----
volume create -vserver <SVM> -volume <volume> -aggregate <aggregate> -type DP -size <size>
----
+
デスティネーションボリュームのサイズは、ルートボリュームと同じかそれ以上である必要があります。

+
ルートボリュームとデスティネーションボリュームの名前にサフィックス（、 `_m1`など）を付けることを推奨します `_root`。

+
コマンド構文全体については、マニュアルページを参照してください。

+
次の例は、に `cluster_src`ルートボリューム用の負荷共有ミラーボリュームを作成し `svm1_root`ます。

+
[listing]
----
cluster_src:> volume create -vserver svm1 -volume svm1_m1 -aggregate aggr_1 -size 1gb -state online -type DP
----
. link:create-replication-job-schedule-task.html["レプリケーションジョブスケジュールの作成"]です。
. SVMルートボリュームとLSMのデスティネーションボリュームの間に負荷共有ミラー関係を作成します。
+
[source, cli]
----
snapmirror create -source-path <SVM:volume> -destination-path <SVM:volume> -type LS -schedule <schedule>
----
+
コマンド構文全体については、マニュアルページを参照してください。

+
次の例は、ルートボリュームと負荷共有ミラーボリューム `svm1_m1`の間に負荷共有ミラー関係を作成し `svm1_root`ます。

+
[listing]
----
cluster_src::> snapmirror create -source-path svm1:svm1_root -destination-path svm1:svm1_m1 -type LS -schedule hourly
----
+
負荷共有ミラーのtype属性がからに `LS`変わります `DP`。

. 負荷共有ミラーを初期化します。
+
[source, cli]
----
snapmirror initialize-ls-set -source-path <SVM:volume>
----
+
コマンド構文全体については、マニュアルページを参照してください。

+
次の例は、ルートボリュームの負荷共有ミラーを初期化し `svm1_root`ます。

+
[listing]
----
cluster_src::> snapmirror initialize-ls-set -source-path svm1:svm1_root
----

