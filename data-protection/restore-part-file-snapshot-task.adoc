---
permalink: data-protection/restore-part-file-snapshot-task.html 
sidebar: sidebar 
keywords: restore, part, file, snapshot copy 
summary: volume snapshot partial-restore-file コマンドを使用すると、データの開始バイトオフセットとバイト数がわかっている場合、スナップショットからLUNまたはNFSまたはSMBコンテナファイルに一定範囲のデータを復元できます。このコマンドは、同じLUNに複数のデータベースを保存しているホスト上のデータベースの1つを復元する場合に使用できます。 
---
= ONTAPスナップショットからファイルの一部を復元する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
この `volume snapshot partial-restore-file`コマンドを使用すると、データの開始バイトオフセットとバイト数がわかっている場合、スナップショットからLUN、NFSまたはSMBコンテナファイルに一定範囲のデータをリストアできます。このコマンドは、同じLUNに複数のデータベースを保存しているホスト上のデータベースの1つをリストアする場合に使用できます。

ONTAP 9.12.1以降では、xref:../snapmirror-active-sync/index.html[SnapMirrorアクティブ同期]を使用するボリュームに対して部分的な復元が可能です。

.手順
. ボリューム内のスナップショットを一覧表示します：
+
`volume snapshot show -vserver _SVM_ -volume _volume_`

+
 `volume snapshot show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-snapshot-show.html["ONTAPコマンド リファレンス"^]を参照してください。

+
次の例は、 `vol1`のスナップショットを示しています：

+
[listing]
----

clus1::> volume snapshot show -vserver vs1 -volume vol1

Vserver Volume Snapshot                State    Size  Total% Used%
------- ------ ---------- ----------- ------   -----  ------ -----
vs1	    vol1   hourly.2013-01-25_0005  valid   224KB     0%    0%
               daily.2013-01-25_0010   valid   92KB      0%    0%
               hourly.2013-01-25_0105  valid   228KB     0%    0%
               hourly.2013-01-25_0205  valid   236KB     0%    0%
               hourly.2013-01-25_0305  valid   244KB     0%    0%
               hourly.2013-01-25_0405  valid   244KB     0%    0%
               hourly.2013-01-25_0505  valid   244KB     0%    0%

7 entries were displayed.
----
. スナップショットからファイルの一部を復元します：
+
`volume snapshot partial-restore-file -vserver _SVM_ -volume _volume_ -snapshot _snapshot_ -path _file_path_ -start-byte _starting_byte_ -byte-count _byte_count_`

+
開始バイト オフセットとバイト数は4,096の倍数である必要があります。

+
次の例では、ファイル `myfile.txt`の最初の 4,096 バイトを復元します：

+
[listing]
----
cluster1::> volume snapshot partial-restore-file -vserver vs0 -volume vol1 -snapshot daily.2013-01-25_0010 -path /myfile.txt -start-byte 0 -byte-count 4096
----

