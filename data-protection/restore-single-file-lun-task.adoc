---
permalink: data-protection/restore-single-file-lun-task.html 
sidebar: sidebar 
keywords: restore, single file, lun, nvme, namespace, snapmirror, destination, snapshot, copy, snap mirror, baseline, 
summary: 単一のファイル、LUN、スナップショットからのファイルまたはLUNのセット、あるいはSnapMirrorデスティネーション ボリュームからのNVMeネームスペースをリストアできます。ONTAP 9.7以降では、SnapMirror同期デスティネーションからのNVMeネームスペースもリストアできます。ファイルは元のソース ボリュームまたは別のボリュームにリストアできます。 
---
= ONTAP SnapMirrorデスティネーションからファイル、LUN、またはNVMeネームスペースをリストアする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
単一のファイル、LUN、スナップショットからのファイルまたはLUNのセット、あるいはSnapMirrorデスティネーション ボリュームからのNVMeネームスペースをリストアできます。ONTAP 9.7以降では、SnapMirror同期デスティネーションからのNVMeネームスペースもリストアできます。ファイルは元のソース ボリュームまたは別のボリュームにリストアできます。

.開始する前に
SnapMirror同期デスティネーション（ONTAP 9.5以降でサポート）からファイルまたはLUNを復元するには、まず関係を削除して解放する必要があります。

.タスク概要
ファイルまたはLUNのリストア先のボリューム（デスティネーション ボリューム）は読み書き可能なボリュームにする必要があります。

* SnapMirrorは、ソース ボリュームとデスティネーション ボリュームに共通のSnapshotがある場合（元のソース ボリュームにリストアする場合が一般的）、_増分リストア_を実行します。
* それ以外の場合は、SnapMirrorが_ベースライン リストア_を実行し、指定されたSnapshotとそれが参照するすべてのデータ ブロックがデスティネーション ボリュームに転送されます。


.手順
. デスティネーション ボリューム内のSnapshotを一覧表示します：
+
`volume snapshot show -vserver <SVM> -volume volume`

+
 `volume snapshot show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-snapshot-show.html["ONTAPコマンド リファレンス"^]を参照してください。

+
次の例は、 `vserverB:secondary1`デスティネーションのSnapshotを示しています：

+
[listing]
----

cluster_dst::> volume snapshot show -vserver vserverB -volume secondary1

Vserver     Volume      Snapshot                State    Size  Total% Used%
-------     ------      ---------- ----------- ------   -----  ------ -----
vserverB    secondary1  hourly.2013-01-25_0005  valid   224KB     0%    0%
                        daily.2013-01-25_0010   valid   92KB      0%    0%
                        hourly.2013-01-25_0105  valid   228KB     0%    0%
                        hourly.2013-01-25_0205  valid   236KB     0%    0%
                        hourly.2013-01-25_0305  valid   244KB     0%    0%
                        hourly.2013-01-25_0405  valid   244KB     0%    0%
                        hourly.2013-01-25_0505  valid   244KB     0%    0%

7 entries were displayed.
----
. SnapMirrorデスティネーション ボリュームのSnapshotから単一のファイルまたはLUN、あるいはファイルまたはLUNのセットをリストアします：
+
`snapmirror restore -source-path <SVM:volume>|<cluster://SVM/volume>, ... -destination-path <SVM:volume>|<cluster://SVM/volume>, ... -source-snapshot snapshot -file-list <source_file_path,@destination_file_path>`

+
[NOTE]
====
このコマンドはデスティネーションSVMまたはデスティネーション クラスタから実行する必要があります。

====
+
次のコマンドは、元のデスティネーション ボリューム `secondary1`のスナップショット `daily.2013-01-25_0010`から、ファイル `file1`と `file2`を、元のソース ボリューム `primary1`のアクティブ ファイル システム内の同じ場所に復元します：

+
[listing]
----

cluster_dst::> snapmirror restore -source-path vserverB:secondary1 -destination-path vserverA:primary1 -source-snapshot daily.2013-01-25_0010 -file-list /dir1/file1,/dir2/file2

[Job 3479] Job is queued: snapmirror restore for the relationship with destination vserverA:primary1
----
+
次のコマンドは、元のデスティネーション ボリューム `secondary1`のスナップショット `daily.2013-01-25_0010`から、ファイル `file1`と `file2`を、元のソース ボリューム `primary1`のアクティブ ファイル システム内の別の場所に復元します。

+
デスティネーション ファイル パスは@記号で始まり、その後に元のソース ボリュームのルートからのファイル パスが続きます。この例では、 `file1`が `/dir1/file1.new`に復元され、file2が `/dir2.new/file2`に復元されます（ `primary1`）：

+
[listing]
----

cluster_dst::> snapmirror restore -source-path vserverB:secondary1 -destination-path vserverA:primary1 -source-snapshot daily.2013-01-25_0010 -file-list /dir/file1,@/dir1/file1.new,/dir2/file2,@/dir2.new/file2

[Job 3479] Job is queued: snapmirror restore for the relationship with destination vserverA:primary1
----
+
次のコマンドは、元のデスティネーション ボリューム `secondary1`のスナップショット `daily.2013-01-25_0010`からファイル `file1`と `file3`を元のソース ボリューム `primary1`のアクティブ ファイル システム内の別の場所に復元し、 `file2`を `snap1`から `primary1`のアクティブ ファイル システム内の同じ場所に復元します。

+
この例では、ファイル `file1`は `/dir1/file1.new`に復元され、 `file3`は `/dir3.new/file3`に復元されます：

+
[listing]
----

cluster_dst::> snapmirror restore -source-path vserverB:secondary1 -destination-path vserverA:primary1 -source-snapshot daily.2013-01-25_0010 -file-list /dir/file1,@/dir1/file1.new,/dir2/file2,/dir3/file3,@/dir3.new/file3

[Job 3479] Job is queued: snapmirror restore for the relationship with destination vserverA:primary1
----


.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/snapmirror-restore.html["snapmirror restore"^]

