---
permalink: data-protection/snapshot-copies-work-concept.html 
sidebar: sidebar 
keywords: restore, file, snapshot copy, nfs, cifs, smb, client 
summary: NFSまたはSMBクライアント上のユーザーは、ストレージ システム管理者の介入なしに、スナップショットから直接ファイルをリストアできます。 
---
= NFSまたはSMBクライアント上のONTAPスナップショットからファイルを復元する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NFSまたはSMBクライアント上のユーザーは、ストレージ システム管理者の介入なしに、スナップショットから直接ファイルをリストアできます。

ファイル システム内のすべてのディレクトリには、 `.snapshot`という名前のサブディレクトリが含まれており、NFSおよびSMBユーザーがアクセスできます。 `.snapshot`サブディレクトリには、ボリュームのSnapshotに対応するサブディレクトリが含まれています。

....
$ ls .snapshot
daily.2017-05-14_0013/              hourly.2017-05-15_1106/
daily.2017-05-15_0012/              hourly.2017-05-15_1206/
hourly.2017-05-15_1006/             hourly.2017-05-15_1306/
....
各サブディレクトリには、スナップショットが参照するファイルが含まれています。ユーザーが誤ってファイルを削除または上書きした場合、スナップショット サブディレクトリから読み書き可能なディレクトリにファイルをコピーすることで、親の読み書き可能なディレクトリにファイルを復元できます：

....
$ ls my.txt
ls: my.txt: No such file or directory
$ ls .snapshot
daily.2017-05-14_0013/              hourly.2017-05-15_1106/
daily.2017-05-15_0012/              hourly.2017-05-15_1206/
hourly.2017-05-15_1006/             hourly.2017-05-15_1306/
$ ls .snapshot/hourly.2017-05-15_1306/my.txt
my.txt
$ cp .snapshot/hourly.2017-05-15_1306/my.txt .
$ ls my.txt
my.txt
....