---
permalink: disks-aggregates/create-flash-pool-aggregate-physical-ssds-task.html 
sidebar: sidebar 
keywords: create, flash, pool, aggregate, local tier, physical, ssds 
summary: Flash Poolローカル階層を作成するには、HDD RAIDグループで構成された既存のローカル階層でこの機能を有効にし、そのローカル階層に1つ以上のSSD RAIDグループを追加します。これにより、ローカル階層にはSSD RAIDグループ（SSDキャッシュ）とHDD RAIDグループの2つのRAIDグループ セットが作成されます。 
---
= 物理 SSD を使用して ONTAP Flash Pool ローカル層を作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Flash Poolローカル階層を作成するには、HDD RAIDグループで構成された既存のローカル階層でこの機能を有効にし、そのローカル階層に1つ以上のSSD RAIDグループを追加します。これにより、ローカル階層にはSSD RAIDグループ（SSDキャッシュ）とHDD RAIDグループの2つのRAIDグループ セットが作成されます。


NOTE: ONTAP 9.7より前のバージョンでは、System Managerは_ローカル階層_を説明するために_aggregate_という用語を使用しています。ONTAPバージョンに関係なく、ONTAP CLIでは_aggregate_という用語が使用されます。ローカル階層の詳細については、link:../disks-aggregates/index.html["ディスクとローカル階層"]を参照してください。

.タスク概要
ローカル階層にSSDキャッシュを追加してFlash Poolローカル階層を作成したあとで、SSDキャッシュを削除してローカル階層を元の構成に戻すことはできません。

デフォルトでは、SSD キャッシュの RAID レベルは HDD RAID グループの RAID レベルと同じです。最初の SSD RAID グループを追加するときに `raidtype`オプションを指定することで、このデフォルトの選択を上書きできます。

.開始する前に
* Flash Poolローカル階層に変換する、HDDで構成された有効なローカル階層を特定しておく必要があります。
* ローカル階層に関連付けられたボリュームが書き込みキャッシュに対応しているかどうかを確認し、対応していない場合は必要な手順を実行して問題を解決しておく必要があります。
* 追加するSSDを決めておく必要があります。これらのSSDはFlash Poolローカル階層の作成先となるノードが所有している必要があります。
* 追加するSSDとローカル階層内の既存のHDDの両方について、チェックサム方式を確認しておく必要があります。
* 追加するSSDの数を決め、SSD RAIDグループに最適なRAIDグループ サイズを確認しておく必要があります。
+
SSDキャッシュ内で使用するRAIDグループが少ないほど、必要なパリティ ディスク数が少なくなりますが、RAIDグループを拡張するとRAID-DPが必要になります。

* SSDキャッシュで使用するRAIDレベルを決めておく必要があります。
* システムの最大キャッシュ サイズを決めて、ローカル階層にSSDキャッシュを追加してもそのサイズを超えないことを確認しておく必要があります。
* Flash Poolローカル階層の構成要件を確認しておく必要があります。


.手順
System Manager または ONTAP CLI を使用して、Flash Pool ローカル ティアを作成できます。

[role="tabbed-block"]
====
.System Manager
--
ONTAP 9.12.1以降では、System Managerを使用して、物理SSDを使用するFlash Poolローカル階層を作成できます。

.手順
. *ストレージ > 階層*を選択し、既存のローカルHDDストレージ階層を選択します。
. image:icon_kabob.gif["メニューオプションアイコン"]を選択し、*Flash Pool Cache の追加*を選択します。
. **専用 SSD をキャッシュとして使用する** を選択します。
. ディスクのタイプと数を選択します。
. RAIDタイプを選択します。
. *保存*を選択します。
. ストレージ層を見つけて、image:icon_kabob.gif["メニューオプションアイコン"]を選択します
. *詳細*を選択します。Flash Poolが*有効*と表示されていることを確認します。


--
.CLI
--
.手順
. ローカル ティアを Flash Pool ローカル ティアになる資格があるものとしてマークします：
+
`storage aggregate modify -aggregate _aggr_name_ -hybrid-enabled true`

+
この手順が成功しない場合は、ターゲットのローカル層の書き込みキャッシュの適格性を判断します。

.  `storage aggregate add`コマンドを使用して、SSDをローカル層に追加します。
+
** SSD は ID で指定するか、 `diskcount`および `disktype`パラメータを使用して指定できます。
** HDD と SSD のチェックサム方式が同じでない場合、またはローカル層が混合チェックサム ローカル層である場合は、 `checksumstyle`パラメータを使用して、ローカル層に追加するディスクのチェックサム方式を指定する必要があります。
**  `raidtype`パラメータを使用して、SSDキャッシュに異なるRAIDタイプを指定できます。
** キャッシュ RAID グループのサイズを、使用している RAID タイプのデフォルトと異なるサイズにしたい場合は、 `-cache-raid-group-size`パラメータを使用して今すぐ変更する必要があります。




--
====
.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=storage+aggregate+add["ストレージアグリゲート追加"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-modify.html["storage aggregate modify"^]

