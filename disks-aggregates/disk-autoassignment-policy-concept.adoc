---
permalink: disks-aggregates/disk-autoassignment-policy-concept.html 
sidebar: sidebar 
keywords: disk, auto-assign, spare, policy, automatic, assignment, disk ownership 
summary: 未割り当てディスクの自動割り当てはデフォルトで有効になっています。ディスク所有権の自動割り当ては、HAペアの初期化後10分、および通常のシステム動作中は5分おきに実行されます。 
---
= ディスク所有権の自動割り当てについて
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
未割り当てディスクの自動割り当てはデフォルトで有効になっています。ディスク所有権の自動割り当ては、HAペアの初期化後10分、および通常のシステム動作中は5分おきに実行されます。

HAペアに新しいディスクを追加する場合（障害が発生したディスクを交換する場合、「low spares」というメッセージが表示された場合、または容量を追加する場合など）、デフォルトの自動割り当てポリシーによってディスクの所有権がスペアとしてノードに割り当てられます。

デフォルトの自動割り当てポリシーは、プラットフォーム固有の特性（HAペアに搭載されているシェルフのみの場合）に基づいており、次のいずれかの方法（ポリシー）を使用してディスク所有権が割り当てられます。

|===


| 割り当て方法 | ノードの割り当てに影響します | 割り当て方法にデフォルト設定されているプラットフォーム構成 


 a| 
ベイ
 a| 
偶数番号のベイはノードAに、奇数番号のベイはノードBに割り当てられます。
 a| 
1台の共有シェルフを使用するHAペア構成内のエントリレベル システム。



 a| 
シェルフ
 a| 
シェルフ内のすべてのディスクがノードAに割り当てられます。
 a| 
1つのスタックに複数のシェルフが含まれるHAペア構成、およびノードごとに1つのスタックに複数のシェルフが含まれるMetroCluster構成内の、エントリレベル システム。



 a| 
スプリット シェルフ

このポリシーは、該当するプラットフォームおよびシェルフ構成のコマンドのパラメータ `storage disk option`の「default」値に該当し `-autoassign-policy`ます。
 a| 
シェルフ左側のディスクはノードAに、右側のディスクはノードBに割り当てられます。工場からの出荷時、HAペアのシェルフには、シェルフの端から中央に向かって部分的にディスクが搭載されています。
 a| 
ほとんどのAFFプラットフォームと一部のMetroCluster構成。



 a| 
スタック
 a| 
スタック内のすべてのディスクがノードAに割り当てられます。
 a| 
エントリレベルのスタンドアロン システムおよびその他のすべての構成。



 a| 
ハーフドロワー

このポリシーは、該当するプラットフォームおよびシェルフ構成のコマンドのパラメータ `storage disk option`の「default」値に該当し `-autoassign-policy`ます。
 a| 
DS460Cドロワーの左半分（ドライブベイ0~5）のすべてのドライブがノードAに割り当てられ、ドロワーの右半分（ドライブベイ6~11）のすべてのドライブがノードBに割り当てられます。

DS460CシェルフのみのHAペアを初期化する場合、ディスク所有権の自動割り当てはサポートされません。ハーフドロワーのポリシーに従って、ルートパーティションが設定されたルート/コンテナドライブを含むドライブに所有権を手動で割り当てる必要があります。
 a| 
DS460Cシェルフのみを使用したHAペア（HAペアの初期化（ブートアップ）後）

HAペアのブート後、ディスク所有権の自動割り当てが自動的に有効になり、ハーフドロワーポリシーを使用して、残りのドライブ（ルートパーティションを含むルートドライブ/コンテナドライブを除く）と今後追加されるすべてのドライブに所有権が割り当てられます。

HAペアに他のシェルフモデルに加えてDS460Cシェルフがある場合は、ハーフドロワーポリシーは使用されません。使用されるデフォルトポリシーは、プラットフォーム固有の特性によって決まります。

|===
自動割り当ての設定と変更：

* コマンドを使用すると、現在の自動割り当て設定（オン/オフ）を表示できます `storage disk option show`。
* 自動割り当てを無効にするには、コマンドを使用し `storage disk option modify`ます。
* デフォルトの自動割り当てポリシーが環境に適していない場合は、コマンドのパラメータを `storage disk option modify`使用して、ベイ、シェルフ、またはスタックの割り当て方法を指定（変更）できます `-autoassign-policy`。
+
方法をご確認くださいlink:configure-auto-assignment-disk-ownership-task.html["ディスク所有権の自動割り当てに関する設定の変更"]。

+
[NOTE]
====
ハーフドロワーおよびスプリットシェルフのデフォルトの自動割り当てポリシーは、ベイ、シェルフ、スタックのポリシーなどのユーザが設定できないため、一意です。

====


Advanced Drive Partitioning (ADP)システムで、収容数が半分のシェルフに対して自動割り当てを機能させるには、ドライブのタイプに基づいて正しいシェルフベイにドライブを取り付ける必要があります。

* DS460Cシェルフ以外のシェルフの場合は、左端と右端に均等にドライブを取り付けます。たとえば、DS224Cシェルフのベイ0~5に6本のドライブを、ベイ18~23に6本のドライブを搭載したとします。
* DS460Cシェルフの場合は、各ドロワーの前列（ドライブベイ0、3、6、9）にドライブを取り付けます。残りのドライブについては、ドロワーの前から後ろまで列を埋めて、各ドロワーに均等に配置します。行を埋めるための十分なドライブがない場合は、ドライブがドロワーの左右に均等に配置されるように2本ずつ取り付けます。
+
各ドロワーの前列にドライブを取り付けると、適切な通気が確保され、過熱を防ぐことができます。



[NOTE]
====
収容数が半分のシェルフの正しいシェルフベイにドライブが取り付けられていない場合は、コンテナドライブに障害が発生して交換したときに、ONTAPで所有権が自動割り当てされません。この場合、新しいコンテナドライブの割り当てを手動で行う必要があります。コンテナドライブに所有権を割り当てると、必要なドライブのパーティショニングとパーティショニングの割り当てがONTAPによって自動的に処理されます。

====
自動割り当てが機能しない場合は、コマンドを使用してディスク所有権を手動で割り当てる必要があり `storage disk assign`ます。

* 自動割り当てを無効にすると、新しいディスクがノードに手動で割り当てられるまでスペアとして使用できなくなります。
* 異なる所有権が必要なスタックまたはシェルフが複数ある場合にディスクを自動割り当てするには、各スタックまたはシェルフで所有権の自動割り当てが機能するように、各スタックまたはシェルフで1つのディスクを手動で割り当てておく必要があります。
* 自動割り当てが有効になっている場合に、アクティブポリシーで指定されていないノードにドライブを手動で1本割り当てると、自動割り当てが停止し、EMSメッセージが表示されます。


方法をご確認くださいlink:manual-assign-disks-ownership-manage-task.html["パーティショニングされていないディスクのディスク所有権を手動で割り当てる"]。

方法をご確認くださいlink:manual-assign-ownership-partitioned-disks-task.html["パーティショニングされたディスクのディスク所有権を手動で割り当てる"]。
