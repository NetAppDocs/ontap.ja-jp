---
permalink: disks-aggregates/manual-assign-ownership-partitioned-disks-task.html 
sidebar: sidebar 
keywords: manual, assign, disk, ownership, partition, disks 
summary: アドバンスト ドライブ パーティショニング（ADP）システムでは、コンテナ ディスクまたはパーティションの所有権を手動で割り当てることができます。DS460Cシェルフだけが搭載されているHAペアを初期化する場合は、ルート パーティションが含まれるコンテナ ドライブの所有権を手動で割り当てる必要があります。 
---
= ONTAPパーティション ディスクの所有権を手動で割り当てる
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
アドバンスト ドライブ パーティショニング（ADP）システムでは、コンテナ ディスクまたはパーティションの所有権を手動で割り当てることができます。DS460Cシェルフだけが搭載されているHAペアを初期化する場合は、ルート パーティションが含まれるコンテナ ドライブの所有権を手動で割り当てる必要があります。

.タスク概要
* 使用するストレージ システムのタイプによって、サポートされるADPの方式（ルート / データ（RD）またはルート / データ / データ（RD2））が決まります。
+
FASストレージ システムではRDを使用し、AFFストレージ システムではRD2を使用します。

* DS460Cシェルフだけが搭載されているのでなく、初期化もしないHAペアで所有権を手動で割り当てる場合は、オプション1を使用してルート / データ（RD）パーティショニングによりディスクを手動で割り当てるか、オプション2を使用してルート / データ / データ（RD2）パーティショニングによりディスクを手動で割り当てます。
* DS460Cシェルフだけが搭載されているHAペアを初期化する場合は、オプション3を使用して、ルート パーティションが含まれるコンテナ ドライブに所有権を手動で割り当てます。


.オプション 1：ルートデータ（RD）パーティションを使用してディスクを手動で割り当てる
[%collapsible]
====
ルート / データ パーティショニングでは、HAペアがまとめて所有する3つのエンティティ（コンテナ ディスクと2つのパーティション）があります。

.タスク概要
* コンテナ ディスクと2つのパーティションは、HAペア内のいずれかのノードが所有していれば、必ずしもHAペア内の同じノードが所有する必要はありません。ただし、ローカル階層でパーティションを使用する場合は、そのパーティションもローカル階層を所有するノードと同じノードが所有する必要があります。
* 収容数が半分のシェルフ内のコンテナ ディスクで障害が発生してディスクを交換した場合、この場合、ONTAPでは所有権が常に自動割り当てされるとは限らないため、ディスク所有権の手動割り当てが必要になることがあります。
* コンテナ ディスクが割り当てられると、ONTAPのソフトウェアは必要なパーティション分割とパーティション割り当てを自動的に処理します。


.手順
. CLIを使用して、パーティショニングされたディスクの現在の所有権を表示します。
+
`storage disk show -disk _disk_name_ -partition-ownership`

. CLIの権限レベルをadvancedに設定します。
+
`set -privilege advanced`

. 所有権を割り当てるエンティティに応じて適切なコマンドを入力します。
+
いずれかの所有権エンティティがすでに所有されている場合は、 `-force` オプションを含める必要があります。

+
[cols="25,75"]
|===


| ...の所有権を割り当てる場合は、 | 使用するコマンド 


 a| 
コンテナ ディスク
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_`



 a| 
データ パーティション
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_ -data true`



 a| 
ルート パーティション
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_ -root true`

|===


====
.オプション2：ルートデータデータ（RD2）パーティションを使用してディスクを手動で割り当てる
[%collapsible]
====
ルート / データ / データ パーティショニングでは、HAペアがまとめて所有する4つのエンティティ（コンテナ ディスクと3つのパーティション）があります。ルート / データ / データ パーティショニングは、ルート パーティションとして小さなパーティションを1つ作成し、データ用に同じサイズの大きなパーティションを2つ作成します。

.タスク概要
*  `disk assign`コマンドでルート・データ・データパーティションディスクの適切なパーティションを割り当てるには、パラメータを使用する必要があります。これらのパラメータは、ストレージプールの一部であるディスクでは使用できません。デフォルト値は `false`です。
+
**  `-data1 true`パラメータは、root-data1-data2パーティションディスクの `data1`パーティションを割り当てます。
**  `-data2 true`パラメータは、root-data1-data2パーティションディスクの `data2`パーティションを割り当てます。


* 収容数が半分のシェルフ内のコンテナ ディスクで障害が発生してディスクを交換した場合、この場合、ONTAPでは所有権が常に自動割り当てされるとは限らないため、ディスク所有権の手動割り当てが必要になることがあります。
* コンテナ ディスクが割り当てられると、ONTAPのソフトウェアは必要なパーティション分割とパーティション割り当てを自動的に処理します。


.手順
. CLIを使用して、パーティショニングされたディスクの現在の所有権を表示します。
+
`storage disk show -disk _disk_name_ -partition-ownership`

. CLIの権限レベルをadvancedに設定します。
+
`set -privilege advanced`

. 所有権を割り当てるエンティティに応じて適切なコマンドを入力します。
+
いずれかの所有権エンティティがすでに所有されている場合は、 `-force` オプションを含める必要があります。

+
[cols="25,75"]
|===


| ...の所有権を割り当てる場合は、 | 使用するコマンド 


 a| 
コンテナ ディスク
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_`



 a| 
Data1パーティション
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_ -data1 true`



 a| 
Data2パーティション
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_ -data2 true`



 a| 
ルート パーティション
 a| 
`storage disk assign -disk _disk_name_ -owner _owner_name_ -root true`

|===


====
.オプション3：ルート パーティションを持つDS460Cコンテナ ドライブを手動で割り当てる
[%collapsible]
====
DS460Cシェルフだけが搭載されているHAペアを初期化する場合は、ハーフドロワーのポリシーに従って、ルート パーティションが含まれるコンテナ ドライブに所有権を手動で割り当てる必要があります。

.タスク概要
* DS460Cシェルフのみで構成されるHAペアを初期化する場合、ADPブートメニューのオプション9aおよび9bはドライブ所有権の自動割り当てをサポートしません。ハーフドロワーポリシーに従って、ルートパーティションを持つコンテナドライブを手動で割り当てる必要があります。
+
HA ペアの初期化（起動）後、ディスク所有権の自動割り当てが自動的に有効になり、ハーフドロワー ポリシーを使用して、残りのドライブ（ルート パーティションを持つコンテナ ドライブ以外）と、障害が発生したドライブの交換、"スペア不足" メッセージへの対応、容量の追加など、将来追加されるドライブに所有権が割り当てられます。

* link:disk-autoassignment-policy-concept.html["ハーフドロワーポリシーについて"]。


.手順
. DS460Cシェルフがフル搭載されていない場合は、次の手順を実行します。それ以外の場合は、さらに次の手順に進みます。
+
.. まず、各ドロワーの前列（ドライブ ベイ0、3、6、9）にドライブを取り付けます。
+
ドライブを各ドロワーの前列に取り付けることで、適切な通気が確保され、過熱を防ぐことができます。

.. 残りのドライブについては、各ドロワーに均等に配置します。
+
引き出しの列は前方から後方へと順に詰めていきます。列を埋めるのに十分なドライブがない場合は、引き出しの左右にドライブが均等に収まるように、ドライブを2台ずつ取り付けます。

+
次の図は、DS460Cドロワー内のドライブ ベイの番号と場所を表しています。

+
image:dwg_trafford_drawer_with_hdds_callouts.gif["この図は、DS460Cドロワー内のドライブ ベイの番号と位置を示しています。"]



. ノード管理LIFまたはクラスタ管理LIFを使用してclustershellにログインします。
. 次の手順を実行して、ドロワーごとにハーフドロワーのポリシーに従って、ルート パーティションが含まれるコンテナ ドライブを手動で割り当てます。
+
ハーフドロワー ポリシーでは、ドロワーのドライブの左半分（ベイ 0 ～ 5）をノード A に割り当て、ドロワーのドライブの右半分（ベイ 6 ～ 11）をノード B に割り当てます。

+
.. 所有されていないディスクをすべて表示：
`storage disk show -container-type unassigned`
.. ルート パーティションを持つコンテナ ドライブを割り当てます：
`storage disk assign -disk disk_name -owner owner_name`
+
ワイルドカード文字を使用すると、一度に複数のドライブを割り当てることができます。





====
.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-disk-assign.html["storage disk assign"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-disk-show.html["storage disk show"^]

