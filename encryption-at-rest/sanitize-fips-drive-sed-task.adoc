---
permalink: encryption-at-rest/sanitize-fips-drive-sed-task.html 
sidebar: sidebar 
keywords: sanitize, fips, drive, sed, inaccessible, psid, physical secure ID, nrd plus, encrypt 
summary: 'FIPS ドライブまたは SED 上のデータを永続的にアクセス不能にし、そのドライブを新しいデータ用に使用する場合は、 `storage encryption disk sanitize` コマンドを使用してドライブをサニタイズできます。' 
---
= ONTAPでFIPSドライブまたはSEDを完全消去する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FIPS ドライブまたは SED 上のデータを永続的にアクセス不能にし、そのドライブを新しいデータ用に使用する場合は、 `storage encryption disk sanitize` コマンドを使用してドライブをサニタイズできます。

.タスク概要
自己暗号化ドライブを完全消去すると、ディスク暗号化キーが新しいランダムな値に変更され、電源オン ロックの状態がfalseにリセットされ、キーIDがデフォルト値のManufacturer Secure ID（SAS;メーカーのセキュアID）0x0（SASドライブ）またはnull（NVMeドライブ）に設定されます。これにより、ディスクのデータにアクセスできない状態になり、データを取得できなくなります。完全消去されたディスクは、初期化されていないスペア ディスクとして再利用できます。

.開始する前に
このタスクを実行するには、クラスタ管理者である必要があります。

.手順
. 保持しておく必要があるデータを別のディスクのアグリゲートにすべて移行します。
. 完全消去するFIPSドライブまたはSEDのアグリゲートを削除します。
+
`storage aggregate delete -aggregate _aggregate_name_`

+
[listing]
----
cluster1::> storage aggregate delete -aggregate aggr1
----
+
 `storage aggregate delete`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-delete.html["ONTAPコマンド リファレンス"^]をご覧ください。

. 完全消去するFIPSドライブまたはSEDのディスクIDを確認します。
+
`storage encryption disk show -fields data-key-id,fips-key-id,owner`

+
 `storage encryption disk show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/storage-encryption-disk-show.html["ONTAPコマンド リファレンス"^]を参照してください。

+
[listing]
----
cluster1::> storage encryption disk show
Disk    Mode Data Key ID
-----   ---- ----------------------------------------------------------------
0.0.0   data <id_value>
0.0.1   data <id_value>
1.10.2  data <id_value>
[...]
----
. FIPSドライブがFIPS準拠モードの場合は、ノードのFIPS認証キーIDをデフォルトのMSIDである0x0に戻します。
+
`storage encryption disk modify -disk _disk_id_ -fips-key-id 0x0`

+
 `security key-manager query`コマンドを使用してキー ID を表示できます。

+
[listing]
----
cluster1::> storage encryption disk modify -disk 1.10.2 -fips-key-id 0x0

Info: Starting modify on 1 disk.
      View the status of the operation by using the
      storage encryption disk show-status command.
----
. ドライブを完全消去します。
+
`storage encryption disk sanitize -disk _disk_id_`

+
このコマンドは、ホットスペアディスクまたは破損ディスクのみをサニタイズするために使用できます。ディスクの種類に関係なくすべてのディスクをサニタイズするには、 `-force-all-state`オプションを使用してください。 `storage encryption disk sanitize`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/storage-encryption-disk-sanitize.html["ONTAPコマンド リファレンス"^]を参照してください。

+

NOTE: 続行する前に、ONTAPから確認フレーズの入力を求められます。画面に表示されたフレーズを正確に入力します。

+
[listing]
----
cluster1::> storage encryption disk sanitize -disk 1.10.2

Warning: This operation will cryptographically sanitize 1 spare or broken self-encrypting disk on 1 node.
         To continue, enter sanitize disk: sanitize disk

Info: Starting sanitize on 1 disk.
      View the status of the operation using the
      storage encryption disk show-status command.
----
. サニタイズされたディスクをアンフェイルします：
`storage disk unfail -spare true -disk _disk_id_`
. ディスクに所有者がいるかどうかを確認します：
`storage disk show -disk _disk_id_`ディスクに所有者がいない場合は、所有者を割り当てます。
`storage disk assign -owner node -disk _disk_id_`
. 完全消去するディスクを所有するノードのノードシェルに切り替えます。
+
`system node run -node _node_name_`

+
 `disk sanitize release`コマンドを実行します。

. ノードシェルを終了します。ディスクの障害を再度解除します：
`storage disk unfail -spare true -disk _disk_id_`
. ディスクがスペアになり、アグリゲート内で再利用できる状態になっていることを確認します：
`storage disk show -disk _disk_id_`


.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-disk-assign.html["storage disk assign"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-disk-show.html["storage disk show"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-disk-unfail.html["ストレージディスクのアンフェイル"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-encryption-disk-modify.html["ストレージ暗号化ディスクの変更"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-encryption-disk-sanitize.html["ストレージ暗号化ディスク完全消去"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-encryption-disk-show-status.html["storage encryption disk show-status"^]

