---
permalink: encryption-at-rest/secure-purge-data-encrypted-volume-concept.html 
sidebar: sidebar 
keywords: secure, purge, scrub, data, encrypted, volume, nve, netapp 
summary: 'ONTAP 9.4以降では、セキュアパージを使用して、NVE対応ボリューム上のデータを無停止でスクラブできます。暗号化されたボリューム上のデータをスクラブすることで、物理メディアからのデータの復元を不可能にすることができます。例えば、 `spillage,`ブロックの上書き時にデータの痕跡が残っている場合や、退去するテナントのデータを安全に削除する場合などに有効です。' 
---
= 暗号化されたONTAPボリュームからデータを安全に消去する方法について説明します。
:allow-uri-read: 


[role="lead"]
ONTAP 9.4以降では、セキュアパージを使用して、NVE対応ボリューム上のデータを無停止でスクラブできます。暗号化されたボリューム上のデータをスクラブすることで、例えばブロックの上書き時にデータの痕跡が残ってしまう「スピレッジ」が発生した場合や、退去するテナントのデータを安全に削除する場合など、物理メディアからのデータの復元を不可能にすることができます。

セキュア パージの対象となるのは、NVE対応ボリューム上で以前に削除されたファイルだけです。暗号化されていないボリュームはスクラビングできません。キーの提供には、オンボード キー マネージャではなく、KMIPサーバを使用する必要があります。



== セキュア パージを使用する場合の考慮事項

* NetApp Aggregate Encryption（NAE）が有効になっているアグリゲートに作成されたボリュームでは、セキュア パージがサポートされません。
* セキュア パージの対象となるのは、NVE対応ボリューム上で以前に削除されたファイルだけです。
* 暗号化されていないボリュームはスクラビングできません。
* キーの提供には、オンボード キー マネージャではなく、KMIPサーバを使用する必要があります。


セキュア パージの動作は、ONTAPのバージョンによって異なります。

[role="tabbed-block"]
====
.ONTAP 9.8以降
--
* セキュア パージはMetroClusterとFlexGroupでサポートされます。
* パージするボリュームがSnapMirror関係のソースである場合、セキュア パージを実行するためにSnapMirror関係を解除する必要はありません。
* 再暗号化の方法は、SnapMirrorデータ保護（DP）を使用するボリュームと使用しないボリューム、またはSnapMirror拡張データ保護を使用するボリュームとで異なります。
+
** SnapMirrorデータ保護（DP）モードを使用するボリュームでは、デフォルトでボリューム移動方式を使用してデータが再暗号化されます。
** SnapMirrorデータ保護を使用しないボリュームまたはSnapMirror拡張データ保護（XDP）モードを使用するボリュームでは、インプレース再暗号化方式がデフォルトで使用されます。
** これらのデフォルトは `secure purge re-encryption-method [volume-move|in-place-rekey]`コマンドを使用して変更できます。


* デフォルトでは、FlexVolボリューム内のすべてのスナップショットは、セキュアパージ操作中に自動的に削除されます。デフォルトでは、FlexGroupボリューム内のスナップショットおよびSnapMirrorデータ保護を使用しているボリューム内のスナップショットは、セキュアパージ操作中に自動的に削除されません。これらのデフォルトは、 `secure purge delete-all-snapshots [true|false]`コマンドを使用して変更できます。


--
.ONTAP 9.7以前
--
* 次の機能ではセキュア パージがサポートされません。
+
** FlexClone
** SnapVault
** FabricPool


* パージするボリュームがSnapMirror関係のソースである場合、ボリュームをパージする前にSnapMirror関係を解除する必要があります。
+
ボリューム内に使用中のスナップショットがある場合は、ボリュームをパージする前にスナップショットを解放する必要があります。たとえば、FlexCloneボリュームを親ボリュームから分割する必要がある場合などです。

* セキュア パージ機能を呼び出すと、ボリューム移動がトリガーされ、パージされない残りのデータが新しいキーで再度暗号化されます。
+
移動されたボリュームは現在のアグリゲートに残ります。パージされたデータをストレージ メディアからリカバリできないように、古いキーは自動的に破棄されます。



--
====