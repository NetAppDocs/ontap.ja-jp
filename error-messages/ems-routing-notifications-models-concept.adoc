---
permalink: error-messages/ems-routing-notifications-models-concept.html 
sidebar: sidebar 
keywords: configure, map, important, ems, events, notifications, filters 
summary: ONTAP 9.0より前のバージョンでは、EMSイベントはイベント名パターンマッチングに基づいてのみイベントの宛先にマッピングできました。このモデルに関連付けられたONTAPコマンドは引き続き使用できますが、ONTAP 9.0以降は廃止されています。 
---
= ONTAP EMSイベント マッピング モデルについて学ぶ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.0より前は、EMSイベントはイベント名パターンマッチングに基づいてのみイベントの宛先にマッピングできました。このモデルを使用するONTAPコマンドセット（(`event destination`、 `event route`）は、最新バージョンのONTAPでも引き続き使用できますが、ONTAP 9.0以降は廃止されています。

ONTAP 9.0 以降、ONTAP EMS イベント宛先マッピングのベスト プラクティスは、 `event filter`、 `event notification`、および `event notification destination`コマンド セットを使用して複数のフィールドでパターン マッチングを実行する、よりスケーラブルなイベント フィルタ モデルを使用することです。

EMS マッピングが非推奨のコマンドを使用して構成されている場合は、 `event filter`、 `event notification`、および `event notification destination`コマンド セットを使用するようにマッピングを更新する必要があります。 `event`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=event["ONTAPコマンド リファレンス"^]を参照してください。

イベントの送信先には次の2種類があります。

. *システム生成の宛先*：システム生成のイベント宛先は 5 つあります（デフォルトで作成されます）
+
** `allevents`
** `asup`
** `criticals`
** `pager`
** `traphost`
+
システム生成の宛先の一部は特別な目的に使用されます。例えば、asup 宛先は callhome.* イベントを ONTAP の AutoSupport モジュールにルーティングして、AutoSupport メッセージを生成します。



. *ユーザー作成の宛先*： `event destination create`コマンドを使用して手動で作成されます。
+
[listing]
----
cluster-1::event*> destination show
                                                                 Hide
Name             Mail Dest.        SNMP Dest.         Syslog Dest.       Params
---------------- ----------------- ------------------ ------------------ ------
allevents        -                 -                  -                  false
asup             -                 -                  -                  false
criticals        -                 -                  -                  false
pager            -                 -                  -                  false
traphost         -                 -                  -                  false
5 entries were displayed.
+
cluster-1::event*> destination create -name test -mail test@xyz.com
This command is deprecated. Use the "event filter", "event notification destination" and "event notification" commands, instead.
+
cluster-1::event*> destination show
+                                                                     Hide
Name             Mail Dest.        SNMP Dest.         Syslog Dest.       Params
---------------- ----------------- ------------------ ------------------ ------
allevents        -                 -                  -                  false
asup             -                 -                  -                  false
criticals        -                 -                  -                  false
pager            -                 -                  -                  false
test             test@xyz.com      -                  -                  false
traphost         -                 -                  -                  false
6 entries were displayed.
----


非推奨のモデルでは、EMS イベントは `event route add-destinations`コマンドを使用して個別に宛先にマッピングされます。

[listing]
----
cluster-1::event*> route add-destinations -message-name raid.aggr.* -destinations test
This command is deprecated. Use the "event filter", "event notification destination" and "event notification" commands, instead.
4 entries were acted on.

cluster-1::event*> route show -message-name raid.aggr.*
                                                               Freq    Time
Message                          Severity       Destinations   Threshd Threshd
-------------------------------- -------------- -------------- ------- -------
raid.aggr.autoGrow.abort         NOTICE         test           0       0
raid.aggr.autoGrow.success       NOTICE         test           0       0
raid.aggr.lock.conflict          INFORMATIONAL  test           0       0
raid.aggr.log.CP.count           DEBUG          test           0       0
4 entries were displayed.
----
拡張性に優れた新しいEMSイベント通知メカニズムでは、イベント フィルタとイベント通知送信先を使用します。新しいイベント通知メカニズムの詳細については、次の技術情報アーティクルを参照してください。

* link:https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/ONTAP_OS/FAQ%3A_Overview_of_Event_Management_System_for_ONTAP_9["ONTAP 9のイベント管理システムの概要"^]


image:../media/ems-event-diag.jpg["イベントモデルの図"]
