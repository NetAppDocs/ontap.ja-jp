---
permalink: fabricpool/create-volume-task.html 
sidebar: sidebar 
keywords: aggreate, local tier, creating, volume, fabricpool, tiering, policy, policies, create, snap shot, snapshot, aggregate, flexgroup, cloud retrieval 
summary: FabricPoolのボリュームを作成する際に、階層化ポリシーを指定できます。階層化ポリシーを指定しない場合、作成されたボリュームはデフォルトのスナップショットのみの階層化ポリシーを使用します。スナップショットのみの階層化ポリシーまたは自動階層化ポリシーが設定されているボリュームの場合は、階層化の最小冷却期間も指定できます。 
---
= FabricPool対応ONTAPローカル層にボリュームを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FabricPoolが有効なローカル層に直接新しいボリュームを作成するか、別のローカル層からFabricPoolが有効なローカル層に既存のボリュームを移動することによって、FabricPoolにボリュームを追加できます。


NOTE: ONTAP 9.7より前のバージョンでは、System Managerは_ローカル階層_を説明するために_aggregate_という用語を使用しています。ONTAPバージョンに関係なく、ONTAP CLIでは_aggregate_という用語が使用されます。ローカル階層の詳細については、link:../disks-aggregates/index.html["ディスクとローカル階層"]を参照してください。

FabricPoolのボリュームを作成する際に、階層化ポリシーを指定できます。階層化ポリシーを指定しない場合、作成されたボリュームはデフォルトの `snapshot-only`階層化ポリシーを使用します。 `snapshot-only`または `auto`の階層化ポリシーが設定されているボリュームの場合は、階層化の最小冷却期間も指定できます。

.開始する前に
*  `auto`階層化ポリシーを使用するようにボリュームを設定したり、階層化の最小冷却期間を指定したりするには ONTAP 9.4 以降が必要です。
* FlexGroupボリュームを使用するには、ONTAP 9.5以降が必要です。
*  `all`階層化ポリシーを使用するようにボリュームを設定するには、ONTAP 9.6 以降が必要です。
* ボリュームで `-cloud-retrieval-policy`パラメータを使用するように設定するには、ONTAP 9.8以降が必要です。


.手順
.  `volume create`コマンドを使用してFabricPool用の新しいボリュームを作成します。
+
**  `-tiering-policy`オプション パラメータを使用すると、ボリュームの階層化ポリシーを指定できます。
+
次のいずれかの階層化ポリシーを指定できます。

+
*** `snapshot-only`（デフォルト）
*** `auto`
*** `all`
*** `backup`（非推奨）
*** `none`
+
link:tiering-policies-concept.html#types-of-fabricpool-tiering-policies["FabricPool階層化ポリシーの種類"]



**  `-cloud-retrieval-policy`オプション パラメータを使用すると、advanced権限レベルを持つクラスタ管理者は、階層化ポリシーによって制御されるデフォルトのクラウド移行または取得動作をオーバーライドできます。
+
次のいずれかのクラウド読み出しポリシーを指定できます。

+
*** `default`
+
階層化ポリシーによって取得対象となるデータが決定されるため、 `default` cloud-retrieval-policyによるクラウドデータの取得には変更はありません。つまり、動作はONTAP 9.8より前のリリースと同じです。

+
**** 階層化ポリシーが `none`または `snapshot-only`の場合、「`default`」は、クライアント主導のデータ読み取りがクラウド層からパフォーマンス層に引き出されることを意味します。
**** 階層化ポリシーが `auto`の場合、クライアント主導のランダム読み取りは実行されますが、シーケンシャル読み取りは実行されません。
**** 階層化ポリシーが `all`の場合、クライアント主導のデータはクラウド階層から取得されません。


*** `on-read`
+
クライアントによって読み取られたデータはすべてクラウド階層から高パフォーマンス階層に読み出されます。

*** `never`
+
クライアント主導のデータはクラウド階層からパフォーマンス階層にプルされません

*** `promote`
+
**** 階層化ポリシー `none`では、すべてのクラウド データがクラウド階層からパフォーマンス階層に引き出されます。
**** 階層化ポリシー `snapshot-only`の場合、すべてのアクティブ ファイル システム データがクラウド階層からパフォーマンス階層にプルされます。




**  `-tiering-minimum-cooling-days`高度な権限レベルのオプション パラメータを使用すると、 `snapshot-only`または `auto`階層化ポリシーを使用するボリュームの階層化最小冷却期間を指定できます。
+
ONTAP 9.8以降では、階層化の最小クーリング日数に2～183の値を指定できます。9.8より前のバージョンのONTAPを使用している場合、指定できる値は2～63です。





.FabricPool用のボリュームの作成例
以下の例では、「`myFabricPool`」FabricPoolが有効になっているローカル階層に「`myvol1`」というボリュームを作成します。階層化ポリシーは `auto`に設定され、階層化の最小冷却期間は45日に設定されています。

[listing]
----
cluster1::*> volume create -vserver myVS -aggregate myFabricPool
-volume myvol1 -tiering-policy auto -tiering-minimum-cooling-days 45
----
.関連情報
link:../flexgroup/index.html["FlexGroupボリューム管理"]
