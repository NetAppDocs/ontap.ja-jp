---
permalink: fabricpool/determine-data-inactive-reporting-task.html 
sidebar: sidebar 
keywords: determining, how, much, data, volume, inactive, using, data reporting, fabricpool 
summary: ボリューム内のアクセス頻度の低いデータの量を確認することで、ストレージ階層を効率よく使用することができます。Inactive Data Reportingの情報を参考に、どのアグリゲートをFabricPoolに使用するか、FabricPool内またはFabricPool外にボリュームを移動するかどうか、またボリュームの階層化ポリシーを変更するかどうかを決定することができます。 
---
= 非アクティブ データ レポートを使用して非アクティブな ONTAP データを分析します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ボリューム内のアクセス頻度の低いデータの量を確認することで、ストレージ階層を効率よく使用することができます。Inactive Data Reportingの情報を参考に、どのアグリゲートをFabricPoolに使用するか、FabricPool内またはFabricPool外にボリュームを移動するかどうか、またボリュームの階層化ポリシーを変更するかどうかを決定することができます。

.開始する前に
Inactive Data Reporting機能を使用するには、ONTAP 9.4以降が必要です。

.タスク概要
* Inactive Data Reportingは、一部のアグリゲートではサポートされません。
+
次のようなFabricPoolを有効にできない状況では、Inactive Data Reportingを有効にできません。

+
** ルート アグリゲート
** 9.7より前のONTAPバージョンを実行しているMetroClusterアグリゲート
** Flash Pool（ハイブリッド アグリゲートまたはSnapLockアグリゲート）


* 適応圧縮が有効になったボリュームがあるアグリゲートに対しては、Inactive Data Reportingがデフォルトで有効になります。
* ONTAP 9.6では、すべてのSSDアグリゲートに対してInactive Data Reportingがデフォルトで有効になります。
* ONTAP 9.4およびONTAP 9.5では、FabricPoolアグリゲートに対してInactive Data Reportingがデフォルトで有効になります。
* ONTAP 9.6以降では、ONTAP CLIを使用して、HDDアグリゲートを含むFabricPool以外のアグリゲートに対してInactive Data Reportingを有効にできます。




== 手順

アクセス頻度の低いデータの量は、ONTAP System ManagerまたはONTAP CLIを使用して確認できます。

[role="tabbed-block"]
====
.System Manager
--
. 次のいずれかのオプションを選択します。
+
** 既存の HDD アグリゲートがある場合は、*ストレージ > 階層* に移動し、非アクティブ データのレポートを有効にするアグリゲートの image:icon_kabob.gif["メニューオプションアイコン"] をクリックします。
** クラウド階層が構成されていない場合は、*ダッシュボード*に移動し、*容量*の下にある*非アクティブ データ レポートを有効にする*リンクをクリックします。




--
.CLI
--
.CLIでInactive Data Reportingを有効にする手順：
. FabricPoolで使用されていないアグリゲートの非アクティブ データのレポートを表示する場合は、 `-is-inactive-data-reporting-enabled` `true`パラメータを指定した `storage aggregate modify`コマンドを使用して、アグリゲートの非アクティブ データのレポートを有効にします。
+
[listing]
----
cluster1::> storage aggregate modify -aggregate aggr1 -is-inactive-data-reporting-enabled true
----
+
FabricPoolに使用されていないアグリゲートでは、Inactive Data Reporting機能を明示的に有効にする必要があります。

+
FabricPool対応アグリゲートでは、非アクティブデータレポート機能を有効にすることはできず、また有効にする必要もありません。アグリゲートには既に非アクティブデータレポート機能が備わっているためです。 `-is-inactive-data-reporting-enabled`パラメータは、FabricPool対応アグリゲートでは機能しません。

+
 `storage aggregate show`コマンドの `-fields is-inactive-data-reporting-enabled`パラメータは、アグリゲートで非アクティブ データのレポートが有効になっているかどうかを示します。

. ボリューム上で非アクティブなデータの量を表示するには、 `volume show`コマンドに `-fields performance-tier-inactive-user-data,performance-tier-inactive-user-data-percent`パラメータを指定して使用します。
+
[listing]
----
cluster1::> volume show -fields performance-tier-inactive-user-data,performance-tier-inactive-user-data-percent

vserver volume performance-tier-inactive-user-data performance-tier-inactive-user-data-percent
------- ------ ----------------------------------- -------------------------------------------
vsim1   vol0   0B                                  0%
vs1     vs1rv1 0B                                  0%
vs1     vv1    10.34MB                             0%
vs1     vv2    10.38MB                             0%
4 entries were displayed.
----
+
**  `performance-tier-inactive-user-data`フィールドには、アグリゲートに格納されている非アクティブなユーザー データの量が表示されます。
**  `performance-tier-inactive-user-data-percent`フィールドには、アクティブ ファイル システムとスナップショット全体で非アクティブなデータの割合が表示されます。
** FabricPoolに使用されないアグリゲートの場合、非アクティブ データのレポートでは階層化ポリシーを使用して、コールドとしてレポートするデータの量を決定します。
+
***  `none`階層化ポリシーの場合は、31日が使用されます。
***  `snapshot-only`および `auto`の場合、非アクティブ データのレポートでは `tiering-minimum-cooling-days`が使用されます。
***  `ALL`ポリシーの場合、非アクティブ データ レポートでは、データが 1 日以内に階層化されることを前提としています。
+
期間に達するまで、出力には非アクティブなデータの量として値ではなく「`-`」が表示されます。



** FabricPoolの一部であるボリュームでは、ONTAPが非アクティブとして報告する内容は、ボリュームに設定されている階層化ポリシーによって異なります。
+
***  `none`階層化ポリシーの場合、ONTAPは少なくとも31日間非アクティブになっているボリューム全体の量を報告します。 `-tiering-minimum-cooling-days`パラメータを `none`階層化ポリシーで使用することはできません。
***  `ALL`、 `snapshot-only`、および `auto`階層化ポリシーでは、非アクティブ データのレポートはサポートされません。






--
====
.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-modify.html["storage aggregate modify"^]

