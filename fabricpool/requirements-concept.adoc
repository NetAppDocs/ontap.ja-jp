---
permalink: fabricpool/requirements-concept.html 
sidebar: sidebar 
keywords: considerations, requirements, using, fabricpool 
summary: FabricPool構成を最適化できるように、FabricPoolの使用に関するいくつかの考慮事項と要件を理解しておく必要があります。 
---
= ONTAP FabricPool の使用要件
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FabricPool構成を最適化できるように、FabricPoolの使用に関するいくつかの考慮事項と要件を理解しておく必要があります。



== 一般的な考慮事項と要件



=== ONTAP 9.4

* FabricPoolの次の機能を使用するには、ONTAP 9.4以降のリリースが必要です。
+
** その `auto` link:tiering-policies-concept.html#types-of-fabricpool-tiering-policies["階層化ポリシー"]
** 階層化の最小クーリング期間の指定
** 非アクティブ データ レポート（IDR）
** FabricPoolのクラウド階層としてのMicrosoft Azure Blob Storageの使用
** ONTAP SelectでのFabricPoolの使用






=== ONTAP 9.5

* FabricPoolの次の機能を使用するには、ONTAP 9.5以降のリリースが必要です。
+
** 階層化のスペース不足しきい値の指定
** FabricPoolのクラウド階層としてのIBM Cloud Object Storageの使用
** クラウド階層のNetApp Volume Encryption（NVE）（デフォルトで有効）






=== ONTAP 9.6

* FabricPoolの次の機能を使用するには、ONTAP 9.6以降のリリースが必要です。
+
**  `all`階層化ポリシー
** HDDアグリゲートについてのInactive Data Reporting（手動で有効化）
** SSDアグリゲートについてのInactive Data Reporting（ONTAP 9.6にアップグレードするとアグリゲートの作成時に自動で有効化。ただし、CPUが4つ未満またはRAMが6GB未満のローエンド システムや、WAFLバッファ キャッシュ サイズが3GB未満の場合は除く）
+
ONTAPはシステム負荷を監視しており、負荷が高い状態が4分間継続するとIDRが無効化され、自動的には有効化されません。IDRは手動で再度有効化できますが、手動で有効化したIDRは自動的には無効化されません。

** FabricPoolのクラウド階層としてのAlibaba Cloud Object Storageの使用
** FabricPoolのクラウド階層としてのGoogle Cloud Platformの使用
** クラウド階層のデータ コピーなしのボリューム移動






=== ONTAP 9.7

* FabricPoolの次の機能を使用するには、ONTAP 9.7以降のリリースが必要です。
+
** 非透過型HTTP / HTTPSプロキシ：ホワイトリストに登録されたアクセス ポイントにのみアクセスを提供、監査およびレポート機能を提供
** FabricPoolミラーリング：コールド データを2つのオブジェクト ストアに同時に階層化
** MetroCluster構成のFabricPoolミラー
** NDMPダンプおよびリストア：FabricPoolに接続されたアグリゲートでデフォルトで有効
+
[NOTE]
====
バックアップ アプリケーションでNDMP以外のプロトコル（NFSやSMBなど）を使用すると、高パフォーマンス階層にバックアップされているすべてのデータがホット データになるため、該当するデータのクラウド階層への階層化に影響が出る可能性があります。NDMP以外で読み取りを行うと、クラウド階層から高パフォーマンス階層にデータが戻される可能性があります。

====
+
https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/ONTAP_OS/NDMP_Backup_and_Restore_supported_for_FabricPool%3F["FabricPoolでのNDMPバックアップおよびリストアのサポート"]







=== ONTAP 9.8

* FabricPoolの次の機能を使用するには、ONTAP 9.8以降が必要です。
+
** クラウド取得
** FabricPoolとSnapLock Enterprise。FabricPoolとSnapLock Enterpriseには、Feature Product Variance Request（FPVR）が必要です。FPVRを作成するには、営業チームにお問い合わせください。
** 最小クーリング期間の183日への引き上げ
** ユーザ独自のタグを使用したオブジェクトのタグ付け
** HDD FabricPool アグリゲート
+
HDD FabricPoolは、CPUコアを6基以上搭載したシステムのSAS、FSAS、BSAS、MSATAディスクでサポートされます。

+
 https://hwu.netapp.com/Home/Index["Hardware Universe"^]でサポートされている最新のモデルを確認してください。







=== ONTAP 9.10.1

* FabricPoolの次の機能を使用するには、ONTAP 9.10.1以降が必要です。
+
** PUT スロットル
** 温度感受性ストレージ効率（TSSE）。






=== ONTAP 9.12.1

* FabricPoolの次の機能を使用するには、ONTAP 9.12.1以降が必要です。
+
** SVMマイグレート
** FabricPool、FlexGroup、および SVM-DR の連携をサポートします。（9.12.1 より前は、これらの機能のうち 2 つが連携して動作していましたが、3 つすべてが連携して動作することはありませんでした。）






=== ONTAP 9.14.1

* FabricPoolの次の機能を使用するには、ONTAP 9.14.1以降が必要です。
+
** クラウド書き込み
** 積極的な先読み






== ローカル階層（アグリゲート）

FabricPoolでは、次のアグリゲート タイプがサポートされます。

* AFFシステムでは、FabricPoolにSSDアグリゲートのみを使用できます。
* FASシステムでは、FabricPoolにSSDアグリゲートまたはHDDアグリゲートのいずれかを使用できます。
* Cloud Volumes ONTAPとONTAP Selectでは、FabricPoolにSSDアグリゲートまたはHDDアグリゲートのいずれかを使用できます。SSDアグリゲートを使用することを推奨します。


[NOTE]
====
SSDとHDDの両方を含むFlash Poolアグリゲートはサポートされません。

====


== クラウド階層

FabricPoolでは、次のオブジェクト ストアをクラウド階層として使用できます。

* Alibaba Cloud Object Storage Service（標準、低頻度アクセス）
* Amazon S3（Standard、Standard-IA、One Zone-IA、Intelligent-Tiering、Glacier Instant Retrieval）
* Amazon Commercial Cloud Services（C2S）
* Google Cloud Storage（Multi-Regional、Regional、Nearline、Coldline、Archive）
* IBM Cloud Object Storage（Standard、Vault、Cold Vault、Flex）
* Microsoft Azure Blob Storage（ホットおよびクール）
* NetApp ONTAP S3（ONTAP 9.8以降）
* NetApp StorageGRID（StorageGRID 10.3 以降）


[NOTE]
====
Glacier Flexible RetrievalおよびGlacier Deep Archiveはサポートされません。

====
* 使用する予定のオブジェクト ストア「`bucket`」（コンテナ）はすでにセットアップされており、少なくとも 10 GB のストレージ スペースがあり、名前が変更されていない必要があります。
* クラウド階層をローカル階層に接続した後で、それを切り離すことはできませんが、link:create-mirror-task.html["FabricPool ミラー"]を使用してローカル階層を別のクラウド階層に接続することはできます。




== クラスタ間LIF

FabricPoolを使用するクラスタ高可用性（HA）ペアでは、クラウド層と通信するために2つのクラスタ間LIFが必要です。NetAppでは、追加のHAペアにクラスタ間LIFを作成して、それらのノード上のローカル層にもクラウド層をシームレスに接続することをお勧めします。

クラスタ間LIFを無効化または削除すると、クラウド階層への通信が中断されます。


NOTE: SnapMirrorとSnapVaultの同時レプリケーション処理は、クラウド階層へのネットワーク リンクを共有するため、初期化とRTOはクラウド階層で利用可能な帯域幅とレイテンシに依存します。接続リソースが飽和状態になると、パフォーマンスが低下する可能性があります。複数のLIFを事前設定すると、このようなネットワークの飽和を大幅に減らすことができます。

異なるルーティングを持つノード上で複数のクラスタ間LIFを使用している場合は、NetAppはそれらを異なるIPspaceに配置することをお勧めします。設定時にFabricPoolは複数のIPspaceから選択することはできますが、IPspace内の特定のクラスタ間LIFを選択することはできません。



== ネットワーク タイム プロトコル（NTP）

Network Time Protocol（NTP）の設定は、クラスタ間で時刻を同期させるために必要です。link:../system-admin/manage-cluster-time-concept.html["NTPの設定方法について学ぶ"].



== ONTAPによるストレージ効率化

データをクラウド階層に移動する際に、圧縮、重複排除、コンパクションなどのストレージの効率性が維持されるため、オブジェクトのストレージ容量と転送コストが削減されます。


NOTE: ONTAP 9.15.1 以降では、FabricPoolは Intel QuickAssist Technology（QAT4）をサポートしており、より積極的かつパフォーマンスの高いストレージ効率の節約を実現します。

アグリゲート インライン重複排除はローカル階層でサポートされていますが、関連するストレージ効率はクラウド階層に格納されているオブジェクトに引き継がれません。

All volume階層化ポリシーを使用している場合、追加のストレージ効率化を適用する前にデータが階層化される可能性が高いため、バックグラウンドの重複排除プロセスに関連するストレージ効率は低下する場合があります。



== NetApp Cloud Tieringライセンス

FabricPoolは、サードパーティのオブジェクトストレージプロバイダー（Amazon S3など）をAFFおよびFASシステムのクラウド階層として接続する場合、容量ベースのライセンスが必要です。StorageGRIDまたはONTAP S3をクラウド階層として使用する場合、またはCloud Volumes ONTAP、Amazon FSx for NetApp ONTAP、またはAzure NetApp Filesで階層化する場合は、Cloud Tieringライセンスは必要ありません。

NetApp Cloud Tieringライセンス（既存のFabricPoolライセンスへのアドオンや拡張機能を含む）は、NetApp Consoleでアクティブ化されます。link:https://docs.netapp.com/us-en/data-services-cloud-tiering/task-licensing-cloud-tiering.html["Cloud Tieringライセンスの設定"^]の詳細をご覧ください。



== StorageGRIDの整合性制御

StorageGRIDの整合性制御は、StorageGRIDがオブジェクトを追跡するために使用するメタデータがノード間でどのように分散されるか、およびクライアント要求に対するオブジェクトの可用性に影響します。NetAppは、FabricPoolターゲットとして使用されるバケットには、デフォルトの新規書き込み後の読み取りの整合性制御を使用することをお勧めします。


NOTE: FabricPoolターゲットとして使用されるバケットに対して、Available整合性制御を使用しないでください。



== SANプロトコルでアクセスするデータの階層化に関するその他の考慮事項

SANプロトコルでアクセスするデータを階層化する場合は、接続に関する考慮事項があるため、ONTAP S3やStorageGRIDなどのプライベート クラウドを使用することを推奨します。


IMPORTANT: FabricPool を Windows ホストとの SAN 環境で使用している場合、クラウドへのデータ階層化時にオブジェクトストレージが長時間利用できなくなると、Windows ホスト上の NetApp LUN 上のファイルにアクセスできなくなったり、ファイルが消失したりする可能性があることに注意してください。link:https://kb.netapp.com/onprem/ontap/os/During_FabricPool_S3_object_store_unavailable_Windows_SAN_host_reported_filesystem_corruption["NetApp ナレッジベース：FabricPool S3 オブジェクトストアが利用できないときに Windows SAN ホストがファイルシステムの破損を報告しました"^]を参照してください。



== QoS

* スループット フロア（QoS Min）を使用する場合は、アグリゲートをFabricPoolに接続する前に、ボリュームの階層化ポリシーを `none`に設定する必要があります。
+
それ以外の階層化ポリシーに設定されていると、アグリゲートをFabricPoolに接続できません。FabricPoolが有効な場合、QoSポリシーによりスループットの下限が適用されることはありません。





== FabricPoolでサポートされない機能

* WORMとオブジェクトのバージョン管理が有効なオブジェクト ストア
* オブジェクト ストア バケットに適用される情報ライフサイクル管理（ILM）ポリシー
+
FabricPoolは、クラウド階層のデータを障害から保護するためのデータレプリケーションとイレイジャー コーディングのみを対象としたStorageGRIDの情報ライフサイクル管理ポリシーをサポートしています。ただし、FabricPoolは、ユーザーメタデータやタグに基づくフィルタリングなどの高度なILMルールはサポートしていません。ILMには通常、様々な移動および削除ポリシーが含まれています。これらのポリシーは、FabricPoolのクラウド階層のデータに悪影響を与える可能性があります。FabricPoolをオブジェクトストアに設定されているILMポリシーと併用すると、データ損失につながる可能性があります。

* ONTAP CLIコマンドまたは7-Mode Transition Toolを使用した7-Modeのデータ移行
* RAID SyncMirror（MetroCluster構成を除く）
* SnapLockボリューム（ONTAP 9.7以前のリリースを使用する場合）
* link:../snaplock/snapshot-lock-concept.html["改ざん防止スナップショット"]
+
改ざん防止スナップショットは、削除できない不変の保護を提供します。FabricPool ではデータを削除する機能が必要なため、FabricPool とスナップショットロックを同じボリュームで有効にすることはできません。

* FabricPool対応アグリゲートにSMTapeを使用するテープ バックアップ
* 自動負荷分散機能
* スペース保証以外を使用するボリューム `none`
+
ルートSVMボリュームとCIFS監査ステージング ボリュームを除き、FabricPoolは、 `none`以外のスペース ギャランティを使用するボリュームを含むアグリゲートにクラウド階層をアタッチすることをサポートしていません。たとえば、 `volume` (`-space-guarantee` `volume`のスペース ギャランティを使用するボリュームはサポートされていません。

* link:../data-protection/snapmirror-licensing-concept.html#data-protection-optimized-license["DP_Optimizedライセンス"]を使用するクラスター
* Flash Poolアグリゲート

