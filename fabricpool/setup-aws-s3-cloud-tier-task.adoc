---
permalink: fabricpool/setup-aws-s3-cloud-tier-task.html 
sidebar: sidebar 
keywords: setting up, aws, s3, cloud tier 
summary: Amazon S3 を FabricPool のクラウド階層として設定できます。ONTAP 9.5 以降を実行している場合は、FabricPool 用に Amazon Commercial Cloud Services（C2S）を設定できます。 
---
= Amazon S3 を ONTAP FabricPool クラウド階層として設定する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Amazon S3 を FabricPool のクラウド階層として設定できます。ONTAP 9.5 以降を実行している場合は、FabricPool 用に Amazon Commercial Cloud Services（C2S）を設定できます。

.FabricPoolでAmazon S3を使用する場合の考慮事項
* Amazon S3 への階層化にはlink:https://console.netapp.com/cloud-tiering["NetApp Cloud Tieringライセンス"]が必要です。
* ONTAPがAmazon S3オブジェクト サーバとの接続に使用するLIFは10Gbpsポート上に配置することを推奨します。
* AFFシステム、FASシステム、およびONTAP Selectでは、FabricPoolで次のAmazon S3ストレージ クラスがサポートされます。
+
** Amazon S3 Standard
** Amazon S3 Standard - Infrequent Access（Standard-IA）
** Amazon S3 One Zone - Infrequent Access（One Zone - IA）
** Amazon S3 Intelligent-Tiering
** Amazon Commercial Cloud Services
** ONTAP 9.11.1 以降、 Amazon S3 Glacier Instant Retrieval （ FabricPool は Glacier Flexible Retrieval または Glacier Deep Archive をサポートしていません）
+
https://aws.amazon.com/s3/storage-classes/["Amazon Web Services ドキュメント：Amazon S3 ストレージクラス"]



+
上記以外のストレージ クラスについては、営業担当者にお問い合わせください。

* Cloud Volumes ONTAPでは、FabricPoolでAmazon Elastic Block Store（EBS）の汎用SSD（gp2）ボリュームおよびスループット最適化HDD（st1）ボリュームからの階層化がサポートされます。


.手順
.  `storage aggregate object-store config create`コマンドを `-provider-type` `AWS_S3`パラメータとともに使用して、Amazon S3 設定情報を指定します。
+
**  `-auth-type` `CAP`パラメータを使用して、C2S アクセスの資格情報を取得します。
+
 `-auth-type` `CAP`パラメータを使用する場合は、 `-cap-url`パラメータを使用して、C2S アクセス用の一時的な資格情報を要求するための完全な URL を指定する必要があります。

**  `storage aggregate object-store config create`コマンドは、提供された情報を使用して ONTAP が Amazon S3 にアクセスできない場合に失敗します。
**  `-access-key`パラメータを使用して、Amazon S3オブジェクト ストアへのリクエストを承認するためのアクセス キーを指定します。
**  `-secret-password`パラメータを使用して、Amazon S3オブジェクト ストアへのリクエストを認証するためのパスワード（シークレット アクセス キー）を指定します。
** Amazon S3パスワードが変更された場合は、ONTAPに保存されている対応するパスワードをすぐに更新する必要があります。
+
これにより、ONTAPは引き続きAmazon S3内のデータにアクセスできます。

+
[listing]
----
cluster1::> storage aggregate object-store config create
-object-store-name my_aws_store -provider-type AWS_S3
-server s3.amazonaws.com -container-name my-aws-bucket
-access-key DXJRXHPXHYXA9X31X3JX
----
+
[listing]
----
cluster1::> storage aggregate object-store config create -object-store-name my_c2s_store -provider-type AWS_S3 -auth-type CAP -cap-url https://123.45.67.89/api/v1/credentials?agency=XYZ&mission=TESTACCT&role=S3FULLACCESS -server my-c2s-s3server-fqdn -container my-c2s-s3-bucket
----


.  `storage aggregate object-store config show`コマンドを使用して、Amazon S3 の設定情報を表示および確認します。
+
 `storage aggregate object-store config modify`コマンドを使用すると、FabricPoolのAmazon S3設定情報を変更できます。



.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-config-create.html["storage aggregate object-store config create"^]
* link:https://docs.netapp.com/us-en/ontap-cli/snapmirror-object-store-config-modify.html["storage aggregate object-store config modify"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-config-show.html["storage aggregate object-store config show"^]

