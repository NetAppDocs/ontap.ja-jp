---
permalink: fabricpool/setup-storagegrid-cloud-tier-task.html 
sidebar: sidebar 
keywords: setting up, storagegrid, cloud tier 
summary: StorageGRIDをFabricPoolのクラウド階層として設定できます。 
---
= StorageGRID を ONTAP FabricPool クラウド階層として設定する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
StorageGRIDをFabricPoolのクラウド層として設定できます。SANプロトコルでアクセスされるデータを階層化する場合、NetAppでは接続性を考慮して、StorageGRIDなどのプライベートクラウドの使用を推奨します。

.FabricPoolでStorageGRIDを使用する場合の考慮事項
* 証明書のチェックを明示的に無効にした場合を除き、StorageGRIDのCA証明書をインストールする必要があります。
* オブジェクト ストア バケットで StorageGRID オブジェクトのバージョン管理を有効にしないでください。
* FabricPoolライセンスは必要ありません。
* NetApp AFFシステムからストレージが割り当てられた仮想マシンにStorageGRIDノードが導入されている場合は、ボリュームでFabricPool階層化ポリシーが有効になっていないことを確認してください。
+
StorageGRIDノードで使用するボリュームでFabricPoolによる階層化を無効にすることで、トラブルシューティングとストレージの処理がシンプルになります。

+
[NOTE]
====
FabricPoolを使用してStorageGRIDに関連するデータをStorageGRID自体に階層化することは絶対にしないでください。StorageGRIDにStorageGRIDデータを階層化すると、トラブルシューティングと運用がより複雑になります。

====


.タスク概要
ONTAP 9.8以降では、StorageGRIDの負荷分散が有効になっています。サーバのホスト名が複数のIPアドレスに解決される場合、ONTAPは、返されたすべてのIPアドレス（最大16個のIPアドレス）とクライアント接続を確立します。接続が確立されると、IPアドレスはラウンドロビン方式で選択されます。

.手順
ONTAP System ManagerまたはONTAP CLIを使用して、StorageGRIDをFabricPoolのクラウド階層としてセットアップできます。

[role="tabbed-block"]
====
.System Manager
--
. *ストレージ > 階層 > クラウド階層の追加* をクリックし、オブジェクト ストア プロバイダーとして StorageGRID を選択します。
. 必要な情報を入力します。
. クラウドミラーを作成する場合は、*FabricPoolミラーとして追加*をクリックします。


FabricPoolミラーを使用するとデータ ストアをシームレスに置き換えることができるため、災害発生時でもデータを使用できるようになります。

--
.CLI
--
.  `storage aggregate object-store config create`コマンドと `-provider-type` `SGWS`パラメータを使用して、StorageGRID 構成情報を指定します。
+
**  `storage aggregate object-store config create`提供された情報を使用して ONTAP が StorageGRID にアクセスできない場合、コマンドは失敗します。
**  `-access-key`パラメータを使用して、StorageGRIDオブジェクト ストアへの要求を承認するためのアクセス キーを指定します。
**  `-secret-password`パラメータを使用して、StorageGRIDオブジェクト ストアへの要求を認証するためのパスワード（秘密アクセス キー）を指定します。
** StorageGRIDパスワードが変更された場合は、ONTAPに保存されている対応するパスワードをすぐに更新する必要があります。
+
これにより、ONTAPは引き続きStorageGRID内のデータにアクセスできます。

**  `-is-certificate-validation-enabled`パラメータを `false`に設定すると、StorageGRIDの証明書チェックが無効になります。サードパーティの証明機関からの署名付き証明書（(`-is-certificate-validation-enabled true`）を使用することが推奨されるベストプラクティスです。


+
[listing]
----
cluster1::> storage aggregate object-store config create
-object-store-name mySGWS -provider-type SGWS -server mySGWSserver
-container-name mySGWScontainer -access-key mySGWSkey
-secret-password mySGWSpass
----
.  `storage aggregate object-store config show`コマンドを使用して、StorageGRID 構成情報を表示および確認します。
+
 `storage aggregate object-store config modify`コマンドを使用すると、FabricPoolのStorageGRID構成情報を変更できます。



--
====
.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-config-create.html["storage aggregate object-store config create"^]
* link:https://docs.netapp.com/us-en/ontap-cli/snapmirror-object-store-config-modify.html["storage aggregate object-store config modify"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-config-show.html["storage aggregate object-store config show"^]

