---
permalink: file-system-analytics/activity-tracking-task.html 
sidebar: sidebar 
keywords: monitor, volume, ontap, FSA, File System Analytics, 
summary: ホット オブジェクトを識別し、CSV ファイルとしてダウンロードできる Activity Tracking 機能。 
---
= FSA による ONTAP アクティビティ追跡の有効化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.10.1以降、File System Analyticsにアクティビティトラッキング機能が追加されました。この機能により、ホットオブジェクトを特定し、そのデータをCSVファイルとしてダウンロードできます。ONTAP 9.11.1以降、アクティビティトラッキングはSVMスコープに拡張されました。また、ONTAP 9.11.1以降、System Managerにアクティビティトラッキングのタイムラインが追加され、最大5分間のアクティビティトラッキングデータを確認できます。

アクティビティ追跡では、次の4つのカテゴリを監視できます。

* ディレクトリ
* ファイル
* クライアント
* ユーザ


監視対象のカテゴリごとに、読み取りIOPS、書き込みIOPS、読み取りスループット、書き込みスループットが表示されます。アクティビティ追跡の結果は10～15秒ごとに更新され、直前の5秒間にシステムで確認されたホット スポットに関する情報が表示されます。

アクティビティ追跡の情報は概算値であり、データの精度は受信I/Oトラフィックの分布によって異なります。

System Managerでボリュームレベルでアクティビティトラッキングを表示すると、展開されているボリュームのメニューのみがアクティブに更新されます。ボリュームの表示が折りたたまれている場合は、ボリューム表示が展開されるまで更新されません。*更新を一時停止*ボタンをクリックすると、更新を停止できます。アクティビティデータはCSV形式でダウンロードでき、選択したボリュームでキャプチャされたすべてのポイントインタイムデータが表示されます。

ONTAP 9.11.1以降で利用可能なタイムライン機能を使用すると、ボリュームまたはSVM上のホットスポット アクティビティの記録を約5秒ごとに継続的に更新し、過去5分間のデータを保持できます。タイムライン データは、ページの表示領域に表示されているフィールドについてのみ保持されます。追跡カテゴリを折りたたんだり、タイムラインが表示されなくなるまでスクロールしたりすると、タイムラインはデータの収集を停止します。デフォルトではタイムラインは無効になっており、[アクティビティ]タブから移動すると自動的に無効になります。



== 単一ボリュームのアクティビティ追跡の有効化

アクティビティ追跡は、ONTAP System ManagerまたはCLIを使用して有効にできます。

.タスク概要
ONTAP REST APIまたはSystem ManagerでRBACを使用する場合は、Activity Trackingへのアクセスを管理するためのカスタムロールを作成する必要があります。このプロセスについては、xref:role-based-access-control-task.html[ロールベース アクセス制御]を参照してください。

[role="tabbed-block"]
====
.System Manager
--
.手順
. *ストレージ > ボリューム*を選択します。目的のボリュームを選択します。個々のボリュームメニューから「ファイル システム」を選択し、「アクティビティ」タブを選択します。
. 上位のディレクトリ、ファイル、クライアント、およびユーザーに関する個別のレポートを表示するには、*Activity Tracking*がオンになっていることを確認します。
. 更新せずにデータをより詳細に分析するには、*更新を一時停止*を選択してください。データをダウンロードして、レポートのCSVレコードを取得することもできます。


--
.CLI
--
.手順
. アクティビティ追跡を有効にします。
+
`volume activity-tracking on -vserver _svm_name_ -volume _volume_name_`

. 次のコマンドを使用して、ボリュームに対するアクティビティ追跡の状態（オンまたはオフ）を確認します。
+
`volume activity-tracking show -vserver _svm_name_ -volume _volume_name_ -state`

. 有効にしたら、ONTAP System ManagerまたはONTAP REST APIを使用してアクティビティ追跡データを表示します。


--
====


== 複数ボリュームのアクティビティ追跡の有効化

System ManagerかCLIを使用して、複数のボリュームのアクティビティ追跡を有効にすることができます。

.タスク概要
ONTAP REST APIまたはSystem ManagerでRBACを使用する場合は、Activity Trackingへのアクセスを管理するためのカスタムロールを作成する必要があります。このプロセスについては、xref:role-based-access-control-task.html[ロールベース アクセス制御]を参照してください。

[role="tabbed-block"]
====
.System Manager
--
.特定のボリュームで有効化
. *ストレージ > ボリューム*を選択します。目的のボリュームを選択します。個々のボリュームメニューから「ファイル システム」を選択し、「アクティビティ」タブを選択します。
. Activity Trackingを有効にするボリュームを選択します。ボリュームリストの上部にある*その他のオプション*ボタンを選択します。*Activity Trackingを有効にする*を選択します。
. SVMレベルでアクティビティトラッキングを表示するには、*ストレージ > ボリューム*から表示したいSVMを選択します。「ファイルシステム」タブに移動し、「アクティビティ」を選択すると、アクティビティトラッキングが有効になっているボリュームのデータが表示されます。


.すべてのボリュームで有効化
. *ストレージ > ボリューム*を選択します。メニューから SVM を選択します。
. *ファイル システム* タブに移動し、*詳細* タブを選択して、SVM 内のすべてのボリュームでアクティビティ トラッキングを有効にします。


--
.CLI
--
ONTAP 9.13.1 以降では、ONTAP CLI を使用して複数のボリュームのアクティビティ トラッキングを有効にできます。

.手順
. アクティビティ追跡を有効にします。
+
`volume activity-tracking on -vserver _svm_name_ -volume [*|!_volume_names_]`

+
 `*`を使用して、指定されたストレージ VM 上のすべてのボリュームのアクティビティ トラッキングを有効にします。

+
 `!`の後にボリューム名を指定すると、指定されたボリューム以外の SVM 上のすべてのボリュームでアクティビティ トラッキングが有効になります。

. 処理が成功したことを確認します。
+
`volume show -fields activity-tracking-state`

. 有効にしたら、ONTAP System ManagerまたはONTAP REST APIを使用してアクティビティ追跡データを表示します。


--
====