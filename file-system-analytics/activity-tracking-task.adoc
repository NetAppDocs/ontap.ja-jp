---
permalink: file-system-analytics/activity-tracking-task.html 
sidebar: sidebar 
keywords: monitor, volume, ontap, FSA, File System Analytics, 
summary: アクティビティトラッキング機能。ホットオブジェクトを識別し、CSVファイルとしてダウンロードできます。 
---
= アクティビティトラッキングを有効にします
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.10.1以降のファイルシステム分析にはアクティビティ追跡機能が含まれています。この機能を使用すると、ホットオブジェクトを特定してデータをCSVファイルとしてダウンロードできます。ONTAP 9.11.1以降では、アクティビティトラッキングがSVMスコープに拡張されています。また、ONTAP 9.11.1以降、System Managerではアクティビティ追跡のタイムラインが表示され、最大5分間のアクティビティ追跡データを確認できます。

アクティビティ追跡では、次の 4 つのカテゴリでモニタリングが可能です。

* ディレクトリ
* ファイル
* クライアント
* ユーザ


監視対象のカテゴリごとに、読み取り IOPS 、書き込み IOPS 、読み取りスループット、書き込みスループットが表示されます。アクティビティトラッキングに関するクエリーは、過去 5 秒間にシステムに表示されたホットスポットに関連する 10 ～ 15 秒ごとに更新されます。

アクティビティ追跡情報は概算値であり、データの正確性は受信 I/O トラフィックの分散に依存します。

System Managerでボリュームレベルでアクティビティ追跡を表示している場合は、展開されたボリュームのメニューだけがアクティブに更新されます。ボリュームのビューが縮小されている場合、ボリュームの表示が展開されるまで表示は更新されません。更新を停止するには、 * 更新を一時停止 * ボタンを使用します。アクティビティデータは CSV 形式でダウンロードでき、選択したボリュームについて収集されたすべてのポイントインタイムデータが表示されます。

タイムライン機能を使用できるONTAP 9.11.1以降では、ボリュームまたはSVM上のホットスポットアクティビティの記録を保持し、約5秒ごとに継続的に更新し、過去5分間のデータを保持できます。タイムラインデータは、ページの表示領域にあるフィールドに対してのみ保持されます。追跡カテゴリを折りたたむかスクロールしてタイムラインが表示されないようにすると、タイムラインはデータの収集を停止します。デフォルトでは、タイムラインは無効になっており、[アクティビティ]タブから移動すると自動的に無効になります。



== 1つのボリュームのアクティビティトラッキングを有効にします

アクティビティ追跡は、ONTAP システムマネージャまたはONTAP CLIを使用して有効にできます。

.このタスクについて
ONTAP REST API または System Manager で RBAC を使用する場合は、アクティビティ追跡へのアクセスを管理するためのカスタムロールを作成する必要があります。を参照してください xref:role-based-access-control-task.html[ロールベースアクセス制御] をクリックしてください。

[role="tabbed-block"]
====
.System Manager の略
--
.手順
. Storage > Volumes （ストレージ）を選択します。目的のボリュームを選択します。個々のボリュームメニューから、ファイルシステムを選択し、アクティビティタブを選択します。
. 上位のディレクトリ、ファイル、クライアント、およびユーザに関する個々のレポートを表示するには、 * Activity Tracking * をオンにします。
. 更新を行わずにデータをより詳細に分析するには、 * 更新を一時停止 * を選択します。データをダウンロードして、レポートの CSV レコードを取得することもできます。


--
.CLI の使用
--
.手順
. アクティビティトラッキングを有効にする：
+
`volume activity-tracking on -vsverver _svm_name_ -volume _volume_name_`

. ボリュームのアクティビティ追跡状態がオンであるかオフであるかは、コマンドを使用して確認できます。
+
`volume activity-tracking show -vsverver _svm_name_ -volume _volume_name_ -state`

. 有効にしたら、 ONTAP システムマネージャまたは ONTAP REST API を使用してアクティビティ追跡データを表示します。


--
====


== 複数のボリュームのアクティビティ追跡を有効にします

System Managerを使用して、複数のボリュームのアクティビティ追跡を一度に有効にすることができます。

.このタスクについて
ONTAP REST API または System Manager で RBAC を使用する場合は、アクティビティ追跡へのアクセスを管理するためのカスタムロールを作成する必要があります。を参照してください xref:role-based-access-control-task.html[ロールベースアクセス制御] をクリックしてください。

[role="tabbed-block"]
====
.特定のボリューム用のコマンドです
--
.手順
. Storage > Volumes （ストレージ）を選択します。目的のボリュームを選択します。個々のボリュームメニューから、ファイルシステムを選択し、アクティビティタブを選択します。
. アクティビティトラッキングを有効にするボリュームを選択します。ボリュームリストの上部で、*その他のオプション*ボタンを選択します。［*アクティビティトラッキングを有効にする*］を選択します。
. SVMレベルでアクティビティの追跡を表示するには、表示するSVMを* Storage > Volumes *から選択します。[ファイルシステム]タブに移動して[アクティビティ]を選択すると、アクティビティ追跡が有効になっているボリュームのデータが表示されます。


--
.SVM内のすべてのボリューム
--
.手順
. Storage > Volumes （ストレージ）を選択します。メニューからSVMを選択します。
. 「* File System *」タブに移動し、「* More *」タブを選択して、SVM内のすべてのボリュームでアクティビティの追跡を有効にします。


--
====