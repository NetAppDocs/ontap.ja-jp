---
permalink: flexcache-hot-spot/flexcache-hotspot-remediation-ontap-config.html 
sidebar: sidebar 
keywords: tr, hotspot, FlexCache, HDFA, configuration, ONTAP 
summary: クラスタ内キャッシュを使用するメリットを実現するために、HDFA とデータ LIF を設定する 
---
= HDFAとONTAPデータLIFを設定する
:allow-uri-read: 


[role="lead"]
このホットスポット修復ソリューションのメリットを享受するには、HDFAとデータLIFを適切に設定する必要があります。このソリューションでは、オリジンとHDFAを同一クラスタに配置し、クラスタ内キャッシュを使用します。

次に、2 つの HDFA サンプル構成を示します：

* 2x2x2 インター SVM HDFA
* 4x1x4 イントラ SVM HDFA


.タスク概要
ONTAP CLIを使用して、この高度な設定を実行します。 `flexcache create`コマンドで使用する必要がある設定が2つあり、設定されていないことを確認する必要がある設定が1つあります：

* `-aggr-list`：HDF を制限するノードまたはノードのサブセットに存在するアグリゲート、またはアグリゲートのリストを指定します。
* `-aggr-list-multiplier`： `aggr-list`オプションにリストされているアグリゲートごとに作成されるコンスティチュエントの数を決定します。2つのアグリゲートがリストされていて、この値を `2`に設定した場合、4つのコンスティチュエントが作成されます。NetAppでは、アグリゲートごとに最大8つのコンスティチュエントを推奨していますが、16でも十分です。
* `-auto-provision-as`：タブキーで移動した場合、CLIは自動入力を試みて値を `flexgroup`に設定します。これが設定されていないことを確認してください。設定されている場合は削除してください。




== 2x2x2インターSVM HDFA構成を作成する

. 図 1 に示すように 2x2x2 インター SVM HDFA を構成するには、準備シートに記入します。
+
.図1：2x2x2 Inter-SVM HDFAレイアウト
image:flexcache-hotspot-hdfa-2x2x2-inter-svm-hdfa.png["図1：2x2x2 Inter-SVM HDFAレイアウト"]

+
[cols="1,1,1,1,1,1"]
|===
| SVM | HDF あたりのノード数 | アグリゲート | ノードあたりの構成要素 | ジャンクション パス | データ LIF IP 


| svm1 | node1、node2 | aggr1、aggr2 | 2 | /ホットスポット | 192.168.0.11,192.168.0.12 


| svm2 | node3、node4 | aggr3、aggr4 | 2 | /ホットスポット | 192.168.0.13,192.168.0.14 
|===
. HDFを作成します。以下のコマンドを準備シートの各行ごとに1回ずつ、計2回実行します。2回目の実行では、必ず `vserver`と `aggr-list`の値を調整してください。
+
[listing]
----
cache::> flexcache create -vserver svm1 -volume hotspot -aggr-list aggr1,aggr2 -aggr-list-multiplier 2 -origin-volume <origin_vol> -origin-vserver <origin_svm> -size <size> -junction-path /hotspot
----
. データ LIF を作成します。コマンドを 4 回実行し、準備シートに記載されているノード上の SVM ごとに 2 つのデータ LIF を作成します。各反復で値を適切に調整してください。
+
[listing]
----
cache::> net int create -vserver svm1 -home-port e0a -home-node node1 -address 192.168.0.11 -netmask-length 24
----
+
.次の手順
次に、HDFAを適切に利用できるようにクライアントを設定する必要があります。link:flexcache-hotspot-remediation-client-config.html["クライアント構成"]を参照してください。





== 4x1x4のSVM内HDFAを作成する

. 図 2 に示すように 4x1x4 インター SVM HDFA を構成するには、準備シートに記入します。
+
.図2：4x1x4 SVM内HDFAレイアウト
image:flexcache-hotspot-hdfa-4x1x4-intra-svm-hdfa.png["図2：4x1x4 SVM内HDFAレイアウト"]

+
[cols="1,1,1,1,1,1"]
|===
| SVM | HDF あたりのノード数 | アグリゲート | ノードあたりの構成要素 | ジャンクション パス | データ LIF IP 


| svm1 | ノード1 | aggr1 | 4 | /ホットスポット1 | 192.168.0.11 


| svm1 | ノード2 | aggr2 | 4 | /hotspot2 | 192.168.0.12 


| svm1 | ノード3 | aggr3 | 4 | /hotspot3 | 192.168.0.13 


| svm1 | ノード4 | aggr4 | 4 | /hotspot4 | 192.168.0.14 
|===
. HDFを作成します。以下のコマンドを準備シートの各行ごとに1回ずつ、計4回実行します。各反復ごとに `aggr-list`と `junction-path`の値を調整してください。
+
[listing]
----
cache::> flexcache create -vserver svm1 -volume hotspot1 -aggr-list aggr1 -aggr-list-multiplier 4 -origin-volume <origin_vol> -origin-vserver <origin_svm> -size <size> -junction-path /hotspot1
----
. データLIFを作成します。コマンドを4回実行し、SVMに合計4つのデータLIFを作成します。ノードごとに1つのデータLIFが必要です。各反復で値を適切に調整してください。
+
[listing]
----
cache::> net int create -vserver svm1 -home-port e0a -home-node node1 -address 192.168.0.11 -netmask-length 24
----
+
.次の手順
次に、HDFAを適切に利用できるようにクライアントを設定する必要があります。link:flexcache-hotspot-remediation-client-config.html["クライアント構成"]を参照してください。


