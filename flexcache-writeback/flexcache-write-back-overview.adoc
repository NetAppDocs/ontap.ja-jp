---
permalink: flexcache-writeback/flexcache-write-back-overview.html 
sidebar: sidebar 
keywords: tr-4743, flexcache writeback, flexcache write-back, overview, technical report, netapp tr, ontap tr 
summary: ONTAP 9.15.1で導入されたFlexCacheライトバックは、キャッシュへの書き込みの代替動作モードです。 
---
= ONTAP FlexCacheライトバックについて学ぶ
:allow-uri-read: 


[role="lead"]
ONTAP 9.15.1で導入されたFlexCacheライトバックは、キャッシュへの書き込みに代わる動作モードです。ライトバックにより、書き込みはキャッシュの安定したストレージにコミットされ、データがオリジンに到達するのを待たずにクライアントに確認応答されます。データは非同期的にオリジンにフラッシュバックされます。その結果、特定のワークロードや環境において、ローカルに近い速度で書き込みを実行できるグローバル分散ファイルシステムが実現し、パフォーマンスの大幅な向上が期待できます。


NOTE: ONTAP 9.12.1では、ライトバック機能がパブリック プレビューとして導入されました。これはライトバック バージョン1（wbv1）と呼ばれるもので、ライトバック バージョン2（wbv2）と呼ばれるONTAP 9.15.1のライトバックと同じものと考えないでください。



== ライトバックとライトアラウンド

FlexCacheは、ONTAP 9.5での導入以降、読み取り / 書き込み可能なキャッシュですが、ライトアラウンド モードで動作していました。キャッシュでの書き込みは、安定したストレージにコミットするためにキャッシュ元に転送されました。キャッシュ元は、安定したストレージへの書き込みを正常にコミットしたあと、キャッシュへの書き込みに対する確認応答を返しました。その後、キャッシュはクライアントへの書き込みの確認応答を返しました。このため、書き込みが行われるたびに、キャッシュとキャッシュ元の間のネットワークを行き来するペナルティが発生しました。FlexCacheライトバックではこれが変更されています。


NOTE: ONTAP 9.15.1にアップグレードしたあと、従来のライトアラウンド キャッシュをライトバック キャッシュに変換できます。また、必要であれば、これをライトアラウンドに戻すこともできます。ただし、これにより、問題が発生した場合に診断ログの読み取りが困難になる可能性があります。

|===
|  | ライトアラウンド | ライトバック 


| ONTAPバージョン | 9.6+ | 9.15.1以上 


| ユースケース | 読み取り中心のワークロード | 書き込みが多いワークロード 


| データのコミット時刻 | キャッシュ元 | Cache 


| クライアント エクスペリエンス | WAN のような | LAN のような 


| 制限 | 原産地ごとに100 | 原産地ごとに10 


| https://en.wikipedia.org/wiki/CAP_theorem["CAP定理"^] | 利用可能でパーティションに対する耐性がある | 利用可能で一貫性がある 
|===


== FlexCacheライトバックに関する用語

FlexCacheライトバックに関する主な概念と用語を理解しておきましょう。

[cols="12%,88%"]
|===
| 期間 | 定義 


| [[dirty-data]]*ダーティー データ* | キャッシュの安定したストレージにコミットされているが、オリジンにフラッシュされていないダーティー データ。 


| *Exclusive Lock Delegation（XLD）* | キャッシュにファイルごとに付与されるプロトコル レベルのロック権限。この権限により、キャッシュはオリジンにアクセスすることなく、クライアントに排他書き込みロックを付与できます。 


| *Shared Lock Delegation（SLD）* | キャッシュにファイルごとに付与されるプロトコル レベルのロック権限。この権限により、キャッシュはオリジンにアクセスすることなく、クライアントに共有読み取りロックを配布できます。 


| *ライトバック* | FlexCacheの動作モードの1つで、キャッシュへの書き込みがそのキャッシュの安定したストレージにコミットされ、即座にクライアントに確認応答されます。データは非同期的にオリジンに書き戻されます。 


| *ライトアラウンド* | FlexCacheの動作モードの1つで、キャッシュへの書き込みがオリジンに転送され、安定したストレージにコミットされます。コミットされると、オリジンはキャッシュへの書き込みを確認し、キャッシュはクライアントへの書き込みを確認します。 


| *ダーティー データ レコード システム（DDRS）* | ライトバック対応キャッシュ内のダーティー データをファイルごとに追跡する独自のメカニズム。 


| *起源* | すべてのFlexCacheキャッシュボリュームのソースデータを含むFlexGroupまたはFlexVol。これは唯一の信頼できるソースであり、ロックの管理を行い、100％のデータ整合性、新しさ、一貫性を保証します。 


| *キャッシュ* | FlexCache オリジンのスパース キャッシュ ボリュームである FlexGroup。 
|===


=== 整合性、最新性、一貫性

FlexCacheは、場所や時間を問わず適切なデータを確保するためのNetAppのソリューションです。FlexCacheは、常に100%の整合性、最新性、一貫性を備えています。

* *一貫性：* どこからアクセスしても同じデータです。
* *Current:* データは常に最新です。
* *Coherent:* データは正確/破損していません。

