---
permalink: flexcache/enable-file-access-time-updates-task.html 
sidebar: sidebar 
keywords: atime, atime-update, flexcache, flex cache, access time 
summary: 'FlexCacheボリュームで `-atime-update`フィールドを有効にすると、ファイルアクセス時刻の更新を許可できます。 `-atime-update-period`属性を使用してアクセス時刻の更新期間を設定することもできます。atime-update-periodは、atimeの更新頻度と、更新が元のボリュームに反映されるタイミングを制御します。' 
---
= ONTAP FlexCacheボリューム上のファイルアクセス時間の更新を有効にする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.11.1以降では、FlexCacheボリューム上の `-atime-update`フィールドを有効にして、ファイルアクセス時刻の更新を許可できます。また、 `-atime-update-period`属性を使用してアクセス時刻の更新間隔を設定することもできます。 `-atime-update-period`属性は、アクセス時刻の更新頻度と、更新が元のボリュームに反映されるタイミングを制御します。



== 概要

ONTAPは、READ、READLINK、READDIRを使用して読み取られるファイルとディレクトリのアクセス時刻の更新を管理するための `-atime-update`と呼ばれるボリュームレベルのフィールドを提供します。Atimeは、アクセス頻度の低いファイルとディレクトリのデータのライフサイクルの決定に使用されます。アクセス頻度の低いファイルは最終的にアーカイブストレージに移行され、その後テープに移動されることがよくあります。

既存および新規に作成されたFlexCacheボリュームでは、atime-updateフィールドはデフォルトで無効になっています。ONTAP 9.11.1より前のリリースでFlexCacheボリュームを使用している場合は、元のボリュームで読み取り処理が実行されたときにキャッシュが不必要に削除されないように、atime-updateフィールドを無効のままにしておく必要があります。ただし、FlexCacheキャッシュが大きい場合、管理者は特別なツールを使用してデータを管理し、ホットデータがキャッシュに保持され、コールドデータが消去されるようにする必要があります。atime-updateが無効になっていると、これは不可能です。しかし、ONTAP 9.11.1以降では、 `-atime-update`と `-atime-update-period,`を有効にして、キャッシュされたデータの管理に必要なツールを使用できるようになりました。



== 開始する前に

* すべてのFlexCacheボリュームでONTAP 9.11.1以降が実行されている必要があります。
*  `advanced`特権モードを使用する必要があります。




== タスク概要

 `-atime-update-period`を86400秒に設定すると、ファイルに対して実行される読み取りのような操作の数に関係なく、24時間あたり1回以下のアクセス時間の更新が許可されます。

 `-atime-update-period`を0に設定すると、読み取りアクセスごとにオリジンにメッセージが送信されます。オリジンは各FlexCacheボリュームにatimeが古いことを通知し、パフォーマンスに影響を与えます。

.手順
. 特権モードを `advanced`に設定します：
+
`set -privilege advanced`

. ファイル アクセス時間の更新を有効にし、更新頻度を設定します。
+
`volume modify -volume vol_name -vserver <SVM name> -atime-update true -atime-update-period <seconds>`

+
次の例では、 `-atime-update`を有効にし、 `-atime-update-period`を86400秒（24時間）に設定します：

+
[listing]
----
c1: volume modify -volume origin1 vs1_c1 -atime-update true -atime-update-period 86400
----
.  `-atime-update`が有効になっていることを確認します：
+
`volume show -volume _vol_name_ -fields atime-update,atime-update-period`

+
[listing]
----
c1::*> volume show -volume cache1_origin1 -fields atime-update,atime-update-period
vserver volume         atime-update atime-update-period
------- -------------- ------------ -------------------
vs2_c1  cache1_origin1 true         86400
----
.  `-atime-update`を有効にすると、FlexCacheボリューム上のファイルを自動的にスクラブできるかどうかと、スクラブ間隔を指定できます：
+
`volume flexcache config modify -vserver <SVM name> -volume <volume_name> -is-atime-scrub-enabled <true|false> -atime-scrub-period <integer>`



 `-is-atime-scrub-enabled`パラメータの詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-flexcache-config-modify.html#parameters["ONTAPコマンド リファレンス"^]を参照してください。
