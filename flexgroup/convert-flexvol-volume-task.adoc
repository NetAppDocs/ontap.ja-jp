---
permalink: flexgroup/convert-flexvol-volume-task.html 
sidebar: sidebar 
keywords: convert, flexvol, volume, flexgroup, conversion, flex vol, flex group, transitioned, 
summary: ONTAP 9.7以降では、FlexVolからFlexGroupボリュームへのインプレース変換が可能です。データ コピーや追加のディスク スペースは必要ありません。 
---
= ONTAP FlexVolボリュームをONTAP FlexGroupボリュームに変換する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.7以降では、FlexVolからFlexGroupボリュームへのインプレース変換が可能です。データ コピーや追加のディスク スペースは必要ありません。

.開始する前に
* 移行されたボリュームは、ONTAP 9.8 以降で FlexGroup ボリュームに変換できます。
* 変換するFlexVolがオンラインになっている必要があります。
* FlexVolの処理と構成が変換プロセスに対応している必要があります。
+
次の条件を確認します。これらの条件に該当すると、変換が正常に行われない可能性があります。

+
** FlexVolが7MTT（ONTAP 9.7）を使用して7-Modeから移行されている。
+
移行されたボリュームは ONTAP 9.8 以降で変換できます。

** ボリューム上でFlexGroupボリュームでまだサポートされていない機能が有効になっています。例えば、SAN LUN、Windows NFS、SMB1、Snapshotの命名/自動削除、vmalignセット、SnapLock（ONTAP 9.11.1より前のリリース）（SnapLockはONTAP 9.11.1以降でサポート）、スペースSLO、論理スペースの適用/レポートなどです。詳細については、link:supported-unsupported-config-concept.html["FlexGroupボリュームでサポートされる機能とサポートされない機能"]を参照してください。
** 変換するFlexVolが配置されているSVMで現在SVM DRが使用されている。
** NetApp FlexCloneボリュームが存在し、そのFlexVol volumeは親ボリュームです。変換対象のボリュームは親ボリュームまたはクローンボリュームであってはなりません。
** ボリュームがNetApp FlexCacheの元のボリュームである。
** ONTAP 9.7 以前では、NetAppスナップショットは 255 を超えてはなりません。ONTAP 9.8 以降では、1023 個のスナップショットがサポートされます。
** Storage Efficiencyが有効になっている。この機能は無効にする必要があり、変換後に再度有効にすることができます。
** ボリュームがSnapMirror関係のソースであり、デスティネーションはまだ変換されていない。
** ボリュームがアクティブな（休止されていない）SnapMirror関係の一部である。
** ボリューム上の自律ランサムウェア保護（ARP）は無効になっています。変換が完了するまで、再度有効にしないでください。
** クォータが有効になっている。この機能は無効にする必要があり、変換後に再度有効にすることができます。
** ボリューム名が197文字を超えている。
** ボリュームがアプリケーションに関連付けられている。
+
これは、ONTAP 9.7にのみ適用されます。この制限は、ONTAP 9.8で廃止されました。

** ミラーリング、ジョブ、wafliron、NDMPバックアップ、inode変換などのONTAPプロセスが実行中である。
** ボリュームがSVMルート ボリュームである。
** ボリュームがフルである。
+
これらの非互換性が存在する場合は、FlexVolに対してエラー メッセージが生成され、ボリュームの変換が中止されます。問題に対処したあと、変換を再試行できます。



* 現在のFlexVolが最大容量の80%以上に達している場合は、インプレース変換ではなく、新しく作成したFlexGroupボリュームにデータをコピーすることを検討してください。FlexGroupメンバー ボリュームは時間の経過とともに自然にリバランシングされますが、大容量のFlexVolをFlexGroupボリュームに変換すると、メンバー ボリューム間で迅速にリバランシングされないパフォーマンスやバランスの問題が発生する可能性があります。
+
[NOTE]
====
非常に大きなFlexGroupボリュームを変換すると、FlexGroupボリュームメンバーコンスティチュエントが非常にいっぱいになり、パフォーマンスの問題が発生する可能性があります。詳細については、TRlink:https://www.netapp.com/media/12385-tr4571.pdf["FlexGroupボリューム - ベストプラクティスと実装ガイド"]の「FlexGroupボリュームを作成しない方が良い場合」のセクションを参照してください。

====


.手順
. FlexVol volumeがオンラインであることを確認します： `volume show -fields vol_name volume-style-extended,state`
+
[listing]
----
cluster-1::> volume show my_volume -fields volume-style-extended,state
vserver volume    state  volume-style-extended
------- --------- ------ ---------------------
vs0     my_volume online flexvol
----
. FlexVolを問題なく変換できるかどうかを確認します。
+
.. 上級権限モードにログインします： `set -privilege advanced`
.. 変換プロセスを確認します： `volume conversion start -vserver vs1 -volume flexvol -check-only true`
+
ボリュームを変換する前に、すべてのエラーを修正する必要があります。

+
[NOTE]
====
FlexGroupボリュームをFlexVolに戻すことはできません。

====


. 変換を開始します： `volume conversion start -vserver svm_name -volume vol_name`
+
[listing]
----
cluster-1::*> volume conversion start -vserver vs0 -volume my_volume

Warning: Converting flexible volume "my_volume" in Vserver "vs0" to a FlexGroup
         will cause the state of all Snapshot copies from the volume to be set
         to "pre-conversion". Pre-conversion Snapshot copies cannot be
         restored.
Do you want to continue? {y|n}: y
[Job 57] Job succeeded: success
----
. 変換が成功したことを確認します： `volume show vol_name -fields volume-style-extended,state`
+
[listing]
----
cluster-1::*> volume show my_volume -fields volume-style-extended,state
vserver volume    state  volume-style-extended
------- --------- ------ ---------------------
vs0     my_volume online flexgroup
----


.結果
FlexVolが単一メンバーのFlexGroupボリュームに変換されます。

.終了後の操作
必要に応じてFlexGroupボリュームを拡張できます。
