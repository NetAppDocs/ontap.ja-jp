---
sidebar: sidebar 
permalink: high-availability/ha_automatic_giveback_commands.html 
keywords: ontap, high, availability, ha, pair, automatic, giveback, commands 
summary: 自動ギブバックコマンド 
---
= 自動ギブバックコマンド
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
状況によっては、 ONTAP コマンドを使用して自動ギブバックの設定を管理しなければならないことがあります。

[cols="2*"]
|===
| * | * 使用するコマンド 


 a| 
自動ギブバックを有効にして、テイクオーバーされたノードのブート後、 Waiting for giveback 状態に達し、 Auto giveback 期間が終了するまでの待機時間が経過した時点でギブバックが実行されるようにします。

デフォルト設定は true です。
 a| 
storage failover modify ‑ nodename_nodename _

‑ auto-giveback true



 a| 
自動ギブバックを無効にするデフォルト設定は true です。

* 注意： * このパラメータを false に設定しても、パニック時のテイクオーバーおよび再起動時のテイクオーバー後の自動ギブバックは無効になりません。パニック時のテイクオーバー後の自動ギブバックは、「‑ auto-giveback-after-panic 」パラメータを false に設定して無効にする必要があります。
 a| 
storage failover modify ‑ nodename_nodename _

‑ auto-giveback false



 a| 
パニック時のテイクオーバーのあとに実行される自動ギブバックを無効にします（この設定はデフォルトで有効になります）。
 a| 
storage failover modify ‑ nodename_nodename _

‑ auto-giveback‑ after-panic false （‑自動ギブバック‑パニック後）



 a| 
自動ギブバックが開始されるまでの待機時間（秒）を設定します（デフォルトは 600 秒）。このオプションで指定した待機時間が経過するまでは、自動ギブバックは実行されません。
 a| 
storage failover modify ‑ nodename_nodename _

‑ delay ‑ seconds_seconds_

|===


== storage failover modify コマンドの設定による自動ギブバックへの影響

自動ギブバックの処理は、 storage failover modify コマンドのパラメータの設定によって異なります。

次の表に、パニック時以外でテイクオーバーが発生した場合に適用される storage failover modify コマンドのパラメータを示します。

[cols="2*"]
|===
| * パラメータ * | * デフォルト設定 * 


 a| 
-auto-giveback true | _false
 a| 
真 _



 a| 
-delay-seconds_integer_ （秒）
 a| 
600



 a| 
-onreboot_true_|_false_
 a| 
真 _

|===
次の表に '-onreboot' パラメータと -auto-giveback' パラメータの組み合わせが ' パニックによるものではないテイクオーバー・イベントの自動ギブバックにどのように影響するかを示します

[cols="3*"]
|===
| * storage failover modify のパラメータに * を使用します | * テイクオーバーの原因 * | * 自動ギブバックは実行されますか？ * 


 a| 
-onreboot_true_

-auto-giveback true
| reboot コマンド | はい。 


|  | halt コマンド、またはサービスプロセッサからの電源再投入 | はい。 


 a| 
-onreboot_true_

-auto-giveback を実行します
| reboot コマンド | はい。 


|  | halt コマンド、またはサービスプロセッサからの電源再投入 | いいえ 


 a| 
-onreboot_false_

-auto-giveback true
| reboot コマンド | いいえ 


|  | halt コマンド、またはサービスプロセッサからの電源再投入 | はい。 


 a| 
-onreboot_false_

-auto-giveback を実行します
| reboot コマンド | いいえ 


|  | halt コマンド、またはサービスプロセッサからの電源再投入 | いいえ 
|===

NOTE: -onreboot' パラメータが true に設定されていて ' 再起動によってテイクオーバーが発生した場合 '-auto-giveback パラメータが true に設定されているかどうかに関係なく ' 常に自動ギブバックが実行されます

-onreboot' パラメータが false に設定されている場合 ' ノードがリブートされてもテイクオーバーは実行されませんしたがって ' 自動ギブバックは '-auto-giveback' パラメータが true に設定されているかどうかに関係なく実行できませんクライアントのアクセスが中断します。



== パニック時に適用される自動ギブバックパラメータの組み合わせとその影響

次の表に、パニック時に適用される「 storage failover modify 」コマンドのパラメータを示します。

[cols="2*"]
|===
| * パラメータ * | * デフォルト設定 * 


 a| 
-onpanic _true | false_
| 真 _ 


 a| 
-auto-giveback -auto-giveback-after-panic_true | false

（権限： advanced ）
| 真 _ 


| -auto-giveback true | false  a| 
真 _

|===
次の表に、「 storage failover modify 」コマンドのパラメータの各組み合わせについて、パニック時の自動ギブバックの処理を示します。

[cols="2*"]
|===
| storage failover のパラメータを指定します | パニック発生後の自動ギブバックの実行 


| -onpanic 'true'-auto-giveback`true'-auto-giveback-after-panic 'true | はい。 


| -onpanic 'true'-auto-giveback`true'-auto-giveback-after-panic 'false | いいえ 


| -onpanic 'true'-auto-giveback`false'auto-giveback-after-panic 'true | はい。 


| -onpanic 'true'-auto-giveback'false' -auto-giveback-after-panic 'false | いいえ 


| -onpanic が「 false 」に設定されている場合、 -auto-giveback や -auto-giveback を実行しても、 -auto-giveback や -auto-giveback のパニック時の値には関係なく、テイクオーバーやギブバックは実行されません | いいえ 
|===
[NOTE]
====
* ノードのパニック時にその他の理由でテイクオーバーが発生する可能性があります。このような場合、自動ギブバックのパニック時の設定ではギブバックは制御されません。
* onpanic パラメータを「 true 」に設定した場合、 -auto-giveback パラメータと -auto-giveback パラメータのデフォルト設定を変更しないかぎり、パニックが発生すると常に自動ギブバックが実行されます。これらのパラメータの両方をデフォルト (`true', ) から false に変更すると '-onpanic パラメータが「 true 」に設定されていても ' パニック後に自動ギブバックは実行されません
* onpanic パラメータを false に設定した場合は、テイクオーバーが実行されません。そのため、 PANIC パラメータの設定が true になっていても、自動ギブバックは実行されません。クライアントのアクセスが中断します。


====