---
permalink: mediator/index.html 
sidebar: sidebar 
keywords: ontap mediator, install requirements, mediator requirements 
summary: ONTAP Mediator をインストールするには、すべての前提条件が満たされていることを確認し、インストール パッケージを取得し、ホスト上でインストーラを実行する必要があります。 
---
= ONTAPメディエーターをインストールまたはアップグレードする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP Mediator をインストールまたはアップグレードするには、すべての前提条件を満たし、インストール パッケージをダウンロードして、ホスト上でインストーラを実行する必要があります。

* ONTAP 9 .8以降では、任意のバージョンのONTAPメディエーターを使用してSnapMirrorのアクティブな同期関係を監視できます。
* 任意のバージョンのONTAP Mediator を使用してMetroCluster IP 構成を監視できます。




== インストールとアップグレードに関する考慮事項

ONTAP Mediator をアップグレードまたはインストールする前に、これらの点を確認してください。


NOTE: ONTAP Mediator 1.8 以前では、Red Hat Enterprise Linux (RHEL) FIPS モードと互換性がないため、正常にインストールできません。  FIPSモードが有効になっているかどうかを確認するには、 `fips-mode-setup --check`指示。 FIPSモードを無効にするには、 `fips-modesetup --disable`指示。FIPSモードを無効にしてからリブートすれば、ONTAP Mediator 1.8以前を正常にインストールできます。

* ONTAP Mediator を最新バージョンにアップグレードする必要があります。古いバージョンは引き続きすべてのONTAPリリースで動作しますが、新しいバージョンにはサードパーティ コンポーネントのセキュリティ パッチが含まれています。
* 新しい ONTAP Mediator バージョンにアップグレードすると、より高いバージョンが利用できない限り、インストーラは推奨される SCST バージョンに自動的にアップグレードします。上位バージョンのSCSTを手動でインストールする手順については、を参照してくださいlink:manage-task.html["ONTAPメディエーターの管理"]。サポートされているバージョンについては、を参照してくださいlink:whats-new-concept.html#scst-support-matrix["SCSTのサポートマトリックス"]。


[NOTE]
====
* インストールが失敗した場合は、 ONTAP Mediator の新しいバージョンにアップグレードする必要がある場合があります。
* 2025 年 6 月 15 日以降、コード署名証明書の有効期限が切れているため、 ONTAP Mediator 1.9 および 1.8 をインストールまたはアップグレードすることはできません。インストールまたはアップグレードが失敗した場合は、代わりにONTAP Mediator 1.9.1 パッチ バージョンを使用してください。


====
* パッケージをインストールする場合は `yum-utils`、コマンドを使用できます `needs-restarting`。
* ONTAP Mediator 1.11 以降では、 MetroCluster IP 構成で IPv6 がサポートされます。




=== ホストの要件

RHEL または Rocky Linux をインストールし、関連するリポジトリを構成するときは、次の要件に従ってください。

[NOTE]
====
インストールプロセスや設定プロセスを変更する場合は、追加の手順が必要になることがあります。

====
.Linuxディストリビューションの要件
* Red Hat のベスト プラクティスに従って、RHEL または Rocky Linux をインストールします。  CentOS 8.x はサポート終了となったため、CentOS 8.x の互換バージョンは推奨されません。
* ONTAP Mediator をインストールするときは、インストール プログラムが必要なすべてのソフトウェア依存関係を取得してインストールできるように、システムが必要なリポジトリにアクセスできることを確認してください。
* yumインストーラがRHELリポジトリ内の依存ソフトウェアを検出できるようにするには、インストール時またはインストール後に有効なRed Hatサブスクリプションを使用してシステムを登録します。
+
[NOTE]
====
詳細については、Red Hat Subscription Managerのドキュメントを参照してください。

====


.ネットワーク要件
次のポートがONTAPメディエーター用に使用可能で使用されていないことを確認します。

|===


| ポート / サービス | ソース | 方向 | デスティネーション | 目的 


 a| 
22 / TCP
 a| 
管理ホスト
 a| 
インバウンド
 a| 
ONTAP Mediator
 a| 
（オプション）SSH / ONTAPメディエーターの管理



 a| 
31784/TCP
 a| 
クラスタ管理LIF
 a| 
インバウンド
 a| 
ONTAPメディエーターWebサーバ
 a| 
（必須）REST API（HTTPS）



 a| 
3260 / TCP^1^
 a| 
ノードのデータLIFまたはノード管理LIF
 a| 
双方向
 a| 
ONTAPメディエーターのiSCSIターゲット
 a| 
( MetroCluster IP構成に必須) メールボックスのiSCSIデータ接続

|===
SMBCをご利用の場合、ONTAPではポート3260を有効にしたり接続したりする必要はありません。

* サードパーティのファイアウォールを使用している場合は、link:https://docs.netapp.com/us-en/ontap-metrocluster/install-ip/concept_mediator_requirements.html#firewall-requirements-for-ontap-mediator["ONTAPメディエーターのファイアウォール要件"^] 。
* インターネットにアクセスできないLinuxホストの場合は、必要なパッケージがローカルリポジトリにあることを確認してください。
+
Linux環境でLink Aggregation Control Protocol（LACP）を使用している場合は、カーネルを設定し、をに `2`設定します `sysctl net.ipv4.conf.all.arp_ignore`。



.OSノヨウケン
OSが次の要件を満たしている必要があります。

* 64ビットの物理インストールまたは仮想マシン
* 8GBのRAM
* 1 GBのディスクスペース（アプリケーションのインストール、サーバログ、およびデータベースに使用）
* ユーザ：ルートアクセス


次の表に、ONTAP MediatorのバージョンごとにサポートされるOSを示します。

[cols="30,70"]
|===


| ONTAP メディエーターのバージョン | サポートされるLinuxバージョン 


 a| 
1.11
 a| 
* Red Hat Enterprise Linux
+
** 互換性: 9.5 ^1^
** 推奨: 10.1、10.0、9.7、9.6、9.4、8.10


* Rocky Linux 10.1、9.7、および 8.10
* Oracle Linux 10.0 および 9.6




 a| 
1.10
 a| 
* Red Hat Enterprise Linux
+
** 互換性: 9.5 ^1^
** 推奨: 10.0、9.6、9.4、8.10


* Rocky Linux 10.0、9.6、および 8.10




 a| 
1.9.1
 a| 
* Red Hat Enterprise Linux
+
** 互換性: 9.3、9.1、8.9、8.7、8.6、8.5、8.4 ^1^
** 推奨: 9.5、9.4、9.2、9.0、8.10、8.8


* Rocky Linux 9.5、8.10




 a| 
1.9
 a| 
* Red Hat Enterprise Linux
+
** 互換性: 9.3、9.1、8.9、8.7、8.6、8.5、8.4 ^1^
** 推奨: 9.5、9.4、9.2、9.0、8.10、8.8


* Rocky Linux 9.5、8.10




 a| 
1.8
 a| 
* Red Hat Enterprise Linux：
+
** 互換性: 8.7、8.6、8.5、8.4 ^1^
** 推奨: 9.4、9.3、9.2、9.1、9.0、8.10、8.9、8.8


* Rocky Linux 9.4、8.10




 a| 
1.7
 a| 
* Red Hat Enterprise Linux：
+
** 互換性: 8.7、8.6、8.5、8.4 ^1^
** 推奨: 9.3、9.2、9.1、9.0、8.9、8.8


* Rocky Linux 9.3、8.9




 a| 
1.6
 a| 
* Red Hat Enterprise Linux：
+
** 互換性: 8.7、8.6、8.5、8.4 ^1^
** 推奨: 9.2、9.1、9.0、8.8


* Rocky Linux 9.2、8.8




 a| 
1.5
 a| 
* Red Hat Enterprise Linux: 8.5、8.4、8.3、8.2、8.1、8.0、7.9、7.8、7.7、および 7.6
* CentOS: 7.9、7.8、7.7、7.6




 a| 
1.4
 a| 
* Red Hat Enterprise Linux: 8.5、8.4、8.3、8.2、8.1、8.0、7.9、7.8、7.7、および 7.6
* CentOS: 7.9、7.8、7.7、7.6




 a| 
1.3
 a| 
* Red Hat Enterprise Linux: 8.3、8.2、8.1、8.0、7.9、7.8、7.7、および 7.6
* CentOS: 7.9、7.8、7.7、7.6




 a| 
1.2
 a| 
* Red Hat Enterprise Linux: 8.1、8.0、7.9、7.8、7.7、および 7.6
* CentOS: 7.9、7.8、7.7、7.6


|===
. 互換性があるとは、Red Hat がこれらの RHEL バージョンをサポートしなくなったものの、 ONTAP Mediator をこれらのバージョンにインストールできることを意味します。


.OSに必要なパッケージ
ONTAP Mediator には次のパッケージが必要です。


NOTE: パッケージは事前にインストールされるか、ONTAPメディエーターのインストーラによって自動的にインストールされます。

[cols="25,25,25,25"]
|===


| RHEL / CentOSのすべてのバージョン | RHEL 10.x / Rocky Linux 10 用の追加パッケージ | RHEL 9.x/Rocky Linux 9用の追加パッケージ | RHEL 8.x/Rocky Linux 8用の追加パッケージ 


 a| 
* openssl
* openssl-devel
* kernel-devel-$（uname -r）
* GCC
* 作成
* libselinux-utils
* パッチ
* bzip2
* Perl -データ-ダンパ
* Perl - ExtUtils - MakeMaker
* efibootmgr
* モクティル

 a| 
* python3.12
* python3.12-devel

 a| 
* elfutils-libelf-devel
* policycoreutils-python-utils
* ピートン3
* Python3 -デベル

 a| 
* elfutils-libelf-devel
* policycoreutils-python-utils
* redhat-lsb-core
* ピートン39
* Python39 -デベル


|===
Mediatorインストールパッケージは自己解凍型の圧縮tarファイルで、次の内容が含まれます。

* サポートされているリリースのリポジトリから取得できないすべての依存関係を含むRPMファイル。
* インストールスクリプト。


有効な SSL 証明書を推奨します。



=== OSのアップグレードに関する考慮事項とカーネルの互換性

* カーネルを除くすべてのライブラリ パッケージを更新できますが、 ONTAP Mediator で変更を適用するには再起動が必要になる場合があります。再起動が必要な場合は、ダウンタイムをスケジュールします。
* OSカーネルを最新の状態に保つ必要があります。カーネルコアを、サポートされているバージョンにアップグレードします。link:whats-new-concept.html#scst-support-matrix["ONTAPメディエーターのバージョンマトリックス"] 。システムを再起動する必要があるため、停止期間のためのメンテナンス ウィンドウを計画してください。
+
** 再起動する前に SCST カーネル モジュールをアンインストールし、再起動後に再インストールします。
** カーネル OS のアップグレードを開始する前に、サポートされているバージョンの SCST を再インストールできるように準備します。




[NOTE]
====
* カーネルのバージョンは、オペレーティングシステムのバージョンと一致している必要があります。
* テスト済みの SCST モジュールが動作しない可能性があるため、 ONTAP Mediator リリースでサポートされている OS バージョンを超えてカーネルをアップグレードしないでください。


====


== UEFIセキュアブートが有効になっている場合のONTAPメディエーターのインストール

ONTAPメディエーターは、UEFIセキュアブートが有効になっているかどうかに関係なく、システムにインストールできます。

.タスクの内容
UEFIセキュアブートが不要な場合、またはONTAPメディエーターのインストールに関する問題をトラブルシューティングする場合は、ONTAPメディエーターをインストールする前に、UEFIセキュアブートを無効にすることを選択できます。マシン設定からUEFIセキュアブートオプションを無効にします。

[NOTE]
====
UEFIセキュアブートを無効にする手順の詳細については、ホストOSのマニュアルを参照してください。

====
UEFIセキュアブートを有効にしたONTAPメディエーターをインストールするには、サービスを開始する前にセキュリティキーを登録する必要があります。このキーはSCSTインストールのコンパイルステップ中に生成され、秘密鍵と公開鍵のペアとしてマシンに保存されます。ユーティリティを使用し `mokutil`て公開鍵をマシン所有者キー（Mok）としてUEFIファームウェアに追加し、システムが署名済みモジュールを信頼してロードできるようにします。パスフレーズは、システムを再起動してMokをアクティブにするときに必要になるため、安全な場所に保存して `mokutil`ください。

.手順
. [[STEP_1_UEFI]]システムでUEFIセキュアブートが有効になっているかどうかを確認します。
+
`mokutil --sb-state`

+
結果は、このシステムでUEFIセキュアブートが有効になっているかどうかを示します。

+
[cols="40,60"]
|===


| 状況 | 手順 


 a| 
UEFIセキュアブートが有効
 a| 




 a| 
UEFIセキュアブートが無効になっています
 a| 
link:upgrade-host-os-mediator-task.html["ホストオペレーティングシステムをアップグレードしてから、ONTAP Mediatorをアップグレードします。"]

|===
+
[NOTE]
====
** パスフレーズを作成するように求められます。パスフレーズは安全な場所に保存する必要があります。UEFIブートマネージャでキーを有効にするには、このパスフレーズが必要です。
** ONTAPメディエーター1.2.0以前のバージョンでは、このモードはサポートされていません。


====
. [[STEP_2_UEFI]]ユーティリティがインストールされていない場合は `mokutil`、次のコマンドを実行します。
+
`yum install mokutil`


