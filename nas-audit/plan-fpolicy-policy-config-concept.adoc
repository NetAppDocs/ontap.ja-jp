---
permalink: nas-audit/plan-fpolicy-policy-config-concept.html 
sidebar: sidebar 
keywords: plan, fpolicy, policy, configuration 
summary: FPolicy ポリシーを設定する前に、どのパラメータが必須か、また特定のオプション パラメータを設定する理由を理解する必要があります。 
---
= ONTAP FPolicy ポリシー設定について学ぶ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FPolicyポリシーを設定する前に、ポリシーの作成時に必要なパラメータや、特定のオプション パラメータを設定する理由を理解しておく必要があります。この情報は、各パラメータに設定する値を決めるのに役立ちます。

FPolicyポリシーの作成時には、次の情報を指定します。

* Storage Virtual Machine（SVM）
* 1つ以上のFPolicyイベント
* FPolicy外部エンジン


このほかに、いくつかのオプション ポリシーも設定できます。



== FPolicyポリシーの設定項目

以下はFPolicyポリシーで使用できる必須パラメータとオプション パラメータのリストです。設定を計画する際に使用してください。

[cols="40,20,20,20"]
|===


| 情報の種類 | オプション | 必須 | デフォルト 


 a| 
_SVM 名_

FPolicyポリシーを作成するSVMの名前を指定します。
 a| 
`-vserver` `vserver_name`
 a| 
はい
 a| 
なし



 a| 
_ポリシー名_

FPolicyポリシーの名前を指定します。

この名前に指定できる文字数は最大256文字です。

[NOTE]
====
MetroClusterまたはSVMディザスタ リカバリ設定でポリシーを設定する場合、この名前は最大200文字にする必要があります。

====
名前には、次のASCII文字の任意の組み合わせを含めることができます。

* `a`から `z`まで
* `A`から `Z`まで
* `0`から `9`まで
* 「`_`」、「`-`", and "`.`」

 a| 
`-policy-name` `policy_name`
 a| 
はい
 a| 
なし



 a| 
_イベント名_

FPolicyポリシーに関連付けるイベントをカンマで区切って指定します。

* 1つのポリシーに複数のイベントを関連付けることができます。
* イベントはプロトコルに固有です。
* 1つのポリシーで複数のプロトコルのファイル アクセス イベントを監視するには、ポリシーで監視する各プロトコルのイベントを作成し、それらのイベントをポリシーに関連付けます。
* 既存のイベントを指定する必要があります。

 a| 
`-events` `event_name`, ...
 a| 
はい
 a| 
なし



 a| 
_永続ストア_

ONTAP 9.14.1以降では、このパラメータには、SVM内の非同期で必須でないポリシーのファイル アクセス イベントをキャプチャする永続的ストアを指定します。
 a| 
`-persistent-store` `persistent_store_name`
 a| 
いいえ
 a| 
なし



 a| 
_外部エンジン名_

FPolicyポリシーに関連付ける外部エンジンの名前を指定します。

* 外部エンジンには、ノードからFPolicyサーバに通知を送信するための必要な情報が格納されています。
* 単純なファイル ブロッキングを行うためにONTAPの標準の外部エンジンを使用したり、より高度なファイル ブロッキングとファイル管理を行うために外部FPolicyサーバ（FPolicyサーバ）を使用するように設定された外部エンジンを使用したりするようにFPolicyを設定できます。
* ネイティブ外部エンジンを使用する場合は、このパラメータの値を指定しないか、 `native`を値として指定することができます。
* FPolicyサーバを使用する場合は、外部エンジンの設定がすでに存在している必要があります。

 a| 
`-engine` `engine_name`
 a| 
○（ポリシーで内部のONTAP標準エンジンを使用しない場合）
 a| 
`native`



 a| 
_必須スクリーニングは必要か_

必須のファイル アクセス スクリーニングを要求するかどうかを指定します。

* この必須スクリーニング設定は、プライマリ サーバとセカンダリ サーバがすべて停止した場合や、指定した時間内にFPolicyサーバからの応答を得られない場合に、ファイル アクセス イベントをどのように処理するかを決定します。
*  `true`に設定すると、ファイル アクセス イベントは拒否されます。
*  `false`に設定すると、ファイル アクセス イベントが許可されます。

 a| 
`-is-mandatory` {`true`|`false`}
 a| 
いいえ
 a| 
`true`



 a| 
_特権アクセスを許可する_

特権データ接続による監視対象のファイルやフォルダに対する特権アクセスをFPolicyサーバに許可するかどうかを指定します。

設定されている場合、FPolicyサーバは特権データ接続を使用して、監視対象データが格納されているSVMのルートにあるファイルにアクセスできます。

特権データ アクセスの場合、クラスタ上で SMB のライセンスを取得し、FPolicy サーバへの接続に使用するすべてのデータ LIF で `cifs`を許可されたプロトコルの 1 つとして設定する必要があります。

ポリシーで特権アクセスを許可する場合は、FPolicyサーバで特権アクセスに使用するアカウントのユーザ名も指定する必要があります。
 a| 
`-allow-privileged-access` {`yes`|`no`}
 a| 
×（パススルー リードが有効になっていない場合）
 a| 
`no`



 a| 
_特権ユーザー名_

FPolicyサーバが特権データ アクセスで使用するアカウントのユーザ名を指定します。

* このパラメータの値は、「`domain\user name`」形式を使用する必要があります。
*  `-allow-privileged-access`が `no`に設定されている場合、このパラメータに設定された値はすべて無視されます。

 a| 
`-privileged-user-name` `user_name`
 a| 
×（特権アクセスが有効になっていない場合）
 a| 
なし



 a| 
_パススルー読み取りを許可する_

FPolicyサーバによってセカンダリ ストレージ（オフライン ファイル）にアーカイブされているファイルを対象としたパススルー リード サービスをFPolicyサーバが提供できるかどうかを指定します。

* パススルー リードは、オフライン ファイルのデータをプライマリ ストレージにリストアすることなく読み取るための手段です。
+
パススルー リードでは、読み取り要求に応答する前にファイルをプライマリ ストレージにリコールする必要がないので、応答遅延が短縮されます。また、パススルー リードでは、読み取り要求を満たすためだけにリコールされるファイルによってストレージ領域を浪費する必要がなくなるので、ストレージの効率性が最適化されます。

* 有効になっている場合、FPolicyサーバはパススルー リード専用に開かれている別の特権データ チャネルを利用してファイルにデータを提供します。
* パススルー リードを設定する場合は、特権アクセスを許可するようにポリシーが設定されている必要もあります。

 a| 
`-is-passthrough-read-enabled` {`true`|`false`}
 a| 
いいえ
 a| 
`false`

|===