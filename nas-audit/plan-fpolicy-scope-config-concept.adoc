---
permalink: nas-audit/plan-fpolicy-scope-config-concept.html 
sidebar: sidebar 
keywords: plan, fpolicy, scope, configuration 
summary: FPolicyスコープを設定する前に、スコープを作成することの意味を理解しておく必要があります。スコープ構成に含まれる内容を理解しておく必要があります。また、スコープの優先規則についても理解しておく必要があります。この情報は、設定する値を計画するのに役立ちます。 
---
= FPolicyスコープ設定の概要を計画する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FPolicyスコープを設定する前に、スコープを作成することの意味を理解しておく必要があります。スコープ構成に含まれる内容を理解しておく必要があります。また、スコープの優先規則についても理解しておく必要があります。この情報は、設定する値を計画するのに役立ちます。



== FPolicyスコープを作成することの意味

FPolicyスコープを作成することは、FPolicyポリシーが適用される範囲を定義することを意味します。Storage Virtual Machine（SVM）は基本の適用範囲です。FPolicyポリシーのスコープを作成するときは、スコープが適用されるFPolicyポリシーを定義する必要があり、さらにスコープを適用するSVMを指定する必要があります。

指定したSVM内にスコープをさらに制限するためのパラメータが多数あります。スコープに含めるものを指定するか、スコープから除外するものを指定することで、スコープを制限できます。有効なポリシーにスコープを適用すると、ポリシーイベントのチェックがこのコマンドで定義したスコープに適用されます。

「 include 」オプションで一致するファイルアクセスイベントが見つかった場合に、通知が生成されます。「 EXCLUDE 」オプションで一致するファイルアクセスイベントについては、通知は生成されません。

FPolicyスコープの設定では、次の設定情報を定義します。

* SVM名
* ポリシー名
* 監視対象に含める共有または監視対象から除外する共有
* 監視対象に含めるまたは監視対象から除外するエクスポートポリシー
* 監視対象に含めるまたは監視対象から除外するボリューム
* 監視対象に含めるまたは監視対象から除外するファイル拡張子
* ディレクトリオブジェクトに対するファイル拡張子のチェックを実行するかどうか


[NOTE]
====
クラスタのFPolicyポリシーのスコープには、特別な考慮事項があります。クラスタのFPolicyポリシーは、クラスタ管理者が管理SVM用に作成するポリシーです。クラスタ管理者がそのクラスタのFPolicyポリシーのスコープも作成する場合、SVM管理者はその同じポリシーのスコープを作成することはできません。ただし、クラスタ管理者がクラスタのFPolicyポリシーのスコープを作成しない場合は、すべてのSVM管理者がそのクラスタポリシーのスコープを作成できます。SVM管理者がそのクラスタのFPolicyポリシーのスコープを作成した場合、クラスタ管理者はそれ以降その同じクラスタポリシーのクラスタスコープを作成することはできません。これは、クラスタ管理者が同じクラスタポリシーのスコープを上書きできないためです。

====


== スコープの優先規則とは

スコープ設定には、次の優先規則が適用されます。

* 共有をパラメータに指定し、共有の親ボリュームをパラメータに `-volumes-to-exclude`指定した `-volumes-to-exclude`場合 `-shares-to-include`は、がよりも優先されます `-shares-to-include`。
* エクスポートポリシーをパラメータに指定し、エクスポートポリシーの親ボリュームをパラメータに指定した `-volumes-to-exclude`場合 `-export-policies-to-include`は、が `-volumes-to-exclude`よりも優先されます `-export-policies-to-include`。
* 管理者はリストと `-file-extensions-to-exclude`リストの両方を指定できます `-file-extensions-to-include`。
+
 `-file-extensions-to-exclude`パラメータは、パラメータがチェックされる前にチェックされ `-file-extensions-to-include`ます。





== FPolicyスコープの構成要素

次に示す使用可能なFPolicyスコープ設定パラメータの一覧は、設定を計画するのに役立ちます。

[NOTE]
====
スコープに含めるか除外する共有、エクスポートポリシー、ボリューム、およびファイル拡張子を設定する際に、includeパラメータとexcludeパラメータにメタ文字（「*」など）を含めることができます?`" and "`。正規表現の使用はサポートされていません。

====
[cols="70,30"]
|===


| 情報の種類 | オプション 


 a| 
SVM

FPolicyスコープを作成するSVMの名前を指定します。

各FPolicy設定は、単一のSVM内で定義されます。FPolicyポリシーの構成要素となる外部エンジン、ポリシーイベント、ポリシーのスコープ、およびポリシーを、すべて同じSVMに関連付ける必要があります。
 a| 
`-vserver` `vserver_name`



 a| 
_ ポリシー名 _

スコープを関連付けるFPolicyポリシーの名前を指定します。FPolicyポリシーがすでに存在している必要があります。
 a| 
`-policy-name` `policy_name`



 a| 
含める共有 _

カンマで区切って複数の共有を指定し、FPolicyポリシーの監視対象となるスコープに含めます。
 a| 
`-shares-to-include` `share_name`はい。



 a| 
_ 除外する共有 _

カンマで区切って複数の共有を指定し、FPolicyポリシーの監視対象となるスコープから除外します。
 a| 
`-shares-to-exclude` `share_name`はい。



 a| 
対象に含めるボリューム： FPolicy ポリシーの監視対象となるボリュームをカンマで区切って指定します。
 a| 
`-volumes-to-include` `volume_name`はい。



 a| 
除外するボリューム _

カンマで区切って複数のボリュームを指定し、FPolicyポリシーの監視対象となるスコープから除外します。
 a| 
`-volumes-to-exclude` `volume_name`はい。



 a| 
ポリシーを含めるには _ をエクスポートします

カンマで区切って複数のエクスポートポリシーを指定し、FPolicyポリシーの監視対象となるスコープに含めます。
 a| 
`-export-policies-to-include` `export_policy_name`はい。



 a| 
ポリシーを exclude_ にエクスポートします

カンマで区切って複数のエクスポートポリシーを指定し、FPolicyポリシーの監視対象となるスコープから除外します。
 a| 
`-export-policies-to-exclude` `export_policy_name`はい。



 a| 
_include するファイル拡張子 _

カンマで区切って複数のファイル拡張子を指定し、FPolicyポリシーの監視対象となるスコープに含めます。
 a| 
`-file-extensions-to-include` `file_extensions`はい。



 a| 
_ ファイル拡張子を exclude_ に設定します

カンマで区切って複数のファイル拡張子を指定し、FPolicyポリシーの監視対象となるスコープから除外します。
 a| 
`-file-extensions-to-exclude` `file_extensions`はい。



 a| 
_ ディレクトリのファイル拡張子チェックは有効になっていますか？ _

ファイル名の拡張子の監視をディレクトリオブジェクトにも適用するかどうかを指定します。このパラメータをに設定 `true`すると、通常のファイルと同じ拡張子チェックがディレクトリオブジェクトに適用されます。このパラメータをに設定する `false`と、ディレクトリ名の拡張子は照合されず、名前の拡張子が一致しなくてもディレクトリに関する通知が送信されます。

スコープの割り当て先のFPolicyポリシーが標準のエンジンを使用するように設定されている場合は、このパラメータをに設定する必要があります `true`。
 a| 
`-is-file-extension-check-on-directories-enabled`{`true`|| `false`｝

|===