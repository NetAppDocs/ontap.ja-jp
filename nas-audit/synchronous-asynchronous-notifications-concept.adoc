---
permalink: nas-audit/synchronous-asynchronous-notifications-concept.html 
sidebar: sidebar 
keywords: synchronous, asynchronous, notifications 
summary: FPolicyでは、FPolicyインターフェイスを介して外部FPolicyサーバに通知を送信します。通知の送信方法には同期モードと非同期モードの2種類があり、通知モードによって、FPolicyサーバへの通知送信後のONTAPの動作が決まります。 
---
= ONTAP FPolicyの同期および非同期通知
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FPolicyでは、FPolicyインターフェイスを介して外部FPolicyサーバに通知を送信します。通知の送信方法には同期モードと非同期モードの2種類があり、通知モードによって、FPolicyサーバへの通知送信後のONTAPの動作が決まります。

* *非同期通知*
+
非同期通知では、ノードはFPolicyサーバからの応答を待たずに処理を続行するため、システムの全体的なスループットが向上します。このタイプの通知は、その評価結果に基づいてFPolicyサーバで処理を行う必要がないアプリケーションに適しています。たとえば、Storage Virtual Machine（SVM）管理者がファイル アクセスのアクティビティを監視および監査する場合などに使用します。

+
非同期モードで動作しているFPolicyサーバでネットワーク障害が発生した場合、障害発生中に生成されたFPolicy通知はストレージ ノードに保存されます。FPolicyサーバがオンラインに復帰すると、保存された通知が通知され、ストレージ ノードから取得できます。障害発生中に通知を保存できる時間は、最大10分まで設定可能です。

+
ONTAP 9.14.1以降では、FPolicyを使用して永続的ストアを作成し、SVM内の非同期で必須でないポリシーのファイル アクセス イベントをキャプチャできます。永続的ストアは、クライアントI/O処理をFPolicy通知処理から分離して、クライアントのレイテンシを低減するのに役立ちます。同期（必須かどうかは問わない）および非同期で必須の設定はサポートされていません。

* *同期通知*
+
同期モードで実行するように設定した場合は、すべての通知についてFPolicyサーバからの確認応答を受け取るまで、クライアントは処理を続行できません。このタイプの通知は、その評価結果に基づいて処理を行う必要がある場合に適しています。たとえば、SVM管理者が要求を許可するかどうかを外部FPolicyサーバで指定された条件に基づいて判断する場合などに使用します。





== 同期アプリケーションおよび非同期アプリケーション

FPolicyアプリケーションにはさまざまな用途があり、非同期と同期の両方に対応しています。

非同期アプリケーションとは、外部FPolicyサーバがファイルやディレクトリへのアクセスを変更したり、Storage Virtual Machine（SVM）上のデータを変更したりしないアプリケーションです。例：

* ファイル アクセスと監査ログ
* ストレージ リソースの管理


同期アプリケーションとは、外部FPolicyサーバによってデータアクセスが変更されたり、データが修正されたりするアプリケーションです。例：

* クォータの管理
* ファイル アクセス ブロッキング
* ファイルのアーカイブと階層型ストレージ管理
* 暗号化サービスと復号化サービス
* 圧縮サービスと展開サービス

