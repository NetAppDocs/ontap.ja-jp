---
sidebar: sidebar 
permalink: networking/configure_ipspaces_cluster_administrators_only_overview.html 
keywords: ipspace, ipspaces, introduction, introducing, overview, ipv4, ipv6, routing, route, domain, configure ipspaces overview, example, sample, ipspace, example of using ipspaces, sample using ipspaces, hosts.equiv, standard, property, properties, ipspace, special, ipspaces, svm, cluster, default, understanding, cluster, initialization, initialized, introducing, introduction, overview, standard properties of ipspaces, introducing the default and cluster ipspaces created during cluster initialization, default ipspace, cluster ipspace, system svm 
summary: IPspaceは、Storage Virtual Machine（SVM）が存在する個別のIPアドレス空間を定義します。 
---
= ONTAP IPspace構成について学ぶ
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
IPspaceを使用すると、単一のONTAPクラスタを設定し、複数の管理上分離されたネットワーク ドメインのクライアントが、たとえ同じIPアドレス範囲を使用している場合でもアクセスできるようにすることができます。これにより、クライアント トラフィックを分離してプライバシーとセキュリティを確保することができます。

IPspaceは、Storage Virtual Machine（SVM）が実装される、個別のIPアドレス スペースを定義します。あるIPspaceに対して定義されたポートとIPアドレスは、そのIPspace内でのみ有効です。IPspace内のSVMごとに個別のルーティング テーブルが保持されるため、SVMやIPspaceをまたがってトラフィックがルーティングされることはありません。


NOTE: IPspaceのルーティング ドメインでは、IPv4およびIPv6のアドレスがサポートされます。

単一の組織のストレージを管理する場合は、IPspaceを設定する必要はありません。単一のONTAPクラスタで複数企業のストレージを管理していて、ユーザ間のネットワーク設定がないことが確実な場合も、IPspaceを使用する必要はありません。多くの場合、Storage Virtual Machine （SVM）を専用のIPルーティング テーブルと一緒に使用することで、IPspaceを使用しなくても固有のネットワーク設定を分離できます。



== IPspaceの使用例

ここでは、IPspaceの一般的な用途として、ストレージ サービス プロバイダ（SSP）が、その顧客のA社とB社をSSPのONTAPクラスタに接続する必要があり、両方の会社が同じプライベートIPアドレスの範囲を使用する場合を取り上げます。

SSPは、クラスタに顧客用のSVMを作成し、2つのSVMからA社のネットワークへの専用ネットワーク パス、別の2つのSVMからB社のネットワークへの専用ネットワーク パスを提供します。

次の図に、この導入形態を示します。これは、両社で非プライベートIPアドレスの範囲を使用する場合に機能します。しかし、図に示すように両社が同じプライベートIPアドレスの範囲を使用すると問題が発生します。

image:ontap_nm_image9.jpeg["IPspaceの例"]

両社がプライベートIPアドレスのサブネット10.0.0.0を使用すると、次のような問題が起こります。

* 両社がそれぞれのSVMに同じIPアドレスを使用した場合は、SSPにあるクラスタ内のSVMでIPアドレスの競合が発生します。
* 両社がそれぞれのSVMに別々のIPアドレスを使用することにした場合でも、まだ問題は残ります。
* たとえば、A社のネットワークのクライアントがB社のネットワークのクライアントと同じIPアドレスを持っている場合は、本来A社のアドレス スペースのクライアント宛てのパケットが、B社のアドレス スペースのクライアントにルーティングされる（またはその逆）可能性があります。
* 両社が互いに排他的なアドレス スペースを使用する（たとえば、A社がアドレス10.0.0.0とネットワーク マスク255.128.0.0を、B社がアドレス10.128.0.0とネットワーク マスク255.128.0.0を使用する）場合は、SSPがトラフィックをA社およびB社のネットワークに正しくルーティングするための静的ルートをクラスタに設定する必要があります。
* しかし、この方法は拡張性がなく（静的ルートであるため）、安全でもありません（ブロードキャスト トラフィックがクラスタのすべてのインターフェイスに送信されるため）。この問題を解決するには、SSPが1社に1つずつ、2つのIPspaceをクラスタに定義する必要があります。トラフィックがIPspaceをまたがってルーティングされることはないので、すべてのSVMが10.0.0.0というアドレス スペースに設定されても、次の図に示すように、それぞれの会社のデータが該当するネットワークにセキュアにルーティングされます。


image:ontap_nm_image10.jpeg["IPspaceの例"]

さらに、 `/etc/ hosts`ファイル、 `/etc/hosts.equiv`ファイル、 `the /etc/rc`ファイルなどの各種設定ファイルで参照されるIPアドレスは、そのIPspaceを基準とした相対的なものです。そのため、IPspaceを使用することで、SSPは複数のSVMの設定データと認証データに同じIPアドレスを設定でき、競合が発生することはありません。



== IPspaceの標準プロパティ

クラスタの初回作成時に、特別なIPspaceがデフォルトで作成されます。さらに、IPspaceごとに特別なStorage Virtual Machine（SVM）が作成されます。

クラスタが初期化されると、次の2つのIPspaceが自動的に作成されます。

* 「Default」IPspace
+
このIPspaceは、ポート、サブネット、およびデータ提供元SVMのコンテナです。クライアントごとに別々のIPspaceを作成する必要がない構成であれば、すべてのSVMをこのIPspaceに作成できます。このIPspaceにはクラスタ管理ポートとノード管理ポートも含まれます。

* 「Cluster」IPspace
+
このIPspaceにはクラスタ内の全ノードのクラスタ ポートがすべて含まれ、クラスタの作成時に自動的に作成されます。このIPspaceは、内部のプライベート クラスタ ネットワークへの接続を提供します。ノードをクラスタに追加すると、追加したノードのクラスタ ポートが「Cluster」IPspaceに追加されます。



IPspaceごとに「システム」SVMが1つ存在します。IPspaceを作成すると、デフォルトのシステムSVMがIPspaceと同じ名前で作成されます。

* 「Cluster」IPspaceのシステムSVMは、内部プライベート クラスタ ネットワークのノード間でクラスタ トラフィックを伝送します。
+
このSVMの管理はクラスタ管理者が担当し、「Cluster」という名前が割り当てられます。

* 「Default」IPspaceのシステムSVMは、クラスタ間トラフィックを含めた、クラスタとノードの管理トラフィックを伝送します。
+
このSVMの管理はクラスタ管理者が担当し、クラスタと同じ名前が使用されます。

* ユーザが作成するカスタムIPspaceのシステムSVMは、そのSVMの管理トラフィックを伝送します。
+
このSVMの管理はクラスタ管理者が担当し、IPspaceと同じ名前が使用されます。



1つのIPspaceにクライアント用のSVMを1つ以上配置できます。各クライアントSVMは専用のデータ ボリュームと設定を持ち、他のSVMからは独立して管理されます。
