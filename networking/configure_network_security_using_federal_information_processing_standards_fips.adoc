---
sidebar: sidebar 
permalink: networking/configure_network_security_using_federal_information_processing_standards_fips.html 
keywords: fips 140-2, compliant, ssl, connections, tlsv1.2, tlsv1.1, tlsv1, enable fips, disable fips, compliance status, SSL 
summary: すべての SSL 接続に対応した Federal Information Processing Standard （ FIPS ；連邦情報処理標準） 140-2 が準拠しています 
---
= すべてのSSL接続にFIPSを使用したONTAPネットワークセキュリティの設定
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAPは、すべてのSSL接続について連邦情報処理標準（FIPS）140-2に準拠しています。SSL FIPS モードをオン/オフにしたり、SSL プロトコルをグローバルに設定したり、 ONTAP内の弱い暗号をオフにしたりすることができます。

デフォルトでは、ONTAPのSSLはFIPS準拠を無効にし、次のTLSプロトコルを有効にして設定されます。

* TLSv1.3（ONTAP 9.11.1以降）
* TLSv1.2


以前のONTAPリリースでは、次のTLSプロトコルがデフォルトで有効になっていました。

* TLSv1.1（ONTAP 9.12.1以降ではデフォルトで無効）
* TLSv1（ONTAP 9.8以降ではデフォルトで無効）


SSL FIPSモードが有効な場合、ONTAPからONTAPの外部のクライアントまたはサーバコンポーネントへのSSL通信では、SSL用のFIPS準拠の暗号が使用されます。

管理者アカウントがSSH公開鍵を使用してSVMにアクセスできるようにする場合は、SSL FIPSモードを有効にする前に、ホストキーのアルゴリズムがサポートされていることを確認する必要があります。

*注：ONTAP 9.11.1以降では、ホストキーアルゴリズムのサポートが変更されています。

[cols="30,30,30"]
|===


| ONTAP リリース | サポートされているキータイプ | サポートされていないキータイプです 


 a| 
9.11.1以降
 a| 
ECDSA - sha2 - nistp256
 a| 
rsa-sha2-512+ rsa-sha2-256+ ssh-ed25519 + ssh-dss+ssh-rsa



 a| 
9.10.1以前
 a| 
ECDSA - sha2 -nistp256 + ssh-ed25519
 a| 
SSH-DSS + ssh-rsa

|===
FIPSを有効にする前に、サポートされているキーアルゴリズムがない既存のSSH公開鍵アカウントをサポートされているキータイプで再設定する必要があります。そうしないと、管理者認証が失敗します。

詳細については、を参照してください link:../authentication/enable-ssh-public-key-accounts-task.html["SSH公開鍵アカウントの有効化"]。

ONTAP 9.18.1 では、SSL 用の ML-KEM、ML-DSA、および SLH-DSA ポスト量子コンピューティング暗号化アルゴリズムのサポートが導入され、将来の量子コンピュータ攻撃に対するセキュリティがさらに強化されます。これらのアルゴリズムは、<<FIPSの無効化,FIPSは無効です>> 。  FIPS が無効になっていて、ピアがそれをサポートしている場合、量子耐性暗号化アルゴリズムがネゴシエートされます。



== FIPSを有効にする

システムのインストールまたはアップグレードの直後に、すべてのセキュアなユーザがセキュリティ設定を調整することをお勧めします。SSL FIPSモードが有効な場合、ONTAPからONTAPの外部のクライアントまたはサーバコンポーネントへのSSL通信では、SSL用のFIPS準拠の暗号が使用されます。


NOTE: FIPSが有効な場合、RSAキーの長さが4096の証明書をインストールまたは作成することはできません。

.手順
. advanced権限レベルに切り替えます。
+
`set -privilege advanced`

. FIPSを有効にします。
+
`security config modify * -is-fips-enabled true`

. 続行するかどうかを尋ねられたら、 `y`
. ONTAP 9.9.1 以降では、再起動は必要ありません。  ONTAP 9.8 以前を実行している場合は、クラスタ内の各ノードを 1 つずつ手動で再起動します。


.例
ONTAP 9 .9.1以降を実行している場合は、警告メッセージは表示されません。

....
security config modify -is-fips-enabled true

Warning: This command will enable FIPS compliance and can potentially cause some non-compliant components to fail. MetroCluster and Vserver DR require FIPS to be enabled on both sites in order to be compatible.
Do you want to continue? {y|n}: y

Warning: When this command completes, reboot all nodes in the cluster. This is necessary to prevent components from failing due to an inconsistent security configuration state in the cluster. To avoid a service outage, reboot one node at a time and wait for it to completely initialize before rebooting the next node. Run "security config status show" command to monitor the reboot status.
Do you want to continue? {y|n}: y
....
およびSSL FIPSモードの設定の詳細については、をlink:https://docs.netapp.com/us-en/ontap-cli/security-config-modify.html["ONTAPコマンド リファレンス"^]参照し `security config modify`てください。



== FIPSの無効化

ONTAP 9.18.1 以降、 ONTAPの SSL は、ML-KEM、ML-DSA、および SLH-DSA の量子コンピューティング暗号化アルゴリズムをサポートしています。これらのアルゴリズムは、FIPS が無効になっていて、ピアがサポートしている場合にのみ使用できます。

.手順
. advanced権限レベルに切り替えます。
+
`set -privilege advanced`

. FIPSを無効にするには、
+
`security config modify -is-fips-enabled false`

. 続行するかどうかを尋ねられたら、と入力し `y`ます。
. ONTAP 9.9.1 以降では、再起動は必要ありません。ONTAP 9.8以前を実行している場合は、クラスタ内の各ノードを手動でリブートします。


SSLv3 プロトコルを使用する必要がある場合は、上記の手順で FIPS を無効にする必要があります。  SSLv3 は、FIPS が無効になっている場合にのみ有効にできます。

次のコマンドで SSLv3 を有効にできます。ONTAP 9.9.1以降を実行している場合、警告メッセージは表示されません。

....
security config modify -supported-protocols SSLv3

Warning: Enabling the SSLv3 protocol may reduce the security of the interface, and is not recommended.
Do you want to continue? {y|n}: y

Warning: When this command completes, reboot all nodes in the cluster. This is necessary to prevent components from failing due to an inconsistent security configuration state in the cluster. To avoid a service outage, reboot one node at a time and wait for it to completely initialize before rebooting the next node. Run "security config status show" command to monitor the reboot status.
Do you want to continue? {y|n}: y
....


== FIPS準拠ステータスの表示

クラスタ全体で現在のセキュリティ設定が実行されているかどうかを確認できます。

.手順
. ONTAP 9.8 以前を実行している場合は、クラスタ内の各ノードを 1 つずつ手動で再起動します。
. 現在の準拠ステータスを表示します。
+
`security config show`

+
....
cluster1::> security config show
Cluster    Supported
FIPS Mode  Protocols Supported Cipher Suites
---------- --------- ----------------------------------------------------------
false      TLSv1.3,  TLS_RSA_WITH_AES_128_CCM, TLS_RSA_WITH_AES_128_CCM_8,
           TLSv1.2   TLS_RSA_WITH_AES_128_GCM_SHA256,
                     TLS_RSA_WITH_AES_128_CBC_SHA,
                     TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_256_CCM,
                     TLS_RSA_WITH_AES_256_CCM_8,
                     ...
....
+
の詳細については `security config show`、をlink:https://docs.netapp.com/us-en/ontap-cli/security-config-show.html["ONTAPコマンド リファレンス"^]参照してください。



.関連情報
* link:https://csrc.nist.gov/pubs/fips/203/final["FIPS 203: モジュール格子ベースの鍵カプセル化メカニズム標準 (ML-KEM)"^]
* link:https://csrc.nist.gov/pubs/fips/204/final["FIPS 204: モジュール格子ベースのデジタル署名標準 (ML-DSA)"^]
* link:https://csrc.nist.gov/pubs/fips/205/final["FIPS 205: ステートレスハッシュベースデジタル署名標準 (SLH-DSA)"^]

