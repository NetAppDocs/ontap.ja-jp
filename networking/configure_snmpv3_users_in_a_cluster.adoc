---
sidebar: sidebar 
permalink: networking/configure_snmpv3_users_in_a_cluster.html 
keywords: configure, configuration, configuring, setup, setting, set, up, snmp, snmpv3, users, user, cluster, security, secure, configure an snmpv3 user to run the snmp utilities from the snmp manager, security login create command, configure snmpv3 users in a cluster, snmpv3 security parameters, examples for different security levels, security level authpriv, fips mode, snmpwalk test, security level authnopriv 
summary: SNMPマネージャからSNMPユーティリティを実行するSNMPv3ユーザーを設定する 
---
= ONTAPクラスタでSNMPv3ユーザーを構成する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
SNMPv3は、SNMPv1やSNMPv2cに比べて安全なプロトコルです。SNMPv3を使用するには、SNMPマネージャからSNMPユーティリティを実行するためのSNMPv3ユーザを設定する必要があります。

.手順
 `security login create`コマンドを使用して、SNMPv3 ユーザーを作成します。

次の情報を指定するように求められます。

* エンジン ID：デフォルトおよび推奨値はローカル エンジン ID です
* 認証プロトコル
* 認証パスワード
* プライバシー プロトコル
* プライバシー プロトコルのパスワード


.結果
SNMPv3ユーザは、ユーザ名とパスワードを使用してSNMPマネージャからログインし、SNMPユーティリティのコマンドを実行できます。



== SNMPv3セキュリティ パラメータ

SNMPv3には認証機能が備わっており、この機能を選択すると、コマンドの呼び出し時に、ユーザ名、認証プロトコル、認証キー、および必要なセキュリティ レベルの入力が必要になります。

次の表に、SNMPv3セキュリティ パラメータを示します。

[cols="25,25,50"]
|===


| パラメータ | コマンドライン オプション | 概要 


 a| 
engineID
 a| 
-e EngineID
 a| 
SNMPエージェントのエンジンID。デフォルト値はローカルエンジンID（推奨）です。



 a| 
securityName
 a| 
-u Name
 a| 
ユーザー名は32文字を超えてはなりません。



 a| 
authProtocol
 a| 
-a {none | MD5 | SHA | SHA-256}
 a| 
認証タイプは、none、MD5、SHA、または SHA-256 になります。



 a| 
authKey
 a| 
-A パスフレーズ
 a| 
最低 8 文字のパスフレーズ。



 a| 
securityLevel
 a| 
-l {authNoPriv | AuthPriv | noAuthNoPriv}
 a| 
セキュリティ レベルは、認証、プライバシーなし、認証、プライバシーあり、または認証なし、プライバシーなしのいずれかになります。



 a| 
privProtocol
 a| 
-x { none | des | aes128}
 a| 
プライバシー プロトコルは、none、des、またはaes128です。



 a| 
privPassword
 a| 
-X パスワード
 a| 
最低 8 文字のパスワード。

|===


== さまざまなセキュリティ レベルの例

この例では、異なるセキュリティ レベルで作成された SNMPv3 ユーザーが `snmpwalk`などの SNMP クライアント側コマンドを使用してクラスタ オブジェクトを照会する方法を示します。

パフォーマンスを高めるには、テーブルから単一または少数のオブジェクトを取得するのではなく、テーブル内のすべてのオブジェクトを取得します。


NOTE: 認証プロトコルが SHA の場合は、 `snmpwalk` 5.3.1 以降を使用する必要があります。



=== セキュリティ レベル：authPriv

authPrivセキュリティ レベルのSNMPv3ユーザを作成した場合の出力を次に示します。

....
security login create -user-or-group-name snmpv3user -application snmp -authentication-method usm
Enter the authoritative entity's EngineID [local EngineID]:
Which authentication protocol do you want to choose (none, md5, sha, sha2-256) [none]: md5

Enter the authentication protocol password (minimum 8 characters long):
Enter the authentication protocol password again:
Which privacy protocol do you want to choose (none, des, aes128) [none]: des
Enter privacy protocol password (minimum 8 characters long):
Enter privacy protocol password again:
....


==== FIPSモード

....
security login create -user-or-group-name snmpv3user -application snmp -authmethod usm
Enter the authoritative entity's EngineID [local EngineID]:
Which authentication protocol do you want to choose (sha, sha2-256) [sha]

Enter authentication protocol password (minimum 8 characters long):
Enter authentication protocol password again:
Which privacy protocol do you want to choose (aes128) [aes128]:
Enter privacy protocol password (minimum 8 characters long):
Enter privacy protocol password again:
....


==== snmpwalkテスト

このSNMPv3ユーザがsnmpwalkコマンドを実行した場合の出力を次に示します。

パフォーマンスを高めるには、テーブルから単一または少数のオブジェクトを取得するのではなく、テーブル内のすべてのオブジェクトを取得します。

....
$ snmpwalk -v 3 -u snmpv3user -a SHA -A password1! -x DES -X password1! -l authPriv 192.0.2.62 .1.3.6.1.4.1.789.1.5.8.1.2
Enterprises.789.1.5.8.1.2.1028 = "vol0"
Enterprises.789.1.5.8.1.2.1032 = "vol0"
Enterprises.789.1.5.8.1.2.1038 = "root_vs0"
Enterprises.789.1.5.8.1.2.1042 = "root_vstrap"
Enterprises.789.1.5.8.1.2.1064 = "vol1"
....


=== セキュリティ レベル：authNoPriv

authNoPrivセキュリティ レベルのSNMPv3ユーザを作成した場合の出力を次に示します。

....
security login create -user-or-group-name snmpv3user -application snmp -authmethod usm -role read-only
Enter the authoritative entity's EngineID [local EngineID]:
Which authentication protocol do you want to choose (none, md5, sha) [none]: md5
....


==== FIPSモード

FIPSでは、プライバシープロトコルに*none*を選択することはできません。そのため、FIPSモードでauthNoPriv SNMPv3ユーザーを設定することはできません。



==== snmpwalkテスト

このSNMPv3ユーザがsnmpwalkコマンドを実行した場合の出力を次に示します。

パフォーマンスを高めるには、テーブルから単一または少数のオブジェクトを取得するのではなく、テーブル内のすべてのオブジェクトを取得します。

....
$ snmpwalk -v 3 -u snmpv3user1 -a MD5 -A password1!  -l authNoPriv 192.0.2.62 .1.3.6.1.4.1.789.1.5.8.1.2
Enterprises.789.1.5.8.1.2.1028 = "vol0"
Enterprises.789.1.5.8.1.2.1032 = "vol0"
Enterprises.789.1.5.8.1.2.1038 = "root_vs0"
Enterprises.789.1.5.8.1.2.1042 = "root_vstrap"
Enterprises.789.1.5.8.1.2.1064 = "vol1"
....


=== セキュリティ レベル：noAuthNoPriv

noAuthNoPrivセキュリティ レベルのSNMPv3ユーザを作成した場合の出力を次に示します。

....
security login create -user-or-group-name snmpv3user -application snmp -authmethod usm -role read-only
Enter the authoritative entity's EngineID [local EngineID]:
Which authentication protocol do you want to choose (none, md5, sha) [none]: none
....


==== FIPSモード

FIPS では、プライバシー プロトコルに *none* を選択することはできません。



==== snmpwalkテスト

このSNMPv3ユーザがsnmpwalkコマンドを実行した場合の出力を次に示します。

パフォーマンスを高めるには、テーブルから単一または少数のオブジェクトを取得するのではなく、テーブル内のすべてのオブジェクトを取得します。

....
$ snmpwalk -v 3 -u snmpv3user2 -l noAuthNoPriv 192.0.2.62 .1.3.6.1.4.1.789.1.5.8.1.2
Enterprises.789.1.5.8.1.2.1028 = "vol0"
Enterprises.789.1.5.8.1.2.1032 = "vol0"
Enterprises.789.1.5.8.1.2.1038 = "root_vs0"
Enterprises.789.1.5.8.1.2.1042 = "root_vstrap"
Enterprises.789.1.5.8.1.2.1064 = "vol1"
....
 `security login create`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/security-login-create.html["ONTAPコマンド リファレンス"^]をご覧ください。
