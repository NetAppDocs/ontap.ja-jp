---
sidebar: sidebar 
permalink: networking/create_a_subnet.html 
keywords: move, moving, broadcast, domain, ipspace, create a subnet, network subnet create, network subnet show -ipspace, force-update-lif-associations, network subnet rename 
summary: ONTAPネットワーク構成用に特定のIPアドレスブロックを割り当てまたは予約するためのサブネットを作成します。 
---
= ONTAPネットワークのサブネットを作成する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
サブネットを作成してIPv4またはIPv6アドレスの特定のブロックを割り当てることができます。このサブネットは、あとでSVMのLIFを作成するときに使用します。

IPアドレスとネットワーク マスクの値をLIFごとに指定しなくても、サブネット名を指定して簡単にLIFを作成できるようになります。

.開始する前に
このタスクを実行するには、クラスタ管理者である必要があります。

サブネットを追加するブロードキャスト ドメインとIPspaceが存在していなければなりません。

.タスク概要
* すべてのサブネット名がIPspace内で一意である必要があります。
* IPアドレスの範囲をサブネットに割り当てるときは、別々のサブネットまたはホストで同じIPアドレスが使用されることのないように、ネットワーク内でIPアドレスの範囲が重複しないことを確認してください。
* サブネットの定義時にゲートウェイを指定すると、そのサブネットを使用してLIFを作成したときに、そのゲートウェイへのデフォルト ルートがSVMに自動的に追加されます。サブネットを使用しない場合、またはサブネットの定義時にゲートウェイを指定しない場合は、 `route create`コマンドを使用してSVMにルートを手動で追加する必要があります。
* NetApp は、データSVM上のすべてのLIFに対してサブネットオブジェクトを作成することを推奨しています。これは特にMetroCluster構成において重要です。サブネットオブジェクトには関連付けられたブロードキャストドメインがあるため、サブネットオブジェクトによってONTAPがデスティネーションクラスタ上のフェイルオーバーターゲットを判別できるようになります。


.手順
ONTAP System Manager または ONTAP CLI を使用してサブネットを作成できます。

[role="tabbed-block"]
====
.System Manager
--
ONTAP 9.12.0以降では、System Managerを使用してサブネットを作成できます。

.手順
. *Network > Overview > Subnets*を選択します。
. image:icon_add.gif["アイコンを追加"]をクリックしてサブネットを作成します。
. サブネットの名前を指定します。
. サブネットのIPアドレスを指定します。
. サブネット マスクを設定します。
. サブネットを構成するIPアドレスの範囲を定義します。
. 必要に応じて、ゲートウェイを指定します。
. サブネットが属するブロードキャスト ドメインを選択します。
. 変更を保存します。
+
.. 入力したIPアドレスまたは範囲がすでにインターフェイスで使用されている場合は、次のメッセージが表示されます：
`An IP address in this range is already in use by a LIF. Associate the LIF with this subnet?`
.. *OK*をクリックすると、既存のLIFがサブネットに関連付けられます。




--
.CLI
--
CLIを使用してサブネットを作成します。

....
network subnet create -subnet-name subnet_name -broadcast-domain <broadcast_domain_name> [- ipspace <ipspace_name>] -subnet <subnet_address> [-gateway <gateway_address>] [-ip-ranges <ip_address_list>] [-force-update-lif-associations <true>]
....
* `subnet_name` は、作成するレイヤー 3 サブネットの名前です。
+
「Mgmt」のようなテキスト文字列形式の名前を付けることも、192.0.2.0/24などのサブネットのIPアドレスの値にすることもできます。

* `broadcast_domain_name`は、サブネットが存在するブロードキャスト ドメインの名前です。
* `ipspace_name`は、ブロードキャスト ドメインが含まれる IPspace の名前です。
+
このオプションの値を設定しないと、「Default」IPspaceが使われます。

* `subnet_address`は、サブネットのIPアドレスとマスクです（例：192.0.2.0/24）。
* `gateway_address`は、サブネットのデフォルト ルートのゲートウェイです（例：192.0.2.1）。
* `ip_address_list`は、サブネットに割り当てられる IP アドレスのリストまたは範囲です。
+
個別のIPアドレス、IPアドレスの範囲、またはその組み合わせをカンマで区切って指定できます。

*  `-force-update-lif-associations`オプションには `true`の値を設定できます。
+
指定した範囲のIPアドレスを現在使用しているサービス プロセッサまたはネットワーク インターフェイスがある場合は、コマンドが失敗します。上記のオプションの値をtrueにすることで、手動でアドレスが指定されているインターフェイスが現在のサブネットに関連付けられ、コマンドは問題なく実行されます。



次のコマンドは、Default IPspaceのブロードキャスト ドメインDefault-1にsub1というサブネットを作成します。サブネットのIPv4アドレスとマスク、ゲートウェイ、IPアドレスの範囲を指定しています。

....
network subnet create -subnet-name sub1 -broadcast-domain Default-1 -subnet 192.0.2.0/24 - gateway 192.0.2.1 -ip-ranges 192.0.2.1-192.0.2.100, 192.0.2.122
....
次のコマンドは、「Default」IPspaceのブロードキャスト ドメインDefaultにsub2というサブネットを作成します。IPv6アドレスの範囲を指定しています。

....
network subnet create -subnet-name sub2 -broadcast-domain Default -subnet 3FFE::/64 - gateway 3FFE::1 -ip-ranges "3FFE::10-3FFE::20"
....
 `network subnet create`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/network-subnet-create.html["ONTAPコマンド リファレンス"^]を参照してください。

.終了後の操作
サブネット内のアドレスを使用して、SVMとインターフェイスをIPspaceに割り当てることができます。

既存のサブネットの名前を変更する必要がある場合は、 `network subnet rename` コマンドを使用します。

 `network subnet rename`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/network-subnet-rename.html["ONTAPコマンド リファレンス"^]を参照してください。

--
====