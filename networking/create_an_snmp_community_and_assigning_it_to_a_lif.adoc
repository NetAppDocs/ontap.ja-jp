---
sidebar: sidebar 
permalink: networking/create_an_snmp_community_and_assigning_it_to_a_lif.html 
keywords: create, creation, creating, add, adding, snmp, community, assign, assigning, lif, logical, interface, create an snmp community and assigning it to a lif, snmpwalk, snmpget, snmp community add 
summary: 管理ステーションと SVM の間の認証メカニズムとして機能する SNMP コミュニティを作成します 
---
= SNMP コミュニティを作成して LIF に割り当てます
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
SNMPv1 および SNMPv2c を使用する場合に管理ステーションと Storage Virtual Machine （ SVM ）間の認証メカニズムとして機能する、 SNMP コミュニティを作成できます。

データSVMにSNMPコミュニティを作成することで、などのコマンドを実行できます `snmpwalk` および `snmpget` （データLIF）。

.このタスクについて
* ONTAP の新規インストールでは、 SNMPv1 と SNMPv2c はデフォルトで無効になっています。
+
SNMPv1 と SNMPv2c は、 SNMP コミュニティを作成すると有効になります。

* ONTAP でサポートされるのは、読み取り専用のコミュニティです。
* デフォルトでは、データLIFに割り当てられている「data」ファイアウォールポリシーでは、SNMPサービスがに設定されています `deny`。
+
新しいファイアウォールポリシーを作成し、SNMPサービスをに設定する必要があります `allow` データSVMのSNMPユーザを作成する場合。

+

NOTE: ONTAP 9.10.1以降では、ファイアウォールポリシーは廃止され、完全にLIFのサービスポリシーに置き換えられました。詳細については、を参照してください link:../networking/configure_firewall_policies_for_lifs.html["LIF のファイアウォールポリシーを設定します"]。

* 管理 SVM とデータ SVM の両方に、 SNMPv1 ユーザと SNMPv2c ユーザの SNMP コミュニティを作成できます。
* SVMはSNMP標準の一部ではないため、データLIFでのクエリにはネットアップのルートOID（1.3.6.1.4.1.789）を含める必要があります。次に例を示します。 `snmpwalk -v 2c -c snmpNFS 10.238.19.14 1.3.6.1.4.1.789`。


.手順
. を使用してSNMPコミュニティを作成します `system snmp community add` コマンドを実行します次のコマンドは、管理 SVM cluster-1 に SNMP コミュニティを作成する方法を示しています。
+
....
system snmp community add -type ro -community-name comty1 -vserver cluster-1
....
+
次のコマンドは、データ SVM vs1 に SNMP コミュニティを作成する方法を示しています。

+
....
system snmp community add -type ro -community-name comty2 -vserver vs1
....
. system snmp community show コマンドを使用して、コミュニティが作成されたことを確認します。
+
次のコマンドは、 SNMPv1 および SNMPv2c 用に作成された 2 つのコミュニティを表示します。

+
....
system snmp community show
cluster-1
rocomty1
vs1
rocomty2
....
. を使用して、「data」ファイアウォールポリシーでSNMPがサービスとして許可されているかどうかを確認します `system services firewall policy` `show` コマンドを実行します
+
次のコマンドは、デフォルトの「 data 」ファイアウォールポリシーでは SNMP サービスが許可されていないことを示しています（ SNMP サービスは「 mgmt 」ファイアウォールポリシーでのみ許可されています）。

+
....
system services firewall policy show
Vserver Policy       Service    Allowed
------- ------------ ---------- -------------------
cluster-1
        data
                     dns        0.0.0.0/0
                     ndmp       0.0.0.0/0
                     ndmps      0.0.0.0/0
cluster-1
        intercluster
                     https      0.0.0.0/0
                     ndmp       0.0.0.0/0
                     ndmps      0.0.0.0/0
cluster-1
        mgmt
                     dns        0.0.0.0/0
                     http       0.0.0.0/0
                     https      0.0.0.0/0
                     ndmp       0.0.0.0/0
                     ndmps      0.0.0.0/0
                     ntp        0.0.0.0/0
                     snmp       0.0.0.0/0
                     ssh        0.0.0.0/0
....
. を使用したアクセスを許可する新しいファイアウォールポリシーを作成します `snmp` を使用してサービスを提供します `system services firewall policy create` コマンドを実行します
+
次のコマンドは、「data1」という名前の新しいデータファイアウォールポリシーを作成して、を許可します `snmp`

+
....
system services firewall policy create -policy data1 -service snmp -vserver  vs1 -allow-list 0.0.0.0/0

cluster-1::> system services firewall policy show -service snmp
Vserver  Policy       Service    Allowed
-------  ------------ ---------- -------------------
cluster-1
         mgmt
                      snmp       0.0.0.0/0
vs1
         data1
                      snmp       0.0.0.0/0
....
. firewall-policy パラメータを指定して「 network interface modify 」コマンドを使用し、ファイアウォールポリシーをデータ LIF に適用します。
+
次のコマンドは、新しい「 data1 」ファイアウォールポリシーを LIF 「 datalif1 」に割り当てます。

+
....
network interface modify -vserver vs1 -lif datalif1 -firewall-policy data1
....

