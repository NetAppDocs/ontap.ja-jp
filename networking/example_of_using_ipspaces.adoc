---
sidebar: sidebar 
permalink: networking/example_of_using_ipspaces.html 
keywords: example, sample, ipspace, example of using ipspaces, sample using ipspaces, hosts.equiv 
summary: IPspace を使用した例 
---
= IPspace の使用例
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ここでは、 IPspace の一般的な用途として、ストレージサービスプロバイダ（ SSP ）が、その顧客の A 社と B 社を SSP の ONTAP クラスタに接続させる必要があり、両方の会社が同じプライベート IP アドレスの範囲を使用する場合を取り上げます。

SSP は、顧客ごとにクラスタに SVM を作成し、 2 つの SVM から A 社のネットワークへの専用ネットワークパス、別の 2 つの SVM から B 社のネットワークへの専用ネットワークパスを提供します。

次の図に、このタイプの導入を示します。両社で非プライベート IP アドレスの範囲を使用する場合に機能します。ただし、図では、両方の企業が同じプライベート IP アドレス範囲を使用しているために問題が発生しています。

image:ontap_nm_image9.jpeg["IPspace の例"]

両社がプライベート IP アドレスのサブネット 10.0.0.0 を使用すると、次のような問題が起こります。

* 両社がそれぞれの SVM に同じ IP アドレスを使用した場合は、 SSP にあるクラスタ内の SVM で IP アドレスの競合が発生します。
* 両社がそれぞれの SVM に別々の IP アドレスを使用することにした場合でも、まだ問題は残ります。
* たとえば、 A のネットワーク内のクライアントの IP アドレスが B のネットワーク内のクライアントと同じ場合、 A のアドレス空間内のクライアント宛てのパケットは B のアドレス空間内のクライアントにルーティングされ、その逆も同様です。
* 両社が相互に排他的なアドレススペースを使用する場合（たとえば、 A がアドレス 10.0.0.0 とネットワークマスク 255.128.0.0 を、 B がアドレス 10.128.0.0 とネットワークマスク 255.128.0.0 を使用する場合）は、次のように入力します。 SSP は、トラフィックを A および B のネットワークに適切にルーティングするように、クラスタ上のスタティックルートを設定する必要があります。
* この解決策は拡張性に優れておらず（静的ルートであるため）、セキュアではありません（ブロードキャストトラフィックはクラスタのすべてのインターフェイスに送信されます）。この問題を解決するために、 SSP はクラスタに 2 つの IPspace を定義します（会社ごとに 1 つ）。トラフィックが IPspace をまたがってルーティングされることはないので、すべての SVM が 10.0.0.0 というアドレススペースに設定されても、次の図に示すように、それぞれの会社のデータが該当するネットワークにセキュアにルーティングされます。


image:ontap_nm_image10.jpeg["IPspace の例"]

また、などのさまざまな構成ファイルで参照されるIPアドレスもあります `/etc/ hosts` ファイル、 `/etc/hosts.equiv` ファイル、および `the /etc/rc` ファイルは、そのIPspaceに相対的です。そのため、 IPspace を正しく使用すれば、 SSP が複数の SVM の設定と認証データに同じ IP アドレスを設定しても競合することはありません。
