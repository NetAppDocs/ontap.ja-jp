---
sidebar: sidebar 
permalink: networking/migrate_a_lif.html 
keywords: move the lif, change lif port, migrate a lif, migrate a LIF to a different port on the same node or a different node within the cluster 
summary: LIFを同じノード上の別のポートまたはクラスタ内の別のノードに移行する 
---
= ONTAP LIFの移行
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ポートで障害が発生した場合やメンテナンスを行う場合など、同じノードの別のポートやクラスタ内の別のノードにLIFを移行しなければならないことがあります。LIFの移行はLIFのフェイルオーバーと似ています。ただし、前者は手動で行う操作であるのに対し、後者はLIFの現在のネットワーク ポートのリンク障害に対処するために自動的に行われる移行です。

.開始する前に
* LIFのフェイルオーバー グループを設定しておく必要があります。
* デスティネーションのノードおよびポートが動作していて、ソース ポートと同じネットワークにアクセスできる必要があります。


.タスク概要
* BGP LIFはホーム ポートに配置され、他のノードやポートに移行することはできません。
* ノードからNICを削除する前に、NICに属しているポートでホストされているLIFをクラスタ内の他のポートに移行する必要があります。
* クラスタLIFを移行するコマンドは、そのクラスタLIFがホストされているノードで実行する必要があります。
* ノードを対象とした管理LIF、クラスタLIF、クラスタ間LIFなど、ノードを対象としたLIFをリモート ノードに移行することはできません。
* NFSv4のLIFをノード間で移行したときは、そのLIFが新しいポートで使用できるようになるまで、45秒ほどかかります。
+
この問題を防ぐには、NFSv4.1を使用します。

* ONTAP 9.11.1以降を実行するオールフラッシュSANアレイ（ASA）プラットフォームのiSCSI LIFを移行できます。
+
移行先は、ホーム ノードまたはHAパートナーのポートに限定されます。

* プラットフォームがONTAPバージョン9.11.1以降を実行するオールフラッシュSANアレイ（ASA）ではない場合、iSCSI LIFをノード間で移行することはできません。
+
この制限を回避するには、宛先ノードにiSCSI LIFを作成する必要があります。link:../networking/create_a_lif.html["iSCSI LIFの作成"]の詳細を確認してください。

* NFS over RDMAのLIF（ネットワークインターフェイス）を移行する場合は、移行先ポートがRoCE対応であることを確認する必要があります。CLIを使用してLIFを移行する場合はONTAP 9.10.1以降、System Managerを使用して移行する場合はONTAP 9.12.1を実行している必要があります。System ManagerでRoCE対応の移行先ポートを選択したら、*RoCEポートを使用する*の横にあるチェックボックスをオンにして、移行を正常に完了する必要があります。link:../nfs-rdma/configure-lifs-task.html["RDMA経由のNFS用のLIFの設定"]の詳細を確認してください。
* VMware VAAIのコピー オフロード処理は、ソースLIFまたはデスティネーションLIFを移行すると失敗します。コピー オフロードの詳細については、以下を参照してください。
+
** link:../nfs-admin/support-vmware-vstorage-over-nfs-concept.html["NFS環境"]
** link:../san-admin/storage-virtualization-vmware-copy-offload-concept.html["SAN環境"]




実行する手順は、System ManagerとCLIのどちらのインターフェイスを使用するかによって異なります。

[role="tabbed-block"]
====
.System Manager
--
*System Managerを使用してネットワークインターフェイスを移行する*

.手順
. *ネットワーク > 概要 > ネットワーク インターフェイス*を選択します。
. 変更するネットワーク インターフェイスの横にあるimage:icon_kabob.gif["メニューオプションアイコン"] *> Migrate*を選択します。
+

NOTE: iSCSI LIFの場合、[*インターフェイスの移行*]ダイアログボックスで、HAパートナーの宛先ノードとポートを選択します。

+
iSCSI LIFを完全に移行する場合は、チェック ボックスをオンにします。完全な移行を行う前に、iSCSI LIFがオフラインになっている必要があります。また、完全に移行したiSCSI LIFは元に戻すことができません。リバートのオプションはありません。

. *Migrate*をクリックします。
. 変更を保存します。


--
.CLI
--
*CLIを使用してLIFを移行する*

.手順
特定のLIFを移行するかすべてのLIFを移行するかに応じて、該当する操作を実行します。

[cols="30,70"]
|===


| 移行する項目 | 入力するコマンド 


 a| 
特定のLIF
 a| 
`network interface migrate`



 a| 
ノード上のすべてのデータLIFとクラスタ管理LIF
 a| 
`network interface migrate-all`



 a| 
ポートのすべてのLIF
 a| 
`network interface migrate-all -node <node> -port <port>`

|===
次の例は、SVM `vs0`上の `datalif1`という名前のLIFを `node0b`のポート `e0d`に移行する方法を示しています：

....
network interface migrate -vserver vs0 -lif datalif1 -dest-node node0b -dest-port e0d
....
次の例は、現在（ローカル）のノードからすべてのデータおよびクラスタ管理LIFを移行する方法を示しています。

....
network interface migrate-all -node local
....
--
====
.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/network-interface-migrate.html["network interface migrate"^]

