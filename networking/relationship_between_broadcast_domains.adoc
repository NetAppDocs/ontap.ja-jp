---
sidebar: sidebar 
permalink: networking/relationship_between_broadcast_domains.html 
keywords: relationship, broadcast, domain, failover, fail, over, group, policy, policies, relationship between broadcast domains, failover groups, and failover policies, comparing broadcast domains, failover groups, and failover policies, port failover, network interface show -failover, decide which lif failover policy to use, failover policy decision tree, default failover policies by lif type, sfo-partner-only 
summary: ブロードキャストドメイン、フェイルオーバーグループ、フェイルオーバーポリシーは連携して、障害発生時にどのポートを引き継ぐかを決定します 
---
= ONTAPネットワークで使用するLIFフェイルオーバーポリシーを決定する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ブロードキャスト ドメイン、フェイルオーバー グループ、およびフェイルオーバー ポリシーの3つを組み合わせることで、LIFが設定されたノードまたはポートに障害が発生した場合にどのポートがテイクオーバーするかが決まります。

ブロードキャスト ドメインは、同じレイヤ2のイーサネット ネットワーク内にある到達可能なすべてのポートをリストします。いずれかのポートから送信されたイーサネット ブロードキャスト パケットは、ブロードキャスト ドメイン内の他のすべてのポートで認識されます。ブロードキャスト ドメインのこの特性はLIFにとって重要で、LIFがブロードキャスト ドメイン内の他のどのポートにフェイルオーバーしても、元のポートから到達できたすべてのローカル ホストとリモート ホストに引き続き到達できることを意味します。

フェイルオーバー グループは、相互にLIFフェイルオーバーが可能なブロードキャスト ドメイン内のポートを定義します。各ブロードキャスト ドメインには、すべてのポートを含むフェイルオーバー グループが1つあります。このフェイルオーバー グループは、LIF用に推奨されるデフォルトのフェイルオーバー グループです。ブロードキャスト ドメイン内の同じリンク速度のポートで構成されるフェイルオーバー グループなど、より限定的なフェイルオーバー グループも作成できます。

フェイルオーバー ポリシーは、ノードまたはポートが停止したときにLIFがフェイルオーバー グループのポートをどのように使用するかを規定します。フェイルオーバー グループに適用されるフィルタの一種と考えることができます。LIFのフェイルオーバー ターゲット（LIFがフェイルオーバーできるポートのセット）は、LIFのフェイルオーバー ポリシーをブロードキャスト ドメイン内のLIFのフェイルオーバー グループに適用することで決まります。

LIFのフェイルオーバー ターゲットは、次のCLIコマンドを使用して表示できます。

....
network interface show -failover
....
LIFのタイプに応じたデフォルトのフェイルオーバー ポリシーを使用することを強く推奨します。



== 使用するLIFフェイルオーバー ポリシーの決定

推奨されるデフォルトのフェイルオーバー ポリシーを使用するか、LIFのタイプと環境に基づいて変更するかを決定します。



=== フェイルオーバー ポリシーのデシジョン ツリー

image:LIF_failover_decision_tree.png["LIFフェイルオーバーポリシーの決定ツリー画像"]



=== LIFタイプ別のデフォルトのフェイルオーバー ポリシー

[cols="25,25,50"]
|===


| LIFタイプ | デフォルトのフェイルオーバー ポリシー | 概要 


| BGPのLIF | 無効 | 別のポートにフェイルオーバーしません。 


| クラスタLIF | local-only | 同じノードのポートにのみフェイルオーバーします。 


| クラスタ管理LIF | broadcast-domain-wide | クラスタ内のすべてのノードの、同じブロードキャスト ドメイン内のポートにフェイルオーバーします。 


| クラスタ間LIF | local-only | 同じノードのポートにのみフェイルオーバーします。 


| NASデータLIF | system-defined | HAパートナーでない他のいずれかのノードにフェイルオーバーします。 


| ノード管理LIF | local-only | 同じノードのポートにのみフェイルオーバーします。 


| SANデータLIF | 無効 | 別のポートにフェイルオーバーしません。 
|===
「sfo-partner-only」フェイルオーバー ポリシーはデフォルトではありませんが、LIFをホーム ノードまたはSFOパートナー上のポートのみにフェイルオーバーする場合に使用できます。

.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/network-port-show.html["network interface show"^]

