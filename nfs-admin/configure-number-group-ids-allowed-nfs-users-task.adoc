---
permalink: nfs-admin/configure-number-group-ids-allowed-nfs-users-task.html 
sidebar: sidebar 
keywords: ontap, authentication, nfs, group id, rpcsec_gss 
summary: デフォルト グループ以外のグループのメンバーであるユーザーに対して、Kerberos認証を使用してNFSユーザー資格情報を処理するためのグループIDの数を増やします。 
---
= ONTAP SVMのNFSユーザーに許可されるグループIDの数を設定します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
デフォルトでは、ONTAPはKerberos（RPCSEC_GSS）認証を使用してNFSユーザクレデンシャルを処理する際に、最大32個のグループIDをサポートします。AUTH_SYS認証を使用する場合、RFC 5531で定義されているように、グループIDのデフォルトの最大数は16です。デフォルト数を超えるグループに所属するユーザがいる場合は、最大数を1,024まで増やすことができます。

.タスク概要
デフォルト数を超えるグループIDがクレデンシャルに設定されている場合、残りのグループIDは切り捨てられ、そのユーザがストレージ システムのファイルへのアクセスを試みるとエラーが発生する可能性があります。SVMあたりの最大グループ数は、環境内の最大グループ数と同じ数に設定する必要があります。


NOTE: デフォルトの最大数である16を超えるグループIDを使用する拡張グループ(`-auth-sys-extended-groups`を有効にするためのAUTH_SYS認証の前提条件を理解するには、link:https://kb.netapp.com/on-prem/ontap/da/NAS/NAS-KBs/What_are_the_prerequisites_for_enabling_auth_sys_extended_groups#["NetAppナレッジベース：auth-sys-extended-groups を有効にするための前提条件は何ですか？"^]を参照してください

次の表は、3つのサンプル構成でグループIDの最大数を決定する `vserver nfs modify`コマンドの2つのパラメータを示しています：

[cols="40,30,30"]
|===


| パラメータ | 設定 | 結果のグループIDの制限 


 a| 
`-extended-groups-limit`

`-auth-sys-extended-groups`
 a| 
`32`

`disabled`

これらはデフォルト設定です。
 a| 
RPCSEC_GSS：32

AUTH_SYS：16



 a| 
`-extended-groups-limit`

`-auth-sys-extended-groups`
 a| 
`256`

`disabled`
 a| 
RPCSEC_GSS：256

AUTH_SYS：16



 a| 
`-extended-groups-limit`

`-auth-sys-extended-groups`
 a| 
`512`

`enabled`
 a| 
RPCSEC_GSS：512

AUTH_SYS：512

|===
.手順
. 権限レベルをadvancedに設定します。
+
`set -privilege advanced`

. 次のうち必要な操作を実行します。
+
|===


| 許可される補助グループの最大数を設定する場合… | コマンドを入力してください... 


 a| 
RPCSEC_GSSのみ（AUTH_SYSはデフォルト値16のまま）
 a| 
`+vserver nfs modify -vserver vserver_name -extended-groups-limit {32-1024} -auth-sys-extended-groups disabled+`



 a| 
RPCSEC_GSSとAUTH_SYSの両方
 a| 
`+vserver nfs modify -vserver vserver_name -extended-groups-limit {32-1024} -auth-sys-extended-groups enabled+`

|===
.  `-extended-groups-limit`値を確認し、AUTH_SYSが拡張グループを使用しているかどうかを確認します： `vserver nfs show -vserver vserver_name -fields auth-sys-extended-groups,extended-groups-limit`
. admin権限レベルに戻ります。
+
`set -privilege admin`



.例
次の例は、AUTH_SYS認証で拡張されたグループ数を有効にし、AUTH_SYS認証とRPCSEC_GSS認証の両方でグループの最大数を512に設定します。これらの変更は、vs1というSVMにアクセスするクライアントに対してのみ適用されます。

[listing]
----
vs1::> set -privilege advanced
Warning: These advanced commands are potentially dangerous; use
         them only when directed to do so by NetApp personnel.
Do you want to continue? {y|n}: y

vs1::*> vserver nfs modify -vserver vs1 -auth-sys-extended-groups enabled -extended-groups-limit 512

vs1::*> vserver nfs show -vserver vs1 -fields auth-sys-extended-groups,extended-groups-limit
vserver auth-sys-extended-groups extended-groups-limit
------- ------------------------ ---------------------
vs1     enabled                  512

vs1::*> set -privilege admin
----
.関連情報
* link:https://kb.netapp.com/on-prem/ontap/da/NAS/NAS-KBs/How_does_AUTH_SYS_Extended_Groups_change_NFS_authentication["NetAppナレッジベース：ONTAP 9のNFS認証におけるAUTH_SYS拡張グループの変更"^]

