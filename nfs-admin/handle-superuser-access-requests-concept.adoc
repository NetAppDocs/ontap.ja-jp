---
permalink: nfs-admin/handle-superuser-access-requests-concept.html 
sidebar: sidebar 
keywords: how, handle, superuser, access, request 
summary: エクスポート ポリシーを構成するときは、ストレージ システムがユーザー ID 0（つまりスーパーユーザー）のクライアント アクセス要求を受信した場合にどのように処理するかを考慮し、それに応じてエクスポート ルールを設定する必要があります。 
---
= ONTAP NFSスーパーユーザーアクセス要求の管理について学習します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
エクスポート ポリシーを構成するときは、ストレージ システムがユーザー ID 0（つまりスーパーユーザー）のクライアント アクセス要求を受信した場合にどのように処理するかを考慮し、それに応じてエクスポート ルールを設定する必要があります。

UNIXの世界では、ユーザーIDが0のユーザーはスーパーユーザー（通常はroot）と呼ばれ、システムに対して無制限のアクセス権を持ちます。スーパーユーザー権限の使用は、システムやデータのセキュリティ侵害など、いくつかの理由から危険を伴います。

デフォルトでは、ONTAPはユーザID 0を提示するクライアントを匿名ユーザにマッピングします。ただし、エクスポート ルールで `- superuser`パラメータを指定することで、セキュリティタイプに応じてユーザID 0を提示するクライアントの処理方法を決定できます。 `-superuser`パラメータに有効なオプションは次のとおりです：

* `any`
* `none`
+
 `-superuser`パラメータを指定しない場合、これがデフォルト設定になります。

* `krb5`
* `ntlm`
* `sys`


 `-superuser`パラメータ設定に応じて、ユーザー ID 0 で提示されるクライアントの処理方法は 2 つあります：

[cols="2*"]
|===
|  `*-superuser*`パラメータとクライアントのセキュリティ タイプが... | するとクライアントは... 


 a| 
一致
 a| 
ユーザー ID 0 でスーパーユーザー アクセスを取得します。



 a| 
一致しない
 a| 
 `-anon`パラメータで指定されたユーザーIDと割り当てられた権限を持つ匿名ユーザーとしてアクセスを取得します。これは、読み取り専用パラメータまたは読み取り/書き込みパラメータで `none`オプションが指定されているかどうかに関係なく適用されます。

|===
クライアントがNTFSセキュリティ スタイルのボリュームにアクセスするためにユーザーID 0を提示し、 `-superuser`パラメータが `none`に設定されている場合、ONTAPは匿名ユーザーの名前マッピングを使用して適切な認証情報を取得します。

.例
エクスポート ポリシーに、次のパラメータが指定されたエクスポート ルールが含まれています。

* `-protocol` `nfs3`
* `-clientmatch` `10.1.16.0/255.255.255.0`
* `-rorule` `any`
* `-rwrule` `krb5,ntlm`
* `-anon` `127`


クライアント#1は、IPアドレスが10.1.16.207、ユーザIDが746で、NFSv3プロトコルを使用してアクセス要求を送信し、Kerberos v5で認証されました。

クライアント#2は、IPアドレスが10.1.16.211、ユーザIDが0で、NFSv3プロトコルを使用してアクセス要求を送信し、AUTH_SYSで認証されました。

両方のクライアントで、クライアント アクセス プロトコルとIPアドレスは一致しています。読み取り専用パラメータでは、認証に使用されるセキュリティ タイプに関係なく、読み取り専用アクセスがすべてのクライアントに許可されています。ただし、読み取り / 書き込みアクセス権を取得するのはクライアント#1だけです。これは、認証に承認されたセキュリティ タイプKerberos v5を使用したためです。

クライアント#2はスーパーユーザーアクセスを取得できません。代わりに、 `-superuser`パラメータが指定されていないため、匿名ユーザーにマッピングされます。つまり、デフォルトは `none`となり、ユーザーID 0が匿名ユーザーに自動的にマッピングされます。また、クライアント#2はセキュリティタイプが読み取り/書き込みパラメータと一致しなかったため、読み取り専用アクセスしか取得できません。

.例
エクスポート ポリシーに、次のパラメータが指定されたエクスポート ルールが含まれています。

* `-protocol` `nfs3`
* `-clientmatch` `10.1.16.0/255.255.255.0`
* `-rorule` `any`
* `-rwrule` `krb5,ntlm`
* `-superuser` `krb5`
* `-anon` `0`


クライアント#1は、IPアドレスが10.1.16.207、ユーザIDが0で、NFSv3プロトコルを使用してアクセス要求を送信し、Kerberos v5で認証されました。

クライアント#2は、IPアドレスが10.1.16.211、ユーザIDが0で、NFSv3プロトコルを使用してアクセス要求を送信し、AUTH_SYSで認証されました。

両方のクライアントで、クライアント アクセス プロトコルとIPアドレスは一致しています。読み取り専用パラメータでは、認証に使用されるセキュリティ タイプに関係なく、読み取り専用アクセスがすべてのクライアントに許可されています。ただし、読み取り / 書き込みアクセス権を取得するのはクライアント#1だけです。これは、認証に承認されたセキュリティ タイプKerberos v5を使用したためです。クライアント#2は読み取り / 書き込みアクセス権を取得できません。

エクスポート ルールは、ユーザID 0のクライアントにスーパーユーザ アクセスを許可します。クライアント#1は、読み取り専用および `-superuser`パラメータのユーザIDとセキュリティ タイプが一致するため、スーパーユーザ アクセスを取得します。クライアント#2は、セキュリティ タイプが読み取り/書き込みパラメータまたは `-superuser`パラメータと一致しないため、読み取り/書き込みアクセスもスーパーユーザ アクセスも取得できません。代わりに、クライアント#2は匿名ユーザにマッピングされます。この場合、匿名ユーザのユーザIDは0です。
