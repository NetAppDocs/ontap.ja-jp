---
permalink: nfs-admin/handle-superuser-access-requests-concept.html 
sidebar: sidebar 
keywords: how, handle, superuser, access, request 
summary: エクスポートポリシーを設定する際には、ストレージシステムがユーザ ID が 0 のクライアントアクセス要求をスーパーユーザとして受信し、それに応じてエクスポートルールを設定する場合に必要な処理を考慮する必要があります。 
---
= スーパーユーザのアクセス要求を管理します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
エクスポートポリシーを設定する際には、ストレージシステムがユーザ ID が 0 のクライアントアクセス要求をスーパーユーザとして受信し、それに応じてエクスポートルールを設定する場合に必要な処理を考慮する必要があります。

UNIX の世界では、ユーザ ID 0 のユーザがスーパーユーザと呼ばれ、通常は root と呼ばれます。このユーザにはシステム上で無制限のアクセス権が与えられています。スーパーユーザ権限の使用は、システムやデータセキュリティの侵害などのいくつかの理由によってリスクを伴う可能性があります。

デフォルトでは、 ONTAP はユーザ ID が 0 のクライアントを匿名ユーザにマッピングします。ただし、を指定することはできます `- superuser` ユーザIDが0のクライアントの処理方法を決定する、エクスポートルールのパラメータ。セキュリティタイプに応じて異なります。の有効なオプションは次のとおりです `-superuser` パラメータ：

* `any`
* `none`
+
を指定しない場合、これがデフォルト設定になります `-superuser` パラメータ

* `krb5`
* `ntlm`
* `sys`


ユーザIDが0のクライアントは、に応じて2つの方法で処理されます `-superuser` パラメータの設定：

[cols="2*"]
|===
| 状況に応じて `*-superuser*` パラメータとクライアントのセキュリティタイプ | クライアント 


 a| 
一致
 a| 
ユーザ ID 0 でスーパーユーザアクセス権を取得します。



 a| 
一致しません
 a| 
によって指定されたユーザIDを持つ匿名ユーザとしてアクセスします `-anon` パラメータとそれに割り当てられている権限。これは、読み取り専用パラメータまたは読み取り/書き込みパラメータでオプションを指定したかどうかに関係なく適用されます `none`。

|===
クライアントがNTFSセキュリティ形式とを使用するボリュームにアクセスするためにユーザID 0を提示する場合 `-superuser` パラメータはに設定されます `none`ONTAP は、匿名ユーザのネームマッピングを使用して適切なクレデンシャルを取得します。

.例
エクスポートポリシーに、次のパラメータが指定されたエクスポートルールが含まれています。

* `-protocol` `nfs3`
* `-clientmatch` `10.1.16.0/255.255.255.0`
* `-rorule` `any`
* `-rwrule` `krb5,ntlm`
* `-anon` `127`


クライアント #1 は、 IP アドレスが 10.1.16.207 、ユーザ ID が 746 で、 NFSv3 プロトコルを使用してアクセス要求を送信し、 Kerberos v5 で認証されます。

クライアント #2 は、 IP アドレスが 10.1.16.211 、ユーザ ID が 0 で、 NFSv3 プロトコルを使用してアクセス要求を送信し、 AUTH_SYS で認証されます。

両方のクライアントで、クライアントアクセスプロトコルと IP アドレスは一致しています。読み取り専用パラメータでは、認証に使用するセキュリティタイプに関係なく、読み取り専用アクセスがすべてのクライアントに許可されています。ただし、読み取り / 書き込みアクセス権を取得するのはクライアント #1 だけです。これは、認証に承認されたセキュリティタイプ Kerberos v5 を使用したためです。

クライアント #2 は、スーパーユーザアクセス権を取得できません。代わりに、が原因で匿名にマッピングされます `-superuser` パラメータが指定されていません。つまり、デフォルトはです `none` また、ユーザID 0を自動的に匿名にマッピングします。また、クライアント #2 はセキュリティタイプが読み取り / 書き込みパラメータと一致しなかったため、読み取り専用アクセス権のみを取得します。

.例
エクスポートポリシーに、次のパラメータが指定されたエクスポートルールが含まれています。

* `-protocol` `nfs3`
* `-clientmatch` `10.1.16.0/255.255.255.0`
* `-rorule` `any`
* `-rwrule` `krb5,ntlm`
* `-superuser` `krb5`
* `-anon` `0`


クライアント #1 は、 IP アドレスが 10.1.16.207 、ユーザ ID が 0 で、 NFSv3 プロトコルを使用してアクセス要求を送信し、 Kerberos v5 で認証されます。

クライアント #2 は、 IP アドレスが 10.1.16.211 、ユーザ ID が 0 で、 NFSv3 プロトコルを使用してアクセス要求を送信し、 AUTH_SYS で認証されます。

両方のクライアントで、クライアントアクセスプロトコルと IP アドレスは一致しています。読み取り専用パラメータでは、認証に使用するセキュリティタイプに関係なく、読み取り専用アクセスがすべてのクライアントに許可されています。ただし、読み取り / 書き込みアクセス権を取得するのはクライアント #1 だけです。これは、認証に承認されたセキュリティタイプ Kerberos v5 を使用したためです。クライアント #2 は読み取り / 書き込みアクセス権を取得できません。

このエクスポートルールでは、ユーザ ID が 0 のクライアントにスーパーユーザアクセスが許可されています。クライアント#1は、ユーザIDが一致し、およびの読み取り専用のセキュリティタイプにも一致するため、スーパーユーザアクセス権を取得します `-superuser` パラメータクライアント#2は、セキュリティタイプが読み取り/書き込みパラメータともに一致しないため、読み取り/書き込みアクセス権またはスーパーユーザアクセス権を取得できません `-superuser` パラメータ代わりに、クライアント #2 は匿名ユーザにマッピングされます。この場合、ユーザ ID は 0 です。
