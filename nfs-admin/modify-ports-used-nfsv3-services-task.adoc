---
permalink: nfs-admin/modify-ports-used-nfsv3-services-task.html 
sidebar: sidebar 
keywords: modify, port, nfsv3, service 
summary: ストレージ システムのNFSサーバは、マウント デーモンやNetwork Lock Manager（NLM;ネットワーク ロック マネージャ）のようなサービスを使用して、特定のデフォルト ネットワーク ポートを介してNFSクライアントと通信します。デフォルト ポートは、ほとんどのNFS環境で正しく機能するので変更する必要はありませんが、別のネットワーク ポートをNFSv3環境で使用したい場合はそうすることができます。 
---
= ONTAP SVMのNFSv3サービスに使用されるポートを変更する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ストレージ システムのNFSサーバは、マウント デーモンやNetwork Lock Manager（NLM;ネットワーク ロック マネージャ）のようなサービスを使用して、特定のデフォルト ネットワーク ポートを介してNFSクライアントと通信します。デフォルト ポートは、ほとんどのNFS環境で正しく機能するので変更する必要はありませんが、別のネットワーク ポートをNFSv3環境で使用したい場合はそうすることができます。

.開始する前に
ストレージ システムでNFSポートを変更するには、すべてのNFSクライアントがシステムに再接続する必要があるので、変更に先立ってこの情報をユーザに伝えておく必要があります。

.タスク概要
NFSマウント デーモン、Network Lock Manager（NLM;ネットワーク ロック マネージャ）、Network Status Monitor（NSM;ネットワーク ステータス モニタ）、およびNFSクォータ デーモンの各サービスで使用されるポートをStorage Virtual Machine（SVM）ごとに設定できます。ポート番号の変更は、データへのアクセスにTCPとUDPのどちらを使用するNFSクライアントにも影響を与えます。

NFSv4およびNFSv4.1のポートは変更できません。

.手順
. 権限レベルをadvancedに設定します。
+
`set -privilege advanced`

. NFSへのアクセスを無効にします。
+
`vserver nfs modify -vserver vserver_name -access false`

. 特定のNFSサービスのNFSポートを設定します。
+
`vserver nfs modify -vserver vserver_namenfs_port_parameterport_number`

+
[cols="3*"]
|===
| NFSポートパラメータ | 概要 | デフォルトのポート 


 a| 
`-mountd-port`
 a| 
NFSマウント デーモン
 a| 
635



 a| 
`-nlm-port`
 a| 
ネットワーク ロック マネージャ
 a| 
4045



 a| 
`-nsm-port`
 a| 
ネットワーク ステータス モニタ
 a| 
4046



 a| 
`-rquotad-port`
 a| 
NFSクォータ デーモン
 a| 
4049

|===
+
デフォルト ポートに加えて、1,024～65,535の範囲のポート番号を使用できます。各NFSサービスは固有のポートを使用する必要があります。

. NFSへのアクセスを有効にします。
+
`vserver nfs modify -vserver vserver_name -access true`

.  `network connections listening show`コマンドを使用してポート番号の変更を確認します。
+
 `network connections listening show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/network-connections-listening-show.html["ONTAPコマンド リファレンス"^]をご覧ください。

. admin権限レベルに戻ります。
+
`set -privilege admin`



.例
次のコマンドは、vs1というSVMでNFSマウント デーモンのポートを1113に設定します。

....
vs1::> set -privilege advanced
Warning: These advanced commands are potentially dangerous; use
         them only when directed to do so by NetApp personnel.
Do you want to continue? {y|n}: y

vs1::*> vserver nfs modify -vserver vs1 -access false

vs1::*> vserver nfs modify -vserver vs1 -mountd-port 1113

vs1::*> vserver nfs modify -vserver vs1 -access true

vs1::*> network connections listening show
Vserver Name     Interface Name:Local Port        Protocol/Service
---------------- -------------------------------  ----------------
Node: cluster1-01
Cluster          cluster1-01_clus_1:7700          TCP/ctlopcp
vs1              data1:4046                       TCP/sm
vs1              data1:4046                       UDP/sm
vs1              data1:4045                       TCP/nlm-v4
vs1              data1:4045                       UDP/nlm-v4
vs1              data1:1113                       TCP/mount
vs1              data1:1113                       UDP/mount
...
vs1::*> set -privilege admin
....