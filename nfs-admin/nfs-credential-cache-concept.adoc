---
permalink: nfs-admin/nfs-credential-cache-concept.html 
sidebar: sidebar 
keywords: nfs, credential, cache 
summary: NFSユーザーがストレージシステム上のNFSエクスポートへのアクセスを要求すると、ONTAPはユーザーを認証するために、外部ネームサーバまたはローカルファイルからユーザークレデンシャルを取得する必要があります。その後、ONTAPはこれらのクレデンシャルを内部クレデンシャルキャッシュに保存し、後で参照できるようにします。NFSクレデンシャルキャッシュの仕組みを理解することで、潜在的なパフォーマンスやアクセスの問題に対処できるようになります。 
---
= ONTAP NFS認証情報キャッシュの仕組み
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NFSユーザーがストレージシステム上のNFSエクスポートへのアクセスを要求すると、ONTAPはユーザーを認証するために、外部ネームサーバまたはローカルファイルからユーザークレデンシャルを取得する必要があります。その後、ONTAPはこれらのクレデンシャルを内部クレデンシャルキャッシュに保存し、後で参照できるようにします。NFSクレデンシャルキャッシュの仕組みを理解することで、潜在的なパフォーマンスやアクセスの問題に対処できるようになります。

認証情報キャッシュがなければ、 ONTAP は NFS ユーザーがアクセスを要求するたびにネーム サービスにクエリを実行する必要があります。多くのユーザーがアクセスする高負荷のストレージ システムでは、これはすぐに深刻なパフォーマンス問題につながり、不要な遅延や NFS クライアント アクセスの拒否を引き起こす可能性があります。

クレデンシャル キャッシュを使用すると、ONTAPはユーザー クレデンシャルを取得し、NFSクライアントが別の要求を送信した場合に迅速かつ容易にアクセスできるように、所定の時間保存します。この方法には、次のような利点があります：

* 外部ネーム サーバー（NIS や LDAP など）への要求の処理が少なくなるため、ストレージ システムの負荷が軽減されます。
* 外部ネーム サーバーに送信するリクエストの数を減らすことで、外部ネーム サーバーの負荷を軽減します。
* ユーザを認証するために外部ソースからクレデンシャルを取得する待機時間をなくすことで、ユーザ アクセスのスピードが向上します。


ONTAPは、認証情報キャッシュに肯定的認証情報と否定的認証情報の両方を保存します。肯定的認証情報は、ユーザが認証されアクセスが許可されたことを意味します。否定的認証情報は、ユーザが認証されずアクセスが拒否されたことを意味します。

デフォルトでは、ONTAPはポジティブクレデンシャルを24時間保存します。つまり、ユーザを最初に認証した後、ONTAPは24時間、そのユーザによるアクセス要求に対してキャッシュされたクレデンシャルを使用します。ユーザが24時間後にアクセスを要求した場合、このサイクルが最初から開始されます。ONTAPはキャッシュされたクレデンシャルを破棄し、適切なネーム サービス ソースから再度クレデンシャルを取得します。過去24時間以内にネーム サーバ上でクレデンシャルが変更された場合、ONTAPは更新されたクレデンシャルをキャッシュし、次の24時間で使用します。

デフォルトでは、ONTAPはネガティブクレデンシャルを2時間保存します。つまり、最初にユーザのアクセスを拒否した後、ONTAPはそのユーザからのアクセス要求を2時間拒否し続けます。2時間経過後にユーザがアクセスを要求した場合、このサイクルが最初から開始されます。ONTAPは適切なネーム サービス ソースからクレデンシャルを再度取得します。過去2時間以内にネーム サーバ上でクレデンシャルが変更された場合、ONTAPは更新されたクレデンシャルをキャッシュし、次の2時間使用します。
