---
permalink: nfs-admin/ontap-name-service-switch-config-concept.html 
sidebar: sidebar 
keywords: ontap, name, service, switch, configuration, work 
summary: ONTAPは、UNIXシステムの/etc/nsswitch.confファイルに相当するテーブルにネーム サービスの設定情報を保存します。このテーブルの機能とONTAPでの使用方法を理解し、環境に合わせて適切に設定する必要があります。 
---
= ONTAP NFSネーム サービス スイッチ構成について学ぶ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPは、UNIXシステムの `/etc/nsswitch.conf`ファイルに相当するテーブルにネーム サービス設定情報を保存します。環境に合わせて適切に設定できるように、テーブルの機能とONTAPでの使用方法を理解しておく必要があります。

ネーム サービス スイッチ テーブルは、ONTAPが特定の種類のネーム サービス情報を取得する際にどのネーム サービス ソースをどの順番で参照するかを決定します。ネーム サービス スイッチ テーブルは、SVMごとに作成および保存されます。



== データベース タイプ

テーブルには、次の各データベース タイプについてネーム サービスのリストが格納されます。

[cols="3*"]
|===
| データベースの種類 | ... の名前サービス ソースを定義します。 | 有効なソースは次のとおりです。 


 a| 
ホスト
 a| 
ホスト名のIPアドレスへの変換
 a| 
files、dns



 a| 
グループ
 a| 
ユーザ グループ情報の検索
 a| 
files、nis、ldap



 a| 
passwd
 a| 
ユーザ情報の検索
 a| 
files、nis、ldap



 a| 
netgroup
 a| 
ネットグループ情報の検索
 a| 
files、nis、ldap



 a| 
namemap
 a| 
ユーザ名のマッピング
 a| 
files、ldap

|===


== ソース タイプ

ソース タイプによって、該当する情報を取得するために使用するネーム サービス ソースが決まります。

[cols="3*"]
|===
| ソース タイプを指定... | ...の情報を検索するには | コマンド ファミリによって管理されます… 


 a| 
ファイル
 a| 
ローカルのソース ファイル
 a| 
`vserver services name-service unix-user` `vserver services name-service unix-group`

`vserver services name-service netgroup`

`vserver services name-service dns hosts`



 a| 
nis
 a| 
SVMのNISドメイン設定で指定された外部のNISサーバ
 a| 
`vserver services name-service nis-domain`



 a| 
ldap
 a| 
SVMのLDAPクライアント設定で指定された外部のLDAPサーバ
 a| 
`vserver services name-service ldap`



 a| 
dns
 a| 
SVMのDNS設定で指定された外部のDNSサーバ
 a| 
`vserver services name-service dns`

|===
データ アクセスと SVM 管理認証の両方に NIS または LDAP を使用する予定の場合でも、 `files`を含め、NIS または LDAP 認証が失敗した場合に備えて、フォールバックとしてローカル ユーザーを設定する必要があります。



== 外部ソースへのアクセスに使用されるプロトコル

ONTAPでは、外部ソースのサーバへのアクセスに次のプロトコルを使用します。

[cols="2*"]
|===
| 外部ネーム サービス ソース | アクセスに使用されるプロトコル 


 a| 
NIS
 a| 
UDP



 a| 
DNS
 a| 
UDP



 a| 
LDAP
 a| 
TCP

|===
.例
次の例では、SVM svm_1のネーム サービス スイッチ情報を表示しています。

[listing]
----
cluster1::*> vserver services name-service ns-switch show -vserver svm_1
                               Source
Vserver         Database       Order
--------------- ------------   ---------
svm_1           hosts          files,
                               dns
svm_1           group          files
svm_1           passwd         files
svm_1           netgroup       nis,
                               files
----
ホストのIPアドレス検索では、最初にローカルのソース ファイルが参照され、結果が返されない場合は、次にDNSサーバが照会されます。

ユーザまたはグループ情報の検索では、ローカルのソース ファイルだけが参照され、結果が返されない場合、検索は失敗します。

ネットグループ情報の検索では、最初に外部のNISサーバが参照され、結果が返されない場合は、次にローカルのネットグループ ファイルが照会されます。

SVM svm_1のテーブルには、ネーム マッピング用のネーム サービス エントリは含まれていません。そのため、デフォルトの設定に従ってローカルのソース ファイルだけが参照されます。

.関連情報
https://www.netapp.com/pdf.html?item=/media/16328-tr-4668pdf.pdf["NetAppテクニカル レポート4668：『Name Services Best Practices Guide』"^]
