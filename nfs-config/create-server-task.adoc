---
permalink: nfs-config/create-server-task.html 
sidebar: sidebar 
keywords: create, nfs, server 
summary: クラスタ上でNFSのライセンスが付与されていることを確認したら、vserver nfs createコマンドを使用してSVM上にNFSサーバを作成し、サポートするNFSバージョンを指定できます。 
---
= ONTAP NFSサーバを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラスタ上でNFSのライセンスが付与されていることを確認したら、 `vserver nfs create`コマンドを使用してSVM上にNFSサーバを作成し、サポートするNFSバージョンを指定できます。

.タスク概要
SVMは、1つ以上のNFSバージョンをサポートするように設定できます。NFSv4以降をサポートする場合：

* NFSv4ユーザIDマッピング ドメイン名が、NFSv4サーバとターゲット クライアント上で同じである必要があります。
+
NFSv4サーバとクライアントで同じ名前が使用されていれば、LDAPまたはNISのドメイン名と同じにする必要はありません。

* ターゲット クライアントでNFSv4数値ID設定がサポートされている必要があります。
* セキュリティ上の理由から、NFSv4環境でのネーム サービスにはLDAPを使用する必要があります。


.開始する前に
SVMでNFSプロトコルを許可するように設定されている必要があります。

.手順
. クラスタ上でNFSのライセンスが有効であることを確認します。
+
`system license show -package nfs`

+
有効でない場合は、営業担当者にお問い合わせください。

. NFSサーバを作成します。
+
`vserver nfs create -vserver _vserver_name_ -v3 {enabled|disabled} -v4.0 {enabled|disabled} -v4-id-domain _nfsv4_id_domain_ -v4-numeric-ids {enabled|disabled} -v4.1 {enabled|disabled} -v4.1-pnfs {enabled|disabled}`

+
NFSバージョンの任意の組み合わせを有効にできます。pNFSをサポートする場合は、 `-v4.1`と `-v4.1-pnfs`の両方のオプションを有効にする必要があります。

+
v4以降を有効にする場合は、次のオプションが正しく設定されていることも確認する必要があります。

+
** `-v4-id-domain`
+
（オプション）このパラメータは、ユーザ名とグループ名のドメイン部分をNFSv4プロトコルで定義されている値に指定します。デフォルトでは、NISドメインが設定されている場合はNISドメインを、設定されていない場合はDNSドメインが使用されます。ターゲット クライアントで使用されているドメイン名に一致する値を指定する必要があります。

** `-v4-numeric-ids`
+
（オプション）このパラメータは、NFSv4の所有者属性で数字IDのサポートを有効にするかどうかを指定します。デフォルト設定が有効になっていますが、ターゲット クライアントがこの設定をサポートすることを確認する必要があります。



+
 `vserver nfs modify`コマンドを使用して、後で追加のNFS機能を有効にすることができます。

. NFSが実行されていることを確認します。
+
`vserver nfs status -vserver _vserver_name_`

. NFSが必要に応じて設定されていることを確認します。
+
`vserver nfs show -vserver _vserver_name_`



.例
次のコマンドは、NFSv3とNFSv4.0が有効になっているvs1という名前のSVM上にNFSサーバを作成します：

[listing]
----
vs1::> vserver nfs create -vserver vs1 -v3 enabled -v4.0 enabled -v4-id-domain my_domain.com
----
次のコマンドは、vs1という名前の新しいNFSサーバのステータスと設定値を確認します。

[listing]
----
vs1::> vserver nfs status -vserver vs1
The NFS server is running on Vserver "vs1".

vs1::> vserver nfs show -vserver vs1

                            Vserver: vs1
                 General NFS Access: true
                             NFS v3: enabled
                           NFS v4.0: enabled
                       UDP Protocol: enabled
                       TCP Protocol: enabled
               Default Windows User: -
                NFSv4.0 ACL Support: disabled
    NFSv4.0 Read Delegation Support: disabled
   NFSv4.0 Write Delegation Support: disabled
            NFSv4 ID Mapping Domain: my_domain.com
...
----