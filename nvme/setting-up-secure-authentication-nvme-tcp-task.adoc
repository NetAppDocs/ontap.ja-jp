---
permalink: nvme/setting-up-secure-authentication-nvme-tcp-task.html 
sidebar: sidebar 
keywords: manage, nvme, secure, authentication, tcp, dh-hmac-hcap, chap, setting up, set up 
summary: ONTAP 9.12.1以降では、ホストとコントローラの間の双方向認証は、DH-MHMAC-CHAP認証プロトコルを使用してnvme-tcp経由でサポートされています。    
---
= NVMe/FCを介したセキュアな認証を設定する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.12.1以降では、NVMeホストとコントローラ間の双方向および単方向認証が、DH-MHMAC-CHAP認証プロトコルを使用してNVMe/FC認証プロトコルでサポートされています。

セキュアな認証を設定するには、NVMeホストまたはコントローラのNQNと管理者が設定した認証シークレットを組み合わせたDH-MHMAC-CHAPキーを各ホストまたはコントローラに関連付ける必要があります。  NVMeホストまたはコントローラがピアを認証するには、そのピアに関連付けられているキーを認識している必要があります。  デフォルトのハッシュ関数はSHA-256で、デフォルトのDHグループは2048ビットです。

.手順
. NVMeサブシステムにDH-MHMAC-CHAP認証を追加します。
+
`vserver nvme subsystem host add -vserver _svm_name_ -subsystem _subsystem_ -host-nqn _host_nqn_ -dhchap-host-secret _authentication_host_secret_ -dhchap-controller-secret _authentication_controller_secret_ -dhchap-hash-function {sha-256|sha-512} -dhchap-group {none|2048-bit|3072-bit|4096-bit|6144-bit|8192-bit}`

. DH-MHMAC CHAP認証プロトコルがホストに追加されていることを確認します。
+
`vserver nvme subsystem host show`

+
[listing]
----
  [ -dhchap-hash-function {sha-256|sha-512} ]  Authentication Hash Function
  [ -dhchap-dh-group {none|2048-bit|3072-bit|4096-bit|6144-bit|8192-bit} ]
                                               Authentication Diffie-Hellman
                                               Group
  [ -dhchap-mode {none|unidirectional|bidirectional} ]
                                               Authentication Mode

----
. NVMeコントローラの作成時にDH-MHMAC CHAP認証が実行されたことを確認します。
+
`vserver nvme subsystem controller show`

+
[listing]
----
 [ -dhchap-hash-function {sha-256|sha-512} ]  Authentication Hash Function
 [ -dhchap-dh-group {none|2048-bit|3072-bit|4096-bit|6144-bit|8192-bit} ]
                                               Authentication Diffie-Hellman
                                               Group
 [ -dhchap-mode {none|unidirectional|bidirectional} ]
                                               Authentication Mode
----

