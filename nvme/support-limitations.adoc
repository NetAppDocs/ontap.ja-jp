---
permalink: nvme/support-limitations.html 
sidebar: sidebar 
keywords: nvme, namespaces, considerations, provisioning 
summary: NVMe のサポートは ONTAP のバージョン、プラットフォーム、および構成によって異なります。 
---
= NVMeの構成、サポート、制限事項
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.4以降、link:../san-admin/manage-nvme-concept.html["不揮発性メモリエクスプレス（NVMe）"]プロトコルはSAN環境で利用可能になりました。FC-NVMeは、従来のFCネットワークと同じ物理構成とゾーニング手法を採用していますが、FC-SCSIよりも広い帯域幅、高いIOPS、低いレイテンシを実現します。

NVMeのサポートと制限事項は、ONTAPのバージョン、プラットフォーム、および構成によって異なります。特定の構成の詳細については、link:https://imt.netapp.com/matrix/["NetApp Interoperability Matrix Tool"^]を参照してください。サポートされる制限については、link:https://hwu.netapp.com/["Hardware Universe"^]を参照してください。


NOTE: クラスタあたりの最大ノード数は、Hardware Universeの*サポートされるプラットフォームの混在*で確認できます。



== 構成

* NVMe構成は、単一ファブリックまたはマルチファブリックを使用して構成できます。
* SANをサポートするSVMごとに管理LIFを1つ設定する必要があります。
* 異機種混在のFCスイッチ ファブリックの使用は、組み込みのブレード スイッチ以外はサポートされません。
+
具体的な例外についてはlink:https://mysupport.netapp.com/matrix["NetApp Interoperability Matrix Tool"^]に記載されています。

* カスケード ファブリック、部分メッシュ ファブリック、フルメッシュ ファブリック、コアエッジ ファブリック、およびディレクタ ファブリックは、FCスイッチをファブリックに接続する業界標準の方法であり、いずれもサポートされます。
+
ファブリックは1つまたは複数のスイッチで構成できます。また、ストレージ コントローラは複数のスイッチに接続することができます。





== 機能

各ONTAPバージョンでサポートされるNVMe機能は以下のとおりです。

[cols="2*"]
|===


| ONTAPバージョン | NVMeのサポート 


| 9.17.1  a| 
* SnapMirror アクティブ同期 NVMe/FC および NVMe/TCP ホスト アクセス（VMware ワークロード用）。




| 9.15.1  a| 
* NVMe / TCPでの4ノードMetroCluster IP構成




| 9.14.1  a| 
* サブシステムでのホストの優先度の設定（ホストレベルのQoS）




| 9.12.1  a| 
* NVMe / FCでの4ノードMetroCluster IP構成
* MetroCluster構成は、ONTAP 9.12.1よりも前のフロントエンドNVMeネットワークではサポートされません。
* NVMe / TCPでは、MetroCluster構成はサポートされません。




| 9.10.1 | xref:../nvme/resize-namespace-task.html[ネームスペースのサイズ変更] 


| 9.9.1  a| 
* 同じボリューム上でのネームスペースとLUNの共存




| 9.8  a| 
* プロトコルの共存
+
SCSI、NAS、NVMeの各プロトコルを同じStorage Virtual Machine（SVM）に共存させることができます。

+
ONTAP 9.8より前のバージョンでは、SVMで使用できるプロトコルはNVMeのみです。





| 9.6  a| 
* ネームスペースでの512バイト ブロックと4096バイト ブロックのサポート
+
デフォルト値は4096です。ホスト オペレーティング システムで4096バイト ブロックがサポートされていない場合のみ、512を使用してください。

* ネームスペースがマッピングされたボリュームの移動




| 9.5  a| 
* マルチパスHAペアのフェイルオーバー / ギブバック


|===


== プロトコル

サポートされるNVMeプロトコルは次のとおりです。

[cols="3*"]
|===


| プロトコル | ONTAPバージョン | 許可の状況 


| TCP | 9.10.1 | デフォルト 


| FC | 9.4 | デフォルト 
|===
ONTAP 9.8以降では、SCSI、NAS、NVMeの各プロトコルを同じStorage Virtual Machine（SVM）に設定できます。ONTAP 9.7以前では、SVMで使用できるプロトコルはNVMeのみです。



== ネームスペース

NVMeネームスペースを使用するときは、次の点に注意してください。

* ONTAP 9.15.1 以前では、ONTAP はスペース再利用のための NVMe での NVMe DataSet Management（割り当て解除）コマンドをサポートしていません。
* SnapRestoreを使用してLUNからネームスペースをリストアすることはできません。また、その逆もできません。
* ネームスペースのスペース ギャランティはそれを含むボリュームのスペース ギャランティと同じになります。
* Data ONTAP 7-Modeから移行されたボリュームでは、ネームスペースを作成できません。
* ネームスペースでは、次のものはサポートされません。
+
** 名前変更
** ボリューム間での移動
** ボリューム間でのコピー
** オンデマンド コピー






== その他の制限事項

.ONTAPの次の機能は、NVMe構成ではサポートされません。
* Virtual Storage Console
* 永続的予約


.次の考慮事項はONTAP 9.4を実行しているノードだけに該当します。
* NVMeのLIFとネームスペースは、同じノードでホストする必要があります。
* NVMe LIFを作成する前に、NVMeサービスを作成する必要があります。


.関連情報
link:https://www.netapp.com/pdf.html?item=/media/10680-tr4080.pdf["『Best practices for modern SAN』"]
