---
permalink: pnfs/pnfs-deployment-strategy-concept.html 
sidebar: sidebar 
keywords: tr-4063, pnfs, deployment, strategy, configuration, traditional nfs, benefits, technical report 
summary: 従来の NFS の課題と pNFS がそれらに対処する方法を理解することは、効果的な pNFS の導入を計画するのに役立ちます。 
---
= ONTAPにおけるpNFS導入戦略
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
pNFS は、メタデータとデータ パスを分離し、データのローカライズを提供し、並列操作を可能にすることで、従来の NFS を改善するために導入されました。



== 従来のNFSの課題とpNFSの利点

次の表は、従来の NFS の課題を示し、 ONTAPの pNFS がそれらの課題にどのように対処するかを説明しています。

[cols="40,60"]
|===
| チャレンジ | pNFSの利点 


| *メタデータとデータに同じパス* 従来の NFS では、メタデータとデータは同じパスを通過します。これにより、単一のパスがクラスター内の単一のハードウェア ノードに接続されるため、ネットワークと CPU の両方が飽和状態になる可能性があります。多くのユーザーが同じ NFS エクスポートにアクセスしようとすると、状況はさらに悪化します。 | *メタデータ パスとデータ パスが分離され、データ パスが並列化されます* NFS トラフィックのメタデータ パスとデータ パスを分離し、データ パスに複数のネットワーク パスを提供することで、 ONTAPクラスタ内の CPU およびネットワーク リソースが最大化され、ワー​​クロードのスケールが向上します。 


| *ワークロード分散の課題* ONTAP NAS クラスタでは最大 24 個のノードを持つことができ、各ノードには独自のデータ ボリュームとネットワーク インターフェイスのセットを持たせることができます。各ボリュームは独自のワークロード、またはワークロードのサブセットをホストでき、 FlexGroupボリュームを使用すると、そのワークロードは、簡素化のために単一の名前空間にアクセスする複数のノードに存在できます。クライアントが NFS エクスポートをマウントすると、ネットワーク トラフィックは単一のノードで確立されます。アクセス対象のデータがクラスター内の別のノードに存在する場合、リモート トラフィックが発生し、ワークロードの遅延や管理の複雑さが増す可能性があります。 | *データ構造へのローカルの並列パス* pNFS はメタデータからデータ パスを分割し、クラスター内のボリュームの局所性に応じて複数の並列データ パスを提供するため、クラスター内のネットワーク トラフィックの距離を短縮し、クラスター内の複数のハードウェア リソースを活用することで、レイテンシを削減できます。また、 ONTAPの pNFS はデータ トラフィックを自動的にリダイレクトするため、管理者が複数のエクスポート パスと場所を管理する必要性が低くなります。 


| *NFS マウント ポイントの再配置* マウント ポイントが確立された後、ボリュームをアンマウントして再マウントすると混乱が生じます。ONTAP は、ノード間でネットワーク インターフェイスを移行する機能を提供しますが、管理オーバーヘッドが追加され、NFSv4.x を使用したステートフル NFS 接続が中断されます。マウント ポイントを再配置する理由の一部は、データの局所性の問題に関連しています。 | *自動パス再配置* pNFS では、NFS サーバーはネットワーク インターフェイスとボリュームの場所のテーブルを維持します。pNFS のメタデータ パスを介してクライアントからデータ構造が要求されると、サーバーは最適化されたネットワーク パスをクライアントに提供し、クライアントはそのパスを使用してデータ操作を行います。これにより、ワークロードの管理オーバーヘッドが大幅に削減され、場合によってはパフォーマンスが向上します。 
|===


== 構成要件

NetApp ONTAPでの pNFS の構成には次のものが必要です。

* pNFSをサポートし、NFSv4.1以降でマウントされたNFSクライアント
* ONTAPのNFSサーバーでNFSv4.1が有効になっている (`nfs modify -v4.1 enabled`（デフォルトではオフ）
* ONTAPのNFSサーバーでpNFSが有効になっている (`nfs modify -v4.1-pnfs enabled`（デフォルトでは無効）
* ノードごとに少なくとも1つのネットワークインターフェースがあり、NFSクライアントにルーティング可能
* NFSv4を許可するエクスポートポリシーとルールを持つSVM内のデータボリューム


image::pNFS_fig_020.png[pNFS 構成要件]

上記の構成要件が満たされると、pNFS は単独で動作するようになります。

.関連情報
* link:../nfs-config/index.html["NFSの設定"]
* link:../nfs-admin/ontap-support-nfsv41-concept.html["ONTAPでのNFSv4.1のサポート"]

