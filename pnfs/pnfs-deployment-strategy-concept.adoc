---
permalink: pnfs/pnfs-deployment-strategy-concept.html 
sidebar: sidebar 
keywords: tr-4063, pnfs, deployment, strategy, configuration, traditional nfs, benefits, technical report 
summary: 従来のNFSの課題とpNFSがそれらに対処する方法を理解することは、効果的なpNFSの導入を計画するのに役立ちます。 
---
= ONTAPにおけるpNFS導入戦略
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
pNFSは、メタデータとデータ パスを分離し、データのローカライズを提供し、並列操作を可能にすることで、従来のNFSを改善するために導入されました。



== 従来のNFSの課題とpNFSの利点

次の表は、従来のNFSの課題を示し、ONTAPのpNFSがそれらの課題にどのように対処するかを説明しています。

[cols="40,60"]
|===
| 課題 | pNFSの利点 


| *メタデータとデータの同一パス* 従来のNFSでは、メタデータとデータは同じパスを通過します。これにより、単一のパスがクラスタ内の単一のハードウェア ノードに接続されるため、ネットワークとCPUの両方が飽和状態になる可能性があります。多くのユーザーが同じNFSエクスポートにアクセスしようとすると、この問題はさらに悪化します。 | *メタデータ パスとデータ パスが分離され、データ パスが並列化されます* NFS トラフィックのメタデータ パスとデータ パスを分離し、データ パスに複数のネットワーク パスを提供することで、ONTAPクラスタ内のCPUおよびネットワーク リソースが最大化され、ワークロードのスケールが向上します。 


| *ワークロード分散の課題* ONTAP NASクラスタでは最大24ノードまで構成でき、各ノードは独自のデータボリュームとネットワークインターフェイスを持つことができます。各ボリュームは独自のワークロード、またはワークロードのサブセットをホストでき、FlexGroupボリュームでは、単純化のために単一のネームスペースにアクセスする複数のノードにまたがってワークロードを配置できます。クライアントがNFSエクスポートをマウントすると、ネットワーク トラフィックは単一のノードで確立されます。アクセス対象のデータがクラスタ内の別のノードに存在する場合、リモート トラフィックが発生し、ワークロードのレイテンシが増加し、管理が複雑になる可能性があります。 | *データ構造へのローカルな並列パス* pNFSはメタデータからデータパスを分離し、クラスタ内のボリュームのローカル性に応じて複数の並列データパスを提供するため、クラスタ内のネットワーク トラフィックの距離を短縮し、クラスタ内の複数のハードウェアリソースを活用することでレイテンシを削減できます。また、ONTAPのpNFSはデータトラフィックを自動的にリダイレクトするため、管理者は複数のエクスポートパスと場所を管理する必要性が軽減されます。 


| *NFSマウント ポイントの再配置* マウント ポイントを確立した後、ボリュームのアンマウントと再マウントを行うと、システム停止が発生します。ONTAPは、ノード間でネットワーク インターフェイスを移行する機能を提供していますが、管理オーバーヘッドが増加し、NFSv4.xを使用したステートフルNFS接続ではシステム停止が発生します。マウント ポイントを再配置する理由の一部は、データの局所性に関する課題に関連しています。 | *自動パス再配置* pNFSでは、NFSサーバがネットワーク インターフェイスとボリュームの場所を示すテーブルを保持します。pNFSのメタデータ パスを介してクライアントからデータ構造が要求されると、サーバは最適化されたネットワーク パスをクライアントに提供し、クライアントはそのパスをデータ処理に使用します。これにより、ワークロードの管理オーバーヘッドが大幅に削減され、場合によってはパフォーマンスが向上する可能性があります。 
|===


== 構成要件

NetApp ONTAPでpNFSを設定するには、次のものが必要です：

* pNFSをサポートし、NFSv4.1以降でマウントされているNFSクライアント
* ONTAPのNFSサーバでNFSv4.1が有効になっている(`nfs modify -v4.1 enabled`（デフォルトではオフ）
* ONTAPのNFSサーバでpNFSが有効になっている(`nfs modify -v4.1-pnfs enabled`（デフォルトでは無効）
* ノードごとに少なくとも1つのネットワーク インターフェイスがあり、NFSクライアントにルーティング可能
* NFSv4を許可するエクスポート ポリシーとルールを持つSVM内のデータ ボリューム


image::pNFS_fig_020.png[pNFS 構成要件]

上記の構成要件が満たされると、pNFS は単独で動作するようになります。

.関連情報
* link:../nfs-config/index.html["NFSの設定"]
* link:../nfs-admin/ontap-support-nfsv41-concept.html["ONTAPでのNFSv4.1のサポート"]
* link:pnfs-tuning-performance-concept.html#network-interface-connectivity["pNFS のネットワーク インターフェイス接続"]

