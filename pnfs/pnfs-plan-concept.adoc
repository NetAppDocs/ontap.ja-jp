---
permalink: pnfs/pnfs-plan-concept.html 
sidebar: sidebar 
keywords: tr-4063, pnfs, plan, prerequisites, requirements, flexgroup, nfsv4.1, nfsv4.2, interoperability, limits, technical report 
summary: ONTAPで pNFS を使用する前に、前提条件を満たしていること、相互運用性の要件と制限を理解していることを確認してください。 
---
= pNFS 展開の計画
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
環境に pNFS を導入する前に、前提条件を満たしていること、相互運用性の要件と構成の制限を理解していることを確認してください。



== 前提条件

ONTAPで pNFS を有効にして使用する前に、次の要件が満たされていることを確認してください。

* NFSサーバーでNFSv4.1以降が有効になっている
* 少なくとも1つ link:pnfs-architecture-concept.html#data-path-information["ノードごとにデータLIFが存在する"] NFSサーバーをホストするSVMのクラスタ内
* 全て link:pnfs-architecture-concept.html#data-path-information["SVM内のデータLIFはルーティング可能である"] NFSクライアントへ
* NFS クライアントは pNFS をサポートしています (2014 年以降のほとんどの最新の Linux ディストリビューション)
* クライアントとSVM内のすべてのデータLIF間のネットワーク接続が機能している
* DNS 解決（ホスト名を使用している場合）がすべてのデータ LIF に対して適切に設定されている
* link:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupホリユウム"] 設定されている（最良の結果を得るには推奨）
* link:pnfs-tuning-performance-concept.html#nfsv4-x-id-domains["NFSv4.x IDドメインが一致"] クライアントとONTAP間
* link:pnfs-tuning-performance-concept.html#nfs-kerberos["NFS ケルベロス"] （使用されている場合）SVM内のすべてのデータLIFで有効になっている




== ベストプラクティスの概要

環境に pNFS を実装する場合は、次のベスト プラクティスに従ってください。

* 使用 link:pnfs-tuning-performance-concept.html#volume-type-recommendations["FlexGroupホリユウム"] 最高のパフォーマンスと容量拡張を実現
* すべてを確実に link:pnfs-tuning-performance-concept.html#network-interface-connectivity["SVMのネットワークインターフェースはルーティング可能である"] クライアントへ
* link:pnfs-tuning-performance-concept.html#nfsv4-0["NFSv4.0を無効にする"] クライアントがNFSv4.1以降を使用するようにする
* マウントポイントを複数のネットワークインターフェースとノードに分散する
* ラウンドロビンDNSを使用する link:pnfs-tuning-performance-concept.html#metadata-server["負荷分散メタデータサーバー"]
* 確認する link:pnfs-tuning-performance-concept.html#nfsv4-x-id-domains["NFSv4.x IDドメインが一致"] クライアントとサーバー上
* 行為 link:pnfs-tuning-performance-concept.html#network-interface-migration["ネットワークインターフェースの移行"] そして link:pnfs-tuning-performance-concept.html#storage-failoversgivebacks["ストレージフェイルオーバー"] メンテナンス期間中
* 有効にする link:pnfs-tuning-performance-concept.html#nfs-kerberos["NFS ケルベロス"] Kerberos セキュリティを使用している場合は、すべてのデータ LIF で
* 使用を避ける link:pnfs-tuning-performance-concept.html#nfsv4-1-referrals["NFSv4.1 紹介"] pNFSを使用する場合
* テスト link:pnfs-tuning-performance-concept.html#nconnect["nconnect設定"] TCP接続制限の過大化を避けるため注意する
* 考慮する link:pnfs-use-cases-concept.html#pnfs-with-nfsv4-1-session-trunking["セッショントランキング"] 代わりに link:pnfs-use-cases-concept.html#pnfs-with-nconnect["nconnect"] （両方を併用しないでください）
* 確認する link:pnfs-tuning-performance-concept.html#client-recommendations["クライアントOSベンダーのサポート"] 展開前のpNFS用




== 相互運用性

ONTAPの pNFS は、RFC 準拠の NFS クライアントで動作するように設計されています。次の考慮事項が適用されます。

* 最も近代的な link:pnfs-tuning-performance-concept.html#client-recommendations["2014年以降のLinuxディストリビューション"] pNFS をサポート (RHEL 6.4、Fedora 17 以降)
* クライアントOSベンダーにpNFSがサポートされていることを確認してください。
* pNFSはFlexVolと link:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupホリユウム"]
* pNFSはNFSv4.1でサポートされており、 link:pnfs-tuning-performance-concept.html#nfsv4-2["NFSv4.2"]
* pNFSは以下で使用できます link:pnfs-tuning-performance-concept.html#nfs-kerberos["NFS ケルベロス"] (krb5、krb5i、krb5p) ですが、パフォーマンスに影響が出る可能性があります。
* pNFSは、 link:pnfs-use-cases-concept.html#pnfs-with-nconnect["nconnect"] または link:pnfs-use-cases-concept.html#pnfs-with-nfsv4-1-session-trunking["セッショントランキング"] （ただし、両方同時に行うことはできません）
* pNFSは動作しません link:pnfs-tuning-performance-concept.html#nfsv4-0["NFSv4.0"]




== 制限

ONTAPの pNFS には次の制限が適用されます。

* link:pnfs-tuning-performance-concept.html#nconnect["TCP接続制限"] ノードあたりの制限はプラットフォームによって異なります（具体的な制限については、 NetApp Hardware Universe を確認してください）
* 最大ファイルサイズ: ボリュームタイプとONTAPのバージョンによって異なります
* 最大ファイル数: 最大2000億ファイル link:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupホリユウム"]
* 最大容量: 最大60PB link:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupホリユウム"]
* link:pnfs-tuning-performance-concept.html#network-interface-connectivity["ネットワークインターフェース数"]: ノードごとに少なくとも 1 つのデータ LIF が必要です。負荷分散のためにさらに LIF が必要になる場合があります。


使用する場合 link:pnfs-use-cases-concept.html#pnfs-with-nconnect["pNFS を使用した nconnect"]TCP 接続数が急速に増加することに注意してください。

* nconnectを使用した各クライアントマウントは、データLIFごとに複数のTCP接続を作成します。
* 多くのクライアントが高いnconnect値を使用しているため、 link:pnfs-tuning-performance-concept.html#nconnect["TCP接続制限"] 超過する可能性があります
* TCP接続制限を超えると、既存の接続が解放されるまで新しい接続ができなくなります。


.関連情報
* link:pnfs-tuning-performance-concept.html#network-interface-connectivity["pNFS のネットワーク インターフェース接続"]
* link:../nfs-admin/enable-disable-nfsv41-task.html["NFSv4.1の有効化または無効化"]
* link:../nfs-admin/ontap-support-nfsv41-concept.html["ONTAPでのNFSv4.1のサポート"]
* link:../nfs-admin/ontap-support-nfsv42-concept.html["ONTAPでのNFSv4.2のサポート"]
* https://hwu.netapp.com["NetApp Hardware Universe"^]

