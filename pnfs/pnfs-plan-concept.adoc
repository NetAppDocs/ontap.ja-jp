---
permalink: pnfs/pnfs-plan-concept.html 
sidebar: sidebar 
keywords: tr-4063, pnfs, plan, prerequisites, requirements, flexgroup, nfsv4.1, nfsv4.2, interoperability, limits, technical report 
summary: ONTAPでpNFSを使用する前に、前提条件を満たしていること、相互運用性の要件と制限を理解していることを確認してください。 
---
= pNFS 展開の計画
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
環境に pNFS を導入する前に、前提条件を満たしていること、相互運用性の要件と構成の制限を理解していることを確認してください。



== 前提条件

ONTAPでpNFSを有効にして使用する前に、次の要件が満たされていることを確認してください。

* NFSサーバでNFSv4.1以降が有効になっている
* NFSサーバをホストするSVM用のクラスタ内に少なくとも1つのlink:pnfs-architecture-concept.html#data-path-information["ノードごとにデータLIFが存在する"]
* すべてのlink:pnfs-architecture-concept.html#data-path-information["SVM内のデータLIFがルーティング可能である"]NFSクライアントへ
* NFSクライアントはpNFSをサポートしています（2014年以降のほとんどの最新のLinuxディストリビューション）
* クライアントとSVM内のすべてのデータLIF間のネットワーク接続が機能している
* DNS解決（ホスト名を使用している場合）がすべてのデータLIFに対して適切に設定されている
* link:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupボリューム"]が設定されている（最良の結果を得るには推奨）
* link:pnfs-tuning-performance-concept.html#nfsv4-x-id-domains["NFSv4.x IDドメインが一致"]クライアントとONTAPの間
* link:pnfs-tuning-performance-concept.html#nfs-kerberos["NFS Kerberos"]（使用されている場合）がSVM内のすべてのデータLIFで有効になっている




== ベストプラクティスの概要

環境に pNFS を実装する場合は、次のベスト プラクティスに従ってください：

* link:pnfs-tuning-performance-concept.html#volume-type-recommendations["FlexGroupボリューム"]を使用して、最高のパフォーマンスと容量の拡張を実現
* すべてのlink:pnfs-tuning-performance-concept.html#network-interface-connectivity["SVM内のネットワークインターフェイスがルーティング可能である"]をクライアントに確保する
* link:pnfs-tuning-performance-concept.html#nfsv4-0["NFSv4.0を無効にする"]クライアントがNFSv4.1以降を使用するようにします
* マウント ポイントを複数のネットワーク インターフェイスとノードに分散する
* link:pnfs-tuning-performance-concept.html#metadata-server["load balancingメタデータサーバ"]にラウンドロビンDNSを使用
* クライアントとサーバーでlink:pnfs-tuning-performance-concept.html#nfsv4-x-id-domains["NFSv4.x IDドメインが一致"]を検証する
* メンテナンス期間中にlink:pnfs-tuning-performance-concept.html#network-interface-migration["ネットワーク インターフェイスの移行"]およびlink:pnfs-tuning-performance-concept.html#storage-failoversgivebacks["ストレージ フェイルオーバー"]を実施
* Kerberos セキュリティを使用する場合は、すべてのデータ LIF で link:pnfs-tuning-performance-concept.html#nfs-kerberos["NFS Kerberos"] を有効にします。
* pNFSを使用する場合はlink:pnfs-tuning-performance-concept.html#nfsv4-1-referrals["NFSv4.1リファーラル"]を使用しないでください
* link:pnfs-tuning-performance-concept.html#nconnect["nconnect設定"]TCP接続制限の過大化を避けるため、慎重にテストしてください。
* link:pnfs-use-cases-concept.html#pnfs-with-nfsv4-1-session-trunking["セッション トランキング"]をlink:pnfs-use-cases-concept.html#pnfs-with-nconnect["nconnect"]の代替として検討してください（両方を併用しないでください）
* 展開前にlink:pnfs-tuning-performance-concept.html#client-recommendations["クライアントOSベンダーのサポート"]pNFSを検証する




== 相互運用性

ONTAPのpNFSは、RFC準拠のNFSクライアントと連携するように設計されています。以下の点にご注意ください：

* 最新のlink:pnfs-tuning-performance-concept.html#client-recommendations["2014年以降のLinuxディストリビューション"]では pNFS がサポートされています（RHEL 6.4、Fedora 17 以降）
* クライアントOSベンダーにpNFSがサポートされていることを確認してください
* pNFSは、FlexVolとlink:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupボリューム"]の両方で動作します。
* pNFSはNFSv4.1およびlink:pnfs-tuning-performance-concept.html#nfsv4-2["NFSv4.2"]でサポートされています
* pNFSはlink:pnfs-tuning-performance-concept.html#nfs-kerberos["NFS Kerberos"]（krb5、krb5i、krb5p）で使用できますが、パフォーマンスに影響が出る可能性があります
* pNFSはlink:pnfs-use-cases-concept.html#pnfs-with-nconnect["nconnect"]、またはlink:pnfs-use-cases-concept.html#pnfs-with-nfsv4-1-session-trunking["セッション トランキング"]（両方同時には使用できない）と併用できます。
* pNFSはlink:pnfs-tuning-performance-concept.html#nfsv4-0["NFSv4.0"]では動作しません




== 制限

ONTAPのpNFSには次の制限が適用されます。

* link:pnfs-tuning-performance-concept.html#nconnect["TCP接続制限"]ノードあたりの制限はプラットフォームによって異なります（具体的な制限については、NetApp Hardware Universeを確認してください）
* 最大ファイルサイズ：ボリュームタイプとONTAPバージョンによって異なります
* 最大ファイル数：最大2000億ファイルlink:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupボリューム"]
* 最大容量：最大60PB（link:pnfs-architecture-concept.html#interaction-of-pnfs-with-flexgroup-volumes["FlexGroupボリューム"]使用時）
* link:pnfs-tuning-performance-concept.html#network-interface-connectivity["ネットワークインターフェイス数"]：ノードごとに少なくとも1つのデータLIFが必要です。ロード バランシングにはさらに多くのLIFが必要になる場合があります


link:pnfs-use-cases-concept.html#pnfs-with-nconnect["pNFS を使用した nconnect"]を使用する場合、TCP接続数が急速に増加することに注意してください：

* nconnectを使用した各クライアントマウントは、データLIFごとに複数のTCP接続を作成します。
* 多くのクライアントが高いnconnect値を使用すると、link:pnfs-tuning-performance-concept.html#nconnect["TCP接続制限"]を超過する可能性があります
* TCP接続制限を超えると、既存の接続が解放されるまで新しい接続ができなくなります。


.関連情報
* link:pnfs-tuning-performance-concept.html#network-interface-connectivity["pNFS のネットワーク インターフェイス接続"]
* link:../nfs-admin/enable-disable-nfsv41-task.html["NFSv4.1の有効化または無効化"]
* link:../nfs-admin/ontap-support-nfsv41-concept.html["ONTAPでのNFSv4.1のサポート"]
* link:../nfs-admin/ontap-support-nfsv42-concept.html["ONTAPでのNFSv4.2のサポート"]
* https://hwu.netapp.com["NetApp Hardware Universe"^]

