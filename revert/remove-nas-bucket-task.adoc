---
permalink: revert/remove-nas-bucket-task.html 
sidebar: sidebar 
keywords: s3, svm, bucket, object, server, filesystems, nas, directories, revert 
summary: NASデータ用にS3クライアントアクセスを設定している場合に、ONTAP 9.12.1以降からONTAP 9.11.1以前にリバートするには、NASバケット設定を削除し、リバート前にS3ユーザとWindows/UNIXユーザのネームマッピングを削除する必要があります。 
---
= ONTAP 9.12.1以降からリバートする前に、S3 NASバケット設定を削除してください
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NASデータ用のS3クライアントアクセスを設定している場合は、ONTAP 9.12.1以降からONTAP 9.11.1以前にリバートする前に、ONTAPコマンドラインインターフェイス（CLI）を使用してNASバケット設定を削除し、ネームマッピングを削除する必要があります。 （S3ユーザからWindowsユーザまたはUNIXユーザへ）。

.このタスクについて
リバートプロセスの実行中、以下のタスクがバックグラウンドで実行されます。

* 部分的に完了したシングルトンオブジェクトの作成をすべて削除します(つまり'非表示のディレクトリ内のすべてのエントリを削除します)
* 非表示のディレクトリをすべて削除します。S3 NASバケットにマッピングされたエクスポートのルートからアクセスできるボリュームごとに1つずつ存在する場合があります。
* アップロードテーブルを削除します。
* 設定されているすべてのS3サーバについて、default-unix-userおよびdefault-windows-userの値を削除します。


.手順
. S3 NASバケット設定を削除します。
+
[source, cli]
----
vserver object-store-server bucket delete -vserver _svm_name_ -bucket _s3_nas_bucket_name_
----
. UNIXのネームマッピングを削除します。
+
[source, cli]
----
vserver name-mapping delete -vserver _svm_name_ -direction s3-unix
----
. Windowsのネームマッピングを削除します。
+
[source, cli]
----
vserver name-mapping delete -vserver _svm_name_ -direction s3-win
----
. SVMからS3プロトコルを削除します。
+
[source, cli]
----
vserver remove-protocols -vserver <svm_name> -protocols s3
----

