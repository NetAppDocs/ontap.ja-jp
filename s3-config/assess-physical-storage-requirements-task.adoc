---
permalink: s3-config/assess-physical-storage-requirements-task.html 
sidebar: sidebar 
keywords: tr-4814, s3, assess, physical, storage, requirements, cloud volumes ontap 
summary: クライアントのS3ストレージをプロビジョニングする前に、既存のアグリゲート内に新しいオブジェクト ストアのための十分なスペースがあることを確認する必要があります。十分なスペースがない場合は、既存のアグリゲートにディスクを追加するか、必要なタイプの新しいアグリゲートを必要な場所に作成することができます。 
---
= ONTAP S3物理ストレージ要件を評価する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クライアントのS3ストレージをプロビジョニングする前に、既存のアグリゲート内に新しいオブジェクト ストアのための十分なスペースがあることを確認する必要があります。十分なスペースがない場合は、既存のアグリゲートにディスクを追加するか、必要なタイプの新しいアグリゲートを必要な場所に作成することができます。

.タスク概要
S3対応のSVMでS3バケットを作成すると、バケットをサポートするためにFlexGroupボリュームがlink:../s3-config/architecture.html#automatic-flexgroup-sizing-with-ontap-9-14-1-and-later["自動的に作成されます"^]作成されます。ONTAPに基盤となるアグリゲートとFlexGroupコンポーネントを自動的に選択させる（デフォルト）ことも、自分で基盤となるアグリゲートとFlexGroupコンポーネントを選択することもできます。

基盤となるディスクのパフォーマンスについて特定の要件がある場合など、アグリゲートとFlexGroupコンポーネントを自分で指定する場合は、アグリゲートの構成がFlexGroupボリュームのプロビジョニングに関するベストプラクティス ガイドラインに準拠していることを確認してください。詳細については、以下を参照してください。

* link:../flexgroup/index.html["FlexGroupボリューム管理"]
* https://www.netapp.com/pdf.html?item=/media/17251-tr4571apdf.pdf["NetAppテクニカルレポート4571-a：NetApp ONTAP FlexGroupボリュームのベストプラクティス"^]


Cloud Volumes ONTAPからバケットを提供する場合は、基盤となるアグリゲートを手動で選択し、1つのノードのみを使用していることを確認することを強くお勧めします。両方のノードのアグリゲートを使用すると、ノードが地理的に離れたアベイラビリティゾーンに配置され、レイテンシの問題が発生しやすくなるため、パフォーマンスに影響する可能性があります。link:create-bucket-task.html["Cloud Volumes ONTAPのバケットの作成"]の詳細を確認してください。

ONTAP S3サーバを使用して、ローカルFabricPool容量階層（つまり、パフォーマンス階層と同じクラスタ内）を作成できます。これは、たとえば、SSDディスクが一方のHAペアに接続されていて、_コールド_データを別のHAペアのHDDディスクに階層化する場合などに便利です。このユースケースでは、S3サーバとローカル容量階層を含むバケットは、パフォーマンス階層とは異なるHAペアに配置する必要があります。ローカル階層化は、1ノードおよび2ノードのクラスタではサポートされていません。

.手順
. 既存のアグリゲート内の使用可能なスペースを表示します。
+
`storage aggregate show`

+
十分なスペースを備えたアグリゲート、または必要なノードの場所にあるアグリゲートがあれば、S3設定用にその名前を記録します。

+
[listing]
----
cluster-1::> storage aggregate show
Aggregate     Size Available Used% State   #Vols  Nodes  RAID Status
--------- -------- --------- ----- ------- ------ ------ -----------
aggr_0     239.0GB   11.13GB   95% online       1 node1  raid_dp,
                                                         normal
aggr_1     239.0GB   11.13GB   95% online       1 node1  raid_dp,
                                                         normal
aggr_2     239.0GB   11.13GB   95% online       1 node2  raid_dp,
                                                         normal
aggr_3     239.0GB   11.13GB   95% online       1 node2  raid_dp,
                                                         normal
aggr_4     239.0GB   238.9GB   95% online       5 node3  raid_dp,
                                                         normal
aggr_5     239.0GB   239.0GB   95% online       4 node4  raid_dp,
                                                         normal
6 entries were displayed.
----
. 十分なスペースまたは必要なノードの場所を持つアグリゲートがない場合は、 `storage aggregate add-disks`コマンドを使用して既存のアグリゲートにディスクを追加するか、 `storage aggregate create`コマンドを使用して新しいアグリゲートを作成します。


.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-add-disks.html["storage aggregate add-disks"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-create.html["storage aggregate create"^]

