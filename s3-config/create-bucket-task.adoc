---
permalink: s3-config/create-bucket-task.html 
sidebar: sidebar 
keywords: create, bucket 
summary: S3 オブジェクトはバケット内に保持され、他のディレクトリ内のディレクトリにファイルとしてネストされることはありません。 
---
= バケットを作成する
:icons: font
:imagesdir: ../media/


[role="lead"]
S3 オブジェクトは _buckets_-- 内に保持され、他のディレクトリ内のディレクトリにファイルとしてネストされることはありません。

S3 サーバを含む SVM がすでに存在している必要があります。

バケットを作成するときは、次の 2 つのプロビジョニングオプションを選択できます。

* 基盤となるアグリゲートと FlexGroup コンポーネントを ONTAP Select に提供（デフォルト）
+
** ONTAP は、アグリゲートを自動的に選択することで、最初のバケット用の FlexGroup ボリュームを作成して設定します。プラットフォームに使用できる最も高いサービスレベルが自動的に選択されるほか、ストレージサービスレベルを指定することもできます。あとで SVM に追加するバケットには、基盤となる FlexGroup ボリュームがすべて同じになります。
** また、バケットを階層化に使用するかどうかを指定することもできます。この場合、 ONTAP は階層化データのパフォーマンスが最適な低コストのメディアを選択しようとします。


* 基盤となるアグリゲートと FlexGroup コンポーネントを選択する（ advanced 権限のコマンドオプションが必要）
+
** バケットとその FlexGroup ボリュームを作成するアグリゲートを手動で選択し、各アグリゲートのコンスティチュエントの数を指定することができます。バケットを追加する場合：
+
*** 新しいバケットにアグリゲートとコンスティチュエントを指定すると、新しいバケット用の新しい FlexGroup が作成されます。
*** 新しいバケットにアグリゲートとコンスティチュエントを指定しない場合、新しいバケットが既存の FlexGroup に追加されます。詳細については、 FlexGroup のドキュメントを参照してください。


+
link:../flexgroup/index.html["FlexGroup ボリューム管理"]



+
バケットの作成時にアグリゲートとコンスティチュエントを指定した場合、デフォルトまたはカスタムの QoS ポリシーグループは適用されません。あとで 'vserver object-store-server bucket modify コマンドを使用して変更できます



ストレージサービスレベルは、事前定義されたアダプティブ QoS ポリシーグループで、 _value_、 _performion_、 _extreme デフォルトレベルがあります。カスタムの QoS ポリシーグループを定義してバケットに適用すると、デフォルトのストレージサービスレベルのいずれかを使用する代わりに、そのグループを定義して使用することもできます。

link:storage-service-definitions-reference.html["ストレージサービスの定義"]

ローカルの容量階層化を設定する場合は、 S3 サーバが配置されているシステム SVM ではなく、データ SVM にバケットとユーザを作成します。

link:../performance-admin/index.html["パフォーマンス管理"]

その他の設定および表示オプションについては 'vserver object-store-server バケットのマニュアルページを参照してください

.手順
. アグリゲートと FlexGroup コンポーネントを自分で選択する場合は、権限レベルを advanced に設定します（それ以外の場合は admin 権限レベルで十分です）。「 set -privilege advanced
. バケットを作成します。
+
vserver object-store-server bucket create -vserver svm_name -bucket bucket_name [-size integer [KB|MB|GB|TB|PB] [-comment text] [additional _options]]

+
ローカル階層化を設定する場合、 SVM 名はデータ SVM または「 Cluster 」（システム SVM 名）にできます。

+
オプションを指定しない場合、 ONTAP は 5GB のバケットを作成し、システムで使用可能な最上位のサービスレベルに設定します。

+
パフォーマンスまたは使用量に基づいて ONTAP でバケットを作成する場合は、次のいずれかのオプションを使用します。

+
** サービスレベル
+
-service-level オプションには 'value] ' 'performe' または 'extreme のいずれかの値を指定します

** 階層化
+
-used as capacity tier true オプションを含めます



+
基盤となる FlexGroup ボリュームを作成するアグリゲートを指定する場合は、次のオプションを使用します。

+
** aggr-list パラメータには、 FlexGroup ボリューム・コンスティチュエントに使用するアグリゲートのリストを指定します。
+
指定したエントリごとに、そのアグリゲート上にコンスティチュエントが 1 つ作成されます。同じアグリゲートを複数回指定すると、そのアグリゲート上に複数のコンスティチュエントを作成できます。

+
FlexGroup 全体で一貫したパフォーマンスが得られるように、すべてのアグリゲートで同じディスクタイプと RAID グループ構成を使用する必要があります。

** 「 -aggr-list 」パラメータでは、 FlexGroup ボリュームの作成時に「 -aggr-list 」パラメータで指定したアグリゲートを繰り返す回数を指定します。
+
「 -aggr-list-multiplier 」パラメータのデフォルト値は 4 です。



. 必要に応じて QoS ポリシーグループを追加します。
+
「 vserver object-store-server bucket modify-bucket bucket_name -qos-policy-group qos_policy_group 」という形式で指定します

. バケットの作成を確認します。
+
「 vserver object-store-server bucket show [-instance]` 」のように表示されます



次の例は、サイズが 1TB の SVM vs1 のバケットを作成し、アグリゲートを指定します。

[listing]
----
cluster-1::*> vserver object-store-server bucket create -vserver svm1.example.com -bucket testbucket -aggr-list aggr1 -size 1TB
----