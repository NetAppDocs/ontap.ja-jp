---
permalink: s3-config/create-bucket-task.html 
sidebar: sidebar 
keywords: s3, bucket, system manager, 
summary: S3 オブジェクトは _buckets_-- 内に保持され、他のディレクトリ内のディレクトリにファイルとしてネストされることはありません。 
---
= バケットを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
S3 オブジェクトは _buckets_-- 内に保持され、他のディレクトリ内のディレクトリにファイルとしてネストされることはありません。

.作業を開始する前に
S3 サーバを含む SVM がすでに存在している必要があります。

.このタスクについて
CLIでは、バケットを作成する際に、次の2つのプロビジョニングオプションを選択できます。

* 基盤となるアグリゲートと FlexGroup コンポーネントを ONTAP Select に提供（デフォルト）
+
** ONTAP は、アグリゲートを自動的に選択することで、最初のバケット用の FlexGroup ボリュームを作成して設定します。プラットフォームに使用できる最も高いサービスレベルが自動的に選択されるほか、ストレージサービスレベルを指定することもできます。あとで SVM に追加するバケットには、基盤となる FlexGroup ボリュームがすべて同じになります。
** また、バケットを階層化に使用するかどうかを指定することもできます。この場合、 ONTAP は階層化データのパフォーマンスが最適な低コストのメディアを選択しようとします。


* 基盤となるアグリゲートと FlexGroup コンポーネントを選択する（ advanced 権限のコマンドオプションが必要）
+
** バケットとその FlexGroup ボリュームを作成するアグリゲートを手動で選択し、各アグリゲートのコンスティチュエントの数を指定することができます。バケットを追加する場合：
+
*** 新しいバケットにアグリゲートとコンスティチュエントを指定すると、新しいバケット用の新しい FlexGroup が作成されます。
*** 新しいバケットにアグリゲートとコンスティチュエントを指定しない場合、新しいバケットが既存の FlexGroup に追加されます。を参照してください xref:../flexgroup/index.html[FlexGroup ボリューム管理] を参照してください。
+
バケットの作成時にアグリゲートとコンスティチュエントを指定した場合、デフォルトまたはカスタムの QoS ポリシーグループは適用されません。あとで 'vserver object-store-server bucket modify コマンドを使用して変更できます







*注：* Cloud Volumes ONTAP からバケットを処理する場合は、CLI手順 を使用してください。基盤となるアグリゲートを手動で選択し、いずれかのノードだけを使用することを強く推奨します。両方のノードのアグリゲートを使用すると、ノードが地理的に分離された可用性ゾーンに配置されるため、レイテンシの問題の影響を受けやすくなるため、パフォーマンスに影響を及ぼす可能性があります。

ストレージサービスレベルは、事前定義されたアダプティブ QoS ポリシーグループで、 _value_、 _performion_、 _extreme デフォルトレベルがあります。カスタムの QoS ポリシーグループを定義してバケットに適用すると、デフォルトのストレージサービスレベルのいずれかを使用する代わりに、そのグループを定義して使用することもできます。

ONTAP 9.8 以降では、ストレージをプロビジョニングすると QoS がデフォルトで有効になります。QoS を無効にするか、プロビジョニングプロセス中またはあとからカスタムの QoS ポリシーを選択できます。

link:storage-service-definitions-reference.html["ストレージサービスの定義"]

ローカルの容量階層化を設定する場合は、 S3 サーバが配置されているシステム SVM ではなく、データ SVM にバケットとユーザを作成します。

リモートクライアントアクセスの場合は、 S3 対応の Storage VM でバケットを設定する必要があります。S3 対応でない Storage VM にバケットを作成した場合、そのバケットはローカル階層化にのみ使用できます。

link:../performance-admin/index.html["パフォーマンス管理"]

その他の設定および表示オプションについては 'vserver object-store-server バケットのマニュアルページを参照してください



== バケットを作成するプロセス

[role="tabbed-block"]
====
.CLI の使用
--
. アグリゲートと FlexGroup コンポーネントを自分で選択する場合は、権限レベルを advanced に設定します（それ以外の場合は admin 権限レベルで十分です）。「 set -privilege advanced
. バケットを作成します。
+
「 vserver object-store-server bucket create -vserver _svm_name _-bucket_bucket_name _ [-size integer [KB|MB|GB|TB|PB] 」 [-comment text] [additional _options]] 」

+
ローカル階層化を設定する場合、 SVM 名はデータ SVM または「 Cluster 」（システム SVM 名）にできます。

+
オプションを指定しない場合、 ONTAP は 5GB のバケットを作成し、システムで使用可能な最上位のサービスレベルに設定します。

+
パフォーマンスまたは使用量に基づいて ONTAP でバケットを作成する場合は、次のいずれかのオプションを使用します。

+
** サービスレベル
+
-service-level オプションには 'value] ' 'performe' または 'extreme のいずれかの値を指定します

** 階層化
+
-used as capacity tier true オプションを含めます



+
基盤となる FlexGroup ボリュームを作成するアグリゲートを指定する場合は、次のオプションを使用します。

+
** aggr-list パラメータには、 FlexGroup ボリューム・コンスティチュエントに使用するアグリゲートのリストを指定します。
+
指定したエントリごとに、そのアグリゲート上にコンスティチュエントが 1 つ作成されます。同じアグリゲートを複数回指定すると、そのアグリゲート上に複数のコンスティチュエントを作成できます。

+
FlexGroup 全体で一貫したパフォーマンスが得られるように、すべてのアグリゲートで同じディスクタイプと RAID グループ構成を使用する必要があります。

** 「 -aggr-list 」パラメータでは、 FlexGroup ボリュームの作成時に「 -aggr-list 」パラメータで指定したアグリゲートを繰り返す回数を指定します。
+
「 -aggr-list-multiplier 」パラメータのデフォルト値は 4 です。



. 必要に応じて QoS ポリシーグループを追加します。
+
「 vserver object-store-server bucket modify -bucket_bucket_name_-qos-policy-group _qos_policy_group_ 」という形式で指定します

. バケットの作成を確認します。
+
「 vserver object-store-server bucket show [-instance]` 」のように表示されます



.例
次の例は、サイズが 1TB の SVM vs1 のバケットを作成し、アグリゲートを指定します。

[listing]
----
cluster-1::*> vserver object-store-server bucket create -vserver svm1.example.com -bucket testbucket -aggr-list aggr1 -size 1TB
----
--
.System Manager の略
--
. S3 対応 Storage VM に新しいバケットを追加
+
.. [ * ストレージ ] 、 [ バケット ] の順にクリックし、 [ * 追加 ] をクリックします。
.. 名前を入力し、 Storage VM を選択してサイズを入力します。
+
*** この時点で * Save * をクリックすると、次のデフォルト設定でバケットが作成されます。
+
**** どのグループポリシーも有効になっていないかぎり、バケットへのアクセスはユーザに許可されません。
+

NOTE: S3 root ユーザを使用して ONTAP オブジェクトストレージを管理したり権限を共有したりしないでください。オブジェクトストアに無制限にアクセスできます。代わりに、割り当てた管理者権限を持つユーザまたはグループを作成してください。

**** システムで最も利用可能なサービス品質（パフォーマンス）レベル。


*** バケットの設定時にユーザの権限やパフォーマンスレベルを設定するには、「 * More Options * 」をクリックします。あとで設定を変更することもできます。
+
**** 権限を設定するために * More Options * を使用する前に、ユーザーとグループを作成しておく必要があります。
**** S3 オブジェクトストアを FabricPool の階層化に使用する場合は、パフォーマンスサービスレベルではなく、階層化に * 使用（階層化データのパフォーマンスが最適な低コストのメディアを使用）を選択することを検討してください。






. 別の ONTAP システムまたは外部のサードパーティ製アプリケーションである S3 クライアントアプリケーションで、次のように入力して新しいバケットへのアクセスを確認します。
+
** S3 サーバの CA 証明書。
** ユーザーのアクセスキーとシークレットキー。
** S3 サーバの FQDN 名とバケット名。




--
====