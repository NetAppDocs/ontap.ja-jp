---
permalink: s3-config/create-modify-bucket-policy-task.html 
sidebar: sidebar 
keywords: modify, bucket, policy 
summary: デフォルトのバケットポリシーにアクセスルールを追加できます。アクセス制御の範囲はコンテナバケットなので、バケットが 1 つしかない場合は最も適しています。 
---
= バケットポリシーを変更する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
デフォルトのバケットポリシーにアクセスルールを追加できます。アクセス制御の範囲はコンテナバケットなので、バケットが 1 つしかない場合は最も適しています。

S3 サーバとバケットを含む S3 対応の SVM がすでに存在している必要があります。

権限を付与するには、事前にユーザまたはグループを作成しておく必要があります。

新しいユーザとグループに新しいステートメントを追加したり、既存のステートメントの属性を変更したりできます。その他のオプションについては 'vserver object-store-server バケット policy のマニュアルページを参照してください

ユーザとグループの権限は、バケットの作成時または必要に応じてあとから付与できます。バケットの容量と QoS ポリシーグループの割り当てを変更することもできます。

ONTAP 9.9.1以降のリリースでは、ONTAP S3サーバでAWSクライアントオブジェクトのタグ付け機能をサポートする場合、バケットまたはグループポリシーを使用して「GetObjectTagging」、「PutObjectTagging」、「DeleteObjectTagging」の各アクションを許可する必要があります。

[role="tabbed-block"]
====
.CLI の使用
--
.手順
. バケットポリシーにステートメントを追加します。
+
「vserver object-store-server bucket policy add-statement-vserver_svm_name_-bucket_bucket_name __ Effect｛allow|deny｝-action _object_store_actions_-principal_user_names _-resource_store_resources_[-sid text][-index integer]」

+
次のパラメータでアクセス権限を定義します。

+
[cols="1,3"]
|===


 a| 
「効果」
 a| 
この文では ' アクセスを許可または拒否できます



 a| 
「 -action 」を使用します
 a| 
「 * 」を指定すると、すべてのアクションを意味することも、「 GetObject 」、「 PutObject 」、「 DeleteObject 」、「 ListBucket 」、「 GetBucketAcl 」、「 GetObjectAcl 」のうちの 1 つ以上のアクションを意味することもできます。 ListBucketMultipartUploads'`ListMultipartUploadPartUploadParts`



 a| 
「 -principal 」
 a| 
1 つ以上の S3 ユーザまたはグループのリスト。

** 最大 10 のユーザまたはグループを指定できます。
** S3 グループを指定する場合は、「 group/group_name . 」の形式で指定する必要があります
** 「 * 」は、公開アクセスを意味するように指定できます。つまり、 access-key と secret-key を使用せずにアクセスします。
** プリンシパルを指定しない場合、 SVM 内のすべての S3 ユーザにアクセスが許可されます。




 a| 
「 -resource 」と入力します
 a| 
バケットとバケットに含まれるすべてのオブジェクト。ワイルドカード文字「 * 」および「 ? 」 リソースを指定するための正規表現を形成するために使用できます。

|===
+
オプションで '-sid` オプションを使用して ' テキスト文字列をコメントとして指定できます



次の例は、 SVM svm1.example.com および bucket1 にオブジェクトストアサーバのバケットポリシーステートメントを作成し、オブジェクトストアサーバ user1 の readme フォルダへのアクセスを許可するように指定します。

[listing]
----
cluster1::> vserver object-store-server bucket policy statement create -vserver svm1.example.com -bucket bucket1 -effect allow -action GetObject,PutObject,DeleteObject,ListBucket -principal user1 -resource bucket1/readme/* -sid "fullAccessToReadmeForUser1"
----
次の例は、 SVM svm1.example.com および bucket1 にオブジェクトストアサーバのバケットポリシーステートメントを作成し、オブジェクトストアサーバグループ group1 のすべてのオブジェクトへのアクセスを許可するように指定します。

[listing]
----
cluster1::> vserver object-store-server bucket policy statement create -vserver svm1.example.com -bucket bucket1 -effect allow -action GetObject,PutObject,DeleteObject,ListBucket -principal group/group1 -resource bucket1/* -sid "fullAccessForGroup1"
----
--
.System Manager の略
--
.手順
. バケットを編集します。 * Storage > Bucket* をクリックし、目的のバケットをクリックして * Edit * をクリックします。権限を追加または変更するときに、次のパラメータを指定できます。
+
** プリンシパル：アクセスが許可されるユーザまたはグループ。
** 影響：ユーザまたはグループへのアクセスを許可または拒否します。
** アクション：特定のユーザまたはグループのバケットで許可されるアクション。
** リソース：アクセスが許可または拒否されるバケット内のオブジェクトのパスと名前。
+
デフォルトの * _bucketname_* および * _bketname / * _ * は、バケット内のすべてのオブジェクトへのアクセスを許可します。また、単一のオブジェクトへのアクセスを許可することもできます。たとえば、 *_bketname/_*_readme.txt * と指定します。

** 条件（オプション）：アクセス試行時に評価される式。たとえば、アクセスを許可または拒否する IP アドレスを指定できます。




--
====