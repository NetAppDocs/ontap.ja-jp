---
permalink: s3-config/create-s3-object-store-server-task.html 
sidebar: sidebar 
keywords: tr-4814, create, s3 object, store, server 
summary: ONTAPオブジェクト ストア サーバは、ファイル ストレージやブロック ストレージを提供するONTAP NAS / SANサーバとは異なり、S3オブジェクトとしてのデータを管理します。 
---
= ONTAP S3オブジェクトストアサーバを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPオブジェクト ストア サーバは、ファイル ストレージやブロック ストレージを提供するONTAP NAS / SANサーバとは異なり、S3オブジェクトとしてのデータを管理します。

.開始する前に
S3 サーバー名を完全修飾ドメイン名（FQDN）として入力できるように準備しておいてください。クライアントはこれを使用して S3 にアクセスします。FQDN はバケット名で始まってはなりません。仮想ホスト形式でバケットにアクセスする場合、サーバー名は `mydomain.com`として使用されます。例： `bucketname.mydomain.com`。

自己署名CA証明書（前の手順で作成）または外部CAベンダーが署名した証明書が必要です。IPトラフィックがクラスタLIFのみを経由するローカルでの階層化では、CA証明書は必要ありません。

.タスク概要
オブジェクトストアサーバを作成すると、UID 0のルートユーザーが作成されます。このルートユーザーに対してはアクセスキーとシークレットキーは生成されません。ONTAP管理者は `object-store-server users regenerate-keys`コマンドを実行して、このユーザーのアクセスキーとシークレットキーを設定する必要があります。

[NOTE]
====
このrootユーザは使用しないことを推奨します。このrootユーザのアクセス キーまたはシークレット キーを使用するクライアント アプリケーションには、オブジェクト ストア内のすべてのバケットとオブジェクトに対するフル アクセスが付与されます。

====
 `vserver object-store-server`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=vserver+object-store-server["ONTAPコマンド リファレンス"^]をご覧ください。

.手順
[role="tabbed-block"]
====
.System Manager
--
既存のストレージVMにS3サーバーを追加する場合は、この手順を使用してください。新しいストレージVMにS3サーバーを追加するには、link:create-svm-s3-task.html["S3用のストレージSVMを作成する"]を参照してください。

Dataインターフェイス ロールに使用するIPアドレスを確認しておきます。

. 既存のStorage VMでS3を有効にします。
+
.. ストレージ VM を選択します。*ストレージ > ストレージ VM* をクリックし、ストレージ VM を選択して、*設定* をクリックし、*S3* の下の image:icon_gear.gif["アクションアイコン"] をクリックします。
.. *S3 を有効にする*をクリックし、S3 サーバー名を入力します。
.. 証明書タイプを選択します。
+
システムで生成された証明書と独自の証明書のどちらを選択した場合も、その証明書がクライアント アクセスで必要になります。

.. ネットワーク インターフェイスを入力します。


. システム生成の証明書を選択した場合は、新しいストレージVMの作成が確認されると証明書情報が表示されます。*Download*をクリックし、クライアントがアクセスできるように保存してください。
+
** 今後シークレット キーは表示されません。
** 証明書情報が再度必要になった場合は、*ストレージ > ストレージ VM* をクリックし、ストレージ VM を選択して、*設定* をクリックします。




--
.CLI
--
. S3サーバを作成します。
+
`vserver object-store-server create -vserver _svm_name_ -object-store-server _s3_server_fqdn_ -certificate-name _server_certificate_name_ -comment _text_ [additional_options]`

+
追加のオプションは、S3サーバの作成時または作成後いつでも指定できます。

+
** ローカル階層化を構成する場合、SVM名はデータSVMまたはシステムSVM（クラスタ）名のいずれかになります。
** 証明書名は、サーバー CA 証明書（中間またはルート CA 証明書）ではなく、サーバー証明書（エンド ユーザー証明書またはリーフ証明書）の名前である必要があります。
** HTTPS はポート 443 でデフォルトで有効になっています。 `-secure-listener-port`オプションを使用してポート番号を変更できます。
+
HTTPSを有効にすると、SSL / TLSと適切に統合するためにCA証明書が必要になります。ONTAP 9.15.1以降では、S3オブジェクト ストレージでTLS1.3がサポートされます。

** HTTPはデフォルトで無効になっています。有効にすると、サーバーはポート80でリッスンします。 `-is-http-enabled`オプションで有効にするか、 `-listener-port`オプションでポート番号を変更できます。
+
HTTPが有効な場合、要求と応答はクリア テキストでネットワークに送信されます。



. S3が設定済みであることを確認します。
+
`vserver object-store-server show`



.例
次のコマンドは、すべてのオブジェクト ストレージ サーバの設定値を確認します。

[listing]
----
cluster1::> vserver object-store-server show

            Vserver: vs1

                      Object Store Server Name: s3.example.com
                          Administrative State: up
                        Listener Port For HTTP: 80
                Secure Listener Port For HTTPS: 443
                                  HTTP Enabled: false
                                 HTTPS Enabled: true
             Certificate for HTTPS Connections: svm1_ca
                                       Comment: Server comment
----
--
====