---
permalink: s3-config/enable-ontap-s3-access-local-fabricpool-task.html 
sidebar: sidebar 
keywords: enable, ontap, s3 access, local, fabricpool, tiering 
summary: ONTAP S3をローカルのFabricPool大容量階層として使用するには、作成したバケットに基づいてオブジェクト ストアを定義し、そのオブジェクト ストアを高パフォーマンス階層のアグリゲートに接続してFabricPoolを作成する必要があります。 
---
= ローカルのFabricPool階層化用のONTAP S3アクセスの有効化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP S3をローカルのFabricPool大容量階層として使用するには、作成したバケットに基づいてオブジェクト ストアを定義し、そのオブジェクト ストアを高パフォーマンス階層のアグリゲートに接続してFabricPoolを作成する必要があります。

.開始する前に
ONTAP S3サーバー名とバケット名が必要であり、S3サーバーはクラスタLIF（ `-vserver Cluster`パラメータ付き）を使用して作成されている必要があります。

.タスク概要
オブジェクト ストアの設定には、S3サーバとバケットの名前や認証要件など、ローカルの大容量階層に関する情報が保存されます。

作成したオブジェクト ストア設定を、別のオブジェクト ストアやバケットに関連付けないでください。ローカル階層用に複数のバケットを作成できますが、1つのバケットに複数のオブジェクト ストアを作成することはできません。

ローカルの大容量階層にはFabricPoolライセンスは必要ありません。

.手順
. ローカルの大容量階層用のオブジェクト ストアを作成します。
+
`storage aggregate object-store config create -object-store-name _store_name_ -ipspace Cluster -provider-type ONTAP_S3 -server _S3_server_name_ -container-name _bucket_name_ -access-key _access_key_ -secret-password password`

+
**  `-container-name`は、作成したS3バケットです。
** この `-access-key`パラメータは ONTAP S3 サーバへの要求を承認します。
**  `-secret-password`パラメータ（シークレットアクセスキー）は、ONTAP S3サーバへのリクエストを認証します。
**  `-is-certificate-validation-enabled`パラメータを `false`に設定すると、ONTAP S3の証明書チェックを無効にすることができます。


+
[listing]
----
cluster1::> storage aggregate object-store config create
-object-store-name MyLocalObjStore -ipspace Cluster -provider-type ONTAP_S3 -server s3.example.com
-container-name bucket1 -access-key myS3key -secret-password myS3pass
----
. オブジェクト ストアの設定情報を表示して確認します。
+
`storage aggregate object-store config show`

. オプション：link:../fabricpool/determine-data-inactive-reporting-task.html["Inactive Data Reportingによるボリューム内のアクセス頻度の低いデータ量の確認"]。
+
ボリューム内のアクセス頻度の低いデータの量を確認すると、どのアグリゲートをFabricPoolのローカル階層化に使用するかを決定するのに役立ちます。

. オブジェクト ストアをアグリゲートに接続します。
+
`storage aggregate object-store attach -aggregate _aggr_name_ -object-store-name _store_name_`

+
 `allow-flexgroup *true*`オプションを使用して、FlexGroupボリューム構成要素を含むアグリゲートをアタッチできます。

+
[listing]
----
cluster1::> storage aggregate object-store attach
-aggregate aggr1 -object-store-name MyLocalObjStore
----
. オブジェクト ストアの情報を表示し、接続したオブジェクト ストアが使用可能になっていることを確認します。
+
`storage aggregate object-store show`

+
[listing]
----
cluster1::> storage aggregate object-store show

Aggregate    Object Store Name    Availability State
---------    -----------------    ------------------
aggr1        MyLocalObjStore      available
----


.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-attach.html["storage aggregate object-store attach"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-config-create.html["storage aggregate object-store config create"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-config-show.html["storage aggregate object-store config show"^]
* link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-object-store-show.html["storage aggregate object-store show"^]

