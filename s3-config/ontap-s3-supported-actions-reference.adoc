---
permalink: s3-config/ontap-s3-supported-actions-reference.html 
sidebar: sidebar 
keywords: ontap s3, supported, actions 
summary: ONTAP S3 でサポートされているアクション。 
---
= ONTAP S3でサポートされる処理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP S3アクションは、以下に示す場合を除き、標準のS3 REST APIでサポートされています。詳細については、link:https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html["Amazon S3 APIリファレンス"^]をご覧ください。


NOTE: これらのS3アクションは、ONTAPでネイティブS3バケットを使用する場合に特にサポートされます。バージョン管理、オブジェクトロック、その他の機能に関連するアクションなど、一部のアクションは、link:../s3-multiprotocol/index.html["S3 NAS バケット（マルチプロトコル NAS ボリューム内の S3）"]を使用する場合はサポートされません。

特定の操作について明記されていない限り、ONTAP 9.8以降では次の共通要求ヘッダーがサポートされます：

* `Authorization`
* `Connection`
* `Content-Length`
* `Content-MD5`
* `Content-Type`
* `Date`
* `Expect`
* `Host`
* `x-amz-date`




== バケットの処理

AWS S3 APIを使用するONTAPでサポートされる処理は次のとおりです。

|===
| バケットの処理 | ONTAPでのサポート開始 


 a| 
CreateBucket

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `x-amz-bucket-object-lock-enabled`

| ONTAP 9.11.1 


 a| 
DeleteBucket

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
| ONTAP 9.11.1 


| DeleteBucketCors ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| DeleteBucketLifecycle ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
DeleteBucketPolicy

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
| ONTAP 9.12.1 


| GetBucketAcl ONTAP S3は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| GetBucketCors ONTAP S3は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
GetBucketLifecycleConfiguration

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
 a| 
ONTAP 9.13.1

*有効期限アクションのみがサポートされています



| GetBucketLocation ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.10.1 


| GetBucketPolicy ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.12.1 


| GetBucketVersioning ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.11.1 


| HeadBucket ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| ListAllMyBuckets ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| ListBuckets ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| ListBucketVersions ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.11.1 


| PutBucket  a| 
* ONTAP 9.11.1
* ONTAP 9.8 - ONTAP REST APIのみでサポート




| PutBucketCors ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。  a| 
ONTAP 9.8



| PutBucketLifecycleConfiguration ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.13.1 * 有効期限アクションのみがサポートされています 


| PutBucketPolicy ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.12.1 


| PutBucketVersioning ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.11.1 
|===


== オブジェクトの処理

ONTAP 9.9.1以降では、ONTAP S3でオブジェクト メタデータとタグ付けがサポートされます。

* PutObjectとCreateMultipartUploadは、 `x-amz-meta-<key>.`を使用してキーと値のペアを含めます
+
例えば： `x-amz-meta-project: ontap_s3`。

* GetObjectとHeadObjectは、ユーザー定義のメタデータを返します。
* メタデータと違って、タグは次の処理でオブジェクトとは別に読み取ることができます。
+
** PutObjectTagging
** GetObjectTagging
** DeleteObjectTagging




ONTAP 9.11.1以降では、ONTAP S3で、以下のONTAP APIを使用したオブジェクトのバージョン管理と関連処理がサポートされます。

* GetBucketVersioning
* ListBucketVersions
* PutBucketVersioning


特定の操作について明記されていない限り、次の URI クエリパラメータがサポートされます。

* `versionId`（ONTAP 9.12.1以降のオブジェクト操作に必要）


|===
| オブジェクトの処理 | ONTAPでのサポート開始 


 a| 
AbortMultipartUpload

ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダー、および次の追加の URI クエリパラメータをサポートしています：
`uploadId`
 a| 
ONTAP 9.8



 a| 
CompleteMultipartUpload

ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダー、および次の追加の URI クエリパラメータをサポートしています：
`uploadId`
 a| 
ONTAP 9.8



 a| 
CopyObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `x-amz-copy-source`
* `x-amz-copy-source-if-match`
* `x-amz-copy-source-if-modified-since`
* `x-amz-copy-source-if-none-match`
* `x-amz-copy-source-if-unmodified-since`
* `x-amz-metadata-directive`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-tagging`
* `x-amz-tagging-directive`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.12.1 


 a| 
CreateMultipartUpload

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `Cache-Control`
* `Content-Disposition`
* `Content-Encoding`
* `Content-Language`
* `Expires`
* `x-amz-tagging`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.8 


 a| 
DeleteObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `x-amz-bypass-governance-retention`

| ONTAP 9.8 


| DeleteObjects ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：* `x-amz-bypass-governance-retention` | ONTAP 9.11.1 


 a| 
DeleteObjectTagging

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
| ONTAP 9.9.1 


 a| 
GetObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI クエリパラメータをサポートしています：

* `partNumber`
* `response-cache-control`
* `response-content-disposition`
* `response-content-encoding`
* `response-content-language`
* `response-content-type`
* `response-expires`


そして、この追加のリクエスト ヘッダー：

* 範囲

| ONTAP 9.8 


| GetObjectAcl ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
GetObjectAttributes

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `x-amz-object-attributes`

| ONTAP 9.17.1 


| GetObjectRetention ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.14.1 


| GetObjectTagging ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.9.1 


| HeadObject ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
ListMultipartUpload

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています：

* `delimiter`
* `key-marker`
* `max-uploads`
* `prefix`
* `upload-id-marker`

| ONTAP 9.8 


 a| 
ListObjects

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています：

* `delimiter`
* `encoding-type`
* `marker`
* `max-keys`
* `prefix`

| ONTAP 9.8 


 a| 
ListObjectsV2

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています：

* `continuation-token`
* `delimiter`
* `encoding-type`
* `fetch-owner`
* `max-keys`
* `prefix`
* `start-after`

| ONTAP 9.8 


 a| 
ListObjectVersions

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています：

* `delimiter`
* `encoding-type`
* `key-marker`
* `max-keys`
* `prefix`
* `version-id-marker`

| ONTAP 9.11.1 


 a| 
ListParts

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています：

* `max-parts`
* `part-number-marker`
* `uploadId`

| ONTAP 9.8 


 a| 
PutObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `Cache-Control`
* `Content-Disposition`
* `Content-Encoding`
* `Content-Language`
* `Expires`
* `x-amz-tagging`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.8 


| PutObjectLockConfiguration ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.14.1 


 a| 
PutObjectRetention

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています：

* `x-amz-bypass-governance-retention`

| ONTAP 9.14.1 


| PutObjectTagging ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.9.1 


| UploadPart | ONTAP 9.8 


 a| 
UploadPartCopy

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています：

* `partNumber`
* `uploadId`


追加のリクエストヘッダーは次のとおりです：

* `x-amz-copy-source`
* `x-amz-copy-source-if-match`
* `x-amz-copy-source-if-modified-since`
* `x-amz-copy-source-if-none-match`
* `x-amz-copy-source-if-unmodified-since`
* `x-amz-copy-source-range`

| ONTAP 9.12.1 
|===


== グループ ポリシー

以下の処理はS3に固有のものではなく、Identity and Access Management（IAM）プロセスに関連する一般的なものです。ONTAPではこれらのコマンドをサポートしますが、IAM REST APIは使用しません。

* Create Policy
* AttachGroup Policy




== ユーザ管理

以下の処理はS3に固有のものではなく、IAMプロセスに関連する一般的なものです。

* CreateUser
* DeleteUser
* CreateGroup
* DeleteGroup




== リリース別のS3の操作

.ONTAP 9.14.1
ONTAP 9.14.1では、S3オブジェクト ロックのサポートが追加されました。


NOTE: リーガル ホールド処理（保持期間の定義がないロック）はサポートされていません。

* GetObjectLockConfiguration
* GetObjectRetention
* PutObjectLockConfiguration
* PutObjectRetention


.ONTAP 9.13.1
ONTAP 9.13.1では、バケット ライフサイクル管理のサポートが追加されました。

* DeleteBucketLifecycleConfiguration
* GetBucketLifecycleConfiguration
* PutBucketLifecycleConfiguration


.ONTAP 9.12.1
ONTAP 9.12.1では、バケット ポリシーとオブジェクト コピー機能のサポートが追加されました。

* DeleteBucketPolicy
* GetBucketPolicy
* PutBucketPolicy
* CopyObject
* UploadPartCopy


.ONTAP 9.11.1
ONTAP 9.11.1 では、バージョン管理、署名済み URL、チャンクアップロードのサポート、S3 API を使用したバケットの作成や削除などの一般的な S3 アクションのサポートが追加されました。

* ONTAP S3は、 `x-amz-content-sha256:
STREAMING-AWS4-HMAC-SHA256-PAYLOAD`を使用したチャンクアップロード署名リクエストをサポートするようになりました。
* ONTAP S3 では、署名済み URL を使用してオブジェクトを共有したり、ユーザークレデンシャルを必要とせずに他のユーザーがオブジェクトをアップロードできるようにしたりするクライアントアプリケーションがサポートされるようになりました。
* CreateBucket
* DeleteBucket
* GetBucketVersioning
* ListBucketVersions
* PutBucket
* PutBucketVersioning
* DeleteObjects
* ListObjectVersions



NOTE: 基礎となるFlexGroupは最初のバケットが作成されるまで作成されないため、外部クライアントがCreateBucketを使用してバケットを作成する前に、まずONTAPでバケットを作成する必要があります。

.ONTAP 9.10.1
ONTAP 9.10.1では、SnapMirror S3とGetBucketLocationのサポートが追加されました。

* GetBucketLocation


.ONTAP 9.9.1
ONTAP 9.9.1では、ONTAP S3にオブジェクト メタデータのサポートと、タグ付けのサポートが追加されました。

* PutObjectとCreateMultipartUploadに、 `x-amz-meta-<key>`を使用したキーと値のペアが含まれるようになりました。例： `x-amz-meta-project: ontap_s3`
* GetObjectとHeadObjectで、ユーザ定義のメタデータが返されるようになりました。


タグはバケットでも使用できます。メタデータと違って、タグは次の処理でオブジェクトとは別に読み取ることができます。

* PutObjectTagging
* GetObjectTagging
* DeleteObjectTagging

