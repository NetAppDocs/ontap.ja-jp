---
permalink: s3-config/ontap-s3-supported-actions-reference.html 
sidebar: sidebar 
keywords: ontap s3, supported, actions 
summary: ONTAP S3 でサポートされている処理。 
---
= ONTAP S3でサポートされる操作
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP S3の操作は、以下に示す以外は標準のS3 REST APIでサポートされます。詳細については、を参照してlink:https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html["Amazon S3 APIリファレンス』を参照してください"^]ください。


NOTE: これらのS3アクションは、特にONTAPでネイティブのS3バケットを使用する場合にサポートされます。バージョン管理、オブジェクトロック、その他の機能に関連付けられたアクションなど、これらのアクションの一部は、を使用している場合はサポートされませんlink:../s3-multiprotocol/index.html["S3 NASバケット（マルチプロトコルNASボリューム内のS3）"]。

特定の操作について明記されていない限り、 ONTAP 9.8 以降では次の共通要求ヘッダーがサポートされます。

* `Authorization`
* `Connection`
* `Content-Length`
* `Content-MD5`
* `Content-Type`
* `Date`
* `Expect`
* `Host`
* `x-amz-date`




== バケットの処理

AWS S3 APIを使用するONTAPでサポートされる処理は次のとおりです。

|===
| バケットの処理 | ONTAPでのサポート開始 


 a| 
CreateBucket

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `x-amz-bucket-object-lock-enabled`

| ONTAP 9 .11.1 


 a| 
DeleteBucket

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
| ONTAP 9 .11.1 


| DeleteBucketCors ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| DeleteBucketLifecycle ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
DeleteBucketPolicy

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
| ONTAP 9 12.1 


| GetBucketAcl ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| GetBucketCors ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
GetBucketLifecycleConfiguration

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
 a| 
ONTAP 9 .13.1

*有効期限アクションのみがサポートされています



| GetBucketLocation ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 10.1 


| GetBucketPolicy ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 12.1 


| GetBucketVersioning ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .11.1 


| HeadBucket ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| ListAllMyBuckets ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| ListBuckets ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


| ListBucketVersions ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .11.1 


| PutBucket  a| 
* ONTAP 9 .11.1
* ONTAP 9.8 - ONTAP REST APIのみでサポート




| PutBucketCors ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。  a| 
ONTAP 9.8



| PutBucketLifecycleConfiguration ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.13.1 * 有効期限アクションのみがサポートされています 


| PutBucketPolicy ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 12.1 


| PutBucketVersioning ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .11.1 
|===


== オブジェクトの処理

ONTAP 9.9.1以降では、ONTAP S3でオブジェクト メタデータとタグ付けがサポートされます。

* PutObjectとCreateMultipartUploadには、 `x-amz-meta-<key>.`
+
例： `x-amz-meta-project: ontap_s3`。

* GetObjectとHeadObjectは、ユーザ定義のメタデータを返します。
* メタデータと違って、タグは次の処理でオブジェクトとは別に読み取ることができます。
+
** PutObjectTagging
** GetObjectTagging
** DeleteObjectTagging




ONTAP 9 .11.1以降では、ONTAP S3でオブジェクトのバージョン管理と次のONTAP APIによる関連操作がサポートされます。

* GetBucketVersioning
* ListBucketVersions
* PutBucketVersioning


特定の操作について明記されていない限り、次の URI クエリ パラメータがサポートされます。

* `versionId`（ ONTAP 9.12.1以降のオブジェクト操作に必要なため）


|===
| オブジェクトの処理 | ONTAPでのサポート開始 


 a| 
AbortMultipartUpload

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI クエリ パラメータをサポートしています。
`uploadId`
 a| 
ONTAP 9.8



 a| 
CompleteMultipartUpload

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI クエリ パラメータをサポートしています。
`uploadId`
 a| 
ONTAP 9.8



 a| 
CopyObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `x-amz-copy-source`
* `x-amz-copy-source-if-match`
* `x-amz-copy-source-if-modified-since`
* `x-amz-copy-source-if-none-match`
* `x-amz-copy-source-if-unmodified-since`
* `x-amz-metadata-directive`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-tagging`
* `x-amz-tagging-directive`
* `x-amz-meta-<metadata-name>`

| ONTAP 9 12.1 


 a| 
CreateMultipartUpload

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `Cache-Control`
* `Content-Disposition`
* `Content-Encoding`
* `Content-Language`
* `Expires`
* `x-amz-tagging`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.8 


 a| 
deleteObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `x-amz-bypass-governance-retention`

| ONTAP 9.8 


| DeleteObjects ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています: * `x-amz-bypass-governance-retention` | ONTAP 9 .11.1 


 a| 
DeleteObjectTagging

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。
| ONTAP 9 .9.1 


 a| 
GetObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI クエリ パラメータをサポートしています。

* `partNumber`
* `response-cache-control`
* `response-content-disposition`
* `response-content-encoding`
* `response-content-language`
* `response-content-type`
* `response-expires`


そして、この追加のリクエスト ヘッダー:

* 範囲

| ONTAP 9.8 


| GetObjectAcl ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
オブジェクト属性の取得

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `x-amz-object-attributes`

| ONTAP 9.17.1 


| GetObjectRetention ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .14.1 


| GetObjectTagging ONTAP S3 は、この要求のすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .9.1 


| HeadObject ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9.8 


 a| 
ListMultipartUpload

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています。

* `delimiter`
* `key-marker`
* `max-uploads`
* `prefix`
* `upload-id-marker`

| ONTAP 9.8 


 a| 
ListObjects

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています。

* `delimiter`
* `encoding-type`
* `marker`
* `max-keys`
* `prefix`

| ONTAP 9.8 


 a| 
ListObjectsV2

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています。

* `continuation-token`
* `delimiter`
* `encoding-type`
* `fetch-owner`
* `max-keys`
* `prefix`
* `start-after`

| ONTAP 9.8 


 a| 
ListObjectVersions

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています。

* `delimiter`
* `encoding-type`
* `key-marker`
* `max-keys`
* `prefix`
* `version-id-marker`

| ONTAP 9 .11.1 


 a| 
ListParts

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています。

* `max-parts`
* `part-number-marker`
* `uploadId`

| ONTAP 9.8 


 a| 
PutObject

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `Cache-Control`
* `Content-Disposition`
* `Content-Encoding`
* `Content-Language`
* `Expires`
* `x-amz-tagging`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.8 


| PutObjectLockConfiguration ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .14.1 


 a| 
PutObjectRetention

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加ヘッダーをサポートしています。

* `x-amz-bypass-governance-retention`

| ONTAP 9 .14.1 


| PutObjectTagging ONTAP S3 は、このリクエストのすべての共通パラメータとヘッダーをサポートしています。 | ONTAP 9 .9.1 


| パーツのアップロード | ONTAP 9.8 


 a| 
パーツコピーをアップロード

ONTAP S3 は、この要求のすべての共通パラメータとヘッダーに加えて、次の追加の URI パラメータをサポートしています。

* `partNumber`
* `uploadId`


さらに次の追加のリクエスト ヘッダーがあります。

* `x-amz-copy-source`
* `x-amz-copy-source-if-match`
* `x-amz-copy-source-if-modified-since`
* `x-amz-copy-source-if-none-match`
* `x-amz-copy-source-if-unmodified-since`
* `x-amz-copy-source-range`

| ONTAP 9 12.1 
|===


== グループポリシー

これらの処理はS3に固有の処理ではなく、一般にIdentity and Management（IAM）プロセスに関連しています。ONTAPはこれらのコマンドをサポートしていますが、IAM REST APIは使用しません。

* ポリシーの作成
* AttachGroupポリシー




== ユーザ管理

以下の処理はS3に固有のものではなく、IAMプロセスに関連する一般的なものです。

* CreateUser
* DeleteUser
* CreateGroup
* DeleteGroup




== リリース別のS3操作

.ONTAP 9 .14.1
ONTAP 9 .14.1では、S3オブジェクトロックのサポートが追加されました。


NOTE: リーガルホールド処理（保持期間が定義されていないロック）はサポートされません。

* GetObjectLockConfigurationの略
* GetObjectRetention
* PutObjectLockConfiguration
* PutObjectRetention


.ONTAP 9 .13.1
ONTAP 9 .13.1では、バケットライフサイクル管理のサポートが追加されています。

* DeleteBucketLifecycleConfiguration
* GetBucketLifecycleConfiguration
* PutBucketLifecycleConfiguration


.ONTAP 9 12.1
ONTAP 9 .12.1では、バケットポリシーのサポートとオブジェクトのコピー機能が追加されています。

* DeleteBucketPolicy
* GetBucketPolicy
* PutBucketPolicy
* CopyObject
* パーツコピーをアップロード


.ONTAP 9 .11.1
ONTAP 9 .11.1では、バージョン管理、事前定義されたURL、チャンクアップロードがサポートされるようになりました。また、S3 APIを使用したバケットの作成や削除など、一般的なS3操作もサポートされるようになりました。

* ONTAP S3は、次の方法でチャンクアップロード署名リクエストをサポートするようになりました。 `x-amz-content-sha256:
STREAMING-AWS4-HMAC-SHA256-PAYLOAD`
* ONTAP S3では、クライアントアプリケーションが事前定義されたURLを使用してオブジェクトを共有したり、他のユーザがユーザクレデンシャルを必要とせずにオブジェクトをアップロードしたりできるようになりました。
* CreateBucket
* DeleteBucket
* GetBucketVersioning
* ListBucketVersions
* PutBucket
* PutBucketVersioning
* オブジェクトの削除
* ListObjectVersions



NOTE: 基盤となるFlexGroupは最初のバケットがになるまで作成されないため、外部クライアントがCreateBucketを使用してバケットを作成する前に、ONTAPでバケットを作成する必要があります。

.ONTAP 9 10.1
ONTAP 9 .10.1では、SnapMirror S3およびGetBucketLocationのサポートが追加されました。

* GetBucketLocation


.ONTAP 9 .9.1
ONTAP 9 .9.1では、ONTAP S3にオブジェクトメタデータのサポートとタグ付けのサポートが追加されました。

* PutObjectとCreateMultipartUploadに、を使用したキーと値のペアが追加されました `x-amz-meta-<key>`。例： `x-amz-meta-project: ontap_s3`。
* GetObjectとHeadObjectがユーザ定義のメタデータを返すようになりました。


タグはバケットでも使用できます。メタデータとは異なり、タグは次のコマンドを使用してオブジェクトから独立して読み取ることができます。

* PutObjectTagging
* GetObjectTagging
* DeleteObjectTagging

