---
permalink: s3-multiprotocol/nas-data-requirements-client-access-reference.html 
sidebar: sidebar 
keywords: s3, mapping, directory, access, configuration, object, nas, bucket 
summary: S3 アクセス用に NAS ファイルとディレクトリをマッピングすると、一部の標準的な NAS の動作が変わることを理解しておくことが重要です。 
---
= ONTAP S3クライアントアクセスのNASデータ要件について学ぶ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NASのファイルとディレクトリをS3アクセス用にマッピングするときは、互換性に関する問題がいくつかあることに注意してください。S3 NASバケットを使用してNASファイルを提供する前に、NASファイル階層の調整が必要になることがあります。

S3 NASバケットは、S3バケットの構文を使用してNASディレクトリをマッピングすることでディレクトリへのS3アクセスを提供し、ディレクトリ ツリー内のファイルはオブジェクトとして表示されます。オブジェクト名は、S3バケット設定で指定されたディレクトリに対する相対パスで、ディレクトリはスラッシュで区切られます。

S3 NASバケットを使用してファイルとディレクトリを提供する場合、このマッピングにはいくつかの要件があります。

* S3の名前は最大1024バイトのため、パス名が1024バイトよりも長いファイルはS3を使用してアクセスできません。
* ファイル名とディレクトリ名は最大255文字のため、スラッシュ（「/」）以外の文字が256文字以上続く文字列をオブジェクト名に含めることはできません。
* バックスラッシュ（「\」）で区切られたSMBパス名は、S3にはスラッシュ（「/」）を含むオブジェクト名として表示されます。
* 有効なS3オブジェクト名のペアの中には、マッピングされたNASディレクトリツリー内で共存できないものがあります。例えば、有効なS3オブジェクト名「part1/part2」と「part1/part2/part3」は、NASディレクトリツリー内で同時に存在できないファイルにマッピングされます。「part1/part2」は、最初の名前ではファイルであり、もう一方の名前ではディレクトリであるためです。
+
** 「part1/part2」が既存のファイルである場合、「part1/part2/part3」のS3作成は失敗します。
** 「part1/part2/part3」が既存のファイルである場合、「part1/part2」のS3作成または削除は失敗します。
** 既存のオブジェクトと同じ名前のS3オブジェクトを作成すると、NASにある（バージョン管理されていないバケット内の）既存のオブジェクトは置き換えられます。ただし、名前が完全に一致する必要があります。上記の例では、名前が競合していますが一致してはいないため、既存のオブジェクトは削除されません。




オブジェクトストアは非常に多くの任意の名前をサポートするように設計されていますが、NASディレクトリ構造では、非常に多くの名前を1つのディレクトリに配置するとパフォーマンス上の問題が発生する可能性があります。特に、スラッシュ（'/'）文字を含まない名前はすべてNASマッピングのルートディレクトリに配置されます。NASに適さない名前を多用するアプリケーションは、NASマッピングではなく、実際のオブジェクトストアバケットでホストする方が適切です。
