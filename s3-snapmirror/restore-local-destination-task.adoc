---
sidebar: sidebar 
permalink: s3-snapmirror/restore-local-destination-task.html 
keywords: restore a bucket from the destination storage VM local cluster 
summary: ソース バケットのデータがなくなったり破損したりした場合、デスティネーション バケットからリストアしてデータを再度取り込むことができます。 
---
= ローカル クラスタのデスティネーションSVMからONTAP S3バケットをリストアする
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ソース バケットのデータがなくなったり破損したりした場合、デスティネーション バケットからオブジェクトをリストアしてデータを再度取り込むことができます。

.タスク概要
デスティネーション バケットは既存のバケットにも新しいバケットにもリストアできます。リストア処理のターゲット バケットには、デスティネーション バケットの使用済み論理スペースよりも多くのスペースが必要です。

既存のバケットを使用する場合は、リストア処理の開始時に空にする必要があります。リストアでは、バケットを特定の時点に「ロールバック」するのではなく、空のバケットに以前の内容を取り込みます。

リストア処理はローカル クラスタから開始する必要があります。

[role="tabbed-block"]
====
.System Manager
--
バックアップ データをリストアします。

. *Protection > Relationships*をクリックし、バケットを選択します。
. image:icon_kabob.gif["メニューオプションアイコン"]をクリックし、*復元*を選択します。
. *ソース*で、*既存のバケット*（デフォルト）または*新しいバケット*を選択します。
+
** *既存のバケット*（デフォルト）に復元するには、次の操作を実行します：
+
*** 既存のバケットを検索するクラスタとStorage VMを選択します。
*** 既存のバケットを選択します。




. デスティネーションのS3サーバCA証明書の内容をコピーして貼り付けます。
+
** *新しいバケット*に復元するには、次の値を入力します：
+
*** 新しいバケットをホストするクラスタとStorage VM。
*** 新しいバケットの名前、容量、パフォーマンス サービス レベル。詳細については、link:../s3-config/storage-service-definitions-reference.html["ストレージ サービス レベル"]を参照してください。
*** デスティネーションのS3サーバCA証明書の内容。




. *Destination*で、ソースS3サーバーCA証明書の内容をコピーして貼り付けます。
. *保護* > 関係をクリックして、リストアの進行状況を監視します。


.ロックされたバケットのリストア
ONTAP 9.14.1以降では、ロックされたバケットをバックアップし、必要に応じてリストアできます。

オブジェクトロックされたバケットは、新規または既存のバケットにリストアできます。次のシナリオでは、オブジェクトロックされたバケットをデスティネーションとして選択できます。

* *新しいバケットへの復元*：オブジェクトロックが有効になっている場合、オブジェクトロックが有効になっているバケットを作成することで、バケットを復元できます。ロックされたバケットを復元すると、元のバケットのオブジェクトロックモードと保持期間が複製されます。新しいバケットに異なるロック保持期間を定義することもできます。この保持期間は、他のソースのロックされていないオブジェクトに適用されます。
* *既存のバケットへの復元*：オブジェクトロックされたバケットは、既存のバケットでバージョニングと同様のオブジェクトロックモードが有効になっている限り、既存のバケットに復元できます。元のバケットの保持期間は維持されます。
* *ロックされていないバケットの復元*：バケットでオブジェクトロックが有効になっていない場合でも、ソース クラスタ上のオブジェクトロックが有効になっているバケットに復元できます。バケットを復元すると、ロックされていないすべてのオブジェクトがロックされ、デスティネーション バケットの保持モードと保有期間が適用されます。


--
.CLI
--
. オブジェクトを新しいバケットに復元する場合は、新しいバケットを作成してください。詳細については、link:create-cloud-backup-new-bucket-task.html["新しいONTAP S3バケットのクラウドバックアップ関係を作成する"]をご覧ください。
. デスティネーション バケットのリストア処理を開始します。
`snapmirror restore -source-path _svm_name_:/bucket/_bucket_name_ -destination-path _svm_name_:/bucket/_bucket_name_`
+
.例
[listing]
----
clusterA::> snapmirror restore -source-path vs0:/bucket/test-bucket -destination-path vs1:/bucket/test-bucket-mirror
----
+
 `snapmirror restore`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/snapmirror-restore.html["ONTAPコマンド リファレンス"^]を参照してください。



--
====