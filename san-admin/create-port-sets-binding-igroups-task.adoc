---
permalink: san-admin/create-port-sets-binding-igroups-task.html 
sidebar: sidebar 
keywords: create, port, sets, binding, igroups, portsets,portset 
summary: Selective LUN Map（SLM）を使用するだけでなく、ポートセットを作成してそのポートセットをigroupにバインドすることで、イニシエータがLUNへのアクセスに使用できるLIFをさらに制限できます。ポートセットをigroupにバインドしない場合、igroup内のすべてのイニシエータは、LUNを所有するノードおよびその所有ノードのHAパートナー上のすべてのLIFを介して、マッピングされたLUNにアクセスできます。 
---
= ポートセットの作成とigroupへのバインド
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
link:selective-lun-map-concept.html["選択的LUNマップ（SLM）"]を使用するだけでなく、ポートセットを作成し、そのポートセットをigroupにバインドして、イニシエータがLUNにアクセスするために使用できるLIFをさらに制限することもできます。

igroupにポートセットをバインドしないと、igroup内のすべてのイニシエータが、LUNを所有するノードとそのノードのHAパートナーのすべてのLIFを介して、マッピングされたLUNにアクセスできます。

.開始する前に
少なくとも1個のLIFと1つのigroupが必要です。

インターフェイス グループを使用しないかぎり、iSCSIとFCの冗長性を確保するために推奨されるLIFの数は2個です。インターフェイス グループを使用する場合に推奨されるLIFの数は1個です。

.タスク概要
ノード上にLIFが3つ以上あり、特定のイニシエータを一部のLIFに制限する場合は、ポートセットとSLMを併用する方が効果的です。ポートセットを使用しない場合は、LUNへのアクセス権を持つすべてのイニシエータが、LUNを所有するノードおよび所有者ノードのHAパートナー経由でノード上のすべてのターゲットにアクセスできます。

.手順
[role="tabbed-block"]
====
.System Manager
--
ONTAP 9.10.1以降では、System Managerを使用してポートセットを作成し、igroupにバインドすることができます。

ONTAP 9.10.1より前のリリースでポートセットを作成してigroupにバインドする必要がある場合は、ONTAP CLIの手順を使用する必要があります。

ONTAP 9.12.1以降、既存のポートセットがない場合は、ONTAP CLI手順を使用して最初のポートセットを作成する必要があります。

. System Managerで、*Network > Overview > Portsets*をクリックし、*Add*をクリックします。
. 新しいポートセットの情報を入力し、*追加*をクリックします。
. *ホスト > SAN イニシエータグループ*をクリックします。
. ポートセットを新しい igroup にバインドするには、[*追加*] をクリックします。
+
ポートセットを既存の igroup にバインドするには、igroup を選択し、image:icon_kabob.gif["メニューオプションアイコン"]をクリックして、*イニシエータグループの編集*をクリックします。



.関連情報
link:manage-san-initiators-task.html["イニシエータとigroupの表示と管理"]

--
.CLI
--
. 該当するLIFを含むポートセットを作成します。
+
`portset create -vserver _vserver_name_ -portset _portset_name_ -protocol _protocol_ -port-name _port_name_`

+
FCを使用している場合は、 `protocol`パラメータを `fcp`として指定します。iSCSIを使用している場合は、 `protocol`パラメータを `iscsi`として指定します。

. igroupをポートセットにバインドします。
+
`lun igroup bind -vserver _vserver_name_ -igroup _igroup_name_ -portset _portset_name_`

+
 `lun igroup bind`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/lun-igroup-bind.html["ONTAPコマンド リファレンス"^]を参照してください。

. ポートセットとLIFが正しいことを確認します。
+
`portset show -vserver _vserver_name_`

+
[listing]
----
Vserver   Portset   Protocol Port Names    Igroups
--------- --------- -------- ------------- --------
vs3       portset0  iscsi    lif0,lif1     igroup1
----


--
====