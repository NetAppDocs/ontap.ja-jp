---
permalink: san-admin/host-side-management-concept.html 
sidebar: sidebar 
keywords: understand, host-side, space, management 
summary: シンプロビジョニング環境において、ホスト ファイルシステムで解放されたスペースをストレージ システム側で管理するプロセスを担っているのがホスト側のスペース管理です。 
---
= SANホスト側のスペース管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
シンプロビジョニング環境において、ホスト ファイルシステムで解放されたスペースをストレージ システム側で管理するプロセスを担っているのがホスト側のスペース管理です。

ホスト ファイルシステムでは、新しいデータの格納に利用できるブロックはどれか、また、有効なデータを含んでいるため上書きしてはならないブロックはどれかを追跡するための情報がメタデータに記録されます。このメタデータはLUNかネームスペースに格納されています。ホスト ファイルシステム内でファイルが削除されると、ファイルシステムのメタデータが更新され、削除されたファイルのブロックが空きスペースとしてマークされます。ファイルシステム内の合計空きスペースが再計算され、新しく解放されたブロック分のスペースが組み入れられます。一方、ストレージ システム側では、こうしたメタデータの更新が、ホストによって実行される他の書き込みとまったく相違ないものとして認識されます。このため、ストレージ システム側では、削除が行われた事実が検知されません。

その結果、ホスト側と基盤のストレージ システム側で報告される空きスペース容量に不一致が生じます。たとえば、新しくプロビジョニングされた200GBのLUNがストレージ システムによってホストに割り当てられているとします。この場合、ホストとストレージ システムの双方で、200GBの空きスペースが報告されます。ここでホストに100GBのデータが書き込まれた場合、この時点では、ホストもストレージ システムも、使用済みスペースが100GB、未使用スペースが100GBと報告します。

次に、ホストから50GBのデータが削除されました。このとき、ホスト側では使用済みスペースが50GB、未使用スペースが150GBであると報告されます。一方、ストレージ システム側で報告される数値は、依然として使用済みスペース100GB、未使用スペース100GBとなります。

ホスト側のスペース管理では、さまざまな方法を使用して、ホストとストレージ システム間のスペースの差分を調整します。



== SnapCenterによるホスト管理の簡易化

SnapCenterソフトウェアを使用すると、iSCSIストレージやFCストレージに関連する管理作業とデータ保護作業を簡単に行うことができます。SnapCenterは、WindowsとUNIXホストに対応するオプションの管理パッケージです。

SnapCenterソフトウェアを使用すると、複数のストレージ システム間に分散できるストレージ プールから仮想ディスクを簡単に作成し、ストレージ プロビジョニング タスクを自動化して、ホスト データと一致するスナップショットからスナップショットとクローンを作成するプロセスを簡素化できます。

NetApp製品ドキュメントで https://docs.netapp.com/us-en/snapcenter/index.html["SnapCenter"]の詳細を参照してください。

.関連リンク
link:enable-space-allocation-scsi-thin-provisioned-luns-task.html["SANプロトコルのONTAPスペース割り当ての有効化"]
