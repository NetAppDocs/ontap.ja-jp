---
permalink: san-admin/isns-concept.html 
sidebar: sidebar 
keywords: isns, isns server, internet storage name service, iscsi, iqn 
summary: インターネットストレージネームサービス（iSNS）は、TCP/IPストレージ ネットワーク上のiSCSIデバイスの自動検出と管理を可能にするプロトコルです。iSNSサーバーは、ネットワーク上のアクティブなiSCSIデバイスに関する情報（IPアドレス、iSCSIノード名（IQN）、ポータルグループなど）を保持します。 
---
= ONTAPのInternet Storage Name Service（iSNS）
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
iSNSは、TCP / IPストレージ ネットワークでiSCSIデバイスを自動的に検出して管理できるプロトコルです。iSNSサーバでは、ネットワークでアクティブなiSCSIデバイスに関する情報（IPアドレス、iSCSIノード名（IQN）、ポータル グループなど）が維持されます。

iSNSサーバは、サードパーティ ベンダーから入手できます。ネットワーク内にiSNSサーバがあり、イニシエータとターゲットで使用するように設定および有効化されている場合、Storage Virtual Machine（SVM）の管理LIFを使用して、そのSVMのすべてのiSCSI LIFをiSNSサーバに登録できます。登録が完了すると、iSCSIイニシエータはiSNSサーバを照会して、そのSVMのすべてのLIFを検出できるようになります。

iSNSサービスを使用する場合は、使用するStorage Virtual Machine（SVM）がInternet Storage Name Service（iSNS）サーバに正しく登録されていることを確認してください。

iSNSサーバがネットワークにない場合は、各ターゲットがホストで認識できるように、ターゲットを手動で設定する必要があります。



== iSNSサーバの機能

iSNSサーバではInternet Storage Name Service（iSNS）プロトコルが使用され、ネットワークでアクティブなiSCSIデバイスに関する情報（IPアドレス、iSCSIノード名[IQN]、ポータル グループなど）が維持されます。

iSNSプロトコルを使用すると、IPストレージ ネットワークでiSCSIデバイスを自動的に検出し、管理できるようになります。iSCSIイニシエータが、iSNSサーバに照会することにより、iSCSIターゲット デバイスを検出します。

NetAppでは、iSNSサーバの提供や再販は行っていません。これらのサーバは、NetAppがサポートするベンダーから取得できます。



== SVMとiSNSサーバの連動

iSNSサーバは、Storage Virtual Machine（SVM）の管理LIFを介して各SVMと通信します。管理LIFは、特定のSVMのすべてのiSCSIターゲットのノード名、エイリアス、およびポータル情報をiSNSサーバに登録します。

次の例では、SVM「`VS1`」はSVM管理LIF「`VS1_mgmt_lif`」を使用してiSNSサーバに登録します。iSNS登録中、SVMはすべてのiSCSI LIFをSVM管理LIF経由でiSNSサーバに送信します。iSNS登録が完了すると、iSNSサーバは「`VS1`」でiSCSIサービスを提供しているすべてのLIFのリストを取得します。クラスタに複数のSVMが含まれている場合、iSNSサービスを利用するには、各SVMを個別にiSNSサーバに登録する必要があります。

image:bsag_c-mode_iSNS_register.png["SVMとiSNSサーバーの相互作用の例1"]

次の例では、iSNSサーバがターゲットへの登録を完了すると、ステップ1に示すように、ホストAはiSNSサーバを介して「`VS1`」のすべてのLIFを検出できます。ホストAが「`VS1`」のLIFの検出を完了すると、ステップ2に示すように、ホストAは「`VS1`」内の任意のLIFとの接続を確立できます。「`VS2`」の管理LIF「`VS2_mgmt_LIF`」がiSNSサーバに登録されるまで、ホストAは「`VS2`」内のどのLIFも認識しません。

image:bsag_c-mode_iSNS_connect.png["SVMとiSNSサーバーの相互作用の例2"]

ただし、インターフェイス アクセス リストを定義すると、ホストがターゲットへのアクセスに使用できるのは、インターフェイス アクセス リストに定義されたLIFのみとなります。

一度iSNSが設定されると、SVMの設定を変更するたびにONTAPによってiSNSサーバが自動的に更新されます。

設定変更を行ってからONTAPがiSNSサーバに更新を送信するまでの間に、数分間の遅延が発生する場合があります。iSNSサーバ上のiSNS情報を強制的に即時更新するには、次の手順を実行します： `vserver iscsi isns update`。詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-iscsi-isns-update.html["ONTAPコマンド リファレンス"^]の `vserver iscsi isns update`を参照してください。



== iSNSの管理用コマンド

ONTAPには、iSNSサービスを管理するためのコマンドが用意されています。

|===


| 状況 | 使用するコマンド 


 a| 
iSNSサービスを設定する
 a| 
`vserver iscsi isns create`



 a| 
iSNSサービスを開始する
 a| 
`vserver iscsi isns start`



 a| 
iSNSサービスを変更する
 a| 
`vserver iscsi isns modify`



 a| 
iSNSサービスの設定を表示する
 a| 
`vserver iscsi isns show`



 a| 
登録済みのiSNS情報を強制的に更新する
 a| 
`vserver iscsi isns update`



 a| 
iSNSサービスを停止する
 a| 
`vserver iscsi isns stop`



 a| 
iSNSサービスを削除する
 a| 
`vserver iscsi isns delete`



 a| 
コマンドのマニュアル ページを表示する
 a| 
`man _command name_`

|===
 `vserver iscsi isns`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=vserver+iscsi+isns["ONTAPコマンド リファレンス"^]を参照してください。
