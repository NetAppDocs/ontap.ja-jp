---
permalink: san-admin/lun-access-virtualized-environment-concept.html 
sidebar: sidebar 
keywords: how, lun, access, works, virtualized, environment, single, svm, cluster, active or optimized path, multiple 
summary: 仮想環境では、ホスト（クライアント）が最適 / 非最適パスを通じてLUNにアクセスするためにLIFが使用されます。 
---
= 仮想環境でのLUNへのアクセスの仕組み
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
仮想環境では、ホスト（クライアント）が最適 / 非最適パスを通じてLUNにアクセスするためにLIFが使用されます。

LIFは、SVMを物理ポートに接続する論理インターフェイスです。複数のSVMで同一ポート上に複数のLIFを設定できますが、1つのLIFは1つのSVMに属します。LUNには、これらのSVMのLIFを介してアクセスできます。

.クラスタ内の単一のSVMを使用したLUNへのアクセス例
次の例では、ホスト1がSVM-1のLIF1.1とLIF1.2に接続してLUN1にアクセスします。LIF1.1は物理ポートnode1:0cを使用し、LIF1.2はnode2:0cを使用します。LIF1.1とLIF1.2は、SVM-1にのみ属しています。SVM-1のノード1かノード2に作成される新しいLUNは、同じこれらのLIFを使用できます。新しいSVMを作成する場合は、両方のノードの物理ポート0cか0dを使用して新しいLIFを作成できます。

image:bsag-c-mode-1-lif-belongs-1-vs.gif["LUN1へのSVMアクセス"]

.クラスタ内の複数のSVMを使用したLUNへのアクセス例
1つの物理ポートに複数のLIFを設定して、異なるSVMを接続できます。LIFが特定のSVMに関連付けられているので、クラスタ ノードは受信するデータ トラフィックを正しいSVMに送信できます。次の例では、1～4の各ノードに、それぞれのノードの物理ポート0cを使用するSVM-2に対応するLIFがあります。ホスト1はSVM-1のLIF1.1とLIF1.2に接続してLUN1にアクセスします。ホスト2はSVM-2のLIF2-1とLIF2-2に接続してLUN2にアクセスします。両方のSVMが、ノード1とノード2の物理ポート0cを共有しています。SVM-2には、ホスト2がLUN 3とLUN 4へのアクセスに使用する追加のLIFがあります。これらのLIFは、ノード3とノード4の物理ポート0cを使用しています。複数のSVMでこれらのノードの物理ポートを共有できます。

image:bsag-c-mode-multiple-lifs-vservers.gif["2つのVserver用のnode2上の2つのLIF"]

.ホスト システムからLUNへのアクティブ パスまたは最適パスの例
アクティブ パスまたは最適パスでは、データ トラフィックはクラスタ ネットワークを経由せず、LUNへの最短ルートをたどります。LUN1へのアクティブ パスまたは最適パスは、物理ポート0cを使用してノード1のLIF1.1を経由します。ホスト2には2つのアクティブ パスまたは最適パスがあります。1つはノード1、LIF2.1へのパス（物理ポート0cを共有）で、もう1つはノード4、LIF2.4へのパス（物理ポート0cを使用）です。

image:bsag-c-mode-unoptimized-path.gif["最適化されたパスの例"]

.ホスト システムからLUNへのアクティブ パスまたは非最適（間接）パスの例
アクティブ パスまたは非最適（間接）パスでは、データ トラフィックはクラスタ ネットワークを経由します。この問題は、ホストからのすべてのアクティブ パスまたは最適パスでトラフィックを処理できない場合にのみ発生します。ホスト2からSVM-2 LIF2.4へのパスが失われると、LUN3とLUN4にはクラスタ ネットワークを経由してアクセスすることになります。ホスト2からのアクセスには、ノード3のLIF2.3が使用されます。その後、トラフィックはクラスタ ネットワーク スイッチに入り、LUN3とLUN4へのアクセスのためにノード4に戻ります。その後、クラスタ ネットワーク スイッチを経由してLIF2.3からホスト2に戻ります。このアクティブ パスまたは非最適パスは、LIF2.4へのパスがリストアされるか、ノード4の別の物理ポートにSVM-2の新しいLIFが確立されるまで使用されます。

image:bsag-c-mode-optimized-path.gif["最適化されていないパスの例"]
