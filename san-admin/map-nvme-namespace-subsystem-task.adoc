---
permalink: san-admin/map-nvme-namespace-subsystem-task.html 
sidebar: sidebar 
keywords: map, nvme, namespace, subsystem 
summary: NVMe を使用する場合は、名前空間をサブシステムにマップする必要があります。 
---
= サブシステムへのNVMeネームスペースのマッピング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NVMeネームスペースをサブシステムにマッピングすると、ホストからのデータ アクセスが可能になります。サブシステムへのNVMeネームスペースのマッピングは、ストレージのプロビジョニング時に行うことも、プロビジョニング後に行うこともできます。

ONTAP 9.17.1以降では、SnapMirror Active Sync構成を使用している場合、ホストをNVMeサブシステムに追加する際に、SVMを近接vserverとしてホストに追加できます。NVMeサブシステム内のネームスペースのアクティブ最適化パスは、近接vserverとして設定されているSVMからのみホストに公開されます。

ONTAP 9.14.1以降では、特定のホストへのリソース割り当てを優先できます。デフォルトでは、ホストがNVMeサブシステムに追加されると、「通常」の優先度が付与されます。ONTAPコマンドラインインターフェイス（CLI）を使用して、デフォルトの優先度を「通常」から「高」に手動で変更できます。「高」の優先度が割り当てられたホストには、より大きなI/Oキュー数とキュー深度が割り当てられます。


NOTE: ONTAP 9.13.1 以前でサブシステムに追加されたホストに高い優先度を与える場合は、xref:../nvme/change-host-priority-nvme-task.html[ホストの優先順位を変更する]できます。

.開始する前に
名前空間とサブシステムはすでに作成されているはずです。名前空間とサブシステムを作成する必要がある場合は、link:create-nvme-namespace-subsystem-task.html["NVMeストレージのプロビジョニング"]を参照してください。



== NVMe名前空間をマップする

.手順
. ホストからNQNを取得します。
. ホストのNQNをサブシステムに追加します。
+
[source, cli]
----
vserver nvme subsystem host add -vserver <SVM_name> -subsystem <subsystem_name> -host-nqn <Host_NQN_:subsystem._subsystem_name>
----
+
ホストのデフォルトの優先度を通常から高に変更するには、 `-priority high`オプションを使用します。このオプションはONTAP 9.14.1以降で利用できます。link:https://docs.netapp.com/us-en/ontap-cli/vserver-nvme-subsystem-host-add.html["ONTAPコマンド リファレンス"^]の `vserver nvme subsystem host add`の詳細を確認してください。

+
SnapMirror Active Sync構成でNVMeサブシステムにホストを追加する際に、SVMを `proximal-vserver`としてホストに追加する場合は、 `-proximal-vservers`オプションを使用できます。このオプションはONTAP 9.17.1以降で使用できます。ソースSVM、デスティネーションSVM、またはその両方を追加できます。このコマンドを実行しているSVMがデフォルトです。

. ネームスペースをサブシステムにマッピングします。
+
[source, cli]
----
vserver nvme subsystem map add -vserver <SVM_name> -subsystem <subsystem_name> -path <path>
----
+
名前空間は単一のサブシステムにのみマッピングできます。 `vserver nvme subsystem map add`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-nvme-subsystem-map-add.html["ONTAPコマンド リファレンス"^]を参照してください。

. ネームスペースがサブシステムにマッピングされていることを確認します。
+
[source, cli]
----
vserver nvme namespace show -vserver <SVM_name> -instance
----
+
サブシステムは `Attached subsystem`としてリストされるはずです。 `vserver nvme namespace show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-nvme-namespace-show.html["ONTAPコマンド リファレンス"^]を参照してください。


