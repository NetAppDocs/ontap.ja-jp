---
permalink: san-admin/san-volumes-concept.html 
sidebar: sidebar 
keywords: understand, san volumes 
summary: ONTAPには、基本的なボリュームプロビジョニングオプションとして、シックプロビジョニング、シンプロビジョニング、セミシックプロビジョニングの3つが用意されています。各オプションでは、ボリュームスペースおよびONTAPブロック共有テクノロジのスペース要件がさまざまな方法で管理されます。これらのオプションの仕組みを理解することで、環境に最も適したオプションを選択できるようになります。 
---
= SANボリュームについて
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPには、基本的なボリュームプロビジョニングオプションとして、シックプロビジョニング、シンプロビジョニング、セミシックプロビジョニングの3つが用意されています。各オプションでは、ボリュームスペースおよびONTAPブロック共有テクノロジのスペース要件がさまざまな方法で管理されます。これらのオプションの仕組みを理解することで、環境に最も適したオプションを選択できるようになります。

[NOTE]
====
SAN LUNとNAS共有を同じFlexVol volumeに配置することは推奨されません。SAN LUN用とFlexVol NAS共有用にそれぞれ別 々 のFlexVolボリュームをプロビジョニングする必要があります。これにより、管理とレプリケーションの導入が簡易化され、Active IQ Unified Manager（旧OnCommand Unified Manager）でのFlexVolボリュームのサポート方法と同様に機能します。

====


== ボリュームのシンプロビジョニング

シンプロビジョニング ボリュームは、作成時に追加のスペースが確保されません。ボリュームにデータが書き込まれるときに、書き込み処理に対応するために必要なアグリゲート内のストレージをボリュームが要求します。シンプロビジョニング ボリュームを使用する場合はアグリゲートをオーバーコミットできますが、アグリゲートの空きスペースが不足すると、必要なスペースをボリュームが確保できなくなる可能性があります。

シンプロビジョニングFlexVol volumeを作成するには、そのオプションをに `none`設定し `-space-guarantee`ます。



== ボリュームのシックプロビジョニング

シックプロビジョニングは、ボリューム内のブロックにいつでも書き込むことができるように、作成時にアグリゲートから十分なストレージが確保されます。シックプロビジョニングを利用するようにボリュームを設定した場合は、ONTAPの任意のStorage Efficiency機能（圧縮や重複排除など）を使用して、さらに大容量のストレージ要件にも事前に対応できます。

シックプロビジョニングFlexVol volumeを作成するには、その（サービスレベル目標）オプションをに `thick`設定し `-space-slo`ます。



== ボリュームのセミシックプロビジョニング

セミシックプロビジョニングを使用するボリュームを作成すると、ONTAPはボリュームサイズに対応するためにアグリゲートからストレージスペースを確保します。ブロック共有テクノロジでブロックが使用されているためにボリュームの空きスペースが不足している場合、ONTAPは保護データオブジェクト（Snapshot、FlexCloneファイルおよびLUN）を削除して保持しているスペースを解放します。上書きに必要なスペースを確保できる速度でONTAPが保護データオブジェクトを削除できるかぎり、書き込み処理は引き続き成功します。これは「ベストエフォート」書き込み保証と呼ばれます。

* 注： * セミシックプロビジョニングを使用するボリュームでは、次の機能はサポートされていません。

* 重複排除、圧縮、コンパクションなどのStorage Efficiencyテクノロジ
* Microsoftオフロードデータ転送（ODX）


セミシックプロビジョニングFlexVol volumeを作成するには、その（サービスレベル目標）オプションをに `semi-thick`設定し `-space-slo`ます。



== スペースリザーブファイルおよびスペースリザーブLUNでの使用

スペースリザーブファイルまたはスペースリザーブLUNは、ストレージの作成時にストレージが割り当てられるファイルまたはLUNです。ネットアップではこれまで、スペース・リザベーションが無効になっている LUN （スペース・リザーブなしの LUN ）を「シン・プロビジョニング LUN 」と呼んできました。

* 注意： * スペースリザーブなしのファイルは、一般的に「シンプロビジョニングされたファイル」とは呼ばれません。

次の表に、スペースリザーブファイルおよびスペースリザーブLUNで使用できる3つのボリュームプロビジョニングオプションの主な違いを示します。

[cols="5*"]
|===
| ボリュームのプロビジョニング | LUN/file のスペースリザベーション | 上書き | 保護データ ^2^ | ストレージ効率 ^3^ 


 a| 
シック
 a| 
サポート対象
 a| 
保証された ^1
 a| 
保証
 a| 
サポート対象



 a| 
シン
 a| 
効果なし
 a| 
なし
 a| 
保証
 a| 
サポート対象



 a| 
セミシック
 a| 
サポート対象
 a| 
ベストエフォート ^1 ^
 a| 
ベストエフォート
 a| 
サポート対象外

|===
* メモ *

. 上書きを保証したり、ベストエフォートで上書きを保証できるようにするには、LUNまたはファイルでスペースリザベーションが有効になっている必要があります。
. 保護データには、Snapshot、自動削除の対象としてマークされたFlexCloneファイルおよびLUN（バックアップクローン）が含まれます。
. Storage Efficiencyには、重複排除、圧縮、自動削除の対象としてマークされていないFlexCloneファイルとLUN（アクティブクローン）、およびFlexCloneサブファイル（コピーオフロードに使用）が含まれます。




== SCSIシンプロビジョニングLUNのサポート

ONTAPは、T10 SCSIシンプロビジョニングLUNとNetAppシンプロビジョニングLUNをサポートしています。T10 SCSIシンプロビジョニングを使用すると、ホストアプリケーションは、ブロック環境向けのLUNのスペース再生機能やスペース監視機能などのSCSI機能をサポートできます。T10 SCSIシンプロビジョニングがSCSIホストソフトウェアでサポートされている必要があります。

LUNのT10シンプロビジョニングのサポートを有効または無効にするには、ONTAP設定を使用し `space-allocation`ます。ONTAPの設定を使用し `space-allocation enable`て、LUNでT10 SCSIシンプロビジョニングを有効にします。

 `[-space-allocation {enabled|disabled}]`のT10シンプロビジョニングのサポートを有効または無効にする方法、およびLUNでT10 SCSIシンプロビジョニングを有効にする方法の詳細については、『ONTAPコマンドリファレンスマニュアル』のコマンドを参照してください。

この手順で説明されているコマンドの詳細については、をlink:https://docs.netapp.com/us-en/ontap-cli/["ONTAPコマンド リファレンス"^]参照してください。
