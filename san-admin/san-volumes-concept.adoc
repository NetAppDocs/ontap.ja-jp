---
permalink: san-admin/san-volumes-concept.html 
sidebar: sidebar 
keywords: understand, san volumes 
summary: ONTAPでは、基本的なボリューム プロビジョニング オプションとして、シックプロビジョニング、シンプロビジョニング、セミシックプロビジョニングの3つを提供しています。ボリューム スペースおよびONTAPブロック共有テクノロジのスペース要件が、オプションごとに異なる方法で管理されます。これらのオプションの仕組みを理解することで、環境に最も適したオプションを選択できるようになります。 
---
= SANボリュームの概要
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPでは、基本的なボリューム プロビジョニング オプションとして、シックプロビジョニング、シンプロビジョニング、セミシックプロビジョニングの3つを提供しています。ボリューム スペースおよびONTAPブロック共有テクノロジのスペース要件が、オプションごとに異なる方法で管理されます。これらのオプションの仕組みを理解することで、環境に最も適したオプションを選択できるようになります。

[NOTE]
====
SAN LUNとNAS共有を同じFlexVolに配置することは推奨されません。SAN LUNとNAS共有それぞれに専用のFlexVolをプロビジョニングしてください。これにより、管理とレプリケーションの導入が簡素化され、Active IQ Unified Manager（旧OnCommand Unified Manager）でのFlexVolのサポート方法が統一されます。

====


== ボリュームのシンプロビジョニング

シンプロビジョニング ボリュームは、作成時に追加のスペースが確保されません。ボリュームにデータが書き込まれるときに、書き込み処理に対応するために必要なアグリゲート内のストレージをボリュームが要求します。シンプロビジョニング ボリュームを使用する場合はアグリゲートをオーバーコミットできますが、アグリゲートの空きスペースが不足すると、必要なスペースをボリュームが確保できなくなる可能性があります。

FlexVolボリュームの `-space-guarantee`オプションを `none`に設定して、シンプロビジョニング ボリュームを作成します。



== ボリュームのシックプロビジョニング

シックプロビジョニングは、ボリューム内のブロックにいつでも書き込むことができるように、作成時にアグリゲートから十分なストレージが確保されます。シックプロビジョニングを利用するようにボリュームを設定した場合は、ONTAPの任意のStorage Efficiency機能（圧縮や重複排除など）を使用して、さらに大容量のストレージ要件にも事前に対応できます。

シック プロビジョニングFlexVolボリュームを作成するには、 `-space-slo`（サービス レベル目標）オプションを `thick`に設定します。



== ボリュームのセミシックプロビジョニング

セミシックプロビジョニングを使用するボリュームが作成されると、ONTAPはボリュームサイズに合わせてアグリゲートからストレージスペースを確保します。ブロック共有テクノロジによってブロックが使用されているためにボリュームの空きスペースが不足している場合、ONTAPは保護データオブジェクト（スナップショット、FlexCloneファイル、LUN）を削除して、それらが保持しているスペースを解放しようとします。ONTAPが保護データオブジェクトを上書きに必要なスペースに追いつくだけの速度で削除できる限り、書き込み処理は継続して成功します。これは「ベストエフォート」書き込み保証と呼ばれます。

*注：* セミシックプロビジョニングを使用するボリュームでは、次の機能はサポートされません：

* 重複排除、圧縮、コンパクションなどのストレージ効率化テクノロジ
* Microsoftオフロード データ転送（ODX）


FlexVolボリュームの `-space-slo`（サービス レベル目標）オプションを `semi-thick`に設定して、セミシック プロビジョニング ボリュームを作成します。



== スペース リザーブ ファイルおよびスペース リザーブLUNでの使用

スペース予約ファイル（LUN）とは、作成時にストレージが割り当てられるファイルです。従来、NetAppでは、スペース リザベーションが無効になっているLUN（スペース予約されていないLUN）を指すために「シンプロビジョニングLUN」という用語が使用されてきました。

*注：*スペース予約されていないファイルは、通常、「`thin-provisionedファイル`」とは呼ばれません。

次の表に、スペース リザーブ ファイルおよびスペース リザーブLUNで使用できる3つのボリューム プロビジョニング オプションの主な違いを示します。

[cols="5*"]
|===
| ボリュームのプロビジョニング | LUN/ファイルのスペース リザベーション | 上書き | 保護データ^2^ | ストレージ効率^3^ 


 a| 
シック
 a| 
サポート
 a| 
保証済み^1^
 a| 
保証
 a| 
サポート



 a| 
シン
 a| 
効果なし
 a| 
なし
 a| 
保証
 a| 
サポート



 a| 
セミシック
 a| 
サポート
 a| 
ベストエフォート^1^
 a| 
ベスト エフォート
 a| 
サポート対象外

|===
*注記*

. 上書きの保証またはベスト エフォートの上書き保証が行われるには、LUNまたはファイルでスペース リザベーションが有効になっている必要があります。
. 保護データには、スナップショット、および自動削除対象としてマークされたFlexCloneファイルとLUN（バックアップ クローン）が含まれます。
. Storage Efficiencyには、重複排除、圧縮、自動削除の対象とマークされていないFlexCloneファイルとFlexClone LUN（アクティブ クローン）、およびFlexCloneサブファイル（コピー オフロードに使用）が含まれます。




== SCSIシンプロビジョニングLUNのサポート

ONTAPは、 T10 SCSIシンプロビジョニングLUNに加え、NetAppシンプロビジョニングLUNもサポートしています。T10 SCSIシンプロビジョニングにより、ホスト アプリケーションはSCSI機能（ブロック環境でのLUNのスペース再生機能やスペース監視機能など）をサポートできるようになります。使用するSCSIホスト ソフトウェアも、T10 SCSIシンプロビジョニングをサポートしている必要があります。

ONTAP `space-allocation`設定を使用して、LUN上でT10シンプロビジョニングのサポートを有効化または無効化します。ONTAP `space-allocation enable`設定を使用して、LUN上でT10 SCSIシンプロビジョニングを有効にします。

link:https://docs.netapp.com/us-en/ontap-cli/["ONTAPコマンド リファレンス"^]の `[-space-allocation {enabled|disabled}]`コマンドには、T10 シン プロビジョニングのサポートを有効/無効にする方法と、LUNでT10 SCSIシン プロビジョニングを有効にする方法の詳細情報が含まれています。
