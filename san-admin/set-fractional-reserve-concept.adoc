---
permalink: san-admin/set-fractional-reserve-concept.html 
sidebar: sidebar 
keywords: considerations, setting, fractional, reserve 
summary: フラクショナル リザーブ（LUNオーバーライト リザーブとも呼ばれます）を使用すると、FlexVolボリューム内のスペース リザベーション済みLUNおよびファイルに対するオーバーライト リザーブを無効にすることができます。これによりストレージ使用率を最大化できますが、スペース不足による書き込み操作の失敗によって環境に悪影響が出る場合は、この構成に課される要件を理解する必要があります。 
---
= フラクショナル リザーブの設定に関する考慮事項
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
フラクショナル リザーブ（_LUN オーバーライト リザーブ_とも呼ばれます）を使用すると、FlexVolボリューム内のスペース リザベーションされたLUNとファイルに対するオーバーライト リザーブを無効にすることができます。これによりストレージ使用率を最大化できますが、スペース不足による書き込み操作の失敗によって環境に悪影響が出る場合は、この構成に課される要件を理解する必要があります。

フラクショナルリザーブ設定はパーセンテージで表されます。有効な値は `0`と `100`パーセントのみです。フラクショナルリザーブ設定はボリュームの属性です。

フラクショナルリザーブを `0`に設定すると、ストレージ使用率が向上します。ただし、ボリュームギャランティを `volume`に設定していても、ボリューム内のデータにアクセスするアプリケーションで、ボリュームの空き容量が不足している場合、データ障害が発生する可能性があります。ただし、ボリュームを適切に設定し、使用することで、書き込みが失敗する可能性を最小限に抑えることができます。ONTAPは、フラクショナルリザーブを `0`に設定したボリュームに対して、以下の_すべて_の要件が満たされている場合に「ベストエフォート」の書き込み保証を提供します：

* 重複排除を使用していない
* 圧縮を使用していない
* FlexCloneサブファイルを使用していない
* すべてのFlexCloneファイルとFlexClone LUNで自動削除が有効になっている
+
これはデフォルト設定ではありません。FlexCloneファイルやFlexClone LUNの自動削除は、作成時に設定するか作成後に変更して明示的に有効にする必要があります。

* ODXコピー オフロードとFlexCloneコピー オフロードを使用していない
* ボリューム保証が `volume`に設定されています
* ファイルまたはLUNのスペース リザベーションは `enabled`
* ボリュームSnapshotリザーブは `0`に設定されています
* ボリュームスナップショットの自動削除は、 `enabled`コミットメントレベルが `destroy`、破棄リストが `lun_clone,vol_clone,cifs_share,file_clone,sfsr`、トリガーが `volume`で実行されます。
+
この設定では、必要に応じてFlexCloneファイルとFlexClone LUNも削除されます。



変更率が高い場合、上記の必要な構成設定をすべて使用していても、まれにSnapshotの自動削除が遅れてボリュームの容量が不足する可能性があることに注意してください。

さらに、ボリュームの自動拡張機能をオプションで使用して、ボリュームのスナップショットを自動的に削除する必要が生じる可能性を減らすことができます。自動拡張機能を有効にする場合は、関連付けられたアグリゲートの空き容量を監視する必要があります。アグリゲートがいっぱいになり、ボリュームの拡張ができなくなると、ボリュームの空き容量が枯渇するにつれて、より多くのスナップショットが削除される可能性があります。

上記の構成要件をすべて満たすことができず、ボリュームの容量不足を回避する必要がある場合は、ボリュームのフラクショナルリザーブ設定を `100`に設定する必要があります。これにより、事前により多くの空き容量が必要になりますが、上記のテクノロジが使用されている場合でもデータ変更操作が成功することが保証されます。

フラクショナル リザーブ設定のデフォルト値と有効値は、ボリュームのギャランティによって異なります。

[cols="3*"]
|===
| ボリューム ギャランティ | デフォルトの部分リザーブ | 有効な値 


 a| 
Volume
 a| 
100
 a| 
0, 100



 a| 
なし
 a| 
0
 a| 
0, 100

|===