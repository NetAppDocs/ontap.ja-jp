---
permalink: san-config/update-emulex-hba-queue-depths-task.html 
sidebar: sidebar 
keywords: update, emulex, hba, queue, depths, linux, host 
summary: Linux ホストでは Emulex HBA のキュー深度を更新できます。更新をリブート後も維持するには、新しい RAM ディスクイメージを作成してホストをリブートする必要があります。 
---
= Linux ホストで Emulex HBA のキュー深度を更新する
:icons: font
:imagesdir: ../media/


[role="lead"]
Linux ホストでは Emulex HBA のキュー深度を更新できます。更新をリブート後も維持するには、新しい RAM ディスクイメージを作成してホストをリブートする必要があります。

.手順
. 変更するキュー深度パラメータを特定します。
+
「 m odinfo lpfc | grep queue_depth 」のように入力します

+
キュー深度パラメータとその概要のリストが表示されます。使用しているオペレーティングシステムのバージョンに応じて、次のキュー深度パラメータを 1 つ以上変更できます。

+
** `lpfc_lun_queue_depth` ：特定の LUN のキューに格納できる FC コマンドの最大数（ uint ）
** lpfc_hba_queue_depth: lpfc HBA のキューに格納できる FC コマンドの最大数（ uint ）
** lpfc_tgt_queue_depth: 特定のターゲットポートのキューに格納できる FC コマンドの最大数（ uint ）
+
lpfc_tgt_queue_depth' パラメータは 'Red Hat Enterprise Linux 7.x システム 'SUSE Linux Enterprise Server 11 SP4 システムおよび 12.x システムにのみ適用されます



. キュー深度を更新するには、 Red Hat Enterprise Linux 5.x システムの場合は「 /etc/modprobe.conf 」ファイル、 Red Hat Enterprise Linux 6.x または 7.x システムの場合は「 /etc/modprobe.d/sscsi.conf 」ファイル、 SUSE Linux Enterprise Server 11.x または 12.x システムの場合は「 /etc/modprobe.d/sscsi.conf 」ファイルにキュー深度パラメータを追加します。
+
使用しているオペレーティングシステムのバージョンに応じて、次のコマンドを 1 つ以上追加できます。

+
** options lpfc lpfc_hba_queue_depth=new_queue_depth
** 'options lpfc lpfc_lun_queue_depth=new_queue_depth
** options lpfc_tgt_queue_depth=new_queue_depth


. 新しい RAM ディスクイメージを作成し、ホストをリブートして、リブート後も更新内容を維持します。
+
詳細については、使用している Linux オペレーティングシステムのバージョンに対応した『 _System Administration Reference Guide 』を参照してください。

. 変更したキュー深度パラメータの値が更新されていることを確認します。
+
「 cat /sys/class/scsi_host/host_number/lpfc_lun_queue_depth 」「 cat /sys/class/scsi_host/host_number/lpfc_tgt_queue_depth 」「 cat /sys/class/scsi_host/host_number/lpfc_HBA_queue_depth 」

+
[listing]
----
root@localhost ~]#cat /sys/class/scsi_host/host5/lpfc_lun_queue_depth
      30
----
+
キュー深度の現在の値が表示されます。



* 関連情報 *

link:../system-admin/index.html["システム管理"]
