---
permalink: smb-admin/add-task-security-policy-file-task.html 
sidebar: sidebar 
keywords: creating, create, add, policy, task, security, policy, configuring, configure, apply, acl, associate, task, entries, add a task to the security policy 
summary: ポリシー タスクを作成してセキュリティ ポリシーに追加することは、SVM 内のファイルまたはフォルダに ACL を設定して適用するための 4 番目の手順です。ポリシー タスクを作成すると、そのタスクをセキュリティ ポリシーに関連付けます。セキュリティ ポリシーには、1 つ以上のタスク エントリを追加できます。 
---
= ONTAP SMB セキュリティ ポリシーにタスクを追加する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ポリシー タスクを作成してセキュリティ ポリシーに追加することは、SVM 内のファイルまたはフォルダに ACL を設定して適用するための 4 番目の手順です。ポリシー タスクを作成すると、そのタスクをセキュリティ ポリシーに関連付けます。セキュリティ ポリシーには、1 つ以上のタスク エントリを追加できます。

.タスク概要
セキュリティ ポリシーはタスクのコンテナです。タスクとは、セキュリティ ポリシーによって NTFS または混合セキュリティのファイルまたはフォルダ（または Storage-Level Access Guard を設定している場合はボリューム オブジェクト）に対して実行できる単一の操作を指します。

タスクには次の2種類があります。

* ファイルとディレクトリのタスク
+
指定されたファイルとフォルダにセキュリティ記述子を適用するタスクを指定するために使用されます。ファイルおよびディレクトリタスクを通じて適用されたACLは、SMBクライアントまたはONTAP CLIを使用して管理できます。

* Storage-Level Access Guard タスク
+
指定されたボリュームにストレージレベルのアクセス保護セキュリティ記述子を適用するタスクを指定するために使用されます。ストレージレベルのアクセス保護タスクを通じて適用されたACLは、ONTAP CLIを通じてのみ管理できます。



タスクには、ファイル（またはフォルダ）またはファイルセット（またはフォルダ）のセキュリティ設定の定義が含まれます。ポリシー内の各タスクは、パスによって一意に識別されます。1つのポリシー内では、パスごとに1つのタスクのみを設定できます。ポリシー内に重複するタスクエントリを設定することはできません。

ポリシーにタスクを追加するためのガイドライン：

* ポリシーごとに最大 10,000 件のタスク エントリが可能です。
* ポリシーには 1 つ以上のタスクを含めることができます。
+
ポリシーには複数のタスクを含めることができますが、ファイル / ディレクトリ タスクとStorage-Level Access Guardタスクの両方を含むポリシーを設定することはできません。ポリシーには、すべてのStorage-Level Access Guardタスク、またはすべてのファイル / ディレクトリ タスクのいずれかを含める必要があります。

* Storage-Level Access Guard は、アクセス許可を制限するために使用されます。
+
追加のアクセス権限を与えることはありません。



セキュリティ ポリシーにタスクを追加するときは、次の 4 つの必須パラメータを指定する必要があります：

* SVM名
* ポリシー名
* パス
* パスに関連付けるセキュリティ記述子


次のオプション パラメータを使用して、セキュリティ記述子の構成をカスタマイズできます：

* セキュリティ タイプ
* 伝播モード
* インデックス位置
* アクセス制御の種類


ストレージレベルのアクセス保護では、オプションパラメータの値は無視されます。この手順で説明されているコマンドの詳細については、link:https://docs.netapp.com/us-en/ontap-cli/["ONTAPコマンド リファレンス"^]を参照してください。

.手順
. 関連付けられたセキュリティ記述子を持つタスクをセキュリティ ポリシーに追加します： `vserver security file-directory policy task add -vserver vserver_name -policy-name policy_name -path path -ntfs-sd SD_nameoptional_parameters`
+
`file-directory`は `-access-control`パラメータのデフォルト値です。ファイルおよびディレクトリ アクセス タスクを構成する際にアクセス制御の種類を指定することはオプションです。

+
`vserver security file-directory policy task add -vserver vs1 -policy-name policy1 -path /home/dir1 -security-type ntfs -ntfs-mode propagate -ntfs-sd sd2 -index-num 1 -access-control file-directory`

. ポリシー タスクの構成を確認します： `vserver security file-directory policy task show -vserver vserver_name -policy-name policy_name -path path`
+
`vserver security file-directory policy task show`

+
[listing]
----

Vserver: vs1
Policy: policy1

Index    File/Folder    Access           Security   NTFS       NTFS Security
         Path           Control          Type       Mode       Descriptor Name
-----    --------       -----------      --------   ------     ----------------
1        /home/dir1     file-directory   ntfs       propagate  sd2
----


 `vserver security file-directory policy task`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=vserver+security+file-directory+policy+task["ONTAPコマンド リファレンス"^]をご覧ください。
