---
permalink: smb-admin/configure-offline-files-support-task.html 
sidebar: sidebar 
keywords: configure, offline, file, support, ontap, cli, smb, modify, exist, smb, share, manual, default, setting, configure offline files support on smb shares using the cli 
summary: SMB 共有の作成時に、または既存の SMB 共有の変更時にいつでも、 ONTAP CLI を使用して、 4 つのオフラインファイル設定のいずれかを指定することによって、オフラインファイルのサポートを設定できます。手動オフラインファイルのサポートがデフォルト設定です。 
---
= CLI を使用して SMB 共有でオフラインファイルサポートを設定します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SMB 共有の作成時に、または既存の SMB 共有の変更時にいつでも、 ONTAP CLI を使用して、 4 つのオフラインファイル設定のいずれかを指定することによって、オフラインファイルのサポートを設定できます。手動オフラインファイルのサポートがデフォルト設定です。

.このタスクについて
オフラインファイルのサポートを設定する場合は、次の 4 つのオフラインファイル設定のいずれかを選択できます。

|===
| 設定 | 説明 


 a| 
`none`
 a| 
Windows クライアントがこの共有のファイルをキャッシュすることを禁止します。



 a| 
`manual`
 a| 
Windows クライアントのユーザが、キャッシュするファイルを手動で選択できるようにします。



 a| 
`documents`
 a| 
Windows クライアントがオフラインアクセスのために使用するユーザのドキュメントをキャッシュすることを許可します。



 a| 
`programs`
 a| 
Windows クライアントがオフラインアクセスのために使用するプログラムをキャッシュすることを許可します。クライアントは、共有が使用可能な場合でも、キャッシュしたプログラムファイルをオフラインモードで使用できます。

|===
選択できるオフラインファイル設定は 1 つだけです。既存の SMB 共有でオフラインファイル設定を変更すると、元の設定が新しいオフラインファイル設定に置き換えられます。その他の既存の SMB 共有設定および共有プロパティは、削除も置換もされません。明示的に削除または変更しないかぎり、有効なままです。

.手順
. 適切な操作を実行します。
+
|===
| オフラインファイルを設定する対象 | 入力するコマンド 


 a| 
新しい SMB 共有
 a| 
`vserver cifs share create -vserver vserver_name -share-name share_name -path path -offline-files {none|manual|documents|programs}`



 a| 
既存の SMB 共有
 a| 
`vserver cifs share modify -vserver vserver_name -share-name share_name -offline-files {none|manual|documents|programs}`

|===
. SMB共有の設定が正しいことを確認します。 `vserver cifs share show -vserver vserver_name -share-name share_name -instance`


.例
次のコマンドでは、オフラインファイルをに設定して「data1」という名前のSMB共有を作成します `documents`：

[listing]
----
cluster1::> vserver cifs share create -vserver vs1 -share-name data1 -path /data1 -comment "Offline files" -offline-files documents

cluster1::> vserver cifs share show -vserver vs1 -share-name data1 -instance

                          Vserver: vs1
                            Share: data1
         CIFS Server NetBIOS Name: VS1
                             Path: /data1
                 Share Properties: oplocks
                                   browsable
                                   changenotify
               Symlink Properties: enable
          File Mode Creation Mask: -
     Directory Mode Creation Mask: -
                    Share Comment: Offline files
                        Share ACL: Everyone / Full Control
    File Attribute Cache Lifetime: -
                      Volume Name: -
                    Offline Files: documents
    Vscan File-Operations Profile: standard
Maximum Tree Connections on Share: 4294967295
       UNIX Group for File Create: -
----
次のコマンドでは、オフラインファイル設定をに変更することにより、「data1」という名前の既存のSMB共有を変更します `manual` ファイルモードおよびディレクトリモード作成マスクの値を追加します。

[listing]
----
cluster1::> vserver cifs share modify -vserver vs1 -share-name data1 -offline-files manual -file-umask 644 -dir-umask 777

cluster1::> vserver cifs share show -vserver vs1 -share-name data1 -instance

                          Vserver: vs1
                            Share: data1
         CIFS Server NetBIOS Name: VS1
                             Path: /data1
                 Share Properties: oplocks
                                   browsable
                                   changenotify
               Symlink Properties: enable
          File Mode Creation Mask: 644
     Directory Mode Creation Mask: 777
                    Share Comment: Offline files
                        Share ACL: Everyone / Full Control
    File Attribute Cache Lifetime: -
                      Volume Name: -
                    Offline Files: manual
    Vscan File-Operations Profile: standard
Maximum Tree Connections on Share: 4294967295
       UNIX Group for File Create: -
----
.関連情報
xref:add-remove-share-properties-eexisting-share-task.adoc[既存の SMB 共有に対する共有プロパティの追加または削除]
