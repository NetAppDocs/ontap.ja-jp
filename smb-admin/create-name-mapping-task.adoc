---
permalink: smb-admin/create-name-mapping-task.html 
sidebar: sidebar 
keywords: vserver, name-mapping, create, command, name, map, windows, enable, user, access, unix, security, style, volume, reverse, create a name mapping 
summary: vserver name-mapping create コマンドを使用して、ネームマッピングを作成できます。ネームマッピングを使用すると、Windows ユーザーが UNIX セキュリティ形式のボリュームにアクセスしたり、その逆を行ったりできるようになります。 
---
= ONTAP SMB名前マッピングを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
 `vserver name-mapping create`コマンドを使用してネームマッピングを作成できます。ネームマッピングを使用すると、WindowsユーザーがUNIXセキュリティ形式のボリュームにアクセスしたり、その逆を行ったりできるようになります。

.タスク概要
各SVMについて、ONTAPは方向ごとに最大12,500の名前マッピングをサポートします。

.手順
. 名前マッピングを作成します `vserver name-mapping create -vserver _vserver_name_ -direction {krb-unix|win-unix|unix-win} -position _integer_ -pattern text -replacement _text_`
+
[NOTE]
====
 `-pattern`および `-replacement`ステートメントは正規表現として記述できます。また、 `-replacement`ステートメントを使用して、ヌル置換文字列 `" "`（スペース文字）を使用することで、ユーザーへのマッピングを明示的に拒否することもできます。link:https://docs.netapp.com/us-en/ontap-cli/vserver-name-mapping-create.html["ONTAPコマンド リファレンス"^]の `vserver name-mapping create`の詳細をご覧ください。

====
+
WindowsからUNIXへのマッピングが作成されると、新しいマッピングの作成時にONTAPシステムへの接続を開いているすべてのSMBクライアントは、新しいマッピングを確認するためにログアウトして再度ログインする必要があります。



.例
次のコマンドは、SVM vs1 に名前マッピングを作成します。このマッピングは、UNIX から Windows へのマッピングであり、優先度リストの 1 番目に配置されます。このマッピングにより、UNIX ユーザー johnd が Windows ユーザー ENG\JohnDoe にマッピングされます。

[listing]
----
vs1::> vserver name-mapping create -vserver vs1 -direction unix-win -position 1 -pattern johnd
-replacement "ENG\\JohnDoe"
----
次のコマンドは、vs1という名前のSVMに別の名前マッピングを作成します。このマッピングは、優先順位リストの1番目の位置にあるWindowsからUNIXへのマッピングです。ここでは、パターンと置換に正規表現が含まれています。このマッピングは、ドメインENG内のすべてのCIFSユーザーを、SVMに関連付けられたLDAPドメイン内のユーザーにマッピングします。

[listing]
----
vs1::> vserver name-mapping create -vserver vs1 -direction win-unix -position 1 -pattern "ENG\\(.+)"
-replacement "\1"
----
次のコマンドは、vs1という名前のSVMに別の名前マッピングを作成します。ここでのパターンには、エスケープする必要があるWindows ユーザー名の要素として「`$`」が含まれています。このマッピングにより、Windows ユーザーENG\ john$opsがUNIX ユーザーjohn_opsにマッピングされます。

[listing]
----
vs1::> vserver name-mapping create -direction win-unix -position 1 -pattern ENG\\john\$ops
-replacement john_ops
----