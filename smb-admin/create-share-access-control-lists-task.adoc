---
permalink: smb-admin/create-share-access-control-lists-task.html 
sidebar: sidebar 
keywords: configuring, configure, permission, share, creating, create, control, list, acl, smb, enable, level, access, user, group, create smb share access control lists 
summary: SMB共有のアクセス制御リスト（ACL）を作成して共有のアクセス許可を設定すると、ユーザとグループの共有へのアクセス レベルを制御できます。 
---
= ONTAP SMB共有アクセス制御リストを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SMB共有のAccess Control List（ACL;アクセス制御リスト）を作成して共有権限を設定すると、ユーザとグループの共有に対するアクセス レベルを制御できます。

.タスク概要
ローカルまたはドメインのWindowsユーザまたはグループ名、あるいはUNIXユーザまたはグループ名を使用して共有レベルのACLを設定できます。

新しいACLを作成する前に、セキュリティ上のリスクがあるデフォルトの共有ACL `Everyone / Full Control`を削除する必要があります。

ワークグループ モードでは、ローカル ドメイン名はSMBサーバ名です。

.手順
. デフォルトの共有ACLを削除します：`vserver cifs share access-control delete -vserver <vserver_name> -share <share_name> -user-or-group Everyone`
. 新しいACLを設定します。
+
|===
| ...を使用してACLを構成する場合は、... | コマンドを入力してください... 


 a| 
Windowsユーザ
 a| 
`vserver cifs share access-control create -vserver <vserver_name> -share <share_name> -user-group-type windows -user-or-group <Windows_domain_name\user_name> -permission <access_right>`



 a| 
Windowsグループ
 a| 
`vserver cifs share access-control create -vserver <vserver_name> -share <share_name> -user-group-type windows -user-or-group <Windows_domain_name\group_name> -permission <access_right>`



 a| 
UNIXユーザ
 a| 
`vserver cifs share access-control create -vserver <vserver_name> -share <share_name> -user-group-type <unix-user> -user-or-group <UNIX_user_name> -permission <access_right>`



 a| 
UNIXグループ
 a| 
`vserver cifs share access-control create -vserver <vserver_name> -share <share_name> -user-group-type <unix-group> -user-or-group <UNIX_group_name> -permission <access_right>`

|===
.  `vserver cifs share access-control show`コマンドを使用して、共有に適用されたACLが正しいことを確認します。


.例
次のコマンドは、"`vs1.example.com`"SVM上の"`sales`"共有に対して、"`Sales Team`" Windowsグループに `Change`権限を付与します：

[listing]
----
cluster1::> vserver cifs share access-control create -vserver vs1.example.com -share sales -user-or-group "DOMAIN\Sales Team" -permission Change

cluster1::> vserver cifs share access-control show -vserver vs1.example.com
                 Share       User/Group              User/Group  Access
Vserver          Name        Name                    Type        Permission
---------------- ----------- --------------------    ---------   -----------
vs1.example.com  c$          BUILTIN\Administrators  windows     Full_Control
vs1.example.com  sales       DOMAIN\Sales Team     windows     Change
----
次のコマンドは、「vs2.example.com」SVM上の「eng」共有に対する `Read`権限を「engineering」UNIXグループに付与します：

[listing]
----
cluster1::> vserver cifs share access-control create -vserver vs2.example.com -share eng -user-group-type unix-group -user-or-group  engineering -permission Read

cluster1::> vserver cifs share access-control show -vserver vs2.example.com
                 Share       User/Group               User/Group  Access
Vserver          Name        Name                     Type        Permission
---------------- ----------- -------------------      ----------- -----------
vs2.example.com  c$          BUILTIN\Administrators   windows     Full_Control
vs2.example.com  eng         engineering              unix-group  Read
----
次のコマンドは、「Tiger Team」という名前のローカルWindowsグループに `Change`権限を付与し、「vs1」SVM上の「datavol5」共有に対して「Sue Chang」という名前のローカルWindowsユーザーに `Full_Control`権限を付与します：

[listing]
----
cluster1::> vserver cifs share access-control create -vserver vs1 -share datavol5 -user-group-type windows -user-or-group "Tiger Team" -permission Change

cluster1::> vserver cifs share access-control create -vserver vs1 -share datavol5 -user-group-type windows -user-or-group "Sue Chang" -permission Full_Control

cluster1::> vserver cifs share access-control show -vserver vs1
               Share       User/Group                  User/Group  Access
Vserver        Name        Name                        Type        Permission
-------------- ----------- --------------------------- ----------- -----------
vs1            c$          BUILTIN\Administrators      windows     Full_Control
vs1            datavol5    Tiger Team         windows     Change
vs1            datavol5    Sue Chang          windows     Full_Control
----