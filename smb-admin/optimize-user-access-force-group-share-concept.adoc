---
permalink: smb-admin/optimize-user-access-force-group-share-concept.html 
sidebar: sidebar 
keywords: create, share, ontap, command, line, data, unix, effective, security, smb, user, group, force-group, predefined, database, force-group, access, how to optimize smb user access with the force-group share setting 
summary: ONTAPコマンドラインからUNIX対応セキュリティを適用したデータへの共有を作成する際、その共有内でSMBユーザが作成するすべてのファイルを、UNIXグループデータベースに事前定義されたグループである同じグループ（force-group）に属するように指定できます。force-groupを使用すると、様々なグループに属するSMBユーザがファイルにアクセスできるようにすることが容易になります。 
---
= force-group共有設定を使用してONTAP SMBユーザーアクセスを最適化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPコマンドラインからUNIX対応セキュリティを適用したデータへの共有を作成する際、その共有内でSMBユーザーが作成するすべてのファイルを、UNIXグループデータベースに事前定義されたグループである同じグループ（_force-group_と呼ばれる）に所属させるように指定できます。force-groupを使用すると、様々なグループに属するSMBユーザーがファイルにアクセスできるようにすることが容易になります。

force-groupの指定は、共有がUNIXまたはmixedセキュリティ形式のqtreeにある場合にのみ効果があります。NTFSセキュリティ形式のボリュームまたはqtreeにある共有内のファイルへのアクセスは、UNIXのGIDではなくWindowsの権限によって判断されるため、これらの共有にforce-groupを設定する必要はありません。

共有にforce-groupが指定されている場合、次のようになります。

* この共有にアクセスするforce-group内のSMBユーザは、force-groupのGIDに一時的に変更されます。
+
このGIDを使用すると、force-groupを含んだ共有内のファイルにアクセスできます。通常、このファイルには、プライマリGIDまたはUIDではアクセスできません。

* SMBユーザがこの共有内に作成するすべてのファイルは、ファイル所有者のプライマリGIDに関係なく、同じforce-groupに属します。


SMBユーザが、NFSユーザによって作成されたファイルにアクセスしようとすると、SMBユーザのプライマリGIDによって、権限があるかどうかが判断されます。

force-groupは、NFSユーザがこの共有内のファイルにアクセスする方法には影響を与えません。NFSユーザが作成したファイルは、ファイル所有者からGIDを取得します。アクセス権の決定はファイルにアクセスしようとしているNFSユーザのUIDおよびプライマリGIDに基づきます。

フォースグループを使用すると、様々なグループに属するSMBユーザーがファイルにアクセスできるようにすることが容易になります。例えば、会社のWebページを保存するための共有を作成し、エンジニアリング部門とマーケティング部門のユーザーに書き込み権限を付与したい場合、「`webgroup1`」というフォースグループに書き込み権限を付与することで共有を作成できます。フォースグループにより、この共有内でSMBユーザーが作成するすべてのファイルは、「`webgroup1`」グループの所有となります。さらに、ユーザーが共有にアクセスすると、自動的に「`webgroup1`」グループのGIDが割り当てられます。その結果、エンジニアリング部門とマーケティング部門のユーザーのアクセス権を管理することなく、すべてのユーザーがこの共有に書き込みできるようになります。

.関連情報
xref:create-share-force-group-setting-task.adoc[force-group共有設定で共有を作成する]
