---
permalink: smb-admin/reasons-invalidates-branchcache-hashes-concept.html 
sidebar: sidebar 
keywords: understand, ontap, invalidate, hash, branchcache, configuration, share, reasons ontap invalidates branchcache hashes 
summary: ONTAPがハッシュを無効にする理由を理解することは、BranchCache設定を計画する際に役立ちます。設定すべき動作モードを決定し、どの共有でBranchCacheを有効にするかを選択するのに役立ちます。 
---
= ONTAP SMBがBranchCacheハッシュを無効にする理由について学ぶ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPがハッシュを無効にする理由を理解することは、BranchCache設定を計画する際に役立ちます。設定すべき動作モードを決定し、どの共有でBranchCacheを有効にするかを選択するのに役立ちます。

ONTAPは、BranchCacheハッシュの有効性を確保するためにハッシュを管理する必要があります。ハッシュが有効でない場合、ONTAPはそのハッシュを無効化し、BranchCacheがまだ有効であると仮定して、次回コンテンツが要求された際に新しいハッシュを計算します。

ONTAPは次の理由でハッシュを無効にします：

* サーバーキーが変更されました。
+
サーバキーが変更されると、ONTAPはハッシュストア内のすべてのハッシュを無効にします。

* BranchCacheハッシュストアの最大サイズに達したため、ハッシュはキャッシュからフラッシュされます。
+
これは調整可能なパラメータであり、ビジネス要件に合わせて変更できます。

* ファイルは SMB または NFS アクセスを通じて変更されます。
* 計算されたハッシュがあるファイルは、 `snap restore` コマンドを使用して復元されます。
* BranchCache対応の SMB 共有を含むボリュームは、 `snap restore`コマンドを使用してリストアされます。

