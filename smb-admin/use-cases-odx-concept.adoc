---
permalink: smb-admin/use-cases-odx-concept.html 
sidebar: sidebar 
keywords: use, case, odx, svm, determine, circumstance, odx, performance, benefit, use cases for odx 
summary: SVMでODXを使用する前にユースケースについて確認し、どのような場合にパフォーマンスが向上するかを判断できるようにしておく必要があります。 
---
= ONTAP SMBサーバー上のODXのユースケース
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SVMでODXを使用する前にユースケースについて確認し、どのような場合にパフォーマンスが向上するかを判断できるようにしておく必要があります。

ODXをサポートするWindowsサーバおよびクライアントでは、リモート サーバ間でデータをコピーする際に、デフォルトでコピー オフロードが使用されます。WindowsサーバおよびクライアントでODXがサポートされていない場合や、ODXコピー オフロードが任意の時点で失敗した場合は、コピーまたは移動処理が従来の読み取りと書き込みの処理を使用して実行されます。

ODXコピーおよび移動の使用は、以下の事例でサポートされます。

* ボリューム内
+
ソースとデスティネーションのファイルまたはLUNは、同じボリューム内にあります。

* ボリュームが異なり、ノードとSVMは同じ
+
ソースとデスティネーションのファイルまたはLUNは、同じノード上の異なるボリュームにあります。データは同じSVMに所有されます。

* ボリュームとノードが異なり、SVMは同じ
+
ソースとデスティネーションのファイルまたはLUNは、異なるノード上の異なるボリュームにあります。データは同じSVMに所有されます。

* SVMが異なり、ノードは同じ
+
ソースとデスティネーションのファイルまたはLUNは、同じノード上の異なるボリュームにあります。データは異なるSVMに所有されます。

* SVMとノードが異なる
+
ソースとデスティネーションのファイルまたはLUNは、異なるノード上の異なるボリュームにあります。データは異なるSVMに所有されます。

* クラスタ間
+
ソースとデスティネーションのLUNは、異なるクラスタの異なるノード上の異なるボリュームにあります。これはSANでのみサポートされ、CIFSでは機能しません。



さらに、いくつかの特殊なユースケースがあります。

* ONTAPのODXの実装では、ODXを使用してSMB共有とFC / iSCSI接続の仮想ドライブとの間でファイルをコピーできます。
+
Windowsエクスプローラ、Windows CLI（PowerShell）、Hyper-V、またはODXをサポートするその他のアプリケーションでODXコピー オフロードを使用すると、SMB共有と接続されたLUNが同じクラスタにある場合に、それらの間でシームレスにファイルをコピーまたは移動できます。

* Hyper-Vでは、さらに次のようなユースケースでもODXコピー オフロードが使用されます。
+
** Hyper-VでODXコピー オフロードのパススルーを使用して、仮想ハード ディスク（VHD）ファイル内およびVHDファイル間でのデータのコピー、または同じクラスタ内のマッピングされたSMB共有と接続されたiSCSI LUNの間でのデータのコピーを実行できます。
+
これにより、ゲスト オペレーティング システムからのコピーを基盤となるストレージに渡すことができます。

** 容量固定VHDを作成する際に、ODXを使用して、既知の初期化済みトークンによってディスクを初期化します。
** ソースとデスティネーションのストレージが同じクラスタにある場合に、ODXコピー オフロードを使用して、仮想マシンのストレージを移行します。


+
[NOTE]
====
Hyper-VでのODXコピー オフロードのパススルーの用途を活用するには、ゲスト オペレーティング システムでODXがサポートされている必要があります。また、ゲスト オペレーティング システムのディスクが、ODXをサポートするストレージ（SMBまたはSAN）から作成されたSCSIディスクである必要があります。ゲスト オペレーティング システムのディスクがIDEディスクの場合、ODXのパススルーはサポートされません。

====

