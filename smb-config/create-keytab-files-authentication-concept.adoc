---
permalink: smb-config/create-keytab-files-authentication-concept.html 
sidebar: sidebar 
keywords: begin, ontap, support, svm, authentication, active, directory, ad, server, keytab, file, administrator, generate, uniform, resource, identifier, uri, supplied, supply, vserver, cifs, command, kerberos, create keytab files for smb authentication 
summary: ONTAP 9.7以降、ONTAPではキータブ ファイルを使用したActive Directory（AD）サーバによるSVM認証がサポートされます。AD管理者はキータブ ファイルを生成し、Uniform Resource Identifier（URI）としてONTAP管理者が使用できるようにします。このURIは、vserver cifsコマンドでADドメインとのKerberos認証が必要な場合に指定されます。 
---
= ONTAP SMB認証用のキータブファイルを作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.7以降、ONTAPはキータブファイルを使用したActive Directory（AD）サーバによるSVM認証をサポートします。AD管理者はキータブファイルを生成し、ONTAP管理者がUniform Resource Identifier（URI）として使用できるようにします。このURIは、 `vserver cifs`コマンドでADドメインのKerberos認証が必要な場合に提供されます。

AD管理者は、標準のWindows Server `ktpass`コマンドを使用してキータブ ファイルを作成できます。このコマンドは、認証が必要なプライマリ ドメインで実行する必要があります。この `ktpass`コマンドは、プライマリ ドメイン ユーザー用のキータブ ファイルのみを生成できます。信頼されたドメイン ユーザーを使用して生成されたキーはサポートされていません。

キータブ ファイルは、特定のONTAP管理者ユーザ用に生成されます。管理者ユーザのパスワードが変更されない限り、特定の暗号化タイプとドメイン用に生成されるキーは変更されません。そのため、管理者ユーザのパスワードが変更されるたびに、新しいキータブ ファイルが必要になります。

次の暗号化タイプがサポートされています。

* AES256-SHA1
* DES-CBC-MD5
+
[NOTE]
====
ONTAPはDES-CBC-CRC暗号化タイプをサポートしていません。

====
* RC4-HMAC


AES256 は最も高度な暗号化タイプであり、ONTAP システムで有効になっている場合は使用する必要があります。

キータブ ファイルは、管理者パスワードを指定するか、ランダムに生成されたパスワードを使用して生成できます。ただし、キータブ ファイル内の鍵を復号するには、AD サーバーで管理者ユーザー固有の秘密鍵が必要となるため、一度に使用できるパスワード オプションは 1 つだけです。特定の管理者の秘密鍵が変更されると、キータブ ファイルは無効になります。
