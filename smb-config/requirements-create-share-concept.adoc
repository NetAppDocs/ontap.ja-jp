---
permalink: smb-config/requirements-create-share-concept.html 
sidebar: sidebar 
keywords: creating, create, smb, share, requirement, path, properties, property, home, directories, directory, requirements and considerations for creating an smb share 
summary: SMB 共有を作成する前に、共有パスと共有プロパティ（特にホーム ディレクトリ）の要件を理解しておく必要があります。 
---
= ONTAP SMB共有を作成する際の要件と考慮事項
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SMB 共有を作成する前に、共有パスと共有プロパティ（特にホーム ディレクトリ）の要件を理解しておく必要があります。

SMB共有を作成するには、クライアントがアクセスするディレクトリ パス構造を（ `vserver cifs share create`コマンドの `-path`オプションを使用して）指定する必要があります。このディレクトリ パスは、SVMネームスペースに作成したボリュームまたはqtreeのジャンクション パスに対応します。共有を作成する前に、ディレクトリ パスと対応するジャンクション パスが存在している必要があります。

共有パスには次の要件があります：

* ディレクトリ パス名は、255文字まで入力できます。
* パス名にスペースがある場合は、文字列全体を引用符で囲む必要があります（例： `"/new volume/mount here"`）。
* 共有の UNC パス(`\\servername\sharename\filepath`に 256 文字以上（UNC パスの最初の "`\\`" を除く）が含まれている場合、Windows のプロパティ ボックスの *セキュリティ* タブは使用できません。
+
これは、ONTAPの問題ではなく、Windowsクライアントの問題です。この問題を回避するには、UNCパスが256文字を超える共有を作成しないようにしてください。



共有プロパティのデフォルトは変更できます：

* すべての共有のデフォルトの初期プロパティは `oplocks`、 `browsable`、 `changenotify`、および `show-previous-versions`です。
* 共有の作成時に共有プロパティを指定することもできます。
+
ただし、共有の作成時に共有プロパティを指定した場合、デフォルトは使用されません。 `-share-properties`パラメータを共有の作成時に使用する場合は、共有に適用するすべての共有プロパティをカンマ区切りのリストで指定する必要があります。

* ホーム ディレクトリの共有を指定するには、 `homedirectory` プロパティを使用します。
+
この機能を使用すると、接続するユーザーと一連の変数に基づいて、異なるディレクトリにマッピングされる共有を設定できます。ユーザーごとに個別の共有を作成する代わりに、いくつかのホーム ディレクトリ パラメータを使用して単一の共有を設定することで、エントリ ポイント（共有）とホーム ディレクトリ（SVM上のディレクトリ）の関係を定義できます。

+
[NOTE]
====
共有の作成後は、このプロパティを追加または削除できません。

====


ホーム ディレクトリ共有には次の要件があります：

* SMB ホーム ディレクトリを作成する前に、 `vserver cifs home-directory search-path add`コマンドを使用して少なくとも 1 つのホーム ディレクトリ検索パスを追加する必要があります。
*  `-share-properties`パラメータの `homedirectory`の値によって指定されるホーム ディレクトリ共有には、共有名に `%w`（Windows ユーザー名）動的変数を含める必要があります。
+
共有名には、さらに `%d`（ドメイン名）動的変数（例： `%d/%w`）または共有名の静的部分（例： `home1_%w`）を含めることができます。

* 管理者またはユーザーが共有を使用して他のユーザーのホーム ディレクトリに接続する場合（ `vserver cifs home-directory modify`コマンドのオプションを使用）、動的な共有名パターンの前にチルダ(`~`を付ける必要があります。


 `vserver cifs share`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=vserver+cifs+share["ONTAPコマンド リファレンス"^]をご覧ください。

.関連情報
* link:../smb-admin/index.html["SMBの管理"]

