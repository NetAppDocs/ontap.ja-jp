---
permalink: smb-hyper-v-sql/example-directory-structure-remote-vss-concept.html 
sidebar: sidebar 
keywords: directory, structure, remote, vss, hyper, v, virutal, machine, file, shadow, copy, backup 
summary: リモートVSSは、シャドウコピーの作成時に、Hyper-V仮想マシンファイルが格納されているディレクトリ構造をトラバースします。仮想マシンファイルのバックアップを正常に作成できるように、適切なディレクトリ構造について理解しておくことが重要です。 
---
= リモートVSSで使用されるディレクトリ構造の例
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
リモートVSSは、シャドウコピーの作成時に、Hyper-V仮想マシンファイルが格納されているディレクトリ構造をトラバースします。仮想マシンファイルのバックアップを正常に作成できるように、適切なディレクトリ構造について理解しておくことが重要です。

シャドウコピーを正常に作成するためにサポートされるディレクトリ構造は、次の要件を満たしています。

* 仮想マシンファイルの格納に使用されるディレクトリ構造内に存在するのは、ディレクトリと通常のファイルだけです。
+
ディレクトリ構造には、ジャンクション、リンク、または通常以外のファイルは含まれません。

* 仮想マシンのファイルはすべて単一の共有内に存在します。
* 仮想マシンファイルの格納に使用されるディレクトリ構造が、設定されているシャドウコピーのディレクトリ階層を超えることはありません。
* 共有のルートディレクトリには、仮想マシンファイルまたはディレクトリのみが含まれています。


次の図では、Storage Virtual Machine（SVM）vs1上でジャンクションポイントをにしてvm_vol1という名前のボリュームが作成されています `/hyperv/vm1`。ジャンクションポイントの下に、仮想マシンファイルを格納するサブディレクトリが作成されます。Hyper-Vサーバの仮想マシンファイルには、パスのshare1を介してアクセスします `/hyperv/vm1/dir1/vmdir`。シャドウコピーサービスによって、share1の下のディレクトリ構造（設定されたシャドウコピーのディレクトリ階層まで）に格納されているすべての仮想マシンファイルのシャドウコピーが作成されます。

image:directory-structure-used-by-remote-vss.gif["リモートVSSで使用されるディレクトリ構造"]
