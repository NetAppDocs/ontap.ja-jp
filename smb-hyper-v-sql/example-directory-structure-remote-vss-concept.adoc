---
permalink: smb-hyper-v-sql/example-directory-structure-remote-vss-concept.html 
sidebar: sidebar 
keywords: directory, structure, remote, vss, hyper, v, virutal, machine, file, shadow, copy, backup 
summary: リモートVSSは、シャドウ コピーの作成時に、Hyper-V仮想マシン ファイルが格納されているディレクトリ構造をトラバースします。仮想マシン ファイルのバックアップを正しく作成できるように、適切なディレクトリ構造について理解しておくことが重要です。 
---
= リモートVSSで使用されるディレクトリ構造の例
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
リモートVSSは、シャドウ コピーの作成時に、Hyper-V仮想マシン ファイルが格納されているディレクトリ構造をトラバースします。仮想マシン ファイルのバックアップを正しく作成できるように、適切なディレクトリ構造について理解しておくことが重要です。

シャドウ コピーを正常に作成するためにサポートされるディレクトリ構造は、次の要件を満たしています。

* 仮想マシン ファイルの格納に使用されるディレクトリ構造内に存在するのは、ディレクトリと通常のファイルだけです。
+
ディレクトリ構造にはジャンクション、リンク、通常以外のファイルは含まれません。

* 仮想マシンのファイルはすべて単一の共有内に存在します。
* 仮想マシン ファイルの格納に使用されるディレクトリ構造は、設定されたシャドウ コピーのディレクトリ階層より深くなりません。
* 共有のルート ディレクトリには、仮想マシン ファイルまたはディレクトリのみが格納されます。


次の図では、ストレージ仮想マシン（SVM）vs1上の `/hyperv/vm1`にジャンクションポイントを持つボリュームvm_vol1が作成されています。ジャンクションポイントの下に、仮想マシンファイルを格納するサブディレクトリが作成されます。Hyper-Vサーバーの仮想マシンファイルには、パス `/hyperv/vm1/dir1/vmdir`を持つshare1を介してアクセスします。シャドウ コピー サービスは、share1下のディレクトリ構造内に含まれるすべての仮想マシンファイルのシャドウ コピーを作成します（シャドウ コピー ディレクトリに設定された深さまで）。

image:directory-structure-used-by-remote-vss.gif["リモート VSS で使用されるディレクトリ構造"]
