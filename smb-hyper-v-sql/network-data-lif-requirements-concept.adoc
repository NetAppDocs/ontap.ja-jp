---
permalink: smb-hyper-v-sql/network-data-lif-requirements-concept.html 
sidebar: sidebar 
keywords: network, data, lif, requirements, hyper, v, sql, server, protocol 
summary: ノンストップオペレーション用にSQL Server over SMBまたはHyper-V over SMB構成を作成する場合は、一定のネットワークとデータLIFの要件について理解しておく必要があります。 
---
= ネットワークとデータLIFの要件
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ノンストップオペレーション用にSQL Server over SMBまたはHyper-V over SMB構成を作成する場合は、一定のネットワークとデータLIFの要件について理解しておく必要があります。



== ネットワークプロトコルの要件

* IPv4およびIPv6ネットワークがサポートされています。
* SMB 3.0以降が必要です。
+
SMB 3.0には、ノンストップオペレーションを実現するために必要な、継続的可用性を備えたSMB接続の確立に必要な機能が用意されています。

* DNSサーバには、CIFSサーバ名をStorage Virtual Machine（SVM）上のデータLIFに割り当てられたIPアドレスにマッピングするエントリが格納されている必要があります。
+
通常、Hyper-VまたはSQL Serverアプリケーションサーバは、仮想マシンまたはデータベースファイルへのアクセス時に複数のデータLIFを介して複数の接続を確立します。正常に機能するためには、アプリケーションサーバは、複数の一意のIPアドレスへの複数の接続を確立するのではなく、CIFSサーバ名を使用してこれらの複数のSMB接続を確立する必要があります。

+
監視でも、個 々 のLIF IPアドレスではなく、CIFSサーバのDNS名を使用する必要があります。

+
ONTAP 9 .4以降では、SMBマルチチャネルを有効にすることで、Hyper-V over SMBおよびSQL Server over SMB構成のスループットとフォールトトレランスを向上させることができます。そのためには、クラスタとクライアントに1G、10G、またはそれ以上のNICを複数導入する必要があります。





== データLIFの要件

* SMB経由のアプリケーションサーバソリューションをホストするSVMには、クラスタ内のすべてのノードに稼働しているデータLIFが少なくとも1つ必要です。
+
SVMデータLIFは、アプリケーションサーバがアクセスするデータを現在ホストしていないノードを含む、クラスタ内の他のデータポートにフェイルオーバーできます。さらに、監視ノードは常にアプリケーションサーバが接続されているノードのSFOパートナーであるため、クラスタ内のすべてのノードが監視ノードになる可能性があります。

* データLIFは、自動的にリバートされるように設定しないでください。
+
テイクオーバーまたはギブバックの発生後、データLIFをホームポートに手動でリバートする必要があります。

* すべてのデータLIFのIPアドレスがDNSにエントリを持ち、すべてのエントリがCIFSサーバ名に解決される必要があります。
+
アプリケーションサーバは、CIFSサーバ名を使用してSMB共有に接続する必要があります。LIFのIPアドレスを使用して接続を確立するようにアプリケーションサーバを設定しないでください。

* CIFSサーバ名がSVM名と異なる場合は、DNSエントリがCIFSサーバ名に解決される必要があります。

