---
permalink: smb-hyper-v-sql/verify-continuously-available-share-config-task.html 
sidebar: sidebar 
keywords: verify, continuously, available, smb, share, configuration, hyper, v, sql, server, nondisruptive, application 
summary: 無停止運用をサポートするには、Hyper-V および SQL Server の SMB 共有を継続的に利用可能な共有として構成する必要があります。さらに、確認が必要な共有設定がいくつかあります。計画的または計画外の中断イベントが発生した場合でも、アプリケーション サーバーにシームレスな無停止運用を提供できるよう、共有が適切に構成されていることを確認する必要があります。 
---
= 継続的可用性を備えたSMB共有の設定の確認
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
無停止運用をサポートするには、Hyper-V および SQL Server の SMB 共有を継続的に利用可能な共有として構成する必要があります。さらに、確認が必要な共有設定がいくつかあります。計画的または計画外の中断イベントが発生した場合でも、アプリケーション サーバーにシームレスな無停止運用を提供できるよう、共有が適切に構成されていることを確認する必要があります。

.タスク概要
次の2つの共有パラメータが正しく設定されていることを確認する必要があります。

*  `-offline-files`パラメータは `manual`（デフォルト）または `none`に設定されます。
* シンボリック リンクが無効になっている必要があります。


適切な無停止操作を行うには、次の共有プロパティを設定する必要があります：

* `continuously-available`
* `oplocks`


次の共有プロパティは設定しないでください。

* `homedirectory`
* `attributecache`
* `branchcache`
* `access-based-enumeration`


.手順
. オフライン ファイルが `manual`または `disabled`に設定され、シンボリック リンクが無効になっていることを確認します：
+
`*vserver cifs shares show -vserver _vserver_name_*`

. SMB 共有が継続的な可用性のために設定されていることを確認します：
+
`*vserver cifs shares properties show -vserver _vserver_name_*`



.例
次の例は、ストレージ仮想マシン（SVM、旧称Vserver）vs1上の「`share1`」という共有の設定を表示します。オフラインファイルは `manual`に設定され、シンボリックリンクは無効になっています（ `Symlink Properties`フィールド出力のハイフンで示されます）：

[listing]
----
cluster1::> vserver cifs share show -vserver vs1 -share-name share1
                      Vserver: vs1
                        Share: share1
     CIFS Server NetBIOS Name: VS1
                         Path: /data/share1
             Share Properties: oplocks
                               continuously-available
           Symlink Properties: -
      File Mode Creation Mask: -
 Directory Mode Creation Mask: -
                Share Comment: -
                    Share ACL: Everyone / Full Control
File Attribute Cache Lifetime: -
                  Volume Name: -
                Offline Files: manual
Vscan File-Operations Profile: standard
----
次の例では、SVM vs1上の「`share1`」という名前の共有の共有プロパティを表示します：

[listing]
----
cluster1::> vserver cifs share properties show -vserver vs1 -share-name share1
Vserver    Share   Properties
---------  ------  ----------
vs1        share1  oplocks
                   continuously-available
----