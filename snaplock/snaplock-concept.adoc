---
permalink: snaplock/snaplock-concept.html 
sidebar: sidebar 
keywords: snaplock, worm, storage, compliance, enterprise, mode, sec, rule, 17a, license 
summary: SnapLock は、規制やガバナンスに準拠するために WORM ストレージを使用して変更不可能な状態でファイルを保管する組織向けの、ハイパフォーマンスなコンプライアンス解決策です。1 つのライセンスで、 SEC Rule 17a-4 などの社外規定に準拠するための厳格なコンプライアンスモードと、社内規定に準拠してデジタル資産を保護するためのより緩やかなエンタープライズモードで SnapLock を使用できます。 
---
= SnapLock とは
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapLock は、規制やガバナンスに準拠するために WORM ストレージを使用して変更不可能な状態でファイルを保管する組織向けの、ハイパフォーマンスなコンプライアンス解決策です。1 つのライセンスで、 SEC Rule 17a-4 などの社外規定に準拠するための strict _ Compliance モード _ 、および社内規定に準拠してデジタル資産を保護するためのより緩やかな _ Enterprise モード _ の SnapLock を使用できます。



== Compliance モードと Enterprise モードの違い

SnapLock の Compliance モードと Enterprise モードの主な違いは、 WORM ファイルの保護レベルです。

* Compliance モードの WORM ファイルは、ディスクレベルで保護されます。
+
Compliance モードのアグリゲートが含まれているディスクは再初期化できません。

* Enterprise モードの WORM ファイルは、ファイルレベルで保護されます。


これに関連して、各モードでファイル削除を管理する方法が異なります。

* Compliance モードの WORM ファイルは、保持期間中は削除できません。
* Enterprise モードの WORM ファイルは、 Compliance Administrator が監査付きの DELETED_手順 を使用して保持期間中に削除できます。


保持期間が経過したあとに不要となったファイルはすべて削除する必要があります。一度 WORM 状態にコミットされたファイルは、 Compliance モードであるか Enterprise モードであるかに関係なく、保持期間が経過したあとも変更することはできません。

WORM ファイルは保持期間中も保持期間後も移動できません。WORM ファイルはコピーできますが、コピーしたファイルは WORM 状態にはなりません。

次の表に、 SnapLock の準拠モードとエンタープライズモードの違いを示します。

|===


| 機能 | SnapLock コンプライアンス | SnapLock エンタープライズ 


 a| 
privileged delete
 a| 
いいえ
 a| 
はい。



 a| 
ディスクを再初期化する
 a| 
いいえ
 a| 
はい。



 a| 
保持期間中は、 SnapLock アグリゲートとボリュームを破棄します
 a| 
いいえ
 a| 
はい。ただし、SnapLock 監査ログボリュームは例外です



 a| 
アグリゲートまたはボリュームの名前を変更します
 a| 
いいえ
 a| 
はい。



 a| 
Non-NetApp ディスク
 a| 
いいえ
 a| 
○（ FlexArray 仮想化を使用）



 a| 
監査ログには SnapLock ボリュームを使用します
 a| 
はい。
 a| 
はい、 ONTAP 9.5 以降で使用できます

|===


== SnapLock でサポートされる機能とサポートされない機能

次の表に、SnapLock Complianceモード、SnapLock Enterpriseモード、またはその両方でサポートされる機能を示します。

|===


| フィーチャー（ Feature ） | SnapLock Complianceでサポートされます | SnapLock Enterpriseでサポートされます 


 a| 
整合グループ
 a| 
いいえ
 a| 
いいえ



 a| 
SAN
 a| 
いいえ
 a| 
いいえ



 a| 
SnapMirror Synchronous
 a| 
いいえ
 a| 
いいえ



 a| 
SnapMirror によるビジネス継続性
 a| 
いいえ
 a| 
いいえ



 a| 
単一ファイルの SnapRestore
 a| 
いいえ
 a| 
はい。



 a| 
SnapRestore
 a| 
いいえ
 a| 
はい。



 a| 
FlexClone
 a| 
SnapLock ボリュームはクローニングできますが、 SnapLock ボリューム上のファイルはクローニングできません。
 a| 
SnapLock ボリュームはクローニングできますが、 SnapLock ボリューム上のファイルはクローニングできません。



 a| 
LUN
 a| 
いいえ
 a| 
いいえ



 a| 
SMTape の場合
 a| 
いいえ
 a| 
いいえ



 a| 
MetroCluster 構成
 a| 
SnapLock Compliance アグリゲートまたは Enterprise アグリゲートは、 MetroCluster 監査ログボリュームを SnapLock 構成でホストすることができますが、次の制限事項があります。

* SnapLock Enterprise は、ミラーされたアグリゲートとミラーされていないアグリゲートでサポート
* SnapLock Compliance は、ミラーされていないアグリゲートでのみサポートされます。


すべての MetroCluster 構成でミラーされたアグリゲートがサポートされMetroCluster 構成でミラーされていないアグリゲートがサポートされているかどうかを確認するには、 ONTAP のリリースノートを参照

https://library.netapp.com/ecmdocs/ECMLP2492508/html/frameset.html["ONTAP 9 リリースノート"^]
 a| 
いいえ



 a| 
SnapLock アグリゲートで FabricPool をサポートします
 a| 
いいえ
 a| 
はい、ONTAP 9.8以降です。ただし、クラウド管理者がそのデータを削除できるため、アカウントチームは、パブリッククラウドまたはプライベートクラウドに階層化されたFabricPool のデータはSnapLock で保護されなくなったことを理解していることを示すProduct Variance Requestを開く必要があります。

[NOTE]
====
パブリッククラウドまたはプライベートクラウドへの FabricPool 階層は、クラウド管理者がデータを削除できるため、 SnapLock で保護されなくなったことに注意してください。

====


 a| 
FlexGroup ボリューム
 a| 
はい、ONTAP 9.11.1以降でサポートされていません。ただし、次の機能はサポートされていません。

* リーガルホールド
* イベントベースの保持
* SnapLock for SnapVault の略


また、次の動作についても理解しておく必要があります。

* FlexGroup のボリュームコンプライアンスクロック（VCC）は、ルートコンスティチュエントのVCCによって決まります。すべての非ルートコンスティチュエントのVCCはルートのVCCと密接に同期されます。
* SnapLock の設定プロパティは、FlexGroup 全体にのみ設定されます。デフォルトの保持期間や自動コミット期間など、個々のコンスティチュエントごとに異なる設定プロパティを指定することはできません。

 a| 
はい、ONTAP 9.11.1以降でサポートされていません。ただし、次の機能はサポートされていません。

* リーガルホールド
* イベントベースの保持
* SnapLock for SnapVault の略


また、次の動作についても理解しておく必要があります。

* FlexGroup のボリュームコンプライアンスクロック（VCC）は、ルートコンスティチュエントのVCCによって決まります。すべての非ルートコンスティチュエントのVCCはルートのVCCと密接に同期されます。
* SnapLock の設定プロパティは、FlexGroup 全体にのみ設定されます。デフォルトの保持期間や自動コミット期間など、個々のコンスティチュエントごとに異なる設定プロパティを指定することはできません。


|===


== MetroCluster 構成とコンプライアンスクロック

MetroCluster 構成では、 Volume Compliance Clock （ VCC ；ボリュームコンプライアンスクロック）と System Compliance Clock （ SCC ；システムコンプライアンスクロック）の 2 つのコンプライアンスクロックメカニズムが使用されます。VCC と SCC はすべての SnapLock 構成で使用できます。ノードに新しいボリュームを作成すると、ボリュームの VCC はそのノードの現在の SCC の値に初期化されます。ボリューム作成後のボリュームとファイルの保持期限の追跡には、常に VCC が使用されます。

ボリュームを別のサイトにレプリケートすると、ボリュームの VCC も一緒にレプリケートされます。ボリュームのスイッチオーバーが発生した場合、サイト A からサイト B へのスイッチオーバーなどで、サイト B の VCC は引き続き更新されますが、サイト A がオフラインになるとサイト A の SCC が停止します。

サイト A がオンラインに戻り、ボリュームのスイッチバックが実行されると、サイト A の SCC のクロックが再開されますが、ボリュームの VCC は引き続き更新されます。VCC は継続的に更新されるため、スイッチオーバーやスイッチバックの処理に関係なくファイルの保持期限は SCC に依存せず、期限が延びることはありません。



== ファイルを WORM にコミットしています

アプリケーションを使用して、 NFS または CIFS 経由でファイルを WORM にコミットするか、 SnapLock の自動コミット機能を使用してファイルを自動的にコミットすることができます。追記可能 WORM ファイル _ を使用すると、ログ情報のように段階的に書き込まれるデータを保持できます。



== データ保護

SnapLock でサポートされるデータ保護方法は、ほとんどのコンプライアンス要件に対応します。

* SnapLock for SnapVault を使用して、セカンダリストレージ上の Snapshot コピーを WORM 方式で保護できます。
* SnapMirror を使用すると、ディザスタリカバリ目的で地理的に離れた別の場所に WORM ファイルをレプリケートできます。




== ストレージ効率

ONTAP 9.9.9..1 以降の SnapLock では、 SnapLock ボリュームやアグリゲートのデータコンパクション、ボリューム間重複排除、適応圧縮などのストレージ効率化機能がサポートされます。



== 7-Mode からの移行

7-Mode Transition Tool の Copy-Based Transition （ CBT ）機能を使用して、 SnapLock ボリュームを 7-Mode から ONTAP に移行できます。デスティネーションボリュームの SnapLock モードである Compliance または Enterprise とソースボリュームの SnapLock モードが一致している必要があります。コピーフリーの移行（ CFT ）は SnapLock ボリュームの移行には使用できません。



== 暗号化

ONTAP は、ストレージメディアの転用、返却、置き忘れ、盗難に際して保存データが読み取られることがないようにソフトウェアベースとハードウェアベースの暗号化テクノロジを提供します。

* 免責事項： * 認証キーが紛失した場合や、認証に失敗した回数が指定した制限を超えたためにドライブが永続的にロックされた場合、自己暗号化ドライブまたはボリューム上の SnapLock で保護された WORM ファイルを取得できるかどうかは、ネットアップでは保証できません。認証エラーへの対策はお客様の責任で行ってください。

[NOTE]
====
ONTAP 9.2 以降では、 SnapLock アグリゲートで暗号化されたボリュームがサポートされます。

====