---
sidebar: sidebar 
permalink: snapmirror-active-sync/use-cases-concept.html 
keywords: SM-BC, SMBC, overview, benefits, use cases, architecture, snapmirror active sync 
summary: SnapMirror アクティブ同期を使用して LUN でアプリケーションを保護し、アプリケーションの透過的なフェイルオーバーを可能にして、災害発生時のビジネス継続性を確保します。 
---
= ONTAP SnapMirror Active Syncのユースケース
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
グローバルに接続されたビジネス環境の要求により、サイバー攻撃、停電、自然災害などの障害が発生した場合に、ビジネス クリティカルなアプリケーション データをデータ損失ゼロで迅速に復旧することが求められます。こうした要求は、金融業界や一般データ保護規則（GDPR）などの規制遵守が求められる分野で特に高まっています。

SnapMirrorアクティブ同期のユース ケースは次のとおりです。

.ゼロ復旧時間目標（RTO）を実現するアプリケーション展開
SnapMirror Active Sync デプロイメントでは、プライマリクラスタとセカンダリクラスタが存在します。プライマリクラスタの LUN  `L1P`には、セカンダリにミラー `L1S`があります。両方の LUN は同じシリアル ID を共有し、ホストには読み取り / 書き込み LUN として報告されます。ただし、非対称構成では、読み取りおよび書き込み操作はプライマリ LUN `L1P`に対してのみ実行されます。ミラー `L1S`への書き込みはプロキシによって実行されます。

.ゼロ RTO または透過的アプリケーション フェイルオーバー（TAF）のためのアプリケーション展開
TAFは、ホストMPIOソフトウェアベースのパスフェイルオーバーに基づいており、ストレージへの無停止アクセスを実現します。プライマリLUNコピー（L1P）とミラーコピー（L1S）の両方が同じID（シリアル番号）を持ち、ホストには読み取り/書き込み可能として報告されます。ただし、非対称構成では、読み取りと書き込みはプライマリボリュームによってのみ処理されます。ミラーコピーへのI/Oは、プライマリコピーにプロキシされます。ホストのL1への優先パスは、非対称論理ユニットアクセス（ALUA）のアクセス状態がアクティブ最適化（A/O）であるVS1：N1です。ONTAPメディエーターは、主にプライマリストレージでストレージ障害が発生した場合にフェイルオーバー（計画的または計画外）を実行するために、導入の一部として必要です。

image:snapmirror-active-sync-alua-active-optimized.png["SnapMirror アクティブ同期 ALUA アクティブ最適化パス"]

TAFは、自動フェイルオーバーと自動フェイルオーバーデュプレックスの2つのモードで動作します。自動フェイルオーバーでは、読み取りと書き込みはプライマリボリュームのみで処理されるため、ミラーコピー（ミラーコピー自身は書き込み処理を実行できません）へのIOはプライマリコピーにプロキシされます。自動フェイルオーバーデュプレックスでは、プライマリコピーとセカンダリコピーの両方でIOを処理できるため、プロキシは不要です。

image:snapmirror-active-sync-automatedfailoverduplex-scenario.png["SnapMirror アクティブ同期AutomatedFailoverDuplexシナリオ"]

ONTAP 9.17.1 でホスト アクセスに NVMe を使用している場合は、AutomatedFailoverDuplex ポリシーのみがサポートされます。

SnapMirrorアクティブ同期では、ALUAが使用されます。ALUAは、アプリケーション ホストのマルチパス ソフトウェアがアドバタイズされたパス、優先順位、アクセスの可否情報を使用して、アプリケーション ホストがストレージ アレイと通信できるようにするメカニズムです。ALUAは、LUNなどを所有するコントローラへのアクティブ / 最適化パスを、プライマリ パスで障害が発生した場合にのみ使用するアクティブ / 非最適パスとしてマークします。

SnapMirror アクティブ同期でNVMeプロトコルを使用すると、非対称ネームスペースアクセス（ANA）が使用されます。これにより、アプリケーションホストは、保護されているNVMeネームスペースへの最適化されたパスと最適化されていないパスを検出できます。ONTAP NVMeターゲットは適切なパス状態を公開し、アプリケーションホストが保護されたNVMeネームスペースに最適なパスを使用できるようにします。

.クラスタ アプリケーション
VMware Metro Storage Cluster、Oracle RAC、Windows Failover Clustering with SQLなどのクラスタ化されたアプリケーションでは、パフォーマンス オーバーヘッドなしで他のサイトにVMをフェイルオーバーできるように、同時アクセスが必要です。SnapMirror active sync symmetric アクティブ / アクティブは、双方向レプリケーションによってローカルでIOを提供し、クラスタ化されたアプリケーションの要件を満たします。ONTAP 9.16.1以降では、symmetric アクティブ / アクティブは4ノードクラスタ構成でサポートされ、ONTAP 9.15.1の2ノードクラスタの制限から拡張されました。

.災害シナリオ
地理的に分散したサイト間で、アプリケーション用の複数のボリュームを同期的にレプリケートします。プライマリが停止した場合に自動的にセカンダリ コピーにフェイルオーバーできるため、ティア1アプリケーションのビジネス継続性を確保できます。プライマリ クラスタをホストしているサイトで災害が発生すると、ホストのマルチパス ソフトウェアはそのクラスタを経由するすべてのパスを停止とマークし、セカンダリ クラスタからのパスを使用します。その結果、ONTAP Mediatorによる無停止でのミラー コピーへのフェイルオーバーが可能になります。

.拡張アプリケーション サポート
SnapMirror active syncは、使いやすいアプリケーション レベルの粒度と自動フェイルオーバーにより柔軟性を実現します。SnapMirror active syncは、実績のあるSnapMirror同期レプリケーションをIPネットワーク経由で使用して、LANまたはWAN経由で高速にデータをレプリケートし、仮想環境と物理環境の両方でOracle、Microsoft SQL Serverなどのビジネス クリティカルなアプリケーションの高いデータ可用性と高速なデータ レプリケーションを実現します。

SnapMirror Active Syncは、サイト障害が発生した場合でも、セカンダリコピーへのTAFにより、ミッションクリティカルなビジネスサービスの運用を継続できるようにします。このフェイルオーバーをトリガーするために、手動による介入や追加のスクリプトは必要ありません。
