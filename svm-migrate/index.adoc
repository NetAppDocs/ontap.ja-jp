---
permalink: svm-migrate/index.html 
sidebar: sidebar 
keywords: svm, migrate, workflow, relocate, prerequisites, data mobility 
summary: ONTAP 9.10.1 以降のクラスタ管理者は、ソースクラスタからデスティネーションクラスタに SVM を無停止で再配置して容量と負荷分散を管理したり、機器のアップグレードやデータセンターの統合を行ったりすることができます。ONTAP 9.12.1以降では、FAS およびAFF プラットフォーム、およびハイブリッドアグリゲートでこの機能がサポートされます。 
---
= SVM のデータ移動の概要
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.10.1以降では、ONTAP CLIを使用して、容量とロードバランシングを管理したり、機器のアップグレードやデータセンターの統合を有効にしたりするために、システムを停止することなくSVMをソースクラスタからデスティネーションクラスタに再配置できます。

この無停止のSVM再配置機能は、ONTAP 9.10.1および9.11.1のAFFプラットフォームでサポートされます。ONTAP 9.12.1以降では、この機能はFASプラットフォームとAFFプラットフォームの両方、およびハイブリッドアグリゲートでサポートされます。

SVM の名前と UUID は、移行後も変更されず、データ LIF 名、 IP アドレス、ボリューム名などのオブジェクト名も変更されません。SVM 内のオブジェクトの UUID は異なります。



== SVM 移行ワークフロー

次の図は、 SVM 移行の一般的なワークフローを示しています。SVM の移行はデスティネーションクラスタから開始します。移行元または移行先のどちらからでも移行を監視できます。手動カットオーバーまたは自動カットオーバーを実行できます。自動カットオーバーはデフォルトで実行されます。

image::../media/workflow_svm_migrate.gif[SVM 移行ワークフロー]



== サポートされている構成

次の表に、サポートされる構成とサポートが利用可能なONTAP リリースを示します。

[cols="3,1,1,1,1"]
|===


| サポートされる構成 | ONTAP 9.10.1 | ONTAP 9.11.1 | ONTAP 9.12.1 | ONTAP 9.13.1 


| AFFアレイ | はい。 | はい。 | はい。 | はい。 


| FASプラットフォームおよび混在プラットフォーム（AFF-FAS、FAS-AFF、ハイブリッドアグリゲートを備えたAFF-FAS） | いいえ | いいえ | はい。 | はい。 


| アレイ/ノードペアの総数 | 1. | 3. | 3. | 6. 


| データセンター内での移行と最大ネットワークレイテンシ： | 2ミリ秒 | 2ミリ秒 | 10ミリ秒 | 10ミリ秒 
|===


== 前提条件

* クラスタ管理者である必要があります
* ソースクラスタとデスティネーションクラスタが相互にピア関係にある必要があります
+
link:https://review.docs.netapp.com/us-en/ontap_main/peering/create-cluster-relationship-93-later-task.html["クラスタピア関係を作成"]

* ソースクラスタとデスティネーションクラスタにData Protection Bundleライセンスがインストールされている必要があります
* ソースクラスタ内のすべてのノードで ONTAP 9.10.1 以降が実行されている必要があります
* ソースクラスタ内のすべてのノードで同じバージョンの ONTAP を実行している必要があります
* デスティネーションクラスタは、ソースクラスタと同じかそれよりも新しい有効なクラスタバージョン（ECV）である必要があります
* ソースクラスタとデスティネーションクラスタで、データLIFへのアクセスに同じIPサブネットがサポートされている必要があります
* ソースクラスタとデスティネーションクラスタを接続するネットワークの最大ラウンドトリップ時間（RTT）は10ミリ秒未満である必要があります
* ソースSVMに含まれるデータボリュームの数が、リリースでサポートされる最大数より少ない必要があります。サポートされるデータボリュームの最大数は次のとおりです。
+
** AFFアレイ：ONTAP 9.13.1以降のリリースを実行するクラスタでは200個のデータボリューム、ONTAP 9.12.1以前のリリースを実行するクラスタでは100個のデータボリューム。
** FASプラットフォーム：データボリューム×80


* デスティネーションにボリューム配置用の十分なスペースが必要です
* ソース SVM に暗号化されたボリュームがある場合は、デスティネーションでオンボードキーマネージャを設定する必要があります




== 競合する操作

SVM の移行と競合する可能性がある処理がないかどうかを確認する必要があります。

* 実行中のフェイルオーバー処理はありません
* wafliron を実行できない
* フィンガープリントを実行中ではありません
* vol move 、 rehost 、 clone 、 create 、 convert 、または analytics が実行されていません




== サポートされている機能

次の表に、SVMデータ移動とONTAPリリースでサポートされるONTAP機能を示します。

[cols="3,1,1,1,1,4"]
|===


| サポートされる機能 | ONTAP 9.10.1 | ONTAP 9.11.1 | ONTAP 9.12.1 | ONTAP 9.13.1 | 追加情報 


| SnapMirrorのクラウドへの非同期コピー関係 | いいえ | いいえ | はい。 | はい。 | ONTAP 9.12.1以降では、SnapMirrorコピーがあるSVMをクラウド関係に移行する場合、移行先クラスタにはクラウドへのコピーライセンスがインストールされている必要があり、クラウドにミラーリングするボリュームでの容量の移動をサポートするために十分な容量が必要です。 


| 非同期SnapMirrorデスティネーション | いいえ | いいえ | はい。 | はい。 |  


| 非同期SnapMirrorソース | いいえ | はい。 | はい。 | はい。  a| 
* ほとんどのマイグレーション中、FlexVol SnapMirror関係では転送は通常どおり続行できます。
* 実行中の転送はカットオーバー中にキャンセルされ、カットオーバー中に新しい転送は失敗します。移行が完了するまで再開できません。
* 移行中にキャンセルされた、または失敗したスケジュール済み転送は、移行の完了後に自動的に開始されません。
+
[NOTE]
====
SnapMirrorソースをマイグレートする場合、ONTAP は、移行後にSnapMirror更新が実行されるまでボリュームの削除を防止しません。これは、移動されたSnapMirrorソースボリュームのSnapMirror関連情報がわかっているのは、移行が完了したあとの最初の更新後のみです。

====




| 自律的なランサムウェア防御 | いいえ | いいえ | はい。 | はい。 |  


| 外部キー管理ツール | いいえ | はい。 | はい。 | はい。 |  


| FabricPool | いいえ | はい。 | はい。 | はい。  a| 
の詳細を確認してください xref:FabricPool support[FabricPoolのサポート]。



| ファンアウト関係（移行するソースに、複数のデスティネーションを持つSnapMirrorソースボリュームがある場合） | いいえ | はい。 | はい。 | はい。 |  


| ジョブスケジュールのレプリケーション | いいえ | はい。 | はい。 | はい。 | ONTAP 9.10.1では、移行時にジョブスケジュールがレプリケートされないため、デスティネーションで手動で作成する必要があります。ONTAP 9.11.1以降では、ソースで使用されているジョブスケジュールが移行時に自動的にレプリケートされます。 


| NetApp Volume Encryption の略 | はい。 | はい。 | はい。 | はい。 |  


| NFSとSMBの監査ログ | いいえ | いいえ | いいえ | はい。  a| 
SVM移行前：

* デスティネーションクラスタで監査ログリダイレクトが有効になっている必要があります。
* ソースSVMからの監査ログデスティネーションパスをデスティネーションクラスタに作成しておく必要があります。




| NFS v3、NFS v4.1、NFS v4.2 | はい。 | はい。 | はい。 | はい。 |  


| NFS v4.0 | いいえ | いいえ | はい。 | はい。 |  


| NFS v4.0プロトコル | いいえ | いいえ | はい。 |  | SMBプロトコル 


| いいえ | いいえ | はい。 | はい。  a| 
* ONTAP 9.12.1以降では、SVMの移行にSMBでの停止を伴う移行が含まれます。

| SnapMirrorアプリケーション用のSVMピアリング 
|===


=== FabricPoolのサポート

SVMの移行は、FabricPoolのボリュームで次のプラットフォームでサポートされます。

* Azure NetApp Filesプラットフォーム。すべての階層化ポリシーがサポートされます（snapshot-only、auto、all、none）。
* オンプレミスプラットフォーム：サポートされるボリューム階層化ポリシーは「none」のみです。




== サポートされない機能です

SVM の移行では、次の機能はサポートされていません。

* Cloud Volumes ONTAP
* FlexCache ボリューム
* FlexGroup ボリューム
* IPSec ポリシー
* IPv6 LIF
* iSCSI ワークロード
* 負荷共有ミラー
* MetroCluster
* NDMP
* SAN、NVMe over Fibre、VSCAN、vStorage、S3レプリケーション
* SMTape の場合
* SnapLock
* SVM-DR
* ソースクラスタのオンボードキーマネージャ（ OKM ）で CC モードが有効な場合の SVM の移行
* 同期SnapMirror、SnapMirrorによるビジネス継続性
* qtree 、クォータ
* VIP/BGP LIF
* Virtual Storage Console for VMware vSphere （ VSC はの一部です https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere/index.html["ONTAP Tools for VMware vSphere 仮想アプライアンス"^] VSC 7.0 以降）
* ボリュームクローン

