---
permalink: svm-migrate/migrate-svm-task.html 
sidebar: sidebar 
keywords: svm, migrate, defaults, cutover, cleanup 
summary: SVMの移行が完了すると、クライアントがデスティネーション クラスタに自動的にカットオーバーされ、不要なSVMがソース クラスタから削除されます。自動カットオーバーとソースの自動クリーンアップはデフォルトで有効になっています。必要に応じて、カットオーバーの発生前にクライアントの自動カットオーバーを無効にして移行を一時停止できます。また、ソースSVMの自動クリーンアップを無効にすることもできます。 
---
= ONTAP SVMの移行
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SVMの移行が完了すると、クライアントがデスティネーション クラスタに自動的にカットオーバーされ、不要なSVMがソース クラスタから削除されます。自動カットオーバーとソースの自動クリーンアップはデフォルトで有効になっています。必要に応じて、カットオーバーの発生前にクライアントの自動カットオーバーを無効にして移行を一時停止できます。また、ソースSVMの自動クリーンアップを無効にすることもできます。

.タスク概要
この手順は FAS、AFF、および ASA システムに適用されます。ASA r2 システム（ASA A1K、ASA A90、ASA A70、ASA A50、ASA A30、ASA A20、または ASA C30）をご利用の場合は、link:https://docs.netapp.com/us-en/asa-r2/manage-data/migrate-svm.html["これらの手順"^]に従って SVM を移行してください。ASA r2 システムは、SAN のみをご利用のお客様向けに、簡素化された ONTAP エクスペリエンスを提供します。

*  `-auto-cutover false`オプションを使用すると、通常は自動クライアント カットオーバーが実行されるタイミングで移行を一時停止し、後で手動でカットオーバーを実行できます。
+
xref:manual-client-cutover-task.adoc[SVM移行後のクライアントの手動カットオーバー]

* 高度な権限 `-auto-source-cleanup false`オプションを使用すると、カットオーバー後のソース SVM の削除を無効にし、カットオーバー後にソースのクリーンアップを手動でトリガーすることができます。
+
xref:manual-source-removal-task.adoc[カットオーバー後のソースSVMの手動削除]





== 自動カットオーバーを有効にして ONTAP SVMを移行する

デフォルトでは、移行完了時にクライアントがデスティネーション クラスタに自動的にカットオーバーされ、不要なSVMがソース クラスタから削除されます。

.手順
. デスティネーション クラスタから、移行の事前チェックを実行します。
+
[source, cli]
----
vserver migrate start -vserver <SVM_name> -source-cluster <cluster_name> -check-only true`
----
. デスティネーション クラスタから、SVMの移行を開始します。
+
[source, cli]
----
vserver migrate start -vserver <SVM_name> -source-cluster <cluster_name>
----
. 移行ステータスを確認します。
+
[source, cli]
----
vserver migrate show
----
+
SVMの移行が完了すると、ステータスは「migrate-complete」になります。





== 自動クライアント カットオーバーを無効にして ONTAP SVM を移行する

-auto-cutover false オプションを使用すると、通常は自動クライアントカットオーバーが発生する際に移行を一時停止し、後で手動でカットオーバーを実行できます。xref:manual-client-cutover-task.adoc[SVM移行後のクライアントの手動カットオーバー]を参照してください。

.手順
. デスティネーション クラスタから、移行の事前チェックを実行します。
+
[source, cli]
----
vserver migrate start -vserver <SVM_name> -source-cluster <cluster_name> -check-only true`
----
. デスティネーション クラスタから、SVMの移行を開始します。
+
[source, cli]
----
vserver migrate start -vserver <SVM_name> -source-cluster <cluster_name> -auto-cutover false`
----
. 移行ステータスを確認します。
+
[source, cli]
----
vserver migrate show
----


SVMの移行による非同期データ転送が完了し、カットオーバー処理の準備が整うと、ステータスは「ready-for-cutover」になります。



== ソースクリーンアップを無効にしてONTAP SVMを移行する

アドバンス権限 -auto-source-cleanup false オプションを使用すると、カットオーバー後のソース SVM の削除を無効にし、カットオーバー後にソースのクリーンアップを手動でトリガーすることができます。xref:manual-source-removal-task.adoc[ソースSVMの手動削除]を参照してください。

.手順
. デスティネーション クラスタから、移行の事前チェックを実行します。
+
[source, cli]
----
vserver migrate start -vserver <SVM_name> -source-cluster <cluster_name> -check-only true`
----
. デスティネーション クラスタから、SVMの移行を開始します。
+
[source, cli]
----
vserver migrate start -vserver <SVM_name> -source-cluster <cluster_name> -auto-source-cleanup false`
----
. 移行ステータスを確認します。
+
[source, cli]
----
vserver migrate show
----
+
SVMの移行のカットオーバーが完了し、ソース クラスタのSVMを削除する準備が整うと、ステータスは「ready-for-source-cleanup」になります。


