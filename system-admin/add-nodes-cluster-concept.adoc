---
permalink: system-admin/add-nodes-cluster-concept.html 
sidebar: sidebar 
keywords: add, node, cluster, create, expand 
summary: クラスタを作成したあと、ノードをクラスタに追加して、クラスタを拡張できます。一度に追加できるノードは1つだけです。 
---
= ONTAPクラスタにノードを追加する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラスタを作成したあと、ノードをクラスタに追加して、クラスタを拡張できます。一度に追加できるノードは1つだけです。

.開始する前に
* ハードウェア要件を確認し、サイトを準備し、ハードウェアコンポーネント（コントローラ、ストレージシェルフ、スイッチ）をインストールしてケーブル接続することで、新しいストレージシステムをインストールして構成します。詳細については、次のONTAPハードウェアシステムのドキュメントを参照してください：
+
** link:https://docs.netapp.com/us-en/ontap-systems/aff-landing/index.html["AFFシステム"^]
** link:https://docs.netapp.com/us-en/ontap-systems/allsan-landing/index.html["ASAシステム"^]
** link:https://docs.netapp.com/us-en/ontap-systems/afx/index.html["AFXシステム"^]
** link:https://docs.netapp.com/us-en/ontap-systems/asa-r2/index.html["ASA R2システム"^]
** link:https://docs.netapp.com/us-en/ontap-systems/fas/index.html["FASシステム"^]


* 新しいストレージシステムのクラスタポートに関するクラスタスイッチモデルのケーブル接続と構成の考慮事項を確認します。link:https://docs.netapp.com/us-en/ontap-systems-switches/index.html["ONTAP ハードウェアシステムのスイッチのドキュメント"^]を参照してください。
+
.. * Supported switches *タイルで* Cluster Switches *または* Shared Switches *を選択します。
.. スイッチモデルの *Install* ドキュメントを選択します。
.. *ケーブル接続と構成の考慮事項を確認する*トピックを検索し、ストレージシステムについて確認してください。


* 複数ノードクラスタにノードを追加する場合、クラスタ内の既存ノードがすべて正常（ `cluster show`で示される）である必要があります。 `cluster show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/cluster-show.html["ONTAPコマンド リファレンス"^]をご覧ください。
* 2ノード スイッチレス クラスタにノードを追加する場合は、2ノード スイッチレス クラスタを変換して、NetAppでサポートされるクラスタ スイッチを使用するスイッチ接続クラスタにする必要があります。
+
[cols="1,2"]
|===
| スイッチモデル | 移行手順 


 a| 
Broadcom BES-53248
 a| 
link:https://docs.netapp.com/us-en/ontap-systems-switches/switch-bes-53248/migrate-to-2n-switched.html["スイッチ NetApp クラスタ環境への移行"^]



 a| 
Cisco Nexus 9336C-FX2
 a| 
link:https://docs.netapp.com/us-en/ontap-systems-switches/switch-cisco-9336c-fx2/migrate-to-2n-switched-9336-cluster.html["2ノードスイッチクラスタへの移行"^]



 a| 
Cisco Nexus 9336C-FX2（共有クラスタ + ストレージ）
 a| 
link:https://docs.netapp.com/us-en/ontap-systems-switches/switch-cisco-9336c-fx2-shared/migrate-from-switchless-cluster-dat-storage.html["直接接続ストレージを備えたスイッチレスクラスタからの移行"^]



 a| 
NVIDIA SN2100
 a| 
link:https://docs.netapp.com/us-en/ontap-systems-switches/switch-nvidia-sn2100/migrate-2n-switched-sn2100-cluster.html["NVIDIA SN2100 クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行"^]

|===
* シングルノード クラスタに2つ目のノードを追加する場合は、その2つ目のノードがインストールされていて、クラスタ ネットワークが構成されている必要があります。
* クラスタでSPの自動設定が有効になっている場合、SP用に指定されたサブネットには、参加するノードがそのサブネットを使用してSPを自動的に設定できるように、使用可能なリソースが必要です。
* 新しいノードのノード管理LIFについて、次の情報を収集しておく必要があります。
+
** ポート
** IP アドレス
** ネットマスク
** デフォルト ゲートウェイ




.タスク概要
ノードは、HAペアを形成できるように偶数である必要があります。クラスタへのノードの追加を開始したら、その処理を完了する必要があります。先に追加したノードがクラスタに参加するまでは、別のノードの追加を開始することはできません。

.手順
. クラスタに追加するノードに電源を入れます。
+
ノードがブートし、ノードのセットアップ ウィザードがコンソール上で起動されます。

+
[listing]
----
Welcome to node setup.

You can enter the following commands at any time:
  "help" or "?" - if you want to have a question clarified,
  "back" - if you want to change previously answered questions, and
  "exit" or "quit" - if you want to quit the setup wizard.
     Any changes you made before quitting will be saved.

To accept a default or omit a question, do not enter a value.

Enter the node management interface port [e0M]:
----
. Node Setup ウィザードを終了します。 `exit`
+
ノードのセットアップ ウィザードが終了し、セットアップ タスクが完了していないという警告がログイン プロンプトに表示されます。

+
 `exit`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/exit.html["ONTAPコマンド リファレンス"^]をご覧ください。

.  `admin` ユーザー名を使用して管理者アカウントにログインします。
. クラスタ セットアップ ウィザードを開始します。
+
[listing]
----
::> cluster setup

Welcome to the cluster setup wizard.

You can enter the following commands at any time:
 "help" or "?" - if you want to have a question clarified,
 "back" - if you want to change previously answered questions, and
 "exit" or "quit" - if you want to quit the cluster setup wizard.
 Any changes you made before quitting will be saved.

You can return to cluster setup at any time by typing "cluster setup".
To accept a default or omit a question, do not enter a value....

Use your web browser to complete cluster setup by accessing
https://<node_mgmt_or_e0M_IP_address>

Otherwise, press Enter to complete cluster setup using the
command line interface:
----
+
[NOTE]
====
セットアップ GUI を使用してクラスターをセットアップする方法の詳細については、link:https://docs.netapp.com/us-en/ontap/task_admin_add_nodes_to_cluster.html["ノード管理ドキュメント"]を参照してください。 `cluster setup`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/cluster-setup.html["ONTAPコマンド リファレンス"^]を参照してください。

====
. CLIを使用してこのタスクを完了するには、Enterキーを押してください。新しいクラスターを作成するか、既存のクラスターに参加するかを確認するプロンプトが表示されたら、 `*join*`と入力してください。
+
[listing]
----
Do you want to create a new cluster or join an existing cluster? {create, join}:
join
----
+
新しいノードで実行されているONTAPのバージョンが、既存のクラスタで実行されているバージョンと異なる場合、システムは `System checks Error: Cluster join operation cannot be performed at this time`エラーを報告します。これは想定内の動作です。続行するには、クラスタ内の既存のノードからadvanced権限レベルで `cluster add-node -allow-mixed-version-join true -cluster-ips <IP address> -node-names <new_node_name>`コマンドを実行してください。

. プロンプトに従ってノードをセットアップし、クラスタに追加します。
+
** プロンプトでデフォルト値を受け入れるには、Enterキーを押します。
** プロンプトで独自の値を入力するには、値を入力してEnterキーを押します。


. 追加するノードごとに前述の手順を繰り返します。


.終了後の操作
ノードをクラスタに追加したあと、HAペアごとにストレージ フェイルオーバーを有効にする必要があります。

.関連情報
* link:../upgrade/concept_mixed_version_requirements.html#mixed-version-clusters-supported-for-ontap-software-upgrades["ONTAPソフトウェア アップグレードでサポートされる混合バージョン クラスタ"]
* https://docs.netapp.com/us-en/ontap-cli/cluster-add-node.html["クラスタ ノード追加"^]

