---
permalink: system-admin/commands-manage-sp-from-ontap-reference.html 
sidebar: sidebar 
keywords: command, manage, sp, ontap, network, configuration, firmware, image, ssh 
summary: ONTAPには、SPネットワーク設定、SPファームウェア イメージ、SPへのSSHアクセス、一般的なSPの管理など、SPを管理するためのコマンドが用意されています。 
---
= Service Processor管理用のONTAPコマンド
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPには、SPネットワーク設定、SPファームウェア イメージ、SPへのSSHアクセス、一般的なSPの管理など、SPを管理するためのコマンドが用意されています。



== SPネットワーク設定の管理用コマンド

|===
| 状況 | このONTAPコマンドを実行します... 


 a| 
SPの自動ネットワーク設定を有効にして、指定されたサブネットのIPv4またはIPv6アドレス ファミリーを使用する
 a| 
`system service-processor network auto-configuration enable`



 a| 
指定されたサブネットのIPv4またはIPv6アドレス ファミリーを使用する、SPの自動ネットワーク設定を無効にする
 a| 
`system service-processor network auto-configuration disable`



 a| 
SPの自動ネットワーク設定を表示する
 a| 
`system service-processor network auto-configuration show`



 a| 
ノードのSPネットワークに対して、次の項目を手動で設定する

* IPアドレス ファミリー（IPv4またはIPv6）
* 指定したIPアドレス ファミリーのネットワーク インターフェイスを有効にするかどうか
* IPv4を使用している場合、DHCPサーバからのネットワーク設定と、指定のネットワーク アドレスのどちらを使用するか
* SPのパブリックIPアドレス
* SPのネットマスク（IPv4を使用している場合）
* SPのサブネット マスクのネットワーク プレフィックス長（IPv6を使用している場合）
* SPのゲートウェイIPアドレス

 a| 
`system service-processor network modify`



 a| 
次のようなSPネットワーク設定を表示する

* 設定されているアドレス ファミリー（IPv4またはIPv6）、およびそれが有効かどうか
* リモート管理デバイスのタイプ
* 現在のSPのステータスとリンクのステータス
* ネットワーク設定（IPアドレス、MACアドレス、ネットマスク、サブネット マスクのプレフィックス長、ルータが割り当てたIPアドレス、リンクのローカルIPアドレス、ゲートウェイIPアドレスなど）
* 前回SPが更新された時刻
* SPの自動設定に使用されるサブネットの名前
* ルータが割り当てたIPv6 IPアドレスが有効かどうか
* SPネットワークのセットアップ ステータス
* SPネットワークのセットアップ エラーの原因

 a| 
`system service-processor network show`

完全なSPネットワークの詳細を表示するには `-instance`パラメータが必要です。



 a| 
次のSP APIサービス設定を変更する

* SP APIサービスで使用されるポートの変更
* SP APIサービスの有効化または無効化

 a| 
`system service-processor api-service modify`

（advanced権限レベル）



 a| 
SP APIサービス設定を表示する
 a| 
`system service-processor api-service show`

（advanced権限レベル）



 a| 
SP APIサービスの内部通信に使用されるSSL証明書およびSSH証明書の更新
 a| 
* ONTAP 9.5 以降の場合： `system service-processor api-service renew-internal-certificates`
* ONTAP 9.4 以前の場合： `system service-processor api-service renew-certificates`
+
（advanced権限レベル）



|===


== SPファームウェア イメージの管理用コマンド

|===
| 状況 | このONTAPコマンドを実行します... 


 a| 
現在インストールされているSPファームウェア イメージの次の詳細を表示する

* リモート管理デバイスのタイプ
* SPがブートされるイメージ（primaryまたはbackup）とそのステータス、およびファームウェア バージョン
* ファームウェアの自動更新が有効かどうかと、最新の更新ステータス

 a| 
`system service-processor image show`

 `-is-current`パラメータは、インストールされているファームウェア バージョンが最新かどうかではなく、SPが現在起動されているイメージ（プライマリまたはバックアップ）を示します。



 a| 
SPの自動ファームウェア更新を有効または無効にする
 a| 
`system service-processor image modify`

デフォルトでは、SPファームウェアは、ONTAPの更新時、またはSPファームウェアの新しいバージョンを手動でダウンロードしたときに、自動で更新されます。自動更新を無効にすると、ONTAPイメージとSPファームウェア イメージの組み合わせが最適でなくなる、または無効になる場合があるため、無効にしないことを推奨します。



 a| 
ノードにSPファームウェア イメージを手動でダウンロードする
 a| 
`system node image get`

[NOTE]
====
 `system node image`コマンドを実行する前に、権限レベルをadvancedに設定し(`set -privilege advanced`、続行するかどうかを尋ねられたら*y*と入力する必要があります。

====
SPファームウェア イメージはONTAPに同梱されています。ONTAPに同梱されているSPファームウェアとは異なるバージョンを使用する場合を除き、SPファームウェアを手動でダウンロードする必要はありません。



 a| 
ONTAPからトリガーされた最新のSPファームウェア更新に関し、以下を含むステータスを表示する

* 最新のSPファームウェア更新の開始時刻と終了時刻
* 更新が進行中かどうかと、進行状況（%）

 a| 
`system service-processor image update-progress show`

|===


== SPへのSSHアクセスの管理用コマンド

|===
| 状況 | このONTAPコマンドを実行します... 


 a| 
指定したIPアドレスにのみSPへのアクセス権を付与する
 a| 
`system service-processor ssh add-allowed-addresses`



 a| 
指定したIPアドレスにSPへのアクセスを禁止する
 a| 
`system service-processor ssh remove-allowed-addresses`



 a| 
SPにアクセスできるIPアドレスを表示する
 a| 
`system service-processor ssh show`

|===


== 一般的なSP管理コマンド

|===
| 状況 | このONTAPコマンドを実行します... 


 a| 
次のようなSPの一般情報を表示する

* リモート管理デバイスのタイプ
* 現在のSPのステータス
* SPネットワークが設定されているかどうか
* パブリックIPアドレスやMACアドレスなどのネットワーク情報
* SPファームウェアのバージョンとIntelligent Platform Management Interface（IPMI）のバージョン
* SPファームウェアの自動更新が有効かどうか

 a| 
`system service-processor show`完全なSP情報を表示するには `-instance`パラメータが必要です。



 a| 
ノードでSPをリブートする
 a| 
`system service-processor reboot-sp`



 a| 
指定したノードから収集されたSPログ ファイルを含むAutoSupportメッセージを生成して送信する
 a| 
`system node autosupport invoke-splog`



 a| 
クラスタ内で収集されたSPログ ファイルの割り当てマップを表示する（収集する各ノードに格納されているSPログ ファイルのシーケンス番号を含む）
 a| 
`system service-processor log show-allocations`

|===
.関連情報
link:../concepts/manual-pages.html["ONTAPコマンド リファレンス"]
