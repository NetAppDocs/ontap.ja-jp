---
permalink: system-admin/manage-node-root-volumes-aggregates-task.html 
sidebar: sidebar 
keywords: node, governing, root, volume, aggregate, files, special, directories, free, space, full, delete, file, core, dump 
summary: ノードのルート ボリュームは、工場出荷時またはセットアップ ソフトウェアによってインストールされたFlexVolです。 
---
= ONTAPノードのルートボリュームとルートアグリゲートを管理する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ノードのルートボリュームは、工場出荷時またはセットアップソフトウェアによってインストールされるFlexVolボリュームです。システムファイル、ログファイル、コアファイル用に予約されています。ディレクトリ名は `/mroot`で、テクニカルサポートがシステムシェル経由でのみアクセスできます。ノードのルートボリュームの最小サイズは、プラットフォームモデルによって異なります。



== ノードのルート ボリュームとルート アグリゲートに関するルール - 概要

ノードのルート ボリュームには、そのノードの特別なディレクトリとファイルが格納されています。ルート ボリュームはルート アグリゲートに含まれています。ノードのルート ボリュームとルート アグリゲートには、いくつかのルールが適用されます。

* ノードのルート ボリュームには次のルールが適用されます。
+
** テクニカルサポートから指示がない限り、ルートボリュームの構成や内容を変更しないでください。
** ルートボリュームにユーザーデータを保存しないでください。
+
ユーザ データをルート ボリュームに格納すると、HAペアのノード間でのストレージのギブバックに時間がかかります。

** ルートボリュームを別のアグリゲートに移動できます。<<relocate-root>>を参照してください。


* ルート アグリゲートは、ノードのルート ボリューム専用になります。
+
ルート以外のボリュームをルート アグリゲートに作成することはできません。



https://hwu.netapp.com["NetApp Hardware Universe"^]



== ノードのルート ボリュームのスペース解放

ノードのルートボリュームがいっぱい、またはほぼいっぱいになると、警告メッセージが表示されます。ルートボリュームがいっぱいになると、ノードは正常に動作しなくなります。コアダンプファイル、パケットトレースファイル、およびルートボリュームのSnapshotを削除することで、ノードのルートボリュームの空き容量を増やすことができます。

.手順
. ノードのコア ダンプ ファイルとその名前を表示します。
+
`system node coredump show`

. 不要なコア ダンプ ファイルをノードから削除します。
+
`system node coredump delete`

. ノードシェルにアクセスします。
+
`*system node run -node _nodename_*`

+
`_nodename_`は、ルートボリュームスペースを解放するノードの名前です。

. ノードシェルからノードシェルのadvanced特権レベルに切り替えます。
+
`*priv set advanced*`

. ノードシェルからノードのパケット トレース ファイルを表示し、削除します。
+
.. ノードのルート ボリュームにあるすべてのファイルを表示します。
+
`*ls /etc*`

.. ノードのルートボリュームにパケットトレースファイル（(`*.trc`）がある場合は、それらを個別に削除します：
+
`*rm /etc/log/packet_traces/_file_name.trc_*`



. ノードシェルを通じてノードのルートボリュームSnapshotコピーを特定して削除します：
+
.. ルート ボリューム名を特定します。
+
`*vol status*`

+
ルート ボリュームは、 `vol status`コマンド出力の「`Options`」列の「`root`」という単語で示されます。

+
次の例では、ルート ボリュームは `vol0`です：

+
[listing]
----
node1*> vol status

         Volume State           Status            Options
           vol0 online          raid_dp, flex     root, nvfail=on
                                64-bit
----
.. ルートボリュームのSnapshotを表示：
+
`snap list root_vol_name`

.. 不要なルートボリュームのスナップショットを削除します：
+
`snap delete root_vol_namesnapshot_name`



. ノードシェルを終了し、クラスタシェルに戻ります。
+
`*exit*`





== 新しいアグリゲートへのルート ボリュームの再配置

ルート交換手順では、現在のルート アグリゲートをシステム停止なしで別のディスク セットに移行できます。

.タスク概要
ルートボリュームを再配置するには、ストレージフェイルオーバーを有効にする必要があります。 `storage failover modify -node _nodename_ -enable true`コマンドを使用してフェイルオーバーを有効にすることができます。

以下のシナリオで、ルート ボリュームの場所を新しいアグリゲートに変更できます。

* ルート アグリゲートが希望するディスク上にない場合
* ノードに接続されているディスクの配置を変更する場合
* EOSディスク シェルフを交換する場合


.手順
. 権限レベルをadvancedに設定します。
+
`*set privilege advanced*`

. ルート アグリゲートを再配置します。
+
`*system node migrate-root -node _nodename_ -disklist _disklist_ -raid-type _raid-type_*`

+
** *-ノード*
+
移行するルート アグリゲートを所有しているノードを指定します。

** *-disklist*
+
新しいルート アグリゲートを作成する一連のディスクを指定します。すべてのディスクはスペアであり、同じノードが所有している必要があります。必要なディスクの最小数は、RAIDタイプによって異なります。

** *-raid-type*
+
ルートアグリゲートのRAIDタイプを指定します。デフォルト値は `raid-dp`です。



. ジョブの進捗状況を監視します。
+
`*job show -id _jobid_ -instance*`



.結果
すべての事前確認が完了すると、ルート ボリューム交換ジョブが開始されてコマンドが終了します。ノードが再起動することがあります。

.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/storage-failover-modify.html["storage failover modify"^]

