---
permalink: system-admin/manage-node-root-volumes-aggregates-task.html 
sidebar: sidebar 
keywords: node, governing, root, volume, aggregate, files, special, directories, free, space, full, delete, file, core, dump 
summary: ノードのルートボリュームは、工場出荷時またはセットアップソフトウェアによってインストールされたFlexVol volumeです。 
---
= ノードのルートボリュームとルートアグリゲートを管理します。
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ノードのルートボリュームは、工場出荷時またはセットアップソフトウェアによってインストールされたFlexVol volumeです。システムファイル、ログファイル、コアファイル用に予約されています。ディレクトリ名はで `/mroot`、テクニカルサポートからのみシステムシェルからアクセスできます。ノードのルートボリュームの最小サイズは、プラットフォームモデルによって異なります。



== ノードのルートボリュームとルートアグリゲートに関するルールの概要

ノードのルートボリュームには、そのノードの特別なディレクトリとファイルが格納されています。ルートアグリゲートにはルートボリュームが含まれます。ノードのルートボリュームとルートアグリゲートには、いくつかのルールが適用されます。

* ノードのルートボリュームには次のルールが適用されます。
+
** テクニカルサポートから指示がないかぎり、ルートボリュームの構成またはコンテンツを変更しないでください。
** ユーザデータはルートボリュームに格納しないでください。
+
ユーザデータをルートボリュームに格納すると、HAペアのノード間でのストレージのギブバックに時間がかかります。

** ルートボリュームを別のアグリゲートに移動できます。を参照して <<relocate-root>>


* ルートアグリゲートは、ノードのルートボリューム専用です。
+
ONTAPでは、ルートアグリゲートに他のボリュームを作成することはできません。



https://hwu.netapp.com["NetApp Hardware Universe"^]



== ノードのルートボリュームのスペースを解放する

ノードのルートボリュームがフルまたはほぼフルになると、警告メッセージが表示されます。ルートボリュームがいっぱいになると、ノードは正常に動作しません。ノードのルートボリュームのスペースを解放するには、コアダンプファイル、パケットトレースファイル、およびルートボリュームのSnapshotを削除します。

.手順
. ノードのコアダンプファイルとその名前を表示します。
+
`system node coredump show`

. 不要なコアダンプファイルをノードから削除します。
+
`system node coredump delete`

. ノードシェルにアクセスします。
+
`*system node run -node _nodename_*`

+
`_nodename_`は、ルートボリュームのスペースを解放するノードの名前です。

. ノードシェルからノードシェルのadvanced権限レベルに切り替えます。
+
`*priv set advanced*`

. ノードのパケットトレースファイルをノードシェルから表示および削除します。
+
.. ノードのルートボリューム内のすべてのファイルを表示します。
+
`*ls /etc*`

.. (`*.trc`ノードのルートボリュームにパケットトレースファイルがある場合は、それらを個別に削除します。
+
`*rm /etc/log/packet_traces/_file_name.trc_*`



. ノードシェルからノードのルートボリュームSnapshotを特定して削除します。
+
.. ルートボリューム名を特定します。
+
`*vol status*`

+
ルートボリュームは、コマンド出力の「Options」列に「root」と表示され `vol status`ます。

+
次の例では、ルートボリュームはです `vol0`。

+
[listing]
----
node1*> vol status

         Volume State           Status            Options
           vol0 online          raid_dp, flex     root, nvfail=on
                                64-bit
----
.. ルートボリュームのSnapshotを表示します。
+
`snap list root_vol_name`

.. 不要なルートボリュームのSnapshotを削除します。
+
`snap delete root_vol_namesnapshot_name`



. ノードシェルを終了してクラスタシェルに戻ります。
+
`*exit*`





== 新しいアグリゲートへのルートボリュームの再配置

ルートの交換手順では、現在のルートアグリゲートを、システムを停止することなく別のディスクセットに移行します。

.タスクの内容
ルートボリュームを再配置するには、ストレージフェイルオーバーを有効にする必要があります。フェイルオーバーを有効にするには、コマンドを使用し `storage failover modify -node _nodename_ -enable true`ます。

次のシナリオでは、ルートボリュームの場所を新しいアグリゲートに変更できます。

* ルートアグリゲートが希望するディスク上にない場合
* ノードに接続されているディスクの配置を変更する場合
* EOSディスクシェルフを交換する場合


.手順
. 権限レベルをadvancedに設定します。
+
`*set privilege advanced*`

. ルートアグリゲートを再配置します。
+
`*system node migrate-root -node _nodename_ -disklist _disklist_ -raid-type _raid-type_*`

+
** * -node *
+
移行するルートアグリゲートを所有しているノードを指定します。

** *-disklist *
+
新しいルートアグリゲートを作成するディスクのリストを指定します。すべてのディスクはスペアであり、同じノードが所有している必要があります。必要なディスクの最小数は、RAIDタイプによって異なります。

** * -raid-type *
+
ルートアグリゲートのRAIDタイプを指定します。デフォルト値はです `raid-dp`。



. ジョブの進捗状況を監視します。
+
`*job show -id _jobid_ -instance*`



.結果
すべての事前確認に成功すると、ルートボリューム交換ジョブが開始されてコマンドが終了します。ノードが再起動することを想定します。
