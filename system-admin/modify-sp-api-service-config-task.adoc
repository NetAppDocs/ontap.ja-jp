---
permalink: system-admin/modify-sp-api-service-config-task.html 
sidebar: sidebar 
keywords: modify, sp, api, service, configuration, network 
summary: SP APIは、ONTAPがネットワーク経由でSPと通信できるようにするセキュアなネットワークAPIです。SP APIサービスが使用するポートの変更、サービスが内部通信に使用する証明書の更新、またはサービス全体の無効化を実行できます。設定の変更が必要になるのは、ごくまれな状況のみです。 
---
= ONTAPサービスプロセッサAPI構成を変更する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SP APIは、ONTAPがネットワーク経由でSPと通信できるようにするセキュアなネットワークAPIです。SP APIサービスが使用するポートの変更、サービスが内部通信に使用する証明書の更新、またはサービス全体の無効化を実行できます。設定の変更が必要になるのは、ごくまれな状況のみです。

.タスク概要
* SP APIサービスはデフォルトでポート `50000`を使用します。
+
たとえば、ポート `50000`が別のネットワークアプリケーションによる通信に使用されているネットワーク設定の場合や、他のアプリケーションからのトラフィックとSP APIサービスによって生成されたトラフィックを区別する場合は、ポート値を変更できます。

* SP APIサービスで使用されるSSLおよびSSH証明書は、クラスター内部のものであり、外部には配布されません。
+
万が一、証明書が侵害された場合は、証明書を更新することができます。

* SP APIサービスはデフォルトで有効になっています。
+
SP APIサービスを無効にする必要があるのは、SPが構成または使用されていないプライベートLANでサービスを無効にしたい場合など、まれな状況のみです。

+
SP APIサービスが無効になっている場合、APIは着信接続を一切受け入れません。さらに、ネットワークベースのSPファームウェアアップデートやネットワークベースのSP「`down system`」ログ収集などの機能も利用できなくなります。システムはシリアル管理インターフェイスを使用するように切り替わります。



.手順
.  `set -privilege advanced`コマンドを使用して、advanced権限レベルに切り替えます。
. SP APIサービス設定を次のように変更します。
+
|===
| 状況 | 次のコマンドを使用します... 


 a| 
SP APIサービスで使用されるポートを変更する
 a| 
`system service-processor api-service modify`と `-port` {`49152`.`65535`}パラメータ



 a| 
SP APIサービスの内部通信に使用されるSSL証明書およびSSH証明書の更新
 a| 
** ONTAP 9.5以降の場合は `system service-processor api-service renew-internal-certificate`を使用します
** ONTAP 9.4以前：
** `system service-processor api-service renew-certificates`
+
パラメータが指定されていない場合は、ホスト証明書（クライアント証明書とサーバー証明書を含む）のみが更新されます。

+
 `-renew-all true`パラメータを指定すると、ホスト証明書とルートCA証明書の両方が更新されます。





 a| 
comm
 a| 



 a| 
SP APIサービスを無効化または再度有効化する
 a| 
`system service-processor api-service modify`と `-is-enabled` {`true`|`false`}パラメータ

|===
.  `system service-processor api-service show`コマンドを使用してSP APIサービス構成を表示します。

