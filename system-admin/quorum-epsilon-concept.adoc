---
permalink: system-admin/quorum-epsilon-concept.html 
sidebar: sidebar 
keywords: understand, quorum, epsilon, cluster, health, potential, communications, connectivity, challenges 
summary: クォーラムとイプシロンは、クラスタの健常性と機能を判断するための重要な基準で、通信および接続に関する潜在的な問題へのクラスタの対応を決定します。 
---
= クォーラムとイプシロンについて
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クォーラムとイプシロンは、クラスタの健常性と機能を判断するための重要な基準で、通信および接続に関する潜在的な問題へのクラスタの対応を決定します。

_Quorum _ は、クラスタが完全に機能するための前提条件です。クラスタがクォーラムを構成している場合は、過半数のノードが正常で、相互に通信可能です。クォーラムが失われると、クラスタは通常のクラスタ処理を実行できなくなります。すべてのノードが 1 つのまとまりとしてデータの単一のビューを共有するため、任意の時点において 1 つのノードの集まりだけがクォーラムを構成することができます。したがって、通信が確立されていない 2 つのノードで、異なる方法でデータを変更することが許可されている場合には、データを 1 つのデータビューに表示できなくなります。

クラスタ内の各ノードはノードマスターを選出する投票プロトコルに属しており、残りの各ノードは _secondary__ です。マスターノードは、クラスタ内に情報を同期する役割を担います。形成されたクォーラムは継続的な投票によって維持されます。マスターノードがオフラインになった場合、クラスタでクォーラムが維持されていれば、オンラインのノードの投票によって新しいマスターが選出されます。

ノード数が偶数のクラスタの場合は同票となる可能性があるため、 1 つのノードに _epsilon _ という名前の投票荷重が追加で設定されます。大規模なクラスタの同じ数のノード間で接続障害が発生した場合、すべてのノードが正常であることを条件に、イプシロンが設定されたノードのグループがクォーラムを維持します。たとえば、次の図では、 4 ノードクラスタの 2 つのノードで障害が発生しています。ただし、残りのノードの 1 つにイプシロンが設定されているため、正常なノードが過半数に満たなくてもクォーラムが維持されます。

image::../media/epsilon-preserving-quorum.gif[この図には説明が付随しています。]

クラスタが作成されると、自動的に最初のノードにイプシロンが割り当てられます。イプシロンを保持しているノードで障害が発生したり、ハイアベイラビリティパートナーをテイクオーバーしたり、ハイアベイラビリティパートナーにテイクオーバーされた場合、イプシロンは別の HA ペアの正常なノードに自動的に再割り当てされます。

ノードをオフラインにすると、クラスタがクォーラムを維持できるかどうかに影響することがあります。そのため ONTAP 、クラスタのクォーラムが失われたり、あと 1 つのノード障害によってクォーラムが失われるような処理を実行しようとすると、警告メッセージが表示されます。クォーラムに関する警告メッセージを無効にするには、を使用します `cluster quorum-service options modify` コマンドをadvanced権限レベルで実行します。

一般に、クラスタのノード間に信頼性の高い接続が確立されている場合、小規模のクラスタよりも大規模のクラスタの方が安定します。ノードの半数にイプシロンを加えた過半数のクォーラムの要件は、 2 ノードのクラスタよりも 24 ノードのクラスタの方が簡単に維持できます。

2 ノードクラスタでは、クォーラムの維持に独特な課題が存在します。2 ノードクラスタでは、どちらのノードにもイプシロンが設定されていない _cluster ha__ を使用します。代わりに、両方のノードを継続的にポーリングすることで、一方のノードで障害が発生した場合にデータに対する読み取り / 書き込みのフルアクセスと、論理インターフェイスおよび管理機能へのアクセスが許可されます。
