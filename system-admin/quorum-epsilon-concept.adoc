---
permalink: system-admin/quorum-epsilon-concept.html 
sidebar: sidebar 
keywords: understand, quorum, epsilon, cluster, health, potential, communications, connectivity, challenges 
summary: クォーラムとイプシロンは、クラスタの健全性と機能の重要な指標であり、通信や接続に関する潜在的な課題にクラスタがどのように対処するかを示します。 
---
= クォーラムとイプシロンを使用したONTAPクラスタの健全性評価
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クォーラムとイプシロンは、クラスタの健全性と機能の重要な指標であり、通信や接続に関する潜在的な課題にクラスタがどのように対処するかを示します。

_Quorum _ は、クラスタが完全に機能するための前提条件です。クラスタがクォーラムを構成している場合は、過半数のノードが正常で、相互に通信できます。クォーラムが失われると、クラスタは通常のクラスタ処理を実行できなくなります。すべてのノードがまとめてデータの単一のビューを共有するため、一度にクォーラムを持つことができるノードの集まりは1つだけです。したがって、通信していない2つのノードが異なる方法でデータを変更できる場合、データを単一のデータビューに調整することはできなくなります。

クラスタ内の各ノードはノードマスターを選出する投票プロトコルに属しており、残りの各ノードは _secondary__ です。マスターノードは、クラスタ全体で情報を同期する役割を果たします。形成されたクォーラムは継続的な投票によって維持されます。マスターノードがオフラインになり、クラスタがクォーラムに参加している場合は、オンラインのノードによって新しいマスターが選出されます。

ノード数が偶数のクラスタの場合は同票となる可能性があるため、 1 つのノードに _epsilon _ という名前の投票荷重が追加で設定されます。大規模なクラスタの同じ数のノード間で接続障害が発生した場合、すべてのノードが正常であることを前提として、イプシロンが設定されたノードのグループがクォーラムを維持します。たとえば、次の図は、2つのノードで障害が発生した4ノードクラスタを示しています。ただし、サバイバーノードの1つにイプシロンが設定されているため、正常なノードが過半数ではないにもかかわらず、クラスタはクォーラムを維持します。

image:epsilon-preserving-quorum.gif["この図には説明が付随しています。"]

クラスタが作成されると、自動的に最初のノードにイプシロンが割り当てられます。イプシロンを保持しているノードが正常な状態にならなくなった場合、ハイアベイラビリティパートナーをテイクオーバーした場合、またはハイアベイラビリティパートナーにテイクオーバーされた場合、イプシロンは別のHAペアの正常なノードに自動的に再割り当てされます。

ノードをオフラインにすると、クラスタがクォーラムを維持できるかどうかに影響することがあります。そのため、クラスタのクォーラムが失われたり、あと1つの停止によってクォーラムが失われる処理を実行しようとすると、ONTAPで警告メッセージが表示されます。クォーラムに関する警告メッセージを無効にするには、advanced権限レベルでコマンドを使用し `cluster quorum-service options modify`ます。の詳細については `cluster quorum-service options modify`、をlink:https://docs.netapp.com/us-en/ontap-cli/cluster-quorum-service-options-modify.html["ONTAPコマンド リファレンス"^]参照してください。

一般に、クラスタのノード間で信頼性の高い接続が確立されていれば、小規模なクラスタよりも大規模なクラスタの方が安定します。半分のノードの過半数とイプシロンを組み合わせたクォーラムの要件は、2ノードのクラスタよりも24ノードのクラスタで簡単に管理できます。

2ノードクラスタには、クォーラムの維持に固有の課題がいくつかあります。2 ノードクラスタでは、どちらのノードにもイプシロンが設定されていない _cluster ha__ を使用します。代わりに、両方のノードを継続的にポーリングすることで、一方のノードで障害が発生した場合にデータに対する読み取り / 書き込みのフルアクセスと、論理インターフェイスおよび管理機能へのアクセスが許可されます。
