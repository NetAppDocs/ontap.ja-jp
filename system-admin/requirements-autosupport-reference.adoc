---
permalink: system-admin/requirements-autosupport-reference.html 
sidebar: sidebar 
keywords: requirements, autosupport, messages, https, smtp, smtps, tls, email, proxy, certificate, validation, root ca, server certificate, install, cluster level 
summary: AutoSupportメッセージの配信には、最高のセキュリティを提供し、最新のAutoSupport機能をサポートするために、TLSv1.2またはSMTPSを使用したHTTPSを使用する必要があります。 
---
= ONTAP AutoSupportを使用する準備
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
AutoSupportメッセージをNetAppに配信するようにONTAPクラスタを設定できます。その一環として、ローカルの（通常は組織内の）Eメール アドレスにメッセージのコピーを送信することもできます。使用可能なオプションを確認して、AutoSupportを設定する準備をしておく必要があります。



== NetAppへのAutoSupportメッセージの配信

AutoSupport メッセージは、HTTPS または SMTP プロトコルを使用して NetApp に配信できます。ONTAP 9.15.1 からは、SMTP で TLS も使用できます。


TIP: AutoSupport OnDemandとの通信や大きなファイルのアップロードには、可能な限りHTTPSを使用してください。

次の点にも注意してください。

* AutoSupportメッセージに対して設定できる、NetAppへの配信チャネルは1つだけです。2つのプロトコルを使用してAutoSupportメッセージをNetAppに配信することはできません。
* AutoSupportでは、プロトコルごとに最大ファイル サイズが制限されます。AutoSupportメッセージのサイズが設定した制限を超えると、できる限り多くのメッセージが配信されますが、切り捨てが発生します。
* 必要に応じて最大ファイルサイズを変更できます。 `system node autosupport modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/system-node-autosupport-modify.html["ONTAPコマンド リファレンス"^]を参照してください。
* どちらのプロトコルも、名前が解決されるアドレス ファミリーに応じてIPv4またはIPv6で転送されます。
* AutoSupportメッセージを送信するためにONTAPによって確立されたTCP接続は、一時的で短時間です。




=== HTTPS

これは最も堅牢な機能を提供します。次の点に注意してください。

* AutoSupport OnDemandと大容量ファイルの転送はサポートされません。
* 最初にHTTPS PUT要求が試行されます。要求の転送中にエラーが発生した場合に、停止した場所から要求が再開されます。
* サーバがPUTをサポートしていない場合は、代わりにHTTPS POSTメソッドが使用されます。
* HTTPS転送のデフォルトの制限は50MBです。
* HTTPSプロトコルはポート443を使用します。




=== SMTP

原則として、HTTPSが許可されていない、またはサポートされていない場合にのみSMTPを使用してください。以下の点にご注意ください：

* AutoSupport OnDemandと大容量ファイルの転送はサポートされません。
* SMTPサインイン クレデンシャルが設定されている場合は、暗号化されずにクリア テキストで送信されます。
* 転送のデフォルトの制限は5MBです。
* セキュアでないSMTPプロトコルはポート25を使用します。


.TLSでSMTPセキュリティを強化
SMTPを使用する場合、すべてのトラフィックは暗号化されていないため、容易に傍受され、読み取られる可能性があります。ONTAP 9.15.1以降では、SMTPでTLS（SMTPS）を使用することもできます。この場合、_explicit TLS_が使用され、TCP接続が確立された後にセキュアチャネルがアクティブ化されます。

SMTPSには通常、次のポートが使用されます：ポート587



== 設定に関するその他の考慮事項

AutoSupportを設定する際は、さらにいくつかの考慮事項があります。

これらの考慮事項に関連するコマンドの詳細については、link:../system-admin/setup-autosupport-task.html["AutoSupportのセットアップ"]を参照してください。



=== 電子メールを使用してローカルコピーを送信する

NetAppへのAutoSupportメッセージの配信に使用されるプロトコルに関係なく、各メッセージのコピーを1つ以上のローカルEメール アドレスに送信することもできます。たとえば、社内のサポート部門やパートナー組織にメッセージを送信できます。


NOTE: SMTP（またはSMTPS）を使用してNetAppにメッセージを配信し、それらのメッセージのローカルEメール コピーも送信する場合は、同じEメール サーバ設定を使用します。



=== HTTPプロキシ

ネットワーク構成によっては、HTTPSプロトコルを使用するにはプロキシURLの追加設定が必要になる場合があります。HTTPSを使用してAutoSupportメッセージをテクニカルサポートに送信し、プロキシを使用している場合は、プロキシのURLを指定する必要があります。プロキシがデフォルト（ポート3128）以外のポートを使用している場合は、そのプロキシのポートを指定できます。また、プロキシ認証用のユーザー名とパスワードも任意で指定できます。



== サーバ証明書のインストール

TLS（HTTPSまたはSMTPS）を使用する場合、サーバからダウンロードされた証明書は、ルートCA証明書に基づいてONTAPによって検証されます。HTTPSまたはSMTPSを使用する前に、ルート証明書がONTAPにインストールされていること、およびONTAPがサーバ証明書を検証できることを確認する必要があります。この検証は、サーバ証明書に署名したCAに基づいて実行されます。

ONTAPには、多数のルートCA証明書がプリインストールされています。多くの場合、サーバの証明書は追加の設定なしでONTAPによってすぐに認識されます。サーバ証明書の署名方法によっては、ルートCA証明書と中間証明書のインストールが必要になる場合があります。

必要に応じて、以下の手順に従って証明書をインストールしてください。必要な証明書はすべてクラスタレベルでインストールする必要があります。

.手順
[role="tabbed-block"]
====
.System Manager
--
. System Managerで、*クラスター* > *設定*を選択します。
. *セキュリティ*セクションまで下にスクロールします。
. *証明書*の横にあるimage:icon_arrow.gif["矢印アイコン"]を選択します。
. *信頼された証明機関*タブで*追加*をクリックします。
. *Import*をクリックし、証明書ファイルを選択します。
. 環境に合わせて、パラメータの設定を完了します。
. *[追加]*をクリックします。


--
.CLI
--
. インストールを開始します。
+
[source, cli]
----
security certificate install -type server-ca
----
+
 `security certificate install`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/security-certificate-install.html["ONTAPコマンド リファレンス"^]をご覧ください。

. 次のコンソール メッセージを探します。
+
[listing]
----
Please enter Certificate: Press <Enter> when done
----
. テキスト エディタで証明書ファイルを開きます。
. 次の行を含めて、証明書全体をコピーします。
+
[listing]
----
-----BEGIN CERTIFICATE-----
<certificate_value>
-----END CERTIFICATE-----
----
. コマンド プロンプトの末尾に証明書を貼り付けます。
. *Enter* を押してインストールを完了します。
. 次のいずれかのコマンドを実行して、証明書がインストールされていることを確認します：
+
[source, cli]
----
security certificate show-user-installed
----
+
[source, cli]
----
security certificate show
----
+
 `security certificate show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/security-certificate-show.html["ONTAPコマンド リファレンス"^]をご覧ください。



--
====
.関連情報
* link:../system-admin/setup-autosupport-task.html["AutoSupportのセットアップ"]
* link:https://docs.netapp.com/us-en/ontap-cli/["ONTAPコマンド リファレンス"^]

