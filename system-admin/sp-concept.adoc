---
permalink: system-admin/sp-concept.html 
sidebar: sidebar 
keywords: understand, sp, service, processor, remote, management, device, access, monitor, troubleshoot, node 
summary: SPは、ノードに対するアクセス、監視、およびトラブルシューティングをリモートから行うことができるリモート管理デバイスです。 
---
= ONTAP Service Processorによるリモートノード管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SPは、ノードに対するアクセス、監視、およびトラブルシューティングをリモートから行うことができるリモート管理デバイスです。

SPの主な機能は次のとおりです。

* SPを使用すると、ノード コントローラの状態に関係なく、ノードにリモートからアクセスして、ノードの診断、シャットダウン、電源の再投入、リブートを実行できます。
+
SPはスタンバイ電圧で動作するため、少なくとも1つのノード電源装置から電力が供給されていれば使用可能です。

+
管理ホストからSecure Shellクライアント アプリケーションを使用して、SPにログインできます。その後はSP CLIを使用し、リモートでノードの監視とトラブルシューティングを行うことができます。また、SPを使用してシリアル コンソールにアクセスし、ONTAPコマンドをリモートで実行することもできます。

+
シリアル コンソールからSPにアクセスすることも、SPからシリアル コンソールにアクセスすることもできます。SPでは、SP CLIセッションと別のコンソール セッションを両方同時に開くことができます。

+
例えば、温度センサーが危険なほど高温または低温になると、ONTAPはSPをトリガーしてマザーボードを安全にシャットダウンします。シリアルコンソールは応答しなくなりますが、コンソールでCtrl-Gを押してSP CLIにアクセスできます。その後、SPから `system power on`または `system power cycle`コマンドを使用して、ノードの電源を投入または再起動できます。

* SPによって環境センサーが監視され、イベントがログに記録されるため、タイムリーで効果的な保守操作を行うことができます。
+
SPは、ノードの温度、電圧、電流、ファン速度などの環境センサーを監視します。環境センサーが異常状態に達すると、SPは異常値をログに記録し、ONTAPに問題を通知します。また、ノードがAutoSupportメッセージを送信できるかどうかに関係なく、必要に応じてAutoSupportメッセージでアラートと「`down system`」通知を送信します。

+
SPは、ブートの進行状況、フィールド交換可能ユニット（FRU）の交換、ONTAPによって生成されたイベント、SPのコマンド履歴などのイベントもログに記録します。AutoSupportメッセージを手動で呼び出せば、指定したノードから収集されたSPログ ファイルを含めることができます。

+
SPは、停止したノードの代わりにこれらのメッセージを生成し、AutoSupportメッセージに追加の診断情報を添付する以外、AutoSupportの機能には影響しません。AutoSupportの構成設定とメッセージ コンテンツ動作は、ONTAPから継承されます。

+
[NOTE]
====
SPは、通知の送信に `system node autosupport modify`コマンドの `-transport`パラメータ設定に依存しません。SPはSimple Mail Transport Protocol（SMTP）のみを使用し、ホストのAutoSupport設定にメールホスト情報を含める必要があります。

====
+
SNMP が有効になっている場合、 SP は、すべての「`ダウン システム`」イベントに対して、構成されたトラップ ホストに SNMP トラップを生成します。

* SPには、System Event Log（SEL;システム イベント ログ）に最大4,000のイベントを格納できる不揮発性メモリ バッファがあるため、問題の診断に役立ちます。
+
SELは、各監査ログ エントリを監査イベントとして格納します。イベントはSPのオンボード フラッシュ メモリに格納されます。SELのイベント リストは、SPによってAutoSupportメッセージを通じて指定された受信者に自動的に送信されます。

+
SELには次の情報が含まれています。

+
** SPが検出したハードウェア イベント。たとえば、電源装置、電圧、またはその他のコンポーネントに関するセンサーのステータスなど
** SPが検出したエラー。たとえば、通信障害、ファンの故障、メモリまたはCPUのエラーなど
** ノードから SP に送信された重大なソフトウェア イベント（パニック、通信障害、ブート障害、SP `system reset`または `system power cycle`コマンドの発行の結果としてユーザーがトリガーした「`down system`」など）


* SPは、管理者がログインまたは接続しているかどうかに関係なくシリアル コンソールを監視します。
+
コンソールにメッセージが送信されると、SPはそのメッセージをコンソール ログに保存します。ノードのいずれかの電源装置からSPに電源が供給されている限り、コンソール ログは維持されます。SPはスタンバイ電源で動作するので、ノードの電源再投入時または電源オフ時にも使用可能です。

* SPが構成されている場合は、ハードウェア アシスト テイクオーバーを使用できます。
* SP APIは、ONTAPがネットワークを介してSPと通信できるようにするサービスです。
+
このサービスでは、SPファームウェアの更新にネットワーク インターフェイスを使用する、ノードから別のノードのSP機能やシステム コンソールにアクセスできるようにする、別のノードからSPログをアップロードするといったネットワークベースの機能がサポートされるため、ONTAPによるSPの管理能力が向上します。

+
SP APIサービスの設定を変更するには、サービスに使用されるポートを変更するか、サービスで内部通信に使用されるSSLおよびSSH証明書を更新するか、サービス全体を無効にします。



以下の図は、ONTAPとSPへのノードのアクセスを示しています。SPインターフェイスには、イーサネット ポート（シャーシ背面にあるレンチ マークの付いたポート）を介してアクセスします。

image:drw-sp-netwk.gif["ONTAPおよびノードのService Processorへのアクセス"]
