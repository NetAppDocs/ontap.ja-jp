---
permalink: system-admin/start-stop-storage-system-concept.html 
sidebar: sidebar 
keywords: start, stop, node, cli, ontap, troubleshoot, sp, reboot, system, boot, compactflash, shut down, shutdown,  unresponsive, shut, down, node, unresponsive, support, personnel, direct, troubleshoot 
summary: メンテナンスまたはトラブルシューティングの目的で、ノードの起動または停止が必要になる場合があります。ノードの起動または停止は、ONTAP CLI、ブート環境プロンプト、またはSP CLIから実行できます。 
---
= メンテナンスやトラブルシューティングのために ONTAP ノードを起動または停止する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
メンテナンスまたはトラブルシューティングの目的で、ノードの起動または停止が必要になる場合があります。ノードの起動または停止は、ONTAP CLI、ブート環境プロンプト、またはSP CLIから実行できます。

SP CLI コマンド `system power off`または `system power cycle`を使用してノードの電源をオフにしたり電源を再投入したりすると、ノードが適切にシャットダウンされない可能性があり（_ダーティシャットダウン_とも呼ばれます）、ONTAP `system node halt`コマンドを使用した正常なシャットダウンの代わりにはなりません。



== システム プロンプトでのノードのリブート

ノードは、システム プロンプトから通常モードでリブートできます。ノードは、PC CompactFlashカードなどのブート デバイスからブートするように構成されています。

.手順
. クラスタのノード数が4つ以上の場合は、リブートするノードにイプシロンが設定されていないことを確認します。
+
.. 権限レベルをadvancedに設定します。
+
`*set -privilege advanced*`

.. イプシロンが設定されているノードを特定します。
+
`*cluster show*`

+
次の例は、「`node1`」がイプシロンを保持していることを示しています：

+
[listing]
----
cluster1::*> cluster show
Node                 Health  Eligibility   Epsilon
-------------------- ------- ------------  ------------
node1                true    true          true
node2                true    true          false
node3                true    true          false
node4                true    true          false
4 entries were displayed.
----
.. リブートするノードにイプシロンが設定されている場合は、そのノードからイプシロンを削除します。
+
`*cluster modify -node _node_name_ -epsilon false*`

.. 稼働したままにする別のノードにイプシロンを割り当てます。
+
`*cluster modify -node _node_name_ -epsilon true*`

.. admin権限レベルに戻ります。
+
`*set -privilege admin*`



.  `system node reboot`コマンドを使用してノードを再起動します。
+
 `-skip-lif-migration`パラメータを指定しない場合、コマンドは再起動前にデータとクラスタ管理LIFを別のノードに同期的に移行しようとします。LIFの移行が失敗するかタイムアウトした場合、再起動プロセスは中止され、ONTAPはLIFの移行が失敗したことを示すエラーを表示します。

+
[listing]
----
cluster1::> system node reboot -node node1 -reason "software upgrade"
----
+
ノードのリブート プロセスが開始されます。ONTAPログイン プロンプトが表示され、リブート プロセスが完了したことが示されます。





== ブート環境プロンプトからのONTAPのブート

ノードのブート環境のプロンプトから、ONTAPの現在のリリースまたはバックアップ リリースをブートできます。

.手順
. ストレージ システム プロンプトから `system node halt`コマンドを使用して、ブート環境プロンプトにアクセスします。
+
ストレージ システム コンソールに、ブート環境のプロンプトが表示されます。

. ブート環境のプロンプトに、次のコマンドのいずれかを入力します。
+
|===
| 起動するには... | 入力する内容 


 a| 
ONTAPの現在のリリース
 a| 
`boot_ontap`



 a| 
ONTAPプライマリ イメージ（ブート デバイスから）
 a| 
`boot_primary`



 a| 
ONTAPバックアップ イメージ（ブート デバイスから）
 a| 
`boot_backup`

|===
+
どの画像を使用するかわからない場合は、まず `boot_ontap`を使用する必要があります。





== ノードのシャットダウン

ノードが応答しなくなった場合や、サポート担当者からトラブルシューティング対応の一環として実行するように指示された場合は、ノードをシャットダウンできます。

.手順
. クラスタのノード数が4つ以上の場合は、シャットダウンするノードにイプシロンが設定されていないことを確認します。
+
.. 権限レベルをadvancedに設定します。
+
`*set -privilege advanced*`

.. イプシロンが設定されているノードを特定します。
+
`*cluster show*`

+
次の例は、「`node1`」がイプシロンを保持していることを示しています：

+
[listing]
----
cluster1::*> cluster show
Node                 Health  Eligibility   Epsilon
-------------------- ------- ------------  ------------
node1                true    true          true
node2                true    true          false
node3                true    true          false
node4                true    true          false
4 entries were displayed.
----
.. シャットダウンするノードにイプシロンが設定されている場合は、そのノードからイプシロンを削除します。
+
`*cluster modify -node _node_name_ -epsilon false*`

.. 稼働したままにする別のノードにイプシロンを割り当てます。
+
`*cluster modify -node _node_name_ -epsilon true*`

.. admin権限レベルに戻ります。
+
`*set -privilege admin*`



.  `system node halt`コマンドを使用してノードをシャットダウンします。
+
 `-skip-lif-migration`パラメータを指定しない場合、コマンドはシャットダウン前にデータとクラスタ管理LIFを別のノードに同期的に移行しようとします。LIFの移行が失敗するかタイムアウトした場合、シャットダウンプロセスは中止され、ONTAPにLIFの移行が失敗したことを示すエラーが表示されます。

+
 `-dump`パラメータの両方を使用して、シャットダウン時にコアダンプを手動でトリガーできます。

+
次の例では、ハードウェアメンテナンスのために「`node1`」という名前のノードをシャットダウンします：

+
[listing]
----
cluster1::> system node halt -node node1 -reason 'hardware maintenance'
----

