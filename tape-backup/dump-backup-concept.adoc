---
permalink: tape-backup/dump-backup-concept.html 
sidebar: sidebar 
keywords: dump, backup, qtree, file, system, data 
summary: ダンプバックアップでは、事前定義されたプロセスを使用して、ファイルシステムデータがディスクからテープに書き込まれます。バックアップできるのは、ボリューム、qtree、またはボリューム全体でもqtree全体でもないサブツリーです。 
---
= ダンプバックアップの仕組み
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ダンプバックアップでは、事前定義されたプロセスを使用して、ファイルシステムデータがディスクからテープに書き込まれます。バックアップできるのは、ボリューム、qtree、またはボリューム全体でもqtree全体でもないサブツリーです。

次の表に、ダンプパスで指定されたオブジェクトについて、 ONTAP が実行するバックアッププロセスを示します。

[cols="1,4"]
|===
| 段階 | アクション 


 a| 
1
 a| 
フルボリュームバックアップまたはフルqtreeバックアップ以外の場合、ONTAPはディレクトリをトラバースしてバックアップ対象のファイルを特定します。ボリューム全体またはqtree全体をバックアップする場合、ONTAPはこの段階を第2段階と組み合わせます。



 a| 
2
 a| 
フルボリュームバックアップまたはフルqtreeバックアップの場合、ONTAPはボリュームまたはqtree内のバックアップ対象のディレクトリを特定します。



 a| 
3
 a| 
ONTAPはディレクトリをテープに書き込みます。



 a| 
4
 a| 
ONTAPはファイルをテープに書き込みます。



 a| 
5
 a| 
ONTAPはACL情報（該当する場合）をテープに書き込みます。

|===
ダンプバックアップでは、バックアップにデータのSnapshotコピーが使用されます。したがって、バックアップを開始する前にボリュームをオフラインにする必要はありません。

ダンプバックアップでは、作成した各Snapshotコピーにという名前を付け `snapshot_for_backup.n`ます（ `n`は0から始まる整数）。ダンプバックアップでSnapshotコピーが作成されるたびに、この整数値は1ずつ増分されます。この整数は、ストレージシステムのリブート後に0にリセットされます。バックアップ処理が完了すると、ダンプエンジンによってこのSnapshotコピーが削除されます。

ONTAPで複数のダンプバックアップを同時に実行すると、ダンプエンジンによって複数のSnapshotコピーが作成されます。たとえば、ONTAPで2つのダンプバックアップを同時に実行すると、データのバックアップ元のボリューム内にはとの `snapshot_for_backup.1`Snapshotコピーが作成されます `snapshot_for_backup.0`。

[NOTE]
====
Snapshotコピーからバックアップする場合、ダンプエンジンでは追加のSnapshotコピーは作成されません。

====