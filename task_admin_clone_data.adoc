---
sidebar: sidebar 
permalink: task_admin_clone_data.html 
keywords: netapp, ontap, administration, clone, cloning, data, volumes, LUN, testing, clone volume, clone LUN, testing, temporary data, FlexClone license, clone deletion 
summary: ボリュームと LUN のクローンを作成して、テスト用のコピーを作成したり、本番データへのアクセスを許可せずにデータへのアクセスを許可したりできます。 
---
= ONTAP System Managerでテストするためにボリュームと LUN をクローンする
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ボリュームやLUNをクローニングして、テスト用に書き込み可能な一時的なコピーを作成できます。クローンには、データのその時点での最新の状態が反映されます。クローンを使用して、追加のユーザに本番データへのアクセスを許可することなくデータへのアクセスを提供することもできます。

.開始する前に
FlexCloneライセンスは https://docs.netapp.com/us-en/ontap/system-admin/install-license-task.html["インストール済み"]ストレージ システム上にある必要があります。



== ボリュームのクローニング

ボリュームのクローンを作成する手順は次のとおりです。

.手順
. *[ストレージ] > [ボリューム]*をクリックします。
. クローンを作成するボリュームの名前の横にあるimage:icon_kabob.gif["メニューオプションアイコン"]をクリックします。
. リストから*Clone*を選択します。
. クローンの名前を指定し、その他のオプションを指定します。
. *クローン*をクリックし、ボリュームクローンがボリュームのリストに表示されることを確認します。


または、ボリュームの詳細を表示するときに表示される*概要*からボリュームのクローンを作成することもできます。



== LUNのクローン作成

アクティブ ボリュームのLUNをクローニングして、LUNのコピーを作成できます。こうして作成されたFlexClone LUNは、アクティブ ボリューム内の元のLUNの読み書き可能なコピーです。

スペース リザーブされたFlexClone LUNには、親のスペース リザーブLUNと同量のスペースが必要です。FlexClone LUNのスペースをリザーブしない場合は、FlexClone LUNに対する変更を保存するために十分なスペースがボリュームにあるか確認する必要があります。


NOTE: この手順は、FAS、AFF、およびASAシステムに適用されます。ASA r2システム（ASA A1K、ASA A90、ASA A70、ASA A50、ASA A30、ASA A20、またはASA C30）をお持ちの場合は、link:https://docs.netapp.com/us-en/asa-r2/manage-data/data-cloning.html["これらの手順"^]に従ってデータのクローンを作成してください。ASA r2システムは、SANのみをご利用のお客様向けに、簡素化されたONTAPエクスペリエンスを提供します。

.手順
[role="tabbed-block"]
====
.System Manager
--
. *Storage > LUNs*をクリックします。
. クローンを作成するLUNの名前の横にあるimage:icon_kabob.gif["メニューオプションアイコン"]をクリックします。
. リストから*Clone*を選択します。
. クローンの名前を指定し、その他のオプションを指定します。
. *クローン*をクリックし、LUNクローンがLUNのリストに表示されることを確認します。


あるいは、LUNの詳細を表示するときに表示される*概要*からLUNクローンを作成することもできます。

LUNクローンを作成すると、スペースが必要になったときのクローンの削除が自動的に有効になります。

--
.CLI
--
. クローンを作成する前に、LUNがigroupにマッピングされていないこと、または書き込まれていないことを確認します。
.  `lun show`コマンドを使用して、LUNが存在することを確認します。
+
`lun show -vserver vs1`

+
[listing]
----
Vserver  Path              State     Mapped    Type     Size
-------- ----------------- --------- --------- -------- -------
vs1      /vol/vol1/lun1    online   unmapped  windows  47.07MB
----
.  `volume file clone create`コマンドを使用してFlexClone LUNを作成します。
+
`volume file clone create -vserver vs1 -volume vol1 -source-path lun1 -destination-path/lun1_clone`

+
FlexClone LUNを自動削除できるようにする必要がある場合は、 `-autodelete true`を含めます。セミシック プロビジョニングを使用してボリュームにこのFlexClone LUNを作成する場合は、すべてのFlexClone LUNに対して自動削除を有効にする必要があります。

.  `lun show`コマンドを使用して、LUNが作成されたことを確認します。
+
`lun show -vserver vs1`

+
[listing]
----

Vserver  Path                    State    Mapped   Type     Size
-------- ----------------------- -------- -------- -------- ------
vs1      /vol/volX/lun1          online   unmapped windows  47.07MB
vs1      /vol/volX/lun1_clone    online   unmapped windows  47.07MB
----


--
====