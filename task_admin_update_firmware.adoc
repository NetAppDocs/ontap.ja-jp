---
sidebar: sidebar 
permalink: task_admin_update_firmware.html 
keywords: system manager, netapp, ontap, upgrade, nondisruptive, firmware,  disk, shelves, qualification, package, service, processor, baseboard, management, controller, dqp, sp, bmc, software patch, upgrade, recommendation, recommended, storage firmware, storage devices, disks, shelves, service processors, modules 
summary: ディスク、ディスクシェルフ、サービスプロセッサ（SP）、ベースボード管理コントローラ（BMC）など、クラスタ内のサポートされるデバイスに更新されたファームウェアを適用できます。 
---
= ファームウェアを更新します
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
System Managerでは、ディスク、ディスクシェルフ、サービスプロセッサ（SP）、ベースボード管理コントローラ（BMC）など、クラスタ内のサポートされるデバイスにファームウェア更新を適用できます。



== ファームウェアの更新を準備

ファームウェアのスムーズな更新を準備するには、更新を開始する前にSPまたはBMCをリブートする必要があります。

.ステップ
. アップグレードの前にSPまたはBMCをリブートします。 `system service-processor reboot-sp -node node_name`




== ファームウェアを手動で更新します

.このタスクについて
ONTAP 9.9.1以降では、クラスタでファームウェアの更新が保留中になったときに通知するアラートをActive IQ から受信できます。そのあと、ファームウェアイメージをダウンロードし、 System Manager を使用してアップロードできます。

image:workflow_admin_update_firmware.gif["ファームウェア更新タスクのワークフロー図"]



=== Active IQ からのファームウェア更新アラートを表示します

ONTAP 9.9.1以降では、Active IQ Unified Manager からSystem Managerにアラートを受信し、クラスタでファームウェアの更新が保留中になったときに通知することができます。


NOTE: ONTAP 9.9.1を使用している場合、ファームウェアの更新に関するアラートを受信するには、Active IQ Unified Manager に登録する必要があります。を参照してください link:https://netapp.com/support-and-training/documentation/active-iq-unified-manager["Active IQ Unified Manager のドキュメント"^]。

.手順
. 「 * ダッシュボード * 」に移動します。
+
「 * Health * 」セクションに、クラスタに推奨されるファームウェア・アップデートがあるかどうかを示すメッセージが表示されます。

. アラートメッセージをクリックします。
+
[ * ファームウェア・アップデート * ] タブが [ * アップデート * ] ページに表示されます。





=== クラスタファームウェアをダウンロードします


NOTE: ONTAP 9.8 の場合は、NetApp Support Siteにアクセスして、更新されたファームウェアイメージパッケージをダウンロードする必要があります。

ONTAP 9.9.1以降では、System Managerを使用して、ファームウェアのアラートを表示する際に* Update *ページからファームウェアの更新をダウンロードできます（を参照） <<Active IQ からのファームウェア更新アラートを表示します>>. ）。

.手順
クラスタにインストールされている ONTAP のバージョンに適した手順を実行します。

[role="tabbed-block"]
====
.ONTAP 9.8およびONTAP 9.9.1（Active IQ に登録していない場合
--
. NetApp Support Siteに移動します。
. NetApp Support Siteにログインします。
. クラスタファームウェアの更新に使用するファームウェアパッケージを選択します。
. ネットワーク上の HTTP サーバまたは FTP サーバ、またはローカルフォルダにファイルをコピーします。


--
.ONTAP 9.9.1以降（Active IQ に登録されている場合）
--
. [*アップデート*]ページで、実行するファームウェアアップデートに対して、[* NetApp Support Site からダウンロード]をクリックします。
+
NetApp Support Siteが表示されます。

. NetApp Support Siteにログインします。
. 更新するファームウェアイメージパッケージをダウンロードします。
. ネットワーク上の HTTP サーバまたは FTP サーバ、またはローカルフォルダにファイルをコピーします。


--
====


=== クラスタファームウェアを更新

ファームウェアパッケージファイルをダウンロードしたら、クラスタファームウェアを更新できます。ONTAP 9.10.1以降では、修正や更新が自動的に実行されるようにスケジュールを設定し、更新に関する推奨事項を受け取るには、を参照してください <<update-firmware-automatically>>。

.手順
クラスタにインストールされている ONTAP のバージョンに適した手順を実行します。

[role="tabbed-block"]
====
.ONTAP 9.8、9.9.x、または9.10.0
--
. System Manager で、 * Cluster > Overview * をクリックします。
. [* 概要 * （ Overview * ） ] パネルの右隅で、 [ * 詳細 * （ * More * ） ] をクリックします image:icon_kabob.gif["メニューアイコン"] をクリックし、 * ONTAP アップデート * を選択します。
. [* ファームウェア・アップデート * ] をクリックします。
. サーバーから * を選択するか、 * ローカルクライアント * を選択します
. サーバの URL またはファイルの場所を指定します。


--
.ONTAP 9.10.1 以降
--
. System Manager で、 * Cluster > Overview * をクリックします。
. [* 概要 * （ Overview * ） ] パネルの右隅で、 [ * 詳細 * （ * More * ） ] をクリックします image:icon_kabob.gif["メニューアイコン"] をクリックし、 * ONTAP アップデート * を選択します。
. [* ファームウェア・アップデート * ] をクリックします。
. 推奨されるアップデートのリストで、[*アクション*（* Actions *）]を選択して、次のタスクを実行します。
+
** * アップデート * ：アップデートをインストールします。
** * スケジュール * ：アップデートをインストールするスケジュールを設定します。
** * Dismiss * ：推奨通知をリストから削除します。
+
アップデートがスケジュールされている場合、 * アクション * ボタンのオプションは次のとおりです。

** * アップデート * ：今すぐアップデートをインストールしてください。
** * スケジュールの編集 * ：更新のスケジュール日を変更します。
** * スケジュールのキャンセル *: 更新予定日をキャンセルします。


. 手動でアップデートする場合は、「 * ファームウェアのアップデート * 」ボタンを選択します。


--
====

NOTE: アップデートは、 * ファームウェア・アップデートの概要 * で監視または確認できます。インストールが却下された更新や失敗した更新は、System Managerで確認できます。[クラスタ]、[設定]、[自動更新]、[すべての自動更新の表示*]の順に選択します。



== ファームウェアを自動的に更新します

ONTAP 9.10.1 以降の System Manager では自動更新機能を有効にすることができます。自動更新機能を有効にすると、ネットアップが提供する推奨されるファームウェアのパッチ、アップグレード、および更新を ONTAP で自動的にダウンロードしてインストールできます（デフォルトの動作）。

.作業を開始する前に
次のいずれかの使用権が必要です。

* AIQEXPERT
* AIQADVISOR
* AIQUPGRADE


エンタイトルメントと、で取得しているエンタイトルメントの詳細を確認できます link:./system-admin/manage-licenses-concept.html["ライセンスの管理の概要（クラスタ管理者のみ）"]。

自動更新機能を使用するには、 HTTPS 経由で AutoSupport に接続する必要があります。接続の問題のトラブルシューティングについては、を参照してください link:./system-admin/troubleshoot-autosupport-http-https-task.html["HTTP または HTTPS を使用した AutoSupport メッセージ配信のトラブルシューティング"]。

.このタスクについて
アップデートには、次のカテゴリのファームウェアパッチ、アップグレード、およびアップデートが含まれます。

* * ストレージ・ファームウェア * ：ストレージ・デバイス、ディスク、ディスク・シェルフ
* * SP / BMC ファームウェア * ：サービスプロセッサおよび BMC モジュール


System Manager では、ファームウェアの更新に関する推奨事項を受け取れるように、カテゴリごとにデフォルトの動作を変更できます。このようにすることで、ファームウェアをインストールするタイミングを決定し、インストールするスケジュールを設定できます。この機能はオフにすることもできます。

更新が自動的に実行されるようにスケジュールを設定し、更新に関する推奨事項を受け取るには、次のワークフロータスクを実行します。

image:../media/sm-firmware-auto-update.gif["自動更新のワークフロー"]



=== 自動更新機能が有効になっていることを確認します

System Manager で自動更新機能を有効にするには、ネットアップが指定する利用条件に同意する必要があります。

.作業を開始する前に
自動更新機能を使用するには、 AutoSupport が有効になっていて HTTPS プロトコルを使用している必要があります。

.手順
. System Manager で、 * Events （イベント） * をクリックします。
. [ 概要 * ] セクションの [ 推奨アクション * ] で、 [ 自動更新を有効にする * ] の横にある [ * アクション * ] をクリックします。
. [*Enable*] をクリックします。
+
自動更新機能に関する情報が表示されます。デフォルトの動作（アップデートの自動ダウンロードとインストール）について説明し、デフォルト動作を変更できることを通知します。この情報には、この機能を使用する場合に同意する必要がある条件も含まれています。

. 利用規約に同意し、機能を有効にするには、チェックボックスをクリックして、 * 保存 * をクリックします。




=== 更新の推奨事項に対するデフォルトのアクションを指定します

ONTAP は、アップデートが利用可能になると自動的に検出します。ユーザの介入なしにダウンロードとインストールが開始されます。ただし、ストレージファームウェアの更新やSP / BMCファームウェアの更新に対して実行される別のデフォルト動作を指定できます。

.手順
. System Manager で、 * Cluster > Settings * の順にクリックします。
. [* 自動更新 * ] セクションで、をクリックします image:../media/icon_kabob.gif["自由に選択できます"] をクリックすると、アクションのリストが表示されます。
. [ 自動更新設定の編集 ] をクリックします。
. 更新の両方のカテゴリのデフォルトアクションを選択します。




=== 自動更新に関する推奨事項を管理します

System Manager では、推奨事項のリストを表示し、各推奨事項に対してまたはそのすべてに対して一度に操作を実行できます。

.手順
. いずれかの方法を使用して、推奨事項のリストを表示します。
+
--
|===


| 概要ページから表示します | 設定ページから表示します 


 a| 
.. [* Cluster] > [Overview] をクリックします。
.. 「 * 概要 * 」セクションで、「 * 詳細 * 」をクリックします image:../media/icon_kabob.gif["自由に選択できます"]をクリックし、 * ONTAP アップデート * をクリックします。
.. [* ファームウェア・アップデート * ] タブを選択します。
.. [* ファームウェア・アップデート * ] タブで、 [ * 詳細 * ] をクリックします image:../media/icon_kabob.gif["自由に選択できます"]をクリックし、 * すべての自動更新を表示 * をクリックします。

 a| 
.. [*Cluster] > [Settings*] の順にクリックします。
.. [* 自動更新 * ] セクションで、をクリックします image:../media/icon_kabob.gif["自由に選択できます"]をクリックし、 * すべての自動更新を表示 * をクリックします。


|===
--
+
自動更新ログには、概要、カテゴリ、インストール予定時刻、ステータス、エラーなど、各推奨事項と詳細が表示されます。

. をクリックします image:../media/icon_kabob.gif["自由に選択できます"] 概要の横に表示され、推奨構成に対して実行できる操作のリストが表示されます。
+
推奨構成の状態に応じて、次のいずれかの操作を実行できます。

+
[cols="35,65"]
|===


| 更新の状態 | 実行できる処理 


 a| 
はスケジュールされていません
 a| 
* アップデート * ：アップデート処理を開始します。

* スケジュール *: 更新プロセスを開始する日付を設定できます。

* Dismiss * ：推奨事項をリストから削除します。



 a| 
がスケジュールされました
 a| 
* アップデート * ：アップデート処理を開始します。

* スケジュールの編集 *: 更新プロセスを開始するためのスケジュールされた日付を変更できます。

* スケジュールのキャンセル *: スケジュールされた日付をキャンセルします。



 a| 
が却下されました
 a| 
* Unun求め * ：推奨事項をリストに返します。



 a| 
が適用されているか、ダウンロード中です
 a| 
* キャンセル * ：更新をキャンセルします。

|===



NOTE: インストールが却下された更新や失敗した更新は、System Managerで確認できます。[クラスタ]、[設定]、[自動更新]、[すべての自動更新の表示*]の順に選択します。
