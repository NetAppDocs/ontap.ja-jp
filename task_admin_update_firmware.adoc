---
sidebar: sidebar 
permalink: task_admin_update_firmware.html 
keywords: system manager, netapp, ontap, upgrade, nondisruptive, nondisruptively, firmware, update, disks, disk, shelves, qualification, package, service, processor, baseboard, management, controller, dqp, sp, bmc, fix firmware, update firmware, automatic, update, firmware, software patch, upgrade, recommendation, recommended, storage firmware, storage devices, disks, shelves, service processors, modules 
summary: ディスク、ディスクシェルフ、 Disk Qualification Package （ DQP ）、サービスプロセッサ（ SP ）、ベースボード管理コントローラ（ BMC ）など、クラスタ内のサポートされているデバイスに対して更新されたファームウェアを適用できます。 
---
= ファームウェアを更新します
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
System Manager では、ディスク、ディスクシェルフ、 Disk Qualification Package （ DQP ）サービスプロセッサ（ SP ）、ベースボード管理コントローラ（ BMC ）など、クラスタ内のサポートされているデバイスにファームウェア更新を適用できます。

ファームウェアの更新は手動でも自動でも適用できます。いずれかの手順を選択します。

* <<update-firmware-manually>>
* <<update-firmware-automatically>>




== ファームウェアを手動で更新します

ONTAP 9.9.9 以降では、 Active IQ から、クラスタでファームウェアの更新が保留中であることを通知するアラートを受信できます。そのあと、ファームウェアイメージをダウンロードし、 System Manager を使用してアップロードできます。

image:workflow_admin_update_firmware.gif["ファームウェア更新タスクのワークフロー図"]



=== Active IQ からのファームウェア更新アラートを表示します

ONTAP 9.9.9 以降では、 Active IQ Unified Manager からアラートを受信して、クラスタでファームウェアの更新が保留中であることを通知できます。


NOTE: ONTAP 9.9.9..1 を使用している場合、ファームウェアの更新に関するアラートを受信するには、 Active IQ Unified Manager に登録する必要があります。を参照してください link:https://netapp.com/support-and-training/documentation/active-iq-unified-manager["Active IQ Unified Manager のドキュメント"^]。

.手順
. 「 * ダッシュボード * 」に移動します。
+
「 * Health * 」セクションに、クラスタに推奨されるファームウェア・アップデートがあるかどうかを示すメッセージが表示されます。

. アラートメッセージをクリックします。
+
[ * ファームウェア・アップデート * ] タブが [ * アップデート * ] ページに表示されます。





=== クラスタファームウェアをダウンロードします


NOTE: ONTAP 9.8 の場合は、ネットアップサポートサイトにアクセスして、更新されたファームウェアイメージパッケージをダウンロードする必要があります。

ONTAP 9.9.9 以降では、ファームウェア・アラートの表示時に、 System Manager を使用して * Update * ページからファームウェア・アップデートをダウンロードできます（を参照） <<View firmware update alerts from Active IQ>>. ）。

クラスタにインストールされている ONTAP のバージョンに適した手順を実行します。

|===


| ONTAP 9.8 および ONTAP 9.8.1 で、 Active IQ に登録していない場合は、次の手順を実行します。 | ONTAP 9.9..1 以降で、 Active IQ に登録している場合は、次の手順を実行します。 


 a| 
. ネットアップサポートサイトに移動します。
. ネットアップサポートサイトにログインします。
. クラスタファームウェアの更新に使用するファームウェアパッケージを選択します。
. ネットワーク上の HTTP サーバまたは FTP サーバ、またはローカルフォルダにファイルをコピーします。

 a| 
. 「 * Update * 」ページで、実行するファームウェアの更新について、「 Download from NetApp Support Site 」というリンクをクリックします。
+
ネットアップサポートサイトが表示されます。

. ネットアップサポートサイトにログインします。
. 更新するファームウェアイメージパッケージをダウンロードします。
. ネットワーク上の HTTP サーバまたは FTP サーバ、またはローカルフォルダにファイルをコピーします。


|===


=== クラスタファームウェアを更新

ファームウェアパッケージファイルをダウンロードしたら、クラスタファームウェアを更新できます。

.手順
. System Manager で、 * Cluster > Overview * をクリックします。
. [* 概要 * （ Overview * ） ] パネルの右隅で、 [ * 詳細 * （ * More * ） ] をクリックします image:icon_kabob.gif["メニューアイコン"] をクリックし、 * ONTAP アップデート * を選択します。
. [* ファームウェア・アップデート * ] タブをクリックし、使用している ONTAP のバージョンに応じて、次のいずれかの手順を実行します。


[cols="25,75"]
|===


| ONTAP バージョン | 手順 


 a| 
ONTAP 9.10.0 以前
 a| 
. サーバーから * を選択するか、 * ローカルクライアント * を選択します
. サーバの URL またはファイルの場所を指定します。




 a| 
ONTAP 9.10.1
 a| 
* 注意：修正や更新を自動的に実行するようにスケジュールし、更新に関する推奨事項を受け取るには、を参照してください <<update-firmware-automatically>>。

. 推奨されるアップデートのリストで、 * アクション * ボタンを選択して、次のタスクを実行します。
+
--
** * アップデート * ：アップデートをインストールします。
** * スケジュール * ：アップデートをインストールするスケジュールを設定します。
** * Dismiss * ：推奨通知をリストから削除します。


--
+
アップデートがスケジュールされている場合、 * アクション * ボタンのオプションは次のとおりです。

+
--
** * アップデート * ：今すぐアップデートをインストールしてください。
** * スケジュールの編集 * ：更新のスケジュール日を変更します。
** * スケジュールのキャンセル *: 更新予定日をキャンセルします。


--
. 手動でアップデートする場合は、「 * ファームウェアのアップデート * 」ボタンを選択します。


|===

NOTE: アップデートは、 * ファームウェア・アップデートの概要 * で監視または確認できます。



== ファームウェアを自動的に更新します

ONTAP 9.10.1 以降の System Manager では自動更新機能を有効にすることができます。自動更新機能を有効にすると、ネットアップが提供する推奨されるファームウェアのパッチ、アップグレード、および更新を ONTAP で自動的にダウンロードしてインストールできます（デフォルトの動作）。

自動更新機能を使用するには、 HTTPS 経由で AutoSupport に接続する必要があります。接続の問題のトラブルシューティングについては、を参照してください link:../system-admin/troubleshoot-autosupport-http-https-task.html["HTTP または HTTPS を使用した AutoSupport メッセージ配信のトラブルシューティング"]。

アップデートには、次のカテゴリのファームウェアパッチ、アップグレード、およびアップデートが含まれます。

* * ストレージ・ファームウェア * ：ストレージ・デバイス、ディスク、ディスク・シェルフ
* * SP / BMC ファームウェア * ：サービスプロセッサおよび BMC モジュール


System Manager では、ファームウェアの更新に関する推奨事項を受け取れるように、カテゴリごとにデフォルトの動作を変更できます。このようにすることで、ファームウェアをインストールするタイミングを決定し、インストールするスケジュールを設定できます。この機能はオフにすることもできます。

更新が自動的に実行されるようにスケジュールを設定し、更新に関する推奨事項を受け取るには、次のワークフロータスクを実行します。

image:../media/sm-firmware-auto-update.gif["自動更新のワークフロー"]

* <<Ensure the Automatic Update feature is enabled>>
* <<Specify default actions for update recommendations>>
* <<Manage automatic update recommendations>>




=== 自動更新機能が有効になっていることを確認します

System Manager で自動更新機能を有効にするには、ネットアップが指定する利用条件に同意する必要があります。

自動更新機能を使用するには、 AutoSupport が有効になっていて HTTPS プロトコルを使用している必要があります。

.手順
. System Manager で、 * Events （イベント） * をクリックします。
. [ 概要 * ] セクションの [ 推奨アクション * ] で、 [ 自動更新を有効にする * ] の横にある [ * アクション * ] をクリックします。
. [*Enable*] をクリックします。
+
自動更新機能に関する情報が表示されます。デフォルトの動作（アップデートの自動ダウンロードとインストール）について説明し、デフォルト動作を変更できることを通知します。この情報には、この機能を使用する場合に同意する必要がある条件も含まれています。

. 利用規約に同意し、機能を有効にするには、チェックボックスをクリックして、 * 保存 * をクリックします。




=== 更新の推奨事項に対するデフォルトのアクションを指定します

ストレージファームウェアの更新および SP / BMC ファームウェアの更新に対して実行するデフォルトのアクションを設定できます。

.手順
. System Manager で、 * Cluster > Settings * の順にクリックします。
. [* 自動更新 * ] セクションで、をクリックします image:../media/icon_kabob.gif["kebab アイコン"] をクリックすると、アクションのリストが表示されます。
. [ 自動更新設定の編集 ] をクリックします。
. 更新の両方のカテゴリのデフォルトアクションを選択します。




=== 自動更新に関する推奨事項を管理します

System Manager では、推奨事項のリストを表示し、各推奨事項に対してまたはそのすべてに対して一度に操作を実行できます。

.手順
. いずれかの方法を使用して、推奨事項のリストを表示します。
+
--
|===


| 概要ページから表示します | 設定ページから表示します 


 a| 
.. [* Cluster] > [Overview] をクリックします。
.. 「 * 概要 * 」セクションで、「 * 詳細 * 」をクリックします image:../media/icon_kabob.gif["kebab アイコン"]をクリックし、 * ONTAP アップデート * をクリックします。
.. [* ファームウェア・アップデート * ] タブを選択します。
.. [* ファームウェア・アップデート * ] タブで、 [ * 詳細 * ] をクリックします image:../media/icon_kabob.gif["kebab アイコン"]をクリックし、 * すべての自動更新を表示 * をクリックします。

 a| 
.. [*Cluster] > [Settings*] の順にクリックします。
.. [* 自動更新 * ] セクションで、をクリックします image:../media/icon_kabob.gif["kebab アイコン"]をクリックし、 * すべての自動更新を表示 * をクリックします。


|===
--
+
自動更新ログには、概要、カテゴリ、インストール予定時刻、ステータス、エラーなど、各推奨事項と詳細が表示されます。

. をクリックします image:../media/icon_kabob.gif["kebab アイコン"] 概要の横に表示され、推奨構成に対して実行できる操作のリストが表示されます。
+
推奨構成の状態に応じて、次のいずれかの操作を実行できます。

+
[cols="35,65"]
|===


| 更新の状態 | 実行できる処理 


 a| 
はスケジュールされていません
 a| 
* アップデート * ：アップデート処理を開始します。

* スケジュール *: 更新プロセスを開始する日付を設定できます。

* Dismiss * ：推奨事項をリストから削除します。



 a| 
がスケジュールされました
 a| 
* アップデート * ：アップデート処理を開始します。

* スケジュールの編集 *: 更新プロセスを開始するためのスケジュールされた日付を変更できます。

* スケジュールのキャンセル *: スケジュールされた日付をキャンセルします。



 a| 
が却下されました
 a| 
* Unun求め * ：推奨事項をリストに返します。



 a| 
が適用されているか、ダウンロード中です
 a| 
* キャンセル * ：更新をキャンセルします。

|===

