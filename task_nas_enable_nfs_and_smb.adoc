---
sidebar: sidebar 
permalink: task_nas_enable_nfs_and_smb.html 
keywords: ontap, netapp, provision nas storage, linux, windows, NFS, SMB, SMB, CIFS, enable NFS, enable SMB, configure DNS, modify storage VM, configure DNS, configure name server, configure Kerberos, map user names 
summary: Storage VM を変更して、 NFS サーバと SMB サーバが Linux クライアントや Windows クライアントにデータを提供できるようにします。 
---
= NFS と SMB の両方を使用して、 Windows と Linux の両方で NAS ストレージを有効にします
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
Storage VMを作成または変更して、NFSサーバとSMBサーバがLinuxクライアントやWindowsクライアントにデータを提供できるようにします。

この手順 では、新規または既存のStorage VMがNFSプロトコルとSMBプロトコルの両方を提供できます。ここでは、環境に必要なネットワークサービス、認証サービス、セキュリティサービスの構成の詳細を記載するものとします。

image:workflow_nas_enable_nfs_and_smb.gif["NFS と SMB を使用して Linux サーバと Windows サーバの両方で NAS を有効にするワークフロー図"]

.手順
. Storage VMでNFSとSMBを有効にする
+
.. 新しいStorage VMの場合：* Storage > Storage VM*をクリックし、* Add *をクリックしてStorage VM名を入力し、* SMB / CIFS、NFS、S3 *タブで* SMB / CIFSの有効化*と* NFSの有効化*を選択します。
+
*** 次の情報を入力します。
+
**** 管理者の名前とパスワード
**** サーバ名
**** Active Directoryドメイン


*** 組織単位を確認します。
*** DNS値を確認します。
*** デフォルトの言語を確認します。
*** ネットワークインターフェイスを追加
*** Storage VM管理者アカウント情報を更新する（オプション）。


.. 既存のStorage VMの場合：* Storage > Storage VM*をクリックし、Storage VMを選択して* Settings *をクリックします。NFSまたはSMBがまだ有効になっていない場合は、次のサブ手順を実行します。
+
*** をクリックします image:icon_gear.gif["設定アイコン"] NFS * 。
*** をクリックします image:icon_gear.gif["設定アイコン"] * SMB * 。




. Storage VM ルートボリュームのエクスポートポリシーを開きます。
+
.. Storage > Volumes * をクリックし、 Storage VM のルートボリューム（デフォルトは _volume-name_root_） を選択し、 * Export Policy * に表示されるポリシーをクリックします。
.. ルールを追加するには、 [ * 追加 ] をクリックします。
+
*** クライアント仕様= `0.0.0.0/0`
*** アクセスプロトコル = nfs
*** アクセスの詳細 = NFS 読み取り専用




. ホスト名解決に使用する DNS を設定します。
+
.. Storage > Storage VM* の順にクリックし、 Storage VM を選択し、 * Settings * をクリックして、をクリックします image:icon_gear.gif["設定アイコン"] *DNS* の下。
.. DNS の設定が完了したら、 DNS サーバに切り替えて SMB サーバをマッピングします。
+
*** フォワードルックアップ（ A - アドレスレコード）とリバースルックアップ（ PTR - ポインタレコード）のエントリを作成して、 SMB サーバ名をデータネットワークインターフェイスの IP アドレスにマッピングします。
*** NetBIOS エイリアスを使用する場合は、エイリアスの正規名（ CNAME リソースレコード）のルックアップエントリを作成して、各エイリアスを SMB サーバのデータネットワークインターフェイスの IP アドレスにマッピングします。




. 必要に応じてネームサービスを設定します。
+
.. Storage > Storage VM* の順にクリックし、 Storage VM を選択し、 * Settings * をクリックして、をクリックします image:icon_gear.gif["設定アイコン"] LDAP または NIS 。
.. ネームサービススイッチファイルに変更を加えた場合は追加します。をクリックします image:icon_pencil.gif["編集アイコン"] ネームサービススイッチ * の下。


. 必要に応じて Kerberos を設定します。をクリックします image:icon_arrow.gif["矢印アイコン"] Kerberos タイルで、 * Add * をクリックします。
. 必要に応じて UNIX と Windows のユーザ名をマッピングします。をクリックします image:icon_arrow.gif["矢印アイコン"] [* ネームマッピング * ] で、 [* 追加 ] をクリックします。
+
この手順は、 Windows と UNIX のユーザアカウントが暗黙的にマッピングされない場合にのみ使用します。小文字の Windows ユーザ名が UNIX ユーザ名と一致していれば、ユーザ名は暗黙的にマッピングされます。この手順は、 LDAP ユーザ、 NIS ユーザ、またはローカルユーザを使用して実行できます。一致しない 2 組のユーザセットがある場合、ネームマッピングを設定する必要があります。


