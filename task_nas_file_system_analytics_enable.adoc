---
sidebar: sidebar 
permalink: task_nas_file_system_analytics_enable.html 
keywords: capacity analytics, data visualization, File System Analytics 
summary: 容量分析などの使用状況データを収集して表示するには、File System Analytics を有効にする必要があります。 
---
= ONTAPファイルシステム分析を有効にする
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
容量分析などの使用状況データを収集して表示するには、ボリュームでファイルシステム分析を有効にする必要があります。


NOTE: ONTAP 9.17.1以降、NASプロトコル用に割り当てられたONTAPクラスタ上の新規作成されたSVMで作成されたボリュームでは、ファイルシステム分析（FSA）がデフォルトで有効になります。FSAはボリュームの作成と同時に自動的にアクティブ化され、追加設定なしですぐに分析機能を利用できます。新規ボリュームでファイルシステム分析を有効にしたくない場合は、SVMから https://docs.netapp.com/us-en/ontap-cli/volume-analytics-off.html["新しいボリュームでFSAを無効にする"^]する必要があります。

.タスク概要
* ONTAP 9.8以降では、新規または既存のボリュームでファイルシステム分析を有効にできます。システムをONTAP 9.8以降にアップグレードした場合、すべてのアップグレード プロセスが完了したことを確認してからファイルシステム分析を有効にしてください。
* 分析を有効にするのにかかる時間は、ボリュームのサイズと内容によって異なります。System Managerは進行状況を表示し、完了すると分析データを表示します。初期化スキャンの進行状況についてより正確な情報が必要な場合は、ONTAP CLIコマンド `volume analytics show`を使用してください。
+
** ONTAP 9.15.1以降では、1つのノードに対して同時に実行できる初期化スキャンは4つのみです。新しいスキャンを開始するには、スキャンが完了するまで待つ必要があります。また、ボリュームに十分な使用可能スペースが必要なため、十分なスペースがない場合はONTAPにエラー メッセージが表示されます。ボリュームの使用可能なスペースの少なくとも5～8%が空きスペースであることを確認してください。ボリュームでオートサイズが有効になっている場合は、自動拡張時の最大サイズに基づいて使用可能なサイズを計算します。
** ONTAP 9.14.1以降では、スキャンの進捗に影響するスロットル イベントに関する通知に加えて、初期化スキャンの進捗状況を追跡できます。
** 初期化スキャンに関する詳細な考慮事項については、xref:./file-system-analytics/considerations-concept.html#scan-considerations[スキャンに関する考慮事項]を参照してください。
**  `volume analytics show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-analytics-show.html["ONTAPコマンド リファレンス"^]を参照してください。






== 既存のボリュームに対するファイルシステム分析の有効化

ファイルシステム分析は、ONTAP System ManagerまたはCLIを使用して有効にできます。

.手順
[role="tabbed-block"]
====
.System Manager
--
|===
| ONTAP 9.10.1以降 | ONTAP 9.9.1およびONTAP 9.8 


 a| 
. *ストレージ > ボリューム*を選択します。
. 目的のボリュームを選択します。個々のボリュームメニューから、*ファイルシステム > エクスプローラ*を選択します。
. *Enable Analytics*または*Disable Analytics*を選択します。

 a| 
. *ストレージ > ボリューム*を選択します。
. 目的のボリュームを選択し、* Explorer * を選択します。
. *Enable Analytics*または*Disable Analytics*を選択します。


|===
--
.CLI
--
.CLIによるファイルシステム分析の有効化
. 次のコマンドを実行します。
+
[source, cli]
----
volume analytics on -vserver <svm_name> -volume <volume_name> [-foreground {true|false}]
----
+
デフォルトでは、このコマンドはフォアグラウンドで実行され、ONTAPは完了時に進行状況と分析データを表示します。より正確な情報が必要な場合は、 `-foreground false`オプションを使用してコマンドをバックグラウンドで実行し、その後 `volume analytics show`コマンドを使用してCLIで初期化の進行状況を表示できます。

. ファイルシステム分析が有効になったら、System ManagerまたはONTAP REST APIを使用して分析データを表示します。


--
 `volume analytics on`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-analytics-on.html["ONTAPコマンド リファレンス"^]を参照してください。

====


== ファイルシステム分析のデフォルト設定の変更

ONTAP 9.13.1以降では、SVMまたはクラスタの設定を変更して、新しいボリュームでFile System Analyticsをデフォルトで有効にすることができます。

.手順
[role="tabbed-block"]
====
.System Manager
--
System Managerを使用する場合は、Storage VMまたはクラスタの設定を変更し、ボリューム作成時に容量分析とアクティビティ追跡をデフォルトで有効にすることができます。この有効化が適用されるのは設定変更後に作成されたボリュームのみで、既存のボリュームには適用されません。

.クラスタでのファイルシステム分析設定の変更
. System Manager で、* クラスタ設定 * に移動します。
. *クラスター設定*で、「ファイルシステム設定」タブを確認します。設定を変更するには、image:icon_gear.gif["アクションアイコン"] アイコンを選択します。
. *Activity Tracking* フィールドに、デフォルトでActivity Trackingを有効にするSVMの名前を入力します。このフィールドを空白のままにすると、すべてのSVMでActivity Trackingが無効になります。
+
新しいストレージVMでアクティビティトラッキングをデフォルトで無効にするには、*新しいストレージVMで有効にする*チェックボックスをオフにします。

. *Analytics* フィールドに、デフォルトで容量分析を有効にするストレージVMの名前を入力します。このフィールドを空白のままにすると、すべてのSVMで容量分析が無効になります。
+
新しいストレージ VM で容量分析をデフォルトで無効にするには、*新しいストレージ VM で有効にする*ボックスのチェックを外します。

. *保存*を選択します。


.SVMでのファイルシステム分析設定の変更
. 変更する SVM を選択し、*ストレージ VM 設定*を選択します。
. *ファイルシステム分析*カードで、トグルを使用して、ストレージVM上のすべての新しいボリュームのアクティビティ追跡と容量分析を有効または無効にします。


--
.CLI
--
ONTAP CLIを使用して、新しいボリュームに対してファイルシステム分析をデフォルトで有効にするようにStorage VMを設定できます。

.SVMに対するファイルシステム分析のデフォルトでの有効化
. SVMを編集し、新しく作成されたすべてのボリュームに対して容量分析とアクティビティ追跡をデフォルトで有効にします。
+
[source, cli]
----
vserver modify -vserver <svm_name> -auto-enable-activity-tracking true -auto-enable-analytics true
----
+
 `vserver modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-modify.html["ONTAPコマンド リファレンス"^]を参照してください。



--
====
.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/["ONTAPコマンド リファレンス"^]

