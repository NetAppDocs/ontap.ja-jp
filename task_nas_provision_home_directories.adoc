---
sidebar: sidebar 
permalink: task_nas_provision_home_directories.html 
keywords: netapp, ontap, provisioning, nas, provision, home, directories, SMB, CIFS, SMB, share name 
summary: SMBプロトコルを使用して、ホーム ディレクトリ用のストレージを提供するボリュームを作成します。 
---
= ONTAP System Managerを使用してホーム ディレクトリ用のNASストレージをプロビジョニングする
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
SMBプロトコルを使用して、ホーム ディレクトリ用のストレージを提供するボリュームを作成します。

この手順では、link:task_nas_enable_windows_smb.html["既存のSMB対応ストレージVM"]上のホームディレクトリ用の新しいボリュームを作成します。ボリュームを構成する際にシステムのデフォルトを受け入れることも、カスタム構成を指定することもできます。

image:workflow_nas_provision_home_directories.gif["ワークフローの概要：1 ボリュームの作成 2 ホームディレクトリ共有の作成 3 共有アクセスの確認"]

FlexVolボリュームを作成したり、高パフォーマンスが求められる大規模なファイルシステム用にFlexGroupボリュームを作成したりできます。link:./flexgroup/create-task.html["FlexGroupボリュームを作成する"]も参照してください。

このボリュームの仕様をAnsible Playbookに保存することもできます。詳細については、link:task_admin_use_ansible_playbooks_add_edit_volumes_luns.html["Ansible Playbookを使用したボリュームやLUNの追加 / 編集"]をご覧ください。

.手順
. SMBが有効なStorage VMに新しいボリュームを追加します。
+
.. *ストレージ > ボリューム*を選択し、*追加*をクリックします。
.. 名前を入力し、Storage VMを選択してサイズを入力します。
+
SMBプロトコルで構成されたストレージVMのみがリストに表示されます。SMBプロトコルで構成されたストレージVMが1つしか存在しない場合、*Storage VM*フィールドは表示されません。

+
*** この時点で*保存*をクリックすると、System Manager はシステムのデフォルトを使用してFlexVol ボリュームを作成し、追加します。
*** *その他のオプション*をクリックすると、ボリュームの設定をカスタマイズして、認証、サービス品質、データ保護などのサービスを有効にすることができます。<<ボリューム設定のカスタマイズ>>を参照した後、ここに戻って次の手順を完了してください。




. [[step2,Step 2 in the workflow]] *Storage > Shares* をクリックし、*Add* をクリックして、*Home Directory* を選択します。
. Windowsクライアントで、次の手順を実行して共有にアクセスできることを確認します。
+
.. エクスプローラで、次の形式でドライブを共有にマップします： `\\<SMB_Server_Name>\<Share_Name>`
+
共有名に変数（%w、%d、%u）が使用されている場合は、解決後の名前でアクセスをテストしてください。

.. 新しく作成したドライブでテスト ファイルを作成し、そのファイルを削除します。






== ボリューム設定のカスタマイズ

ボリュームを追加するときに、システムのデフォルト設定を使用しないでボリューム設定をカスタマイズすることができます。

.手順
*その他のオプション*をクリックした後、必要な機能を選択し、必要な値を入力します。

* リモート ボリュームのキャッシュ。
* パフォーマンス サービス レベル（サービス品質、QoS）。
+
ONTAP 9.8以降では、デフォルト値以外のカスタムQoSポリシーを指定したり、QoSを無効にしたりできます。

+
** QoS を無効にするには、*カスタム*、*既存*、*なし* の順に選択します。
** *カスタム* を選択して既存のサービス レベルを指定すると、ローカル ティアが自動的に選択されます。
** ONTAP 9.9.1 以降では、カスタム パフォーマンス サービス レベルを作成する場合、System Manager を使用して、作成するボリュームを配置するローカル層（*手動配置*）を手動で選択できます。
+
このオプションは、リモート キャッシュまたはFlexGroupボリュームのオプションを選択した場合は使用できません。



* FlexGroupボリューム（*ボリューム データをクラスター全体に分散する*を選択）。
+
このオプションは、以前に*パフォーマンス サービス レベル*で*手動配置*を選択した場合には利用できません。それ以外の場合、追加するボリュームはデフォルトでFlexVol volumeになります。

* ボリュームに設定されるプロトコルのアクセス権限。
* SnapMirrorによるデータ保護（ローカルまたはリモート）。オプションを選択したあと、プルダウン リストからデスティネーション クラスタの保護ポリシーと設定を指定します。
* *保存*を選択してボリュームを作成し、クラスタとStorage VMに追加します。



NOTE: ボリュームを保存したら、<<step2>>に戻ってホーム ディレクトリのプロビジョニングを完了します。
