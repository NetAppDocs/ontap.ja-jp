---
sidebar: sidebar 
permalink: task_nas_secure_client_access_with_kerberos.html 
keywords: netapp, ontap, kerberos, security, client access, group permissions, user permissions, UNIX permissions, name mapping, NAS client, storage access 
summary: Kerberosを有効にしてNASクライアントのストレージ アクセスを保護します。 
---
= ONTAP System Managerを使用してKerberosでクライアント アクセスを保護する
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Kerberosを有効にしてNASクライアントのストレージ アクセスを保護します。

この手順では、link:task_nas_enable_linux_nfs.html["NFS"]またはlink:task_nas_enable_windows_smb.html["SMB"]が有効になっている既存のストレージVMにKerberosを設定します。

始める前に、ストレージ システムで DNS、NTP、link:task_nas_provide_client_access_with_name_services.html["LDAP"]を構成しておく必要があります。

image:workflow_nas_secure_client_access_with_kerberos.gif["ワークフローの概要：1 UNIX権限の設定 2 ユーザー権限の設定 3 グループ権限の設定 4 Kerberosの設定 5 必要に応じて名前マッピングの追加"]

.手順
. ONTAPコマンドラインで、Storage VMのルート ボリュームのUNIX権限を設定します。
+
.. ストレージ VM ルート ボリュームの関連する権限を表示します： `volume show -volume _root_vol_name_-fields user,group,unix-permissions`link:https://docs.netapp.com/us-en/ontap-cli/volume-show.html["ONTAPコマンド リファレンス"^]の `volume show`の詳細を確認してください。
+
Storage VMのルート ボリュームは次のように設定されている必要があります。

+
[cols="2"]
|===
| 名前 | 設定 


| UID | rootまたはID 0 


| GID | rootまたはID 0 


| UNIX権限 | 755 
|===
.. これらの値が表示されない場合は、 `volume modify`コマンドを使用して更新してください。 `volume modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-modify.html["ONTAPコマンド リファレンス"^]を参照してください。


. Storage VMのルート ボリュームのユーザ権限を設定します。
+
.. ローカル UNIX ユーザーを表示します： `vserver services name-service unix-user show -vserver _vserver_name_` `vserver services name-service unix-user show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-services-name-service-unix-user-show.html["ONTAPコマンド リファレンス"^]を参照してください。
+
Storage VMに次のUNIXユーザが設定されている必要があります。

+
[cols="3"]
|===
| ユーザ名 | ユーザーID | プライマリ グループID 


| nfs | 500 | 0 


| root | 0 | 0 
|===
+
*注：* NFSクライアントユーザーのSPNにKerberos-UNIX名前マッピングが存在する場合、NFSユーザーは必要ありません。手順5を参照してください。

.. これらの値が表示されない場合は、 `vserver services name-service unix-user modify`コマンドを使用して更新してください。 `vserver services name-service unix-user modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-services-name-service-unix-user-modify.html["ONTAPコマンド リファレンス"^]を参照してください。


. Storage VMのルート ボリュームのグループ権限を設定します。
+
.. ローカル UNIX グループを表示します： `vserver services name-service unix-group show -vserver _vserver_name_` `vserver services name-service unix-group show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-services-name-service-unix-group-show.html["ONTAPコマンド リファレンス"^]を参照してください。
+
Storage VMに次のUNIXグループが設定されている必要があります。

+
[cols="2"]
|===
| グループ名 | グループID 


| daemon | 1 


| root | 0 
|===
.. これらの値が表示されない場合は、 `vserver services name-service unix-group modify`コマンドを使用して更新してください。 `vserver services name-service unix-group modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/vserver-services-name-service-unix-group-modify.html["ONTAPコマンド リファレンス"^]を参照してください。


. System Managerに切り替えて、Kerberosを設定します。
. System Manager で、* ストレージ > ストレージ VM* をクリックし、ストレージ VM を選択します。
. *Settings*をクリックします。
. Kerberosの下にあるimage:icon_arrow.gif["矢印アイコン"]をクリックします。
. Kerberos Realm の下の *Add* をクリックし、次のセクションを入力します：
+
** Kerberos Realm の追加
+
KDCベンダーに応じて詳細を入力します。

** Realm へのネットワーク インターフェイスの追加
+
*Add*をクリックし、ネットワーク インターフェースを選択します。



. 必要に応じて、Kerberosプリンシパル名とローカル ユーザ名のマッピングを追加します。
+
.. *ストレージ > Storage VM* をクリックし、Storage VM を選択します。
.. *設定*をクリックし、*名前マッピング*の下にある image:icon_arrow.gif["矢印アイコン"] をクリックします。
.. *[KerberosからUNIX]*で、正規表現を使用してパターンと置換文字列を追加します。



