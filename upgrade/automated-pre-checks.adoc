---
sidebar: sidebar 
permalink: upgrade/automated-pre-checks.html 
keywords: netapp, ontap, automate, automatic, automated, upgrade, nondisruptive, nondisruptively, non-disruptive update, nondisruptive upgrade, upgrade a cluster, shift workload between clusters, hardware platform, configuration, software image, update, update ONTAP, update software, ndu 
summary: クラスタの ONTAP のバージョンは無停止で更新できます。 
---
= 計画的アップグレードの前にONTAPの自動アップグレード前チェックを実行
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAPの自動アップグレードの事前チェックを実行するために、ONTAPソフトウェアをアップグレードする必要はありません。  アップグレード前チェックをONTAPの自動アップグレードプロセスとは別に実行すると、どのチェックがクラスタに対して実行されたかを確認し、実際のアップグレードを開始する前に修正する必要があるエラーや警告のリストを表示できます。  たとえば、2週間後に予定されているメンテナンス時間中にONTAPソフトウェアをアップグレードするとします。  スケジュールされた日付を待っている間に、自動アップグレードの事前チェックを実行し、メンテナンス時間に先立って必要な修正措置を講じることができます。  これにより、アップグレードの開始後に予期しない設定エラーが発生するリスクを軽減できます。

ONTAPソフトウェアのアップグレードを開始する準備ができている場合は、この手順を実行する必要はありません。  次の手順に従う必要があります。 link:automated-upgrade-task.html["自動アップグレードプロセス"]には、自動アップグレードの事前チェックの実行も含まれます。


NOTE: MetroCluster構成の場合は、最初にクラスタAでこれらの手順を実行してから、クラスタBで同じ手順を実行する必要があります。

.作業を開始する前に
お勧めします link:download-software-image.html["ターゲットのONTAPソフトウェアイメージのダウンロード"]。

の自動アップグレードの事前チェックを実行するには link:https://docs.netapp.com/us-en/ontap/upgrade/concept_upgrade_paths.html#types-of-upgrade-paths["直接マルチホップアップグレード"]の場合、ダウンロードする必要があるのは、ターゲットのONTAPバージョンに対応したソフトウェアパッケージだけです。  実際のアップグレードを開始するまで、中間バージョンのONTAPをロードする必要はありません。  たとえば、9.8から9.13.1へのアップグレードの自動アップグレード前チェックを実行する場合は、ONTAP 9.13.1のソフトウェアパッケージをダウンロードする必要があります。  ONTAP 9.12.1用のソフトウェアパッケージをダウンロードする必要はありません。

.手順
[role="tabbed-block"]
====
.System Manager の略
--
. ONTAPターゲットイメージを検証します。
+

NOTE: MetroCluster構成をアップグレードする場合は、クラスタAを検証してから、クラスタBで検証プロセスを繰り返す必要があります。

+
.. 実行している ONTAP のバージョンに応じて、次のいずれかの手順を実行します。
+
|===


| 実行内容 | 手順 


| ONTAP 9.8以降  a| 
[* Cluster] > [Overview] をクリックします。



| ONTAP 9.5 、 9.6 、および 9.7  a| 
[* Configuration * （設定 * ） ] > [* Cluster * （クラスタ * ） ] > [* Update * （アップデート *



| ONTAP 9.4 以前  a| 
[* Configuration * （構成 * ） ] > [* Cluster Update （クラスタの更新） ] を

|===
.. [*Overview*] ペインの右隅で、をクリックします image:icon_kabob.gif["メニューアイコン"]。
.. ONTAP アップデート * をクリックします。
.. [クラスタの更新]*タブで、新しいイメージを追加するか使用可能なイメージを選択します。
+
|===


| 状況 | 作業 


 a| 
ローカルフォルダからの新しいソフトウェアイメージの追加

お前はもう link:download-software-image.html["イメージをダウンロードしました"] ローカルクライアントに送信します。
 a| 
... [使用可能なソフトウェアイメージ]*で、*[ローカルから追加]*をクリックします。
... ソフトウェアイメージを保存した場所を参照し、イメージを選択して、 * 開く * をクリックします。




 a| 
HTTPサーバまたはFTPサーバから新しいソフトウェアイメージを追加する
 a| 
... [ サーバーから追加 ] をクリックします。
... [新しいソフトウェアイメージの追加]ダイアログボックスで、NetApp Support SiteからONTAPソフトウェアイメージをダウンロードしたHTTPサーバまたはFTPサーバのURLを入力します。
+
匿名 FTP の URL は、で指定する必要があります ftp://anonymous@ftpserver[] の形式で入力し

... [ 追加（ Add ） ] をクリックします。




 a| 
使用可能なイメージを選択します
 a| 
表示された画像のいずれかを選択します。

|===
.. [検証]*をクリックして、アップグレード前の検証チェックを実行します。
+
検証中にエラーや警告が検出された場合は、対処方法のリストとともに表示されます。アップグレードを続行する前に、すべてのエラーを解決する必要があります。  警告も解決することを推奨します。





--
.CLI の使用
--
. ターゲットのONTAPソフトウェアイメージをクラスタパッケージリポジトリにロードします。
+
[source, cli]
----
cluster image package get -url location
----
+
[listing]
----
cluster1::> cluster image package get -url http://www.example.com/software/9.13.1/image.tgz

Package download completed.
Package processing completed.
----
. ソフトウェアパッケージがクラスタパッケージリポジトリにあることを確認します。
+
[source, cli]
----
cluster image package show-repository
----
+
[listing]
----
cluster1::> cluster image package show-repository
Package Version  Package Build Time
---------------- ------------------
9.13.1              MM/DD/YYYY 10:32:15
----
. アップグレード前の自動チェックを実行します。
+
[source, cli]
----
cluster image validate -version package_version_number -show-validation-details true
----
+

NOTE: を実行する場合 link:https://docs.netapp.com/us-en/ontap/upgrade/concept_upgrade_paths.html#types-of-upgrade-paths["直接マルチホップアップグレード"]を使用して、ターゲットのONTAPパッケージを検証します。  中間アップグレードイメージを個別に検証する必要はありません。  たとえば、9.8から9.13.1にアップグレードする場合は、9.13.1パッケージを検証に使用する必要があります。9.12.1パッケージを個別に検証する必要はありません。

+
[listing]
----
cluster1::> cluster image validate -version 9.13.1 -show-validation-details true

It can take several minutes to complete validation...
Pre-update Check       Status      Error-Action
---------------------  ---------   -------------------------------------------
CIFS status            OK
Cluster health status  OK
Clsuter quorum status  OK
Disk status            OK
High Availability      OK
status
LIF status             OK
LIFs on home node      OK
MetroCluster           OK
configuration status
SnapMirror status      OK
Overall Status         OK
10 entries were displayed.

----
+
アップグレードの完全な自動事前チェックのリストが、アップグレードプロセスの開始前に対処する必要があるエラーや警告とともに表示されます。



--
====