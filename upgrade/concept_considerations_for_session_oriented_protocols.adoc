---
permalink: upgrade/concept_considerations_for_session_oriented_protocols.html 
sidebar: sidebar 
keywords: ontap, upgrade, update, considerations, session-oriented, protocols, impact, io, client, session, disruption, disrupted, smb, hyper-v, sql, server, ndo, nondisruptive, continuous availability, nfsv4.x, ndmp, backup, restores 
summary: クラスタおよびセッション指向プロトコルは、アップグレードの実行中、I/Oサービスなどの一部の領域でクライアントおよびアプリケーションに悪影響を及ぼす可能性があります。 
---
= ONTAPアップグレード時のセッション指向プロトコルの悪影響について学習します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラスタおよびセッション指向プロトコルは、アップグレードの実行中、I/Oサービスなどの一部の領域でクライアントおよびアプリケーションに悪影響を及ぼす可能性があります。

セッション指向プロトコルを使用する場合は、次のことを考慮してください。

* SMB
+
SMBv3 を使用して継続的に利用可能な（CA）共有を提供する場合は、自動化された無停止アップグレード方式（System Manager または CLI を使用）を使用でき、クライアントで中断は発生しません。

+
共有へのアクセスにSMBv1またはSMBv2を使用する場合や、非CA共有へのアクセスにSMBv3を使用する場合は、アップグレードのテイクオーバー処理とリブート処理中にクライアント セッションが中断します。アップグレードの開始前に、ユーザにセッションを終了するように通知してください。

+
Hyper-VおよびSQL Server over SMBはノンストップ オペレーション（NDO）をサポートします。Hyper-VまたはSQL Server over SMBソリューションを設定した場合は、ONTAPのアップグレード中にもアプリケーション サーバおよびそれに格納された仮想マシンやデータベースをオンラインのまま維持し、継続的可用性を実現します。

* NFSv4.x
+
NFSv4.xクライアントは、NFSv4.xの通常のリカバリ手順を使用してアップグレードを実行する際に発生するネットワークの切断から自動的にリカバリします。このプロセスでは、アプリケーションのI/Oが一時的に遅延する可能性があります。

* NDMP
+
状態が失われるので、クライアント ユーザは操作を再試行する必要があります。

* バックアップおよびリストア
+
状態が失われるので、クライアント ユーザは操作を再試行する必要があります。

+

IMPORTANT: アップグレードの実行中および開始直前は、バックアップまたはリストアの操作を開始しないでください。データが失われることがあります。

* アプリケーション（OracleまたはExchangeなど）
+
影響はアプリケーションによって異なります。タイムアウト ベースのアプリケーションでは、タイムアウトの値を変更し、ONTAPのリブート時間よりも長く設定することで、悪影響を最小限に抑えることができます。


