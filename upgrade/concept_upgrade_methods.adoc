---
permalink: upgrade/concept_upgrade_methods.html 
sidebar: sidebar 
keywords: upgrade, methods, andu, ndu, automated, automatic, system manager, cli, nondisruptive, disruptive 
summary: アップグレード方法は構成によって異なります。可能な場合は、 System Manager を使用した自動無停止アップグレード（ ANDU ）を推奨します。 
---
= どのアップグレード方式を使用する必要がありますか？
:icons: font
:imagesdir: ../media/


[role="lead"]
無停止または停止を伴う自動または手動のアップグレード方法は、構成によって異なります。可能な場合は、 System Manager を使用した自動無停止アップグレード（ ANDU ）を推奨します。

* 無停止アップグレード * + 無停止アップグレードでは、 ONTAP の高可用性（ HA ）フェイルオーバーテクノロジを利用して、アップグレード中もクラスタがデータを引き続き提供できるようにします。無停止アップグレードプロセスには 2 種類あります。

* _batch_updates + バッチ更新では、クラスタが複数の HA ペアを含む複数のバッチに分けられます。最初のバッチで半数のノードをアップグレードし、続けてそれぞれの HA パートナーをアップグレードします。その後、残りのバッチについても処理が順番に繰り返されます。
* ローリング更新 + ローリング更新では、ノードを 1 つずつオフラインにしてアップグレードし、その間そのノードのストレージをパートナーにフェイルオーバーします。ノードのアップグレードが完了したら、パートナーノードから元の所有者ノードに制御を戻し、今度はパートナーノードで同じ処理を行います。HA ペアのそれぞれについて、すべての HA ペアがターゲットリリースに切り替わるまで順番にアップグレードを行います。+ * 注：ソフトウェアのアップグレードには、原因 サービスの中断を伴わないソフトウェアのアップグレードという用語がよく使用されており、これは「無停止アップグレード」と同義になっています。ONTAP 9 のアップグレードでは、無停止アップグレードに使用できるプロセスの 1 つとして、 _rolling update_is を使用できます。


無停止アップグレードは、 _automated _or_manual_method を使用して実行できます。

* * 自動無停止アップグレード（ ANDU ） *
+
** 管理者が ANDU を開始すると、 ONTAP はターゲット ONTAP イメージを各ノードに自動的にインストールし、クラスタの無停止アップグレードが可能なことを確認するためにクラスタコンポーネントを検証してから、バッチ更新またはローリング更新をバックグラウンドで実行します。
+
*** 8 ノード以上のクラスタの場合は、一括更新がデフォルトです。
*** ローリング更新は、 8 ノード未満のクラスタのデフォルトです。8 ノード以上のクラスタの場合は、ローリング更新を明示的に選択することもできます。


** NDU は、 System Manager または ONTAP コマンドラインインターフェイス（ CLI ）を使用して実行できます。お使いの構成で利用できる場合は、 System Manager を使用した ANDU のアップグレードが推奨されます。


* * 手動による無停止アップグレード *
+
** 管理者は、各ノードのクラスタコンポーネントのアップグレードの準備ができていることを手動で確認してから、フォアグラウンドでローリング更新プロセスの手順を手動で実行する必要があります。
** 手動の無停止アップグレードは、 ONTAP CLI を使用して実行します。
** 手動方式は、構成で ANDU がサポートされていない場合にのみ使用してください。




* 停止を伴うアップグレード * + 停止を伴うアップグレードでは、各 HA ペアのストレージフェイルオーバーを無効にしてから、各ノードを 1 つずつリブートします。停止を伴うアップグレードは、無停止アップグレードよりも短時間で実行でき、完了までの手順も少なくなります。ただし、停止を伴うアップグレードを実行するには、アップグレード中にクラスタをオフラインにする必要があります。SAN 環境を使用している場合は、停止を伴うアップグレードを実行する前に、すべての SAN クライアントをシャットダウンまたは一時停止できるように準備しておく必要があります。停止を伴うアップグレードは、 ONTAP CLI を使用して実行します。



== MetroCluster 以外の構成用のメソッド

2 ノード以上のクラスタでは、次のアップグレード方式のいずれかを推奨される使用方法で使用できます。

* xref:task_upgrade_andu_sm.html[System Manager を使用した自動無停止アップグレード]
* xref:task_upgrade_andu_cli.html[CLI を使用した自動無停止アップグレード]
* xref:task_upgrade_nondisruptive_manual_cli.html[CLI を使用して手動で無停止]
* xref:task_updating_an_ontap_cluster_disruptively.html[CLI を使用して手動でシステムを停止]


シングルノードクラスタではいずれかの停止を伴う方法を使用する必要がありますが、自動化の方法を推奨します。

* xref:task_upgrade_disruptive_automated_cli.html[CLI を使用した自動停止]
* xref:task_updating_an_ontap_cluster_disruptively.html[CLI を使用して手動でシステムを停止]




== MetroCluster 構成のメソッド

各構成で使用可能なアップグレード方式は、推奨される使用方法の順に記載されています。

[cols="3*"]
|===
| ONTAP バージョン | ノードの数 | アップグレード方法 


| 9.3 以降 | 2/4  a| 
* xref:task_upgrade_andu_sm.html[System Manager を使用した自動無停止アップグレード]
* xref:task_upgrade_andu_cli.html[CLI を使用した自動無停止アップグレード]
* xref:task_updating_an_ontap_cluster_disruptively.html[CLI を使用して手動でシステムを停止]




| 9.3 以降 | 8.  a| 
* xref:task_upgrade_andu_cli.html[CLI を使用した自動無停止アップグレード]
* xref:task_updating_a_four_or_eight_node_mcc.html[CLI を使用して手動で無停止]
* xref:task_updating_an_ontap_cluster_disruptively.html[CLI を使用して手動でシステムを停止]




| 9.2 以前 | 2.  a| 
* xref:task_updating_a_two_node_metrocluster_configuration_in_ontap_9_2_and_earlier.html[CLI を使用して手動で無停止（ 2 ノードクラスタの場合]
* xref:task_updating_an_ontap_cluster_disruptively.html[CLI を使用して手動でシステムを停止]




| 9.2 以前 | 4/8  a| 
* xref:task_updating_a_four_or_eight_node_mcc.html[CLI を使用して手動で無停止]
* xref:task_updating_an_ontap_cluster_disruptively.html[CLI を使用して手動でシステムを停止]




| 9.0 以降 | 4 、 8 （パッチのみ） | xref:task_upgrade_andu_sm.html[System Manager を使用した自動無停止アップグレード] 


| 9.2 以前 | 2 、 4 、 8 （パッチのみ） | xref:task_upgrade_andu_sm.html[System Manager を使用した自動無停止アップグレード] 
|===