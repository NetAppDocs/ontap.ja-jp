---
permalink: upgrade/concept_upgrade_requirements_for_metrocluster_configurations.html 
sidebar: sidebar 
keywords: ontap, upgrade, update, requirements, metrocluster, configuration, mcc, general, normal, operations, switchover 
summary: MetroCluster構成上の ONTAP ソフトウェアをアップグレードする前に、クラスタが特定の要件を満たしている必要があります。 
---
= MetroCluster構成のONTAPアップグレード要件を確認する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
MetroCluster構成上の ONTAP ソフトウェアをアップグレードする前に、クラスタが特定の要件を満たしている必要があります。

* 両方のクラスタで同じバージョンのONTAPを実行する必要があります。
+
versionコマンドを使用すると、ONTAPのバージョンを確認できます。

* ONTAPのメジャー アップグレードを実行する場合は、MetroCluster構成を通常モードにする必要があります。
* ONTAPのパッチ アップグレードを実行する場合は、MetroCluster構成は通常モードとスイッチオーバー モードのどちらにもできます。
* 2ノードのクラスタを除き、すべての構成で両方のクラスタを同時に無停止アップグレードできます。
+
2ノードのクラスタを無停止アップグレードする場合は、クラスタのノードを1つずつアップグレードする必要があります。

* 両方のクラスタ内のアグリゲートのRAIDステータスがresyncingにならないようにしてください。
+
MetroCluster修復中、ミラーリングされたアグリゲートは再同期されます。 `storage aggregate plex show -in-progress true`コマンドを使用して、MetroCluster構成がこの状態にあるかどうかを確認できます。同期中のアグリゲートがある場合は、再同期が完了するまでアップグレードを実行しないでください。

+
 `storage aggregate plex show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/storage-aggregate-plex-show.html["ONTAPコマンド リファレンス"^]を参照してください。

* アップグレードの実行中はネゴシエート スイッチオーバー処理が失敗します。
+
アップグレード処理またはリバート処理時の問題を回避するために、両方のクラスタで同じバージョンのONTAPを実行しているとき以外は、アップグレードまたはリバート処理中に計画外のスイッチオーバーを実行しないでください。





== MetroCluster通常運用時の構成要件

* ソースSVM LIFが稼働し、ホーム ノードに配置されている必要があります。
+
デスティネーションSVMのデータLIFについては、稼働し、ホーム ノードに配置されている必要はありません。

* ローカル サイトにあるすべてのアグリゲートがオンラインになっている必要があります。
* ローカル クラスタのSVMが所有するルート ボリュームとデータ ボリュームがすべてオンラインになっている必要があります。




== MetroClusterスイッチオーバー時の構成要件

* すべてのLIFが稼働し、ホーム ノードに配置されている必要があります。
* DRサイトにあるルート アグリゲートを除く、すべてのアグリゲートがオンラインになっている必要があります。
+
DRサイトにあるルート アグリゲートは、スイッチオーバーの特定のフェーズ中はオフラインになります。

* すべてのボリュームがオンラインになっている必要があります。


.関連情報
link:task_verifying_the_networking_and_storage_status_for_metrocluster_cluster_is_ready.html["MetroCluster構成のネットワークとストレージのステータスの確認"]
