---
permalink: upgrade/task_enforcing_sha_2_on_user_account_passwords_dot_9_0_upgrade_guide.html 
sidebar: sidebar 
keywords: ontap, upgrade, enforcing, enforce, sha-e, administrator, account, passwords 
summary: ONTAP 9.0 より前のバージョンで作成した管理者アカウントでは、パスワードが手動で変更されるまで、アップグレード後も引き続き MD5 パスワードが使用されます。MD5 は SHA-2 よりも安全性が低くなります。そのため、アップグレード後は、 MD5 アカウントのユーザに対してパスワードを変更してデフォルトの SHA-512 ハッシュ関数を使用するよう促す必要があります。 
---
= 管理者アカウントパスワードでの SHA-2 の適用
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.0 より前のバージョンで作成した管理者アカウントでは、パスワードが手動で変更されるまで、アップグレード後も引き続き MD5 パスワードが使用されます。MD5 は SHA-2 よりも安全性が低くなります。そのため、アップグレード後は、 MD5 アカウントのユーザに対してパスワードを変更してデフォルトの SHA-512 ハッシュ関数を使用するよう促す必要があります。

パスワードハッシュ機能を使用すると、次の操作を実行できます。

* 指定したハッシュ関数に一致するユーザアカウントを表示する。
* 指定したハッシュ関数（ MD5 など）を使用するアカウントを期限切れにして、次回のログイン時にユーザにパスワードの変更を強制します。
* 指定したハッシュ関数を使用するパスワードが指定されたアカウントをロックする。
* ONTAP 9 より前のリリースにリバートする場合は、クラスタ管理者のパスワードを以前のリリースでサポートされているハッシュ関数（ MD5 ）と互換性があるパスワードにリセットします。


ONTAP では、 NetApp Manageability SDK （ security-login-create および security-login-modify-password ）を使用して、あらかじめハッシュ化した SHA-2 パスワードだけを受け入れます。

https://library.netapp.com/ecmdocs/ECMLP2492508/html/GUID-8162DC06-C922-4D03-A8F7-0BA76F6939CB.html["管理性の向上"]

. MD5 管理者アカウントを SHA-512 パスワードハッシュ関数に移行します。
+
.. すべての MD5 管理者アカウントを期限切れにします。「 securitylogin expire-password -vserver * -username * -hash-function md5 」
+
これにより、 MD5 アカウントのユーザは、次回のログイン時にパスワードの変更が必要になります。

.. MD5 アカウントのユーザに、コンソールまたは SSH セッションを使用してログインするよう依頼します。
+
アカウントの有効期限が切れていることが検出され、ユーザにパスワードの変更を求めるメッセージが表示されます。変更されたパスワードでは、デフォルトで SHA-512 が使用されます。



. ユーザが一定期間ログインしていないためにパスワードが変更されない MD5 アカウントについては、強制的にアカウントを移行します。
+
.. まだ MD5 ハッシュ関数を使用しているアカウントをロックします（ advanced 権限レベル）。 security login expire-password -vserver * -username * -hash-function md5 -lock-after integer ’
+
lock-after で指定した日数が経過すると、ユーザは MD5 アカウントにアクセスできなくなります。

.. ユーザがパスワードを変更できる状態になったら、アカウントのロックを解除します。 security login unlock -vserver vserver_name -username user_name
.. ユーザに、コンソールまたは SSH セッションからアカウントにログインし、表示される指示に従ってパスワードを変更するよう促します。



