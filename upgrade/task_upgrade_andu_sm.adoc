---
sidebar: sidebar 
permalink: upgrade/task_upgrade_andu_sm.html 
keywords: netapp, ontap, upgrade, nondisruptive, nondisruptively, non-disruptive update, nondisruptive upgrade, upgrade a cluster, shift workload between clusters, hardware platform, configuration, software image, update, update ONTAP, update software, ndu, resuming, resume, after, error, andu, automated, process 
summary: クラスタの ONTAP のバージョンは無停止で更新できます。 
---
= System Manager を使用した自動無停止アップグレード
:toc: macro
:hardbreaks:
:toclevels: 1
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/
:toc-position: content


[role="lead"]
System Manager を使用して、クラスタの ONTAP のバージョンを無停止で更新できます。

ONTAP 9.8 System Manager で利用できる、シンプルな ONTAP アップグレード機能をご確認ください。

video::xwwX8vrrmIk[youtube, width=848,height=480]
更新プロセスによってハードウェアプラットフォームと構成がチェックされ、アップグレード先の ONTAP バージョンでシステムがサポートされていることが確認されます。ONTAP は、クラスタ間のアップグレード時にワークロードを自動的に移動して、データの提供を継続します。

この手順は、指定されたバージョンの ONTAP にシステムを更新します。ターゲットリリースでハードウェアプラットフォームと構成がサポートされていることを前提としています。

image:workflow_admin_upgrade_ontap.gif["アップグレードタスクのワークフロー図"]


NOTE: 自動アップグレード中に問題が発生した場合は、 ONTAP システムマネージャで EMS メッセージと詳細を確認できます。クリック * Events & Jobs * > * Events * 。

.手順
. ソフトウェアイメージをネットワーク上の HTTP サーバまたは FTP サーバにダウンロードする場合は、ネットアップサポートサイトから、イメージを提供する HTTP サーバまたは FTP サーバ上のディレクトリにソフトウェアイメージをコピーします。
+
ソフトウェアイメージをローカルフォルダにダウンロードする場合は、ネットアップサポートサイトでソフトウェアイメージをクリックし、「 * 名前を付けて保存」を選択して、イメージを保存するローカルフォルダを選択します。

. 実行している System Manager のバージョンに応じて、次のいずれかの手順を実行します。
+
[cols="2*"]
|===
| ONTAP バージョン | 手順 


| ONTAP 9.8 以降  a| 
[* Cluster] > [Overview] をクリックします。



| ONTAP 9.5 または 9.6  a| 
[* Configuration * （設定 * ） ] > [* Cluster * （クラスタ * ） ] > [* Update * （アップデート *



| ONTAP 9.4 以前  a| 
[* Configuration * （構成 * ） ] > [* Cluster Update （クラスタの更新） ] を

|===
. 概要ペインの右隅で、をクリックします image:icon_kabob.gif["メニューアイコン"]。
. ONTAP アップデート * をクリックします。
. [ クラスタの更新 ] タブで、新しいイメージを追加するか、使用可能なイメージを選択します。
+
[cols="2*"]
|===
| 状況 | 作業 


 a| 
ローカルクライアントから新しいソフトウェアイメージを追加します

* 注： * イメージはローカルクライアントにすでにダウンロードされている必要があります。

xref:task_download_and_install_ontap_software_image.adoc[ONTAP ソフトウェアイメージをダウンロードしてインストールします]
 a| 
.. [ 利用可能なソフトウェアイメージ ] で、 [ ローカルから追加 ] をクリックします。
.. ソフトウェアイメージを保存した場所を参照し、イメージを選択して、 * 開く * をクリックします。
+
[ 開く ] をクリックすると、ソフトウェアイメージがアップロードされます。





 a| 
ネットアップサポートサイトから新しいソフトウェアイメージを追加します
 a| 
.. [ サーバーから追加 ] をクリックします。
.. Add a New Software Image ダイアログボックスに、ネットアップサポートサイトからダウンロードしたイメージを保存した HTTP サーバまたは FTP サーバの URL を入力します。
+
匿名 FTP の URL は、で指定する必要があります ftp://anonymous@ftpserver[] の形式で入力し

.. [ 追加（ Add ） ] をクリックします。




 a| 
使用可能なイメージを選択します
 a| 
表示された画像のいずれかを選択します。

|===
. 更新前の検証チェックを実行してクラスタを更新する準備ができているかどうかを確認するには、 * Validate * をクリックします。
+
クラスタコンポーネントがチェックされて更新を無停止で完了できるかどうかが検証され、エラーや警告があれば表示されます。ソフトウェアの更新前に実施する必要がある対処方法があれば、あわせて表示されます。

+

IMPORTANT: 更新を実行する前に、エラーに対して必要な対処方法をすべて実施する必要があります。警告の修復アクションは無視できますが、更新に進む前にそれらの修復アクションもすべて実行することを推奨します。

. 「 * 次へ * 」をクリックします。
. [ 更新（ Update ） ] をクリックします。
+
再度検証が実行されます。

+
** 検証が完了すると、エラーや警告があれば、続行する前に実施する必要がある対処方法と一緒にテーブルに表示されます。
** 検証が警告付きで完了した場合は、 [ 警告付き更新を続行する *] チェックボックスをオンにして、 [ 続行 *] をクリックします。
+
検証が完了し、更新が開始されたあと、エラーが発生して更新が中断される場合があります。その場合、エラーメッセージをクリックして詳細を表示し、修復アクションを実施してから更新を再開できます。





更新が完了すると、ノードがリブートし、 ONTAP System Manager のログインページが表示されます。ノードのリブートに時間がかかる場合は、ブラウザを更新する必要があります。



== 自動アップグレードプロセスでのエラー後のアップグレード（ System Manager を使用）の再開

[role="lead"]
エラーのために自動アップグレードが一時停止した場合は、エラーを解決して自動アップグレードを再開するか、または自動アップグレードをキャンセルしてプロセスを手動で完了することができます。自動アップグレードを続行する場合は、アップグレード手順を手動では実行しないでください。

. 実行している System Manager のバージョンに応じて、次のいずれかの手順を実行します。
+
** ONTAP 9.4 以前： * Configuration * > * Cluster Update * をクリックします。
** ONTAP 9.5 または 9.6 ： * Configuration * > * Cluster * > * Update * をクリックします。
** ONTAP 9.7 以降： * Cluster * > * Overview * をクリックします
+
次に、概要ペインの右隅で、青い縦の 3 つの点と、 * ONTAP Update* をクリックします。



. 自動更新を続行するか、キャンセルして手動で続行します。
+
[cols="2*"]
|===
| 状況 | 作業 


 a| 
自動アップグレードを再開します
 a| 
[* 再開 *] をクリックします。



 a| 
自動更新をキャンセルして手動で続行します
 a| 
[ キャンセル（ Cancel ） ] をクリックします。

|===

