---
sidebar: sidebar 
permalink: upgrade/task_upgrade_andu_sm.html 
keywords: system manager, netapp, ontap, upgrade, nondisruptive, nondisruptive upgrade, upgrade a cluster, configuration, software image, update, update ONTAP, update software, ndu, resuming, resume, after, error, andu, automated, process 
summary: System Managerを使用して、クラスタのONTAPのバージョンを無停止でアップグレードできます。 
---
= System Managerを使用したONTAPの自動無停止アップグレード
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
System Managerを使用して、クラスタのONTAPのバージョンを無停止でアップグレードできます。

アップグレードプロセスでは、ハードウェアプラットフォームと構成がチェックされ、アップグレード後のONTAPバージョンでシステムがサポートされているかどうかが確認されます。ONTAP は、クラスタ間のアップグレード時にワークロードを自動的に移動して、データの提供を継続します。

この手順により、指定したバージョンのONTAPにシステムがアップグレードされます。ターゲットリリースでハードウェアプラットフォームと構成がサポートされていることを前提としています。

ONTAP 9.10.1以降では、8ノード以上のクラスタのHAペアを一度に1つずつアップグレードするように選択できます。   これにより、必要に応じて、最初の HA ペアのアップグレードの問題を修正してから、後続のペアに移動できます。

image:workflow_admin_upgrade_ontap.gif["アップグレードタスクのワークフロー図"]


NOTE: 自動アップグレード中に問題が発生した場合は、 System Manager で EMS メッセージと詳細を確認できます。クリック * Events & Jobs * > * Events * 。

.手順
. ソフトウェアイメージをネットワーク上の HTTP サーバまたは FTP サーバにダウンロードする場合は、NetApp Support Siteから、イメージを提供する HTTP サーバまたは FTP サーバ上のディレクトリにソフトウェアイメージをコピーします。
+
ソフトウェアイメージをローカルフォルダにダウンロードする場合は、NetApp Support Siteでソフトウェアイメージをクリックし、「 * 名前を付けて保存」を選択して、イメージを保存するローカルフォルダを選択します。

. 実行している ONTAP のバージョンに応じて、次のいずれかの手順を実行します。
+
|===


| ONTAPバージョン | 手順 


| ONTAP 9.8以降  a| 
[* Cluster] > [Overview] をクリックします。



| ONTAP 9.5 、 9.6 、および 9.7  a| 
[* Configuration * （設定 * ） ] > [* Cluster * （クラスタ * ） ] > [* Update * （アップデート *



| ONTAP 9.4 以前  a| 
[* Configuration * （構成 * ） ] > [* Cluster Update （クラスタの更新） ] を

|===
. 概要ペインの右隅で、をクリックします image:icon_kabob.gif["メニューアイコン"]。
. ONTAP アップデート * をクリックします。
. [ クラスタの更新 ] タブで、新しいイメージを追加するか、使用可能なイメージを選択します。
+
|===


| 状況 | 作業 


 a| 
ローカルクライアントから新しいソフトウェアイメージを追加します

* 注： * イメージはローカルクライアントにすでにダウンロードされている必要があります。

link:download-software-image.html["ONTAPソフトウェアイメージのダウンロード"]
 a| 
.. [ 利用可能なソフトウェアイメージ ] で、 [ ローカルから追加 ] をクリックします。
.. ソフトウェアイメージを保存した場所を参照し、イメージを選択して、 * 開く * をクリックします。
+
[ 開く ] をクリックすると、ソフトウェアイメージがアップロードされます。





 a| 
NetApp Support Siteから新しいソフトウェアイメージを追加します
 a| 
.. [ サーバーから追加 ] をクリックします。
.. Add a New Software Image ダイアログボックスに、NetApp Support Siteからダウンロードしたイメージを保存した HTTP サーバまたは FTP サーバの URL を入力します。
+
匿名 FTP の URL は、で指定する必要があります ftp://anonymous@ftpserver[] の形式で入力し

.. [ 追加（ Add ） ] をクリックします。




 a| 
使用可能なイメージを選択します
 a| 
表示された画像のいずれかを選択します。

|===
. [検証]*をクリックしてアップグレード前の検証チェックを実行し、クラスタをアップグレードする準備ができているかどうかを確認します。
+
クラスタコンポーネントがチェックされてアップグレードを無停止で完了できるかどうかが検証され、エラーや警告があれば表示されます。ソフトウェアの更新前に実施する必要がある対処方法があれば、あわせて表示されます。

+

IMPORTANT: アップグレードを開始する前に、エラーに対して必要な修復アクションをすべて実行する必要があります。警告に対する修復アクションは無視できますが、アップグレードに進む前にすべての修復アクションを実行することを推奨します。

. 「 * 次へ * 」をクリックします。
. [ 更新（ Update ） ] をクリックします。
+
再度検証が実行されます。

+
** 検証が完了すると、エラーや警告があれば、続行する前に実施する必要がある対処方法と一緒にテーブルに表示されます。
** 検証が警告付きで完了した場合は、「 * 警告付きで更新 * 」を選択できます。
+

NOTE: クラスタ内のすべてのHAペアのバッチアップグレードではなく、ノードのHAペアを一度に1つずつアップグレードする場合は、*[Update one HA pair at a time]*を選択します。このオプションは、 8 ノード以上のクラスタの ONTAP 9.10.1 以降でのみ使用できます。





検証が完了してアップグレードが実行中の場合、エラーが原因でアップグレードが一時停止することがあります。エラーメッセージをクリックして詳細を表示し、修復アクションを実行してからアップグレードを再開できます。

2 ノード MetroCluster システムを除く MetroCluster 構成では、ユーザが開始してコマンドラインで確認を行うと、 ONTAP のアップグレードプロセスが両方のサイト（ローカルサイトとディザスタリカバリサイト）の HA ペアで同時に開始されます。2ノードMetroClusterシステムの場合は、まずディザスタリカバリサイト（アップグレードが開始されないサイト）でアップグレードが開始されます。ディザスタリカバリサイトでアップグレードが完了すると、ローカルサイトでアップグレードが開始されます。

アップグレードが完了すると、ノードがリブートし、System Managerのログインページが表示されます。ノードのリブートに時間がかかる場合は、ブラウザを更新する必要があります。



== ビデオ : 簡単にアップグレード

ONTAP 9.8 の ONTAP アップグレード機能の簡易化についてご確認ください。

video::xwwX8vrrmIk[youtube,width=848,height=480]