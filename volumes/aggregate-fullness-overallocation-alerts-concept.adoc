---
permalink: volumes/aggregate-fullness-overallocation-alerts-concept.html 
sidebar: sidebar 
keywords: how to, address, aggregate, fullness, overallocation, alerts 
summary: ONTAPは、アグリゲートのスペースが不足しそうになるとEMSメッセージを発行します。これにより、アグリゲート全体のスペースを増やすなど、是正措置を講じることができます。アラートの種類と対処方法を理解することで、データの可用性を確保できます。 
---
= アグリゲートのスペース不足アラートと過剰割り当てアラートへの対処
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPは、アグリゲートのスペースが不足しそうになるとEMSメッセージを発行します。これにより、アグリゲート全体のスペースを増やすなど、是正措置を講じることができます。アラートの種類と対処方法を理解することで、データの可用性を確保できます。

アグリゲートが_フル_と表示されている場合、ボリュームで使用可能なアグリゲート内のスペースの割合が、事前定義されたしきい値を下回っていることを意味します。アグリゲートが_割り当て超過_状態になると、ONTAPがメタデータ用および基本的なデータアクセスのサポートに使用するスペースが使い果たされたことを意味します。通常は他の目的のために予約されているスペースをアグリゲートの機能維持に使用できる場合もありますが、アグリゲートに関連付けられたボリュームのボリューム保証やデータの可用性が損なわれる可能性があります。

過剰割り当ては、論理的または物理的な割り当てのいずれかです。_論理的過剰割り当て_とは、ボリュームギャランティなどの将来のスペースコミットメントのために予約されたスペースが、別の目的に使用されていることを意味します。_物理的過剰割り当て_とは、アグリゲートで使用できる物理ブロックが不足していることを意味します。この状態のアグリゲートは、書き込みを拒否したり、オフラインになったり、コントローラーの障害を引き起こす可能性があります。

次の表では、アグリゲートの満杯状態と割り当て超過のアラート、問題に対処するために実行できるアクション、およびアクションを実行しなかった場合のリスクについて説明します。

[cols="5%,5%,5%,35%,25%,25%"]
|===
| アラートの種類 | EMSレベル | 設定可能？ | 定義 | 対処方法 | 対策を講じない場合のリスク 


 a| 
ほぼフル
 a| 
デバッグ
 a| 
注
 a| 
ボリュームに割り当てられたスペースの量（ギャランティーを含む）が、このアラートに設定されたしきい値（95%）を超えました。パーセンテージは `Used`合計からSnapshot予約サイズを差し引いた値です。
 a| 
* アグリゲートにストレージを追加する
* ボリュームの縮小または削除
* より多くのスペースを持つ別のアグリゲートにボリュームを移動する
* ボリューム保証を削除する（ `none`に設定する）

 a| 
書き込み処理やデータ可用性に対するリスクはまだありません。



 a| 
フル
 a| 
デバッグ
 a| 
注
 a| 
ファイルシステムがこのアラートに設定されたしきい値（98%）を超えました。パーセンテージは `Used`合計からSnapshot予約サイズを差し引いた値です。
 a| 
* アグリゲートにストレージを追加する
* ボリュームの縮小または削除
* より多くのスペースを持つ別のアグリゲートにボリュームを移動する
* ボリューム保証を削除する（ `none`に設定する）

 a| 
アグリゲート内のボリュームのボリューム保証と、それらのボリュームへの書き込み処理が危険にさらされる可能性があります。



 a| 
論理的な過剰割り当て
 a| 
SVC エラー
 a| 
注
 a| 
ボリューム用に予約されたスペースがいっぱいになっていることに加えて、メタデータに使用されるアグリゲート内のスペースも使い果たされています。
 a| 
* アグリゲートにストレージを追加する
* ボリュームの縮小または削除
* より多くのスペースを持つ別のアグリゲートにボリュームを移動する
* ボリューム保証を削除する（ `none`に設定する）

 a| 
アグリゲート内のボリュームのボリューム保証と、それらのボリュームへの書き込み処理が危険にさらされます。



 a| 
物理的な過剰割り当て
 a| 
ノード エラー
 a| 
注
 a| 
アグリゲートに書き込める物理ブロックが不足しています。
 a| 
* アグリゲートにストレージを追加する
* ボリュームの縮小または削除
* より多くのスペースを持つ別のアグリゲートにボリュームを移動する

 a| 
アグリゲート内のボリュームへの書き込み操作はリスクにさらされており、データの可用性も損なわれる可能性があります。アグリゲートがオフラインになる可能性があります。極端な場合には、ノードに障害が発生する可能性があります。

|===
アグリゲートのしきい値を超えるたびに、使用率の上昇または下降に関係なく、EMSメッセージが生成されます。アグリゲートの使用率がしきい値を下回ると、 `aggregate ok`EMSメッセージが生成されます。
