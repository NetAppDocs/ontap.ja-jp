---
permalink: volumes/aggregate-fullness-overallocation-alerts-concept.html 
sidebar: sidebar 
keywords: how to, address, aggregate, fullness, overallocation, alerts 
summary: ONTAP では、アグリゲートがスペース不足になると、該当するアグリゲートにスペースを追加して対処できるように EMS メッセージが表示されます。アラートの種類とその対処方法を理解しておくと、データの可用性を維持するのに役立ちます。 
---
= アグリゲートのスペース不足アラートと過剰割り当てアラートに対処します
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP では、アグリゲートがスペース不足になると、該当するアグリゲートにスペースを追加して対処できるように EMS メッセージが表示されます。アラートの種類とその対処方法を理解しておくと、データの可用性を維持するのに役立ちます。

アグリゲートが _full_と みなされるのは、アグリゲート内のボリュームで使用可能なスペースの割合が事前に定義されたしきい値を下回った場合です。アグリゲートが過剰割り当ての状態になると、メタデータを格納したり基本的なデータアクセスをサポートしたりするために ONTAP で使用されるスペースが不足した状態になります。他の目的のために確保されているスペースを使用してアグリゲートを引き続き利用できる場合もありますが、アグリゲートに関連付けられているボリュームのボリュームギャランティやデータの可用性を維持できなくなるリスクがあります。

過剰割り当てには論理的なものと物理的なものがあります。_ 論理的な過剰割り当て _ は、ボリュームギャランティなどの以降のスペースコミットメントを考慮してリザーブされたスペースが別の目的に使用されていることを示します。_ 物理的な過剰割り当て _ は、アグリゲートで使用する物理ブロックが不足した状態を示します。この状態のアグリゲートには、書き込みができなくなったり、オフラインになったりするリスクがあり、これが原因でコントローラが停止してしまう可能性もあります。

次の表に、アグリゲートのスペース不足アラートと過剰割り当てアラートについて、問題への対処方法と対処しなかった場合のリスクを示します。

[cols="5%,5%,5%,35%,25%,25%"]
|===
| アラートの種類 | EMS レベル | 設定可能かどうか | 定義（ Definition ） | 対処方法 | 対処しなかった場合はリスクがあります 


 a| 
ほぼフルです
 a| 
デバッグ
 a| 
N
 a| 
ボリュームに割り当てられたスペース量（ギャランティも含む）がこのアラートのしきい値（ 95% ）を超えています。この割合は、「 Used 」の合計から Snapshot リザーブのサイズを引いた値です。
 a| 
* アグリゲートにストレージを追加しています
* ボリュームを縮小するか削除する
* スペースが多い別のアグリゲートにボリュームを移動する
* ボリューム・ギャランティの削除（ none に設定）ボリューム・ギャランティノサクジョ（ none ニセッテイ）

 a| 
書き込み処理やデータ可用性に対する影響はまだありません。



 a| 
フル
 a| 
デバッグ
 a| 
N
 a| 
ファイルシステムがこのアラートのしきい値（ 98% ）を超えています。この割合は、「 Used 」の合計から Snapshot リザーブのサイズを引いた値です。
 a| 
* アグリゲートにストレージを追加しています
* ボリュームを縮小するか削除する
* スペースが多い別のアグリゲートにボリュームを移動する
* ボリューム・ギャランティの削除（ none に設定）ボリューム・ギャランティノサクジョ（ none ニセッテイ）

 a| 
アグリゲート内のボリュームのボリュームギャランティを維持できなくなったり、ボリュームに対する書き込み処理ができなくなったりするリスクがあります。



 a| 
論理的な過剰割り当て
 a| 
SVC エラーです
 a| 
N
 a| 
ボリューム用にリザーブされたスペースがフルの状態で、さらにメタデータ用のアグリゲートのスペースが不足しています。
 a| 
* アグリゲートにストレージを追加しています
* ボリュームを縮小するか削除する
* スペースが多い別のアグリゲートにボリュームを移動する
* ボリューム・ギャランティの削除（ none に設定）ボリューム・ギャランティノサクジョ（ none ニセッテイ）

 a| 
アグリゲート内のボリュームのボリュームギャランティを維持できなくなったり、ボリュームに対する書き込み処理ができなくなったりするリスクがあります。



 a| 
物理的な過剰割り当て
 a| 
ノードエラー
 a| 
N
 a| 
アグリゲートで書き込み可能な物理ブロックが不足しています。
 a| 
* アグリゲートにストレージを追加しています
* ボリュームを縮小するか削除する
* スペースが多い別のアグリゲートにボリュームを移動する

 a| 
アグリゲート内のボリュームに対する書き込み処理ができなくなり、データの可用性を維持できなくなるリスクがあり、アグリゲートがオフラインになる可能性もあります。最悪の場合、ノードが停止することもあります。

|===
あるアグリゲートで、フルの割合が上下してしきい値にかかるたびに、 EMS メッセージが生成されます。アグリゲートのフルレベルがしきい値を下回ると、「 aggregate ok 」という EMS メッセージが生成されます。
