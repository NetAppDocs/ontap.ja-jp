---
permalink: volumes/change-maximum-number-files-allowed-concept.html 
sidebar: sidebar 
keywords: considerations, changing, maximum number of files, allowed, flexvol volume 
summary: FlexVol には、収容可能なファイルの最大数があります。ボリュームに収容可能なファイルの最大数は変更できますが、その前に、この変更がボリュームにどのような影響を及ぼすかを理解しておく必要があります。 
---
= FlexVol ボリューム上で許可される最大ファイル数の変更に関する考慮事項
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FlexVol には、収容可能なファイルの最大数があります。ボリュームに収容可能なファイルの最大数は変更できますが、その前に、この変更がボリュームにどのような影響を及ぼすかを理解しておく必要があります。

データが膨大な数のファイルまたは大容量のディレクトリを必要とする場合、 ONTAP のファイル容量またはディレクトリ容量を拡張できます。ただし、これらの容量を拡張する前に、制限事項と注意事項を理解しておく必要があります。

ボリュームに含めることができるファイル数は、ボリューム内の inode の数によって決まります。a_inode_は ' ファイルに関する情報を含むデータ構造ですボリュームには、プライベート inode とパブリック inode の両方があります。パブリック inode はユーザに表示されるファイルで使用され、プライベート inode は ONTAP で内部的に使用されるファイルで使用されます。変更できるのは、ボリュームのパブリック inode の最大数のみです。プライベート inode の数は変更できません。

ONTAP は、ボリュームサイズに基づいて、新しく作成するボリュームのパブリック inode の最大数をボリュームサイズ 32KB あたり 1 個の inode に自動的に設定します。管理者によって直接、または ONTAP のオートサイズ機能を通じてボリュームのサイズが拡張された場合、ボリュームサイズが 32KB あたり少なくとも 1 個の inode を確保するために、 ONTAP は必要に応じてパブリック inode の最大数も引き上げます。 ボリュームのサイズが約 680GB に達するまで。

ONTAP 9.13.1より前のバージョンでは、ボリュームのサイズを680GBよりも大きくしても、ONTAPでは22、369、621個を超えるinodeは自動的に作成されないため、inodeは増えません。ボリュームサイズに対するデフォルト数を超えるファイルが必要な場合は、 volume modify コマンドを使用してボリュームの最大 inode 数を増やすことができます。

ONTAP 9.13.1以降では、inodeの最大数は引き続き増加するため、ボリュームが680GBを超えていても、32KBのボリュームスペースにつきinodeが1つになります。この増加は、ボリュームがinodeの最大値である2、147、483,632に達するまで続きます。

パブリック inode の最大数は削減することもできます。パブリックinodeの数を減らすと、inodeに割り当てられるスペースの量は変化しますが、パブリックinodeファイルが消費できるスペースの最大量は減少します。inode用に割り当てられたスペースがボリュームに戻されることはありません。したがって、inodeの最大数を現在割り当てられているinodeの数より少なくしても、割り当てられているinodeで使用されているスペースは返されません。

.詳細情報
* xref:display-file-inode-usage-task.html[ファイルまたは inode の使用量を表示します]

