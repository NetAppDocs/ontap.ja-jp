---
permalink: volumes/configure-automatic-provide-space-when-full-task.html 
sidebar: sidebar 
keywords: configure, volumes, automatically, provide, space, full, increase, size, automatic, grow, autogrow 
summary: FlexVol ボリュームがいっぱいになると、ONTAP はいくつかの異なる方法のいずれかを使用して、ボリュームに空き領域を自動的に提供しようとします。 
---
= ボリュームがフルになったときにスペースを自動的に確保するための設定
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPでは、FlexVolがフルになったときに、さまざまな方法を使用してボリュームの空きスペースを自動的に増やすことができます。アプリケーションやストレージ アーキテクチャの要件に応じて、ONTAPで使用できる方法とその順序を選択できます。

.タスク概要
ONTAPでは、次のいずれかまたは両方の方法を使用して、フルになったボリュームの空きスペースを自動的に増やすことができます。

* ボリュームのサイズを増やします（_autogrow_ と呼ばれます）。
+
この方法は、ボリュームの包含アグリゲートに、より大きいボリュームに対応できる十分なスペースがある場合に便利です。ONTAPを設定して、ボリュームの最大サイズを設定することができます。拡張は、ボリュームに書き込まれるデータ量と現在使用中のスペースの比率、およびしきい値設定に基づいて、自動的にトリガーされます。

+
スナップショットの作成をサポートするためにボリュームの自動拡張はトリガーされません。スナップショットを作成しようとした際に十分なスペースがない場合は、ボリュームの自動拡張が有効であってもスナップショットの作成は失敗します。

* スナップショット、FlexClone ファイル、または FlexClone LUN を削除します。
+
例えば、クローン ボリュームまたはLUN内のスナップショットにリンクされていないスナップショットを自動的に削除するようにONTAPを設定したり、ONTAPが最初に削除するスナップショット（最も古いスナップショットまたは最も新しいスナップショット）を定義したりできます。また、ボリュームがほぼいっぱいになったときや、ボリュームのSnapshotリザーブがほぼいっぱいになったときなど、ONTAPがスナップショットの削除を開始するタイミングを指定することもできます。



両方の方法を有効にする場合は、ボリュームがフルに近くなったときにONTAPが最初にどちらの方法を試行するかを指定できます。最初の方法でボリュームの追加スペースが十分に確保されない場合、ONTAPは次にもう一方の方法を試行します。

デフォルトでは、ONTAPはまずボリュームのサイズを拡張しようとします。スナップショットを削除すると復元できないため、ほとんどの場合、デフォルトの設定が推奨されます。ただし、可能な限りボリュームのサイズの拡張を避けたい場合は、ボリュームのサイズを拡張する前にスナップショットを削除するようにONTAPを設定できます。

.手順
. ONTAPボリュームがいっぱいになったときにONTAPでボリュームのサイズを拡張するように設定するには、 `volume autosize`コマンドを `grow`mode付きで使用して、ボリュームの自動拡張機能を有効にします。 `volume autosize`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-autosize.html["ONTAPコマンド リファレンス"^]を参照してください。
+
ボリュームが拡張されると、関連付けられているアグリゲートの空きスペースが消費されることに注意してください。必要が生じてボリュームを拡張する場合は、関連付けられているアグリゲートの空きスペースを監視し、必要に応じて追加する必要があります。

. ボリュームがいっぱいになったときに ONTAP でスナップショット、FlexClone ファイル、または FlexClone LUN を削除する場合は、それらのオブジェクト タイプに対して自動削除を有効にします。
. ボリュームの自動拡張機能と1つ以上の自動削除機能の両方を有効にした場合は、 `volume modify`コマンドで `-space-mgmt-try-first`オプションを指定して、ONTAPがボリュームに空き領域を提供するために使用する最初の方法を選択します。link:https://docs.netapp.com/us-en/ontap-cli/volume-modify.html["ONTAPコマンド リファレンス"^]の `volume modify`の詳細を確認してください。
+
最初にボリュームのサイズを増やすことを指定するには（デフォルト）、 `volume_grow`を使用します。最初にスナップショットを削除することを指定するには、 `snap_delete`を使用します。


