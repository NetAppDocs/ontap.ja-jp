---
permalink: volumes/configure-automatic-provide-space-when-full-task.html 
sidebar: sidebar 
keywords: configure, volumes, automatically, provide, more, space, when, full 
summary: FlexVol では、 ONTAP がフルに近くなったときに、さまざまな方法でボリュームの空きスペースを自動的に増やすことができます。ONTAP で使用できる方法、およびアプリケーションとストレージアーキテクチャの要件に応じた順序を選択します。 
---
= ボリュームがフルになったときにスペースを自動的に確保するようにボリュームを設定します
:icons: font
:imagesdir: ../media/


[role="lead"]
FlexVol では、 ONTAP がフルに近くなったときに、さまざまな方法でボリュームの空きスペースを自動的に増やすことができます。ONTAP で使用できる方法、およびアプリケーションとストレージアーキテクチャの要件に応じた順序を選択します。

ONTAP では、ボリュームがフルになったときに、次のいずれかまたは両方の方法を使用して空きスペースを自動的に増やすことができます。

* ボリュームのサイズを増やす（ _autogrow_ ）。
+
この方法は、ボリュームの包含アグリゲートに、より大容量のボリュームに対応できる十分なスペースがある場合に便利です。ボリュームの最大サイズは ONTAP で設定できます。拡張は、ボリュームに書き込まれるデータ量と現在使用されているスペースの量、およびしきい値設定に基づいて自動的にトリガーされます。

+
自動拡張は、 Snapshot コピーの作成時にはトリガーされません。自動拡張が有効になっていても、十分なスペースがないと Snapshot コピーの作成は失敗します。

* Snapshot コピー、 FlexClone ファイル、または FlexClone LUN を削除する。
+
たとえば、クローンボリュームや LUN の Snapshot コピーにリンクされていない Snapshot コピーを自動的に削除するように ONTAP を設定したり、古い Snapshot コピーや新しい Snapshot コピーから ONTAP で削除する Snapshot コピーを定義したりできます。また、ボリュームがフルに近くなったときやボリュームの Snapshot リザーブがフルに近づいたときなど、 ONTAP で Snapshot コピーの削除が開始されるタイミングを確認することもできます。



両方 ONTAP の方法を有効にする場合、ボリュームがフルに近くなったときに最初にどちらの方法を試行するかを指定できます。最初の方法でボリュームの追加のスペースが十分に確保されない場合は、次に ONTAP がもう一方の方法を試行します。

デフォルトでは、 ONTAP は最初にボリュームサイズの拡張を試行します。削除した Snapshot コピーはリストアできないため、通常はデフォルトの設定が推奨されます。ただし、可能なかぎりボリュームのサイズを拡張しないようにする必要がある場合は、ボリュームサイズを拡張する前に Snapshot コピーを削除するように ONTAP を設定できます。

.手順
. ボリュームがフルに近くなったときにボリュームサイズの拡張を試みるように ONTAP に設定するには、 volume autosize コマンドで「 grow 」モードを指定して、ボリュームの自動拡張機能を有効にします。
+
ボリュームが拡張される際には、関連付けられているアグリゲートの空きスペースが使用されることに注意してください。スペースが必要なときは常にボリュームを拡張して対処する場合は、関連付けられているアグリゲートの空きスペースを監視し、必要に応じて追加する必要があります。

. ボリュームがフルに近くなったときに ONTAP で Snapshot コピー、 FlexClone ファイル、または FlexClone LUN を削除するように設定するには、該当するタイプのオブジェクトの自動削除を有効にします。
. ボリュームの自動拡張機能と 1 つ以上の自動削除機能の両方を有効にした場合は 'volume modify コマンドで -space-mgmt-try-first オプションを使用して ' ボリュームの空きスペースを確保するために ONTAP で最初に使用する方法を選択します
+
最初にボリュームのサイズを増やすように指定するには ( デフォルト ) 'volume_grow を使用します最初に Snapshot コピーの削除を指定するには 'Snap _ delete を使用します


