---
permalink: volumes/df-command-file-size-concept.html 
sidebar: sidebar 
keywords: how, df command, accounts for file size 
summary: df コマンドでスペース使用量が報告される方法は、クォータが qtree を含むボリュームに対して有効であるか無効であるか、 qtree 内のクォータ使用量が追跡されているかの 2 つの条件によって異なります。 
---
= df コマンドによるファイルサイズの表示
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
「 d f 」コマンドでスペース使用量を報告する方法は、クォータが qtree を含むボリュームに対して有効になっているか無効になっているか、および qtree 内のクォータ使用量が追跡されているかどうかという 2 つの条件によって異なります。

qtree を含むボリュームに対してクォータが有効になっていて、その qtree 内のクォータ使用量が追跡される場合、「 d f 」コマンドで報告されるスペース使用量は、クォータレポートの値と同じになります。この場合、クォータ使用量では、ディレクトリ、 ACL 、ストリームディレクトリ、およびメタファイルによって使用されるブロックが除外されます。

ボリュームでクォータが有効になっていない場合、または qtree にクォータルールが設定されていない場合、報告されるスペース使用量には、ボリューム内の他の qtree を含むボリューム全体のディレクトリ、 ACL 、ストリームディレクトリ、およびメタファイルによって使用されるブロックが含まれます。この場合、「 f 」コマンドで報告されるスペース使用量は、クォータの追跡時に報告される想定値よりも大きくなります。

クォータ使用量が追跡される qtree のマウントポイントから「 d f 」コマンドを実行した場合、コマンド出力には、クォータレポートの値と同じスペース使用量が表示されます。ほとんどの場合、ツリークォータルールにハードディスク制限が設定されている場合、「 d 」コマンドによって報告される合計サイズはディスク制限と等しく、使用可能なスペースはクォータディスク制限とクォータ使用量の違いと等しくなります。

ただし、場合によっては、「 d f 」コマンドで報告される使用可能なスペースは、ボリューム全体で使用可能なスペースと等しくなることがあります。この状況は、 qtree にハードディスク制限が設定されていない場合に発生することがあります。ONTAP 9.9..1 以降では、ボリューム全体で使用可能なスペースが、ツリーの残りのクォータスペースよりも少なくなった場合にも発生することがあります。これらのいずれかの条件が発生した場合、「 d f 」コマンドで報告される合計サイズは、 qtree 内で使用されるクォータと、 FlexVol ボリューム内で使用可能なスペースに等しい合成値になります。

[NOTE]
====
合計サイズは、 qtree ディスクの制限サイズでもボリュームの設定サイズでもありません。また、他の qtree 内の書き込みアクティビティや、バックグラウンドのストレージ効率化アクティビティによっても異なります。

====
.で使用されているスペース使用量の例 `df` コマンドとクォータレポート
次のクォータレポートには、 qtree Alice の場合はディスク制限が 1 GB 、 qtree bob の場合は 2 GB 、 qtree Project1 の場合は制限がないことが示されています。

[listing]
----
C1_vsim1::> quota report -vserver vs0
Vserver: vs0
                                    ----Disk----  ----Files-----   Quota
Volume   Tree      Type    ID        Used  Limit    Used   Limit   Specifier
-------  --------  ------  -------  -----  -----  ------  ------   ---------
vol2     alice     tree    1
                                  502.0MB    1GB       2       -   alice
vol2     bob       tree    2
                                   1003MB    2GB       2       -   bob
vol2     project1  tree    3
                                  200.8MB      -       2       -   project1
vol2               tree    *           0B      -       0       -   *
4 entries were displayed.
----
次の例では、 Alice と Bob の qtree に対する「 f 」コマンドの出力に、クォータレポートと同じ使用済みスペース、およびディスク制限と同じ合計サイズ（ 1M ブロック）が表示されています。これは、 alice と bob の qtree のクォータルールにディスク制限が定義されており、ボリュームの使用可能スペース（ 1211MB ）が qtree alice （ 523MB ）と qtree bob （ 1045MB ）のツリークォータスペースよりも大きいためです。

[listing]
----
linux-client1 [~]$ df -m /mnt/vol2/alice
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      1024   502       523  50% /mnt/vol2

linux-client1 [~]$ df -m /mnt/vol2/bob
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      2048  1004      1045  50% /mnt/vol2
----
次の例では、 qtree Project1 の「 d 」コマンドの出力で、クォータレポートと同じ使用済みスペースが報告されています。 ただし、合計サイズは、ボリューム内の使用可能なスペースを qtree Project1 （ 201 MB ）のクォータ使用量に合計で 1412 MB に加算することで合成されます。これは、 qtree Project1 のクォータルールにディスクの制限がないためです。

[listing]
----
linux-client1 [~]$ df -m /mnt/vol2/project1
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      1412   201      1211  15% /mnt/vol2
----
[NOTE]
====
次の例は、ボリューム全体の「 df 」コマンドの出力が、 Project1 と同じ使用可能なスペースを報告する方法を示しています。

[listing]
----
linux-client1 [~]$ df -m /mnt/vol2
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      2919  1709      1211  59% /mnt/vol2
----
====