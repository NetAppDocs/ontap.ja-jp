---
permalink: volumes/df-command-file-size-concept.html 
sidebar: sidebar 
keywords: df, command, file, size, reporting, reports, space, usage, qtree, quota 
summary: df コマンドでスペース使用量を報告する方法は、クォータ設定によって異なります。 
---
= dfコマンドによるファイル サイズの表示
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
 `df`コマンドでスペース使用量を報告する方法は、qtreeを含むボリュームに対してクォータが有効か無効か、およびqtree内のクォータ使用量が追跡されているかどうかという2つの条件によって異なります。

qtreeを含むボリュームに対してクォータが有効になっており、qtree内のクォータ使用量が追跡されている場合、 `df`コマンドによって報告されるスペース使用量は、クォータレポートで指定された値と等しくなります。この場合、クォータ使用量には、ディレクトリ、ACL、ストリームディレクトリ、およびメタファイルによって使用されるブロックは含まれません。

ボリュームでクォータが有効になっていない場合、またはqtreeにクォータ ルールが設定されていない場合、報告されるスペース使用量には、ボリューム全体のディレクトリ、ACL、ストリーム ディレクトリ、およびメタファイルによって使用されているブロックが含まれます。これには、ボリューム内の他のqtreeも含まれます。このような状況では、 `df`コマンドによって報告されるスペース使用量は、クォータの追跡時に報告される予想値よりも大きくなります。

クォータ使用量が追跡されているqtreeのマウント ポイントから `df`コマンドを実行すると、コマンド出力にはクォータ レポートで指定された値と同じスペース使用量が表示されます。ほとんどの場合、ツリー クォータ ルールにハードディスク制限がある場合、 `df`コマンドによって報告される合計サイズはディスク制限と等しく、使用可能なスペースはクォータ ディスク制限とクォータ使用量の差と等しくなります。

ただし、場合によっては、 `df`コマンドによって報告される使用可能スペースが、ボリューム全体で使用可能なスペースと等しくなることがあります。これは、qtreeに対してハードディスク制限が設定されていない場合に発生することがあります。ONTAP 9.9.1以降では、ボリューム全体で使用可能なスペースが残りのツリークォータスペースよりも少ない場合にも発生することがあります。これらのいずれかの状況が発生した場合、 `df`コマンドによって報告される合計サイズは、qtree内で使用されているクォータとFlexVolボリュームで使用可能なスペースを合計した合成値になります。

[NOTE]
====
この合計サイズは、qtreeのディスク制限でもボリュームの設定サイズでもありません。また、他のqtree内での書き込みアクティビティやバックグラウンドのストレージ効率化アクティビティによっても変わってきます。

====
. `df`コマンドとクォータ レポートによって記録されたスペース使用量の例
次のクォータ レポートでは、ディスク制限について、qtree aliceは1GB、qtree bobは2GB、qtree project1は制限なしと表示されています。

[listing]
----
C1_vsim1::> quota report -vserver vs0
Vserver: vs0
                                    ----Disk----  ----Files-----   Quota
Volume   Tree      Type    ID        Used  Limit    Used   Limit   Specifier
-------  --------  ------  -------  -----  -----  ------  ------   ---------
vol2     alice     tree    1
                                  502.0MB    1GB       2       -   alice
vol2     bob       tree    2
                                   1003MB    2GB       2       -   bob
vol2     project1  tree    3
                                  200.8MB      -       2       -   project1
vol2               tree    *           0B      -       0       -   *
4 entries were displayed.
----
次の例では、qtree aliceとbobに対する `df`コマンドの出力は、クォータ レポートと同じ使用済みスペースと、ディスク制限と同じ合計サイズ（1Mブロック単位）を報告しています。これは、qtree aliceとbobのクォータ ルールにディスク制限が定義されており、ボリュームの使用可能スペース（1211MB）がqtree alice（523MB）とqtree bob（1045MB）に残っているツリー クォータ スペースよりも大きいためです。

[listing]
----
linux-client1 [~]$ df -m /mnt/vol2/alice
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      1024   502       523  50% /mnt/vol2

linux-client1 [~]$ df -m /mnt/vol2/bob
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      2048  1004      1045  50% /mnt/vol2
----
次の例では、qtree project1に対する `df`コマンドの出力は、クォータ レポートと同じ使用済みスペースを報告していますが、合計サイズはボリューム全体の使用可能スペース（1211 MB）とqtree project1のクォータ使用量（201 MB）を加算して合計1412 MBになるように合成されています。これは、qtree project1のクォータ ルールにディスク制限がないためです。

[listing]
----
linux-client1 [~]$ df -m /mnt/vol2/project1
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      1412   201      1211  15% /mnt/vol2
----
[NOTE]
====
次の例は、ボリューム全体に対する `df`コマンドの出力が、project1と同じ使用可能なスペースを報告する方法を示しています。

[listing]
----
linux-client1 [~]$ df -m /mnt/vol2
Filesystem          1M-blocks  Used Available Use% Mounted on
172.21.76.153:/vol2      2919  1709      1211  59% /mnt/vol2
----
====
この手順で説明されているコマンドの詳細については、link:https://docs.netapp.com/us-en/ontap-cli/["ONTAPコマンド リファレンス"^]を参照してください。
