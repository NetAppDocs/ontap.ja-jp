---
permalink: volumes/enable-data-compression-volume-task.html 
sidebar: sidebar 
keywords: enable, data compression, FlexVol, space, volume, volume efficiency modify 
summary: ' `volume efficiency modify`コマンドを使用してFlexVolボリュームでデータ圧縮を有効にし、圧縮タイプを割り当てることで、スペースを節約できます。' 
---
= ボリュームのデータ圧縮の有効化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
 `volume efficiency modify`コマンドを使用してFlexVolボリュームのデータ圧縮を有効にし、スペースを節約できます。また、デフォルトの圧縮タイプを使用しない場合は、ボリュームに圧縮タイプを割り当てることもできます。link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-modify.html["ONTAPコマンド リファレンス"^]の `volume efficiency modify`の詳細をご覧ください。

.開始する前に
該当するボリュームで重複排除が有効になっている必要があります。

[NOTE]
====
* 重複排除は有効にさえなっていれば、実行されている必要はありません。
* AFFプラットフォーム内のボリューム上の既存のデータは、圧縮スキャナを使用して圧縮する必要があります。


====
link:enable-deduplication-volume-task.html["ボリュームの重複排除の有効化"]

.タスク概要
* HDDアグリゲートとFlash Poolアグリゲートのボリュームでは、インライン圧縮とポストプロセス圧縮の両方を有効にするか、ポストプロセス圧縮のみを有効にすることができます。
+
両方を有効にする場合は、ポストプロセス圧縮を有効にしてからインライン圧縮を有効にする必要があります。

* AFFプラットフォームでは、インライン圧縮のみがサポートされます。
+
ボリュームのインライン圧縮を有効にする前にポストプロセス圧縮を有効にしておく必要があります。ただし、AFFプラットフォームではポストプロセス圧縮がサポートされないため、ボリュームではポストプロセス圧縮は実行されず、ポストプロセス圧縮がスキップされたことを通知するEMSメッセージが生成されます。

* ONTAP 9.8では、温度（データのアクセス頻度）に基づくストレージ効率化が導入されています。この機能では、データがホットかコールドかによってストレージ効率化が適用されます。コールド データは大きなデータ ブロックで圧縮され、頻繁に上書きされるホット データは小さなデータ ブロックで圧縮されるため、プロセスの効率が向上します。新しく作成されたシンプロビジョニングAFFボリュームでは、温度に基づくストレージ効率化が自動的に有効になります。
* 圧縮形式は、アグリゲートのプラットフォームに基づいて自動的に割り当てられます。
+
[cols="2*"]
|===
| プラットフォーム / アグリゲート | 圧縮形式 


 a| 
AFF
 a| 
適応圧縮



 a| 
Flash Poolアグリゲート
 a| 
適応圧縮



 a| 
HDDアグリゲート
 a| 
二次圧縮

|===


.オプション
*  `volume efficiency modify`コマンドを使用して、デフォルトの圧縮タイプでデータ圧縮を有効にします。
+
次のコマンドは、SVM vs1のボリュームVolAでポストプロセス圧縮を有効にします。

+
`volume efficiency modify -vserver vs1 -volume VolA -compression true`

+
次のコマンドは、SVM vs1のボリュームVolAでポストプロセス圧縮とインライン圧縮の両方を有効にします。

+
`volume efficiency modify -vserver vs1 -volume VolA -compression true -inline-compression true`

* 特定の圧縮タイプによるデータ圧縮を有効にするには、上級権限レベルで `volume efficiency modify`コマンドを使用します。
+
..  `set -privilege advanced`コマンドを使用して、権限レベルをadvancedに変更します。
..  `volume efficiency modify`コマンドを使用して、ボリュームに圧縮タイプを割り当てます。
+
次のコマンドは、SVM vs1のボリュームVolAでポストプロセス圧縮を有効にして、適応圧縮形式を割り当てます。

+
`volume efficiency modify -vserver vs1 -volume VolA -compression true -compression-type adaptive`

+
次のコマンドは、SVM vs1のボリュームVolAでポストプロセス圧縮とインライン圧縮の両方を有効にして、適応圧縮形式を割り当てます。

+
`volume efficiency modify -vserver vs1 -volume VolA -compression true -compression-type adaptive -inline-compression true`

..  `set -privilege admin`コマンドを使用して、権限レベルをadminに変更します。



