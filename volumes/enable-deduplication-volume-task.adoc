---
permalink: volumes/enable-deduplication-volume-task.html 
sidebar: sidebar 
keywords: enable, deduplication, volume, FlexVol, postprocess, inline 
summary: FlexVolボリューム上で重複排除（後処理またはインライン）を有効にして、ストレージ効率を実現します。 
---
= ボリュームの重複排除の有効化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FlexVolで重複排除を有効にしてストレージ効率を向上させることができます。ポストプロセス重複排除はすべてのボリュームで、インライン重複排除はAFFまたはFlash Poolアグリゲート内のボリュームで有効にすることができます。

他の種類のボリュームでインライン重複排除を有効にする場合は、link:https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/ONTAP_OS/How_to_enable_volume_inline_deduplication_on_Non-AFF_(All_Flash_FAS)_aggregates["NetAppナレッジベース：非AFF（オールフラッシュFAS）アグリゲートでボリュームのインライン重複排除を有効にする方法"^]を参照してください。

.開始する前に
FlexVolの場合、ボリュームおよびアグリゲート内に重複排除メタデータ用の十分な空きスペースがあることを確認しておく必要があります。重複排除メタデータ用にアグリゲートに必要な空きスペースはごくわずかで、アグリゲート内の重複排除されたすべてのFlexVolまたはデータ コンスティチュエントの総物理データ量の3%に相当するスペースです。各FlexVolまたはデータ コンスティチュエントには総物理データ量の4%に相当する空きスペースを確保する必要があるので、合計で7%必要になります。

[NOTE]
====
AFFシステムでは、インライン重複排除がデフォルトで有効になっています。

====
.オプション
*  `volume efficiency on`コマンドを使用して、ポストプロセス重複排除を有効にします。link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-on.html["ONTAPコマンド リファレンス"^]の `volume efficiency on`の詳細を確認してください。
+
次のコマンドは、ボリュームVolAでポストプロセス重複排除を有効にします。

+
`volume efficiency on -vserver vs1 -volume VolA`

*  `volume efficiency on`コマンドに続けて、 `-inline-deduplication`オプションを `true`に設定した `volume efficiency modify`コマンドを使用して、ポストプロセス重複排除とインライン重複排除の両方を有効にします。 `volume efficiency modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-modify.html["ONTAPコマンド リファレンス"^]を参照してください。
+
次のコマンドは、ボリュームVolAでポストプロセス重複排除とインライン重複排除の両方を有効にします。

+
`volume efficiency on -vserver vs1 -volume VolA`

+
`volume efficiency modify -vserver vs1 -volume VolA -inline-dedupe true`

* インライン重複排除のみを有効にするには、 `volume efficiency on`コマンドに続けて、 `-inline-deduplication`オプションを `true`に設定し、 `-policy`オプションを `inline-only`に設定した `volume efficiency modify`コマンドを使用します。
+
次のコマンドは、ボリュームVolAでインライン重複排除だけを有効にします。

+
`volume efficiency on -vserver vs1 -volume VolA`

+
`volume efficiency modify -vserver vs1 -volume VolA -policy inline-only -inline-dedupe true`



.終了後の操作
ボリューム効率化設定を表示して、設定が変更されたことを確認します：
`volume efficiency show -instance`

 `volume efficiency show -instance`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-show.html["ONTAPコマンド リファレンス"^]を参照してください。
