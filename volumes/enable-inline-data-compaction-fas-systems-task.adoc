---
permalink: volumes/enable-inline-data-compaction-fas-systems-task.html 
sidebar: sidebar 
keywords: enable, inline, data compaction, fas systems, hdd aggregate, volume efficiency 
summary: ボリューム レベルまたはアグリゲート レベルで、Flash Pool（ハイブリッド）アグリゲートまたは HDD アグリゲートを備えた FAS システムでインライン データ コンパクションを有効にします。 
---
= FASシステムのインライン データ コンパクションの有効化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
 `volume efficiency`クラスタ シェル コマンドを使用して、Flash Pool（ハイブリッド）アグリゲートまたはHDDアグリゲートを使用するFASシステムで、ボリューム レベルでインライン データ コンパクションを有効にできます。FASシステムで作成されたボリュームでは、データ コンパクションはデフォルトで無効になっています。link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=volume+efficiency["ONTAPコマンド リファレンス"^]の `volume efficiency`の詳細を確認してください。

.タスク概要
ボリューム上でインライン データ コンパクションを有効にするには、その `-space-guarantee`オプションを `none`に設定する必要があります。HDDアグリゲート上のボリューム上でデータ コンパクションを有効にすると、追加のCPUリソースが使用されます。

.手順
. advanced権限レベルに切り替えます。
+
[source, cli]
----
set -privilege advanced
----
+
 `set`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/set.html["ONTAPコマンド リファレンス"^]をご覧ください。

. 目的のノードのボリュームとアグリゲートのデータ コンパクションの状態を確認します。
+
[source, cli]
----
volume efficiency show -volume <volume_name>
----
+
 `volume efficiency show`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-show.html["ONTAPコマンド リファレンス"^]をご覧ください。

. ボリュームでデータ コンパクションを有効にします。
+
[source, cli]
----
volume efficiency modify -volume <volume_name> -data-compaction true
----
+
 `volume efficiency modify`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-modify.html["ONTAPコマンド リファレンス"^]をご覧ください。

+
[NOTE]
====
アグリゲートまたはボリュームのいずれかでデータ コンパクションが `false`に設定されている場合、コンパクションは失敗します。コンパクションを有効にしても既存のデータはコンパクションされず、システムへの新しい書き込みのみがコンパクションされます。 `volume efficiency start`コマンドには、既存のデータをコンパクションする方法の詳細が記載されています。 `volume efficiency start`の詳細については、link:https://docs.netapp.com/us-en/ontap-cli/volume-efficiency-start.html["ONTAPコマンド リファレンス"^]を参照してください。

====
. コンパクションの統計を表示します。
+
[source, cli]
----
volume efficiency show -volume <volume_name>
----

