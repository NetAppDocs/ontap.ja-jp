---
permalink: volumes/enable-inline-data-compaction-fas-systems-task.html 
sidebar: sidebar 
keywords: enable, inline, data, compaction, fas systems 
summary: Flash Pool （ハイブリッド）アグリゲートまたは HDD アグリゲートを使用する FAS システムでは、 WAFL コンパクションの有効化ノードシェルコマンドを使用して、ボリュームレベルまたはアグリゲートレベルでインラインデータコンパクションを制御できます。FAS システムのデータコンパクションはデフォルトで無効になっています。 
---
= FAS システムのインラインデータコンパクションを有効にします
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
を使用すると、Flash Pool（ハイブリッド）アグリゲートまたはHDDアグリゲートを使用するFAS システムで、インラインデータコンパクションをボリュームレベルまたはアグリゲートレベルで制御できます `volume efficiency` クラスタシェルコマンド。FAS システムのデータコンパクションはデフォルトで無効になっています。

.このタスクについて
アグリゲートレベルでデータコンパクションを有効にすると、ボリュームのスペース保証を使用して作成されるすべての新しいボリュームでデータコンパクションが有効になります `none` をクリックします。HDD アグリゲートのボリュームでデータコンパクションを有効にすると、追加の CPU リソースが使用されます。

.手順
. advanced権限レベルに切り替えます。+
`set -privilege advanced`
. 目的のノードのボリュームとアグリゲートのデータコンパクションの状態を確認します：+
`volume efficiency show -volume _volume_name_` [+]
. ボリュームでデータコンパクションを有効にします。+
`volume efficiency modify -volume _volume_name_ -data-compaction true`
+
[NOTE]
====
データコンパクションがに設定されている場合 `false` アグリゲートまたはボリュームのどちらかで、コンパクションを実行すると失敗します。コンパクションを有効にしても既存のデータに対しては実行されず、システムへの新規の書き込みに対してのみ実行されます。。 `volume efficiency start` コマンドのヘルプには、既存データのコンパクションに関する詳細情報が含まれています（ONTAP 9.1以降）。[+]http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-cmpr/GUID-5CB10C70-AC11-41C0-8C16-B4D0DF916E9B.html["ONTAP 9コマンド"^]

====
. コンパクションの統計を表示します。
`volume efficiency show -volume _volume_name_`

