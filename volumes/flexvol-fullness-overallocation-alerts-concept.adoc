---
permalink: volumes/flexvol-fullness-overallocation-alerts-concept.html 
sidebar: sidebar 
keywords: how to, address, flexvol, volume, fullness, overallocation, alerts 
summary: ONTAP では、 FlexVol ボリュームがスペース不足になると、該当するボリュームにスペースを追加して対処できるように EMS メッセージが表示されます。アラートの種類とその対処方法を理解しておくと、データの可用性を維持するのに役立ちます。 
---
= FlexVol のスペース不足アラートと過剰割り当てアラートへの対処
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP では、 FlexVol ボリュームがスペース不足になると、該当するボリュームにスペースを追加して対処できるように EMS メッセージが表示されます。アラートの種類とその対処方法を理解しておくと、データの可用性を維持するのに役立ちます。

ボリュームが _full_と みなされるのは、アクティブファイルシステム（ユーザデータ）で使用可能なボリューム内のスペースの割合がしきい値（設定可能）を下回った場合です。ボリュームが過剰割り当ての状態になると、メタデータを格納したり基本的なデータアクセスをサポートしたりするために ONTAP で使用されるスペースが不足した状態になります。他の目的のために確保されているスペースを使用してボリュームを引き続き利用できる場合もありますが、スペースリザベーションやデータの可用性を維持できなくなるリスクがあります。

過剰割り当てには論理的なものと物理的なものがあります。_ 論理的な過剰割り当て _ は、スペースリザベーションなど、以降のスペースコミットメントを受け入れるためにリザーブされたスペースが別の目的に使用されたことを意味します。_ 物理的な過剰割り当て _ は、ボリュームで使用する物理ブロックが不足した状態を示します。この状態のボリュームには、書き込みができなくなったり、オフラインになったりするリスクがあり、これが原因でコントローラが停止してしまう可能性もあります。

ボリュームは、メタデータ用に使用またはリザーブされているスペースによって 100% を超えることがあります。100% を超えているからといって必ずしも過剰割り当ての状態であるとは限りません。qtree レベルの共有とボリュームレベルの共有が同じ FlexVol または SCVMM プールに存在する場合は、 qtree が FlexVol 共有上のディレクトリとして表示されます。そのため、誤って削除しないように注意する必要があります。

次の表に、ボリュームのスペース不足アラートと過剰割り当てアラートについて、問題への対処方法と対処しなかった場合のリスクを示します。

[cols="6*"]
|===
| アラートの種類 | EMS レベル | 設定可能かどうか | 定義（ Definition ） | 対処方法 | 対処しなかった場合はリスクがあります 


 a| 
ほぼフルです
 a| 
デバッグ
 a| 
Y
 a| 
ファイルシステムがこのアラートのしきい値（デフォルトは 95% ）を超えています。この割合は、「 Used 」の合計から Snapshot リザーブのサイズを引いた値です。
 a| 
* ボリュームサイズを増やしています
* ユーザデータを減らす

 a| 
書き込み処理やデータ可用性に対する影響はまだありません。



 a| 
フル
 a| 
デバッグ
 a| 
Y
 a| 
ファイルシステムがこのアラートのしきい値（デフォルトは 98% ）を超えています。この割合は、「 Used 」の合計から Snapshot リザーブのサイズを引いた値です。
 a| 
* ボリュームサイズを増やしています
* ユーザデータを減らす

 a| 
書き込み処理やデータ可用性に対する影響はまだありませんが、ボリュームは書き込み処理ができなくなるリスクのある段階に近づいています。



 a| 
論理的な過剰割り当て
 a| 
SVC エラーです
 a| 
N
 a| 
ファイルシステムがフルの状態で、さらにメタデータ用のボリュームのスペースが不足しています。
 a| 
* ボリュームサイズを増やしています
* Snapshot コピーを削除しています
* ユーザデータを減らす
* ファイルまたは LUN のスペースリザベーションを無効にします

 a| 
リザーブされていないファイルに対する書き込み処理が失敗する可能性があり



 a| 
物理的な過剰割り当て
 a| 
ノードエラー
 a| 
N
 a| 
ボリュームで書き込み可能な物理ブロックが不足しています。
 a| 
* ボリュームサイズを増やしています
* Snapshot コピーを削除しています
* ユーザデータを減らす

 a| 
書き込み処理ができなくなり、データの可用性を維持できなくなるリスクがあり、ボリュームがオフラインになる可能性もあります。

|===
あるボリュームで、フルの割合が上下してしきい値にかかるたびに、 EMS メッセージが生成されます。ボリュームのフル・レベルがしきい値を下回ると 'volume ok EMS メッセージが生成されます
