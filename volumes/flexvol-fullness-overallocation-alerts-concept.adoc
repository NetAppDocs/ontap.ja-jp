---
permalink: volumes/flexvol-fullness-overallocation-alerts-concept.html 
sidebar: sidebar 
keywords: how, address, flexvol, volume, fullness, overallocation, alerts 
summary: ONTAPでは、FlexVolがスペース不足になるとEMSメッセージが表示されます。これにより、ユーザは、該当するボリュームにスペースを追加して対処できます。 
---
= FlexVolのスペース不足アラートと過剰割り当てアラートへの対処
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPでは、FlexVolがスペース不足になるとEMSメッセージが表示されます。これにより、ユーザは、該当するボリュームにスペースを追加して対処できます。アラートの種類とその対処方法を理解しておくと、データの可用性を確保するのに役立ちます。

ボリュームが_フル_と表示されている場合、アクティブ ファイル システム（ユーザーデータ）で使用可能なボリューム内のスペースの割合が、（設定可能な）しきい値を下回っていることを意味します。ボリュームが_割り当て超過_状態になると、ONTAPメタデータ用および基本的なデータアクセスのサポートに使用するスペースが使い果たされたことを意味します。通常は他の目的で予約されているスペースをボリュームの機能維持に使用できる場合もありますが、スペース リザベーションやデータの可用性が損なわれる可能性があります。

過剰割り当ては、論理的または物理的な割り当てのいずれかです。_論理的過剰割り当て_とは、スペース リザベーションなどの将来のスペースコミットメントを満たすために予約されたスペースが、別の目的に使用されていることを意味します。_物理的過剰割り当て_とは、ボリュームで使用できる物理ブロックが不足していることを意味します。この状態のボリュームは、書き込みを拒否したり、オフラインになったり、コントローラーの障害を引き起こす可能性があります。

メタデータによって使用またはリザーブされているスペースが原因で、ボリュームが100%フルを超える可能性があります。ただし、ボリュームが100%フルを超えていても、必ずしも過剰割り当てになっているとは限りません。qtreeレベルの共有とボリュームレベルの共有が同じFlexVolまたはSCVMMプールに存在する場合は、qtreeがFlexVol共有上のディレクトリとして表示されます。そのため、qtreeを誤って削除しないように注意する必要があります。

次の表に、ボリュームのスペース不足アラートと過剰割り当てアラート、問題への対処方法、および対処しなかった場合のリスクを示します。

[cols="6*"]
|===
| アラートの種類 | EMSレベル | 設定可能？ | 定義 | 対処方法 | 対策を講じない場合のリスク 


 a| 
ほぼフル
 a| 
デバッグ
 a| 
Y
 a| 
ファイル システムがこのアラートに設定されたしきい値（デフォルトは95%）を超えました。パーセンテージは `Used`合計からSnapshotリザーブのサイズを差し引いた値です。
 a| 
* ボリューム サイズを増やす。
* ユーザ データを減らす。

 a| 
書き込み処理やデータ可用性に対するリスクはまだありません。



 a| 
フル
 a| 
デバッグ
 a| 
Y
 a| 
ファイル システムがこのアラートに設定されたしきい値（デフォルトは98%）を超えました。パーセンテージは `Used`合計からSnapshotリザーブのサイズを差し引いた値です。
 a| 
* ボリューム サイズを増やす。
* ユーザ データを減らす。

 a| 
書き込み処理やデータ可用性に対するリスクはまだありませんが、ボリュームは、書き込み処理がリスクにさらされる段階に近づいています。



 a| 
論理的な過剰割り当て
 a| 
SVC エラー
 a| 
注
 a| 
ファイルシステムがいっぱいになっていることに加え、メタデータに使用されるボリュームのスペースが不足しています。
 a| 
* ボリューム サイズを増やす。
* Snapshotの削除
* ユーザ データを減らす。
* ファイルまたはLUNのスペース リザベーションを無効化する。

 a| 
リザーブされていないファイルへの書き込み処理が失敗することがあります。



 a| 
物理的な過剰割り当て
 a| 
ノード エラー
 a| 
注
 a| 
ボリュームで書き込み可能な物理ブロックが不足しています。
 a| 
* ボリューム サイズを増やす。
* Snapshotの削除
* ユーザ データを減らす。

 a| 
書き込み処理とデータの可用性に対するリスクがあります。ボリュームがオフラインになる可能性があります。

|===
ボリュームのしきい値を超えるたびに、使用率の上昇または下降に関係なく、EMSメッセージが生成されます。ボリュームの使用率がしきい値を下回ると、 `volume ok`EMSメッセージが生成されます。
