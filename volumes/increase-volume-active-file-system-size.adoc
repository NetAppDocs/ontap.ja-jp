---
permalink: volumes/increase-volume-active-file-system-size.html 
sidebar: sidebar 
keywords: increase, active, file system, volume, cpu offload, compression offload, dedicated offload processor, storage efficiency, compression 
summary: 専用オフロード プロセッサ ストレージ効率をサポートしないプラットフォームから専用オフロード ストレージ効率をサポートするプラットフォームにボリュームを移動する場合、ボリュームのスペースが不足しないように、ボリュームを移動する前にボリュームのアクティブ ファイル システムのサイズを増やす必要があります。 
---
= 8Kアダプティブ圧縮から移行する前に、ONTAPボリュームのアクティブ ファイル システムを増やす
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
8KBアダプティブ圧縮をサポートするプラットフォームは、ボリュームレベルでスペースを節約します。AFF Cシリーズ・プラットフォームおよび32KB圧縮をサポートするプラットフォームは、アグリゲートレベルでスペースを節約します。8KBアダプティブ圧縮からAFF Cシリーズ・プラットフォームまたは32KB圧縮をサポートするプラットフォームにボリュームを移行する場合、ボリュームのアクティブ ファイル システムのサイズを8KB圧縮による節約分だけ増やす必要があります。これにより、ボリュームの移動中にボリュームの空きスペースが不足するのを防ぐことができます。

次のシステムは 32k 圧縮をサポートしています：

[cols="2"]
|===
| プラットフォーム | ONTAPのバージョン 


 a| 
* AFF A1K用
* AFF A90
* AFF A70
* FAS90
* FAS70

| 9.15.1以降 


 a| 
* AFF C80用
* AFF C60
* AFF C30
* AFF A50
* AFF A30

| 9.16.1以降 
|===
link:../concepts/builtin-storage-efficiency-concept.html["32k圧縮をサポートするAFFおよびFASプラットフォーム"]についての詳細をご覧ください。

AFF C シリーズ プラットフォームの完全なリストについては、link:https://hwu.netapp.com/["Hardware Universe"^]を参照してください。

.タスク概要
ボリューム移動操作を使用してデータを移行する場合は、以下の手順を実行してください。SnapMirror操作を使用してデータを移行する場合は、アクティブ ファイル システムのサイズを手動で増やす必要はありません。SnapMirrorデスティネーションボリュームはデフォルトでボリュームの自動サイズ調整を使用するため、ボリュームレイヤーではなくアグリゲートレイヤーで圧縮による節約が実現されるため、スペース不足になることは想定されません。

.開始する前に
ボリュームで論理スペースのレポートと適用が有効になっていない場合は、オプションで `-is-space-reporting-logical`と `-is-space-enforcement-logical`パラメータを *true* に設定して有効にすることができます。ボリュームを移動する前にこれらの設定を有効にしておくと、8KB 圧縮から変換する際に、ボリュームレイヤーでの圧縮による節約損失を許容できる十分なボリューム容量があるかどうかを評価するのに役立ちます。これらの設定はボリューム上で有効にする必要があります。SVMレベルでこれらの設定を有効にした場合、新しく作成されたボリュームにのみ適用されます。

.手順
. ボリュームの現在のサイズとSnapshotリザーブを確認します。
+
[source, cli]
----
volume show-space
----
. ボリュームの圧縮によるスペース削減量を確認します：
+
[source, cli]
----
volume show -vserver -volume -fields compression-space-saved
----
. ボリュームのアクティブ ファイル システムのサイズを、 `compression-space-saved`に表示されている量とSnapshotリザーブ分だけ増やします。
+
[source, cli]
----
volume size -vserver <vserver_name> -volume <volume_name> -new-size +<size>
----
+
.例
ボリュームが100GBで、Snapshotリザーブが20%の場合、アクティブ ファイル システムは80GB、Snapshotリザーブは20GBです。アクティブ ファイル システムを20GB増やすには、ボリューム全体のサイズに25GBを追加する必要があります。つまり、アクティブ ファイル システムに20GB、Snapshotリザーブに5GB（20%）です。

+
[listing]
----
volume size -vserver svm1 -volume volx -size +20GB
----
. ボリュームのサイズが増加したことを確認します：
+
[source, cli]
----
volume show -vserver <vserver_name> -volume <volume_name> -fields size
----


.結果
ボリュームのアクティブ ファイル システムのサイズが増加し、ボリュームを移動する準備が整いました。

.次の手順
link:move-volume-task.html["ボリューム移動"]を実行してデータを移行します。
