---
permalink: volumes/rehost-nfs-volumes-task.html 
sidebar: sidebar 
keywords: rehost, nfs, volumes 
summary: NFS プロトコル経由でデータを提供するボリュームをリホストできます。NFS ボリュームのリホスト後、引き続き NFS プロトコル経由でデータに継続的にアクセスするためには、ボリュームをホストする SVM のエクスポートポリシーに関連付けて、ポリシーと関連ルールを手動で設定する必要があります。 
---
= NFS ボリュームをリホスト
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NFS プロトコル経由でデータを提供するボリュームをリホストできます。NFS ボリュームのリホスト後、引き続き NFS プロトコル経由でデータに継続的にアクセスするためには、ボリュームをホストする SVM のエクスポートポリシーに関連付けて、ポリシーと関連ルールを手動で設定する必要があります。

.必要なもの
* ボリュームはオンラインである必要があります。
* ボリューム移動や LUN 移動などのボリューム管理操作は実行しないでください。
* リホストするボリュームへのデータアクセスを停止する必要があります。
* リホストするボリュームのデータアクセスをサポートするようにターゲット SVM の ns-switch とネームサービスを設定する必要があります。
* ボリュームのユーザ ID とグループ ID をターゲット SVM で使用可能であるか、またはホストするボリュームで変更する必要があります。


.このタスクについて
* リホストはシステム停止を伴う処理です。
* リホスト処理が失敗した場合は、ソースボリュームでボリュームのポリシーおよび関連するルールを再設定しなければならない場合があります。
* 次のボリュームポリシー、ポリシールール、および構成はリホスト処理後にソースボリュームから失われるため、リホスト後のボリュームで手動で再設定する必要があります。
+
** ボリュームと qtree のエクスポートポリシー
** ウィルス対策ポリシー
** ボリューム効率化ポリシー
** Quality of Service （ QoS ；サービス品質）ポリシー
** Snapshot ポリシー
** クォータルール
** ns-switch とネームサービスの設定のエクスポートポリシーとルール
** ユーザ ID とグループ ID




.手順
. ボリュームのリホスト処理が失敗した場合に NFS ポリシーの情報が失われないように、 NFS エクスポートポリシーに関する情報を記録します。
. 親ボリュームからボリュームをアンマウントします。
+
`volume unmount`

. advanced 権限レベルに切り替えます。
+
`set -privilege advanced`

. デスティネーション SVM でボリュームをリホストします。
+
`volume rehost -vserver source_svm -volume vol_name -destination-vserver destination_svm`

+
デスティネーション SVM のデフォルトのエクスポートポリシーがリホストしたボリュームに適用されます。

. エクスポートポリシーを作成します。
+
`vserver export-policy create`

. リホストしたボリュームのエクスポートポリシーをユーザ定義のエクスポートポリシーに更新します。
+
`volume modify`

. デスティネーション SVM の適切なジャンクションパスにボリュームをマウントします。
+
`volume mount`

. デスティネーション SVM で NFS サービスが実行されていることを確認します。
. リホストしたボリュームへの NFS アクセスを再開します。
. NFS クライアントのクレデンシャルと LIF の構成を更新して、デスティネーション SVM の LIF を反映させます。
+
これは、ボリュームのアクセスパス（ LIF とジャンクションパス）が変更されているためです。



.完了後
ポリシーおよび関連するルールをリホストしたボリュームに手動で再設定する必要があります。

https://docs.netapp.com/us-en/ontap-sm-classic/nfs-config/index.html["NFS の設定"]
