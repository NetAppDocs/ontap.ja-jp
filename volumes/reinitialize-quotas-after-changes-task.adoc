---
permalink: volumes/reinitialize-quotas-after-changes-task.html 
sidebar: sidebar 
keywords: reinitialize, quotas, after making, extensive, changes 
summary: 既存のクォータ定義に大幅な変更を加えたあとは、影響を受けるすべてのボリュームでクォータを再初期化する必要があります。 
---
= 大幅な変更後のクォータの再初期化
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
既存のクォータ定義に大幅な変更を加えたあとは、影響を受けるすべてのボリュームでクォータを再初期化する必要があります。このような変更の例としては、クォータが適用されていないターゲットに対するクォータの追加または削除があります。

.タスク概要
クォータが適用されているStorage Virtual Machine（SVM）に対し、クォータの完全な再初期化が必要となる、大幅な変更を実行します。

.手順
.  `vserver show`コマンドに `-instance`パラメータを指定して、現在SVMに割り当てられているポリシーの名前を確認します。
. 次のいずれかの操作を実行し、クォータ ルールを変更します。
+
[cols="2*"]
|===
| 状況 | 操作 


 a| 
新しいクォータ ルールを作成する
 a| 
 `volume quota policy rule create`コマンドを使用する



 a| 
既存のクォータ ルールの設定を変更する
 a| 
 `volume quota policy rule modify`コマンドを使用する



 a| 
既存のクォータ ルールを削除する
 a| 
 `volume quota policy rule delete`コマンドを使用する

|===
.  `volume quota policy rule show`コマンドを使用して、クォータルールが正しく設定されていることを確認します。
. クォータを変更した各ボリュームで、クォータをオフにしてからクォータをオンにして、クォータを再初期化します。
+
.. 影響を受ける各ボリュームで `volume quota off`コマンドを使用して、そのボリュームのクォータを非アクティブ化します。
.. 影響を受ける各ボリュームで `volume quota on`コマンドを使用して、そのボリュームのクォータをアクティブ化します。
+
[NOTE]
====
 `volume quota off`コマンドの実行直後にクォータをアクティブ化しようとするとエラーが発生する可能性があるため、影響を受ける各ボリュームでクォータを再アクティブ化する前に約5分間待機する必要があります。

また、特定のボリュームを含むノードからコマンドを実行して、ボリュームのクォータを再初期化することもできます。

====
+
初期化処理は、次のいずれかの方法で監視できます。

+
***  `volume quota on`コマンドを使用する際に、 `-foreground`パラメータを追加することで、クォータオンジョブをフォアグラウンドで実行できます。（デフォルトでは、ジョブはバックグラウンドで実行されます。）
+
ジョブがバックグラウンドで実行されている場合、 `job show`コマンドを使用して進行状況を監視できます。

***  `volume quota show`コマンドを使用して、クォータ初期化のステータスを監視できます。




.  `volume quota show -instance`コマンドを使用して、初期化に失敗したクォータルールなどの初期化エラーを確認します。
.  `volume quota report`コマンドを使用してクォータレポートを表示し、適用されたクォータが期待どおりであることを確認できます。


.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/vserver-show.html["vserver show"^]
* link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=volume+quota+policy+rule["volumeクォータポリシールール"^]
* link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=volume+quota["ボリュームクォータ"^]
* link:https://docs.netapp.com/us-en/ontap-cli/job-show.html["job show"^]

