---
permalink: volumes/reinitialize-quotas-after-changes-task.html 
sidebar: sidebar 
keywords: reinitialize, quotas, after making, extensive, changes 
summary: クォータが適用されていないターゲットに対してクォータを追加または削除するなど、既存のクォータに大幅な変更を加える場合は、影響するすべてのボリュームのクォータを変更して再初期化する必要があります。 
---
= 大幅な変更を行ったあとにクォータを再初期化する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クォータが適用されていないターゲットに対してクォータを追加または削除するなど、既存のクォータに大幅な変更を加える場合は、影響を受けるすべてのボリュームのクォータを変更して再初期化する必要があります。

.このタスクについて
クォータが適用されている Storage Virtual Machine （ SVM ）に対し、クォータの完全な再初期化が必要となる変更を実行します。

.手順
. を使用します `vserver show` コマンドにを指定します `-instance` SVMに現在割り当てられているポリシーの名前を確認するためのパラメータ。
. 次のいずれかの操作を実行してクォータルールを変更します。
+
[cols="2*"]
|===
| 状況 | 作業 


 a| 
新しいクォータルールを作成します
 a| 
を使用します `volume quota policy rule create` コマンドを実行します



 a| 
既存のクォータルールの設定を変更します
 a| 
を使用します `volume quota policy rule modify` コマンドを実行します



 a| 
既存のクォータルールを削除します
 a| 
を使用します `volume quota policy rule delete` コマンドを実行します

|===
. を使用します `volume quota policy rule show` クォータルールが正しく設定されているかどうかを確認するコマンド。
. クォータを変更した各ボリュームで、クォータをオフにしてからクォータをオンにして、クォータを再初期化します。
+
.. を使用します `volume quota off` 該当する各ボリュームでクォータを非アクティブ化するためのコマンド。
.. を使用します `volume quota on` 該当する各ボリュームでクォータをアクティブ化するためのコマンド。
+
[NOTE]
====
該当する各ボリュームのクォータは、の実行後すぐにアクティブ化しようとするため、5分ほど待ってから再アクティブ化する必要があります `volume quota off` コマンドでエラーが発生する可能性があります。

また、コマンドを実行して、特定のボリュームを含むノードからボリュームのクォータを再初期化することもできます。

====
+
初期化プロセスは、次のいずれかの方法で監視できます。

+
*** を使用する場合 `volume quota on` コマンドを使用して、を追加できます `-foreground` クォータをフォアグラウンドのジョブで実行するためのパラメータ。（デフォルトでは、このジョブはバックグラウンドで実行されます）。
+
バックグラウンドでジョブが実行される場合、を使用して進行状況を監視できます `job show` コマンドを実行します

*** を使用できます `volume quota show` コマンドを使用して、クォータの初期化のステータスを監視します。




. を使用します `volume quota show -instance` 初期化に失敗したクォータルールなどの初期化エラーを確認するコマンド。
. を使用します `volume quota report` コマンドを使用してクォータレポートを表示し、想定どおりのクォータが適用されたことを確認します。

