---
permalink: volumes/san-volumes-concept.html 
sidebar: sidebar 
keywords: understand, san volumes 
summary: SANボリュームプロビジョニングの基本的なオプションと、各オプションがONTAPブロック共有テクノロジのボリュームスペースとスペースの要件をどのように管理するかを理解する。 
---
= SANボリュームプロビジョニングの概要
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAPには、SANボリュームプロビジョニングの基本的なオプションがいくつかあります。各オプションでは、ONTAPブロック共有テクノロジに必要なボリュームスペースとスペースを、それぞれ異なる方法で管理します。環境に最適なオプションを選択できるように、各プロビジョニングオプションの仕組みを理解しておく必要があります。

[TIP]
====
SAN LUNとNAS共有を同じFlexVol volumeに配置することは推奨されません。SAN LUNとNAS共有用に別 々 のFlexVolをプロビジョニングする必要があります。これにより、管理とレプリケーションの展開が簡素化されます。また、Active IQ Unified Manager（旧OnCommand Unified Manager）でのFlexVolボリュームのサポート方法も並行しています。

====


== ボリュームのシンプロビジョニング

シンプロビジョニング ボリュームは、作成時に追加のスペースが確保されません。ボリュームにデータが書き込まれるときに、書き込み処理に対応するために必要なアグリゲート内のストレージをボリュームが要求します。シンプロビジョニング ボリュームを使用する場合はアグリゲートをオーバーコミットできますが、アグリゲートの空きスペースが不足すると、必要なスペースをボリュームが確保できなくなる可能性があります。

シンプロビジョニングFlexVol volumeを作成するには、そのオプションをに `none`設定し `-space-guarantee`ます。



== ボリュームのシックプロビジョニング

シックプロビジョニングは、ボリューム内のブロックにいつでも書き込むことができるように、作成時にアグリゲートから十分なストレージが確保されます。シックプロビジョニングを利用するようにボリュームを設定した場合は、ONTAPの任意のStorage Efficiency機能（圧縮や重複排除など）を使用して、さらに大容量のストレージ要件にも事前に対応できます。

シックプロビジョニングFlexVol volumeを作成するには、その（サービスレベル目標）オプションをに `thick`設定し `-space-slo`ます。



== ボリュームのセミシックプロビジョニング

セミシックプロビジョニングを使用するボリュームを作成すると、ONTAPはボリュームサイズに対応するためにアグリゲートからストレージスペースを確保します。ブロック共有テクノロジでブロックが使用されているためにボリュームの空きスペースが不足している場合、ONTAPは保護データオブジェクト（Snapshot、FlexCloneファイルおよびLUN）を削除して保持しているスペースを解放します。上書きに必要なスペースを確保できる速度でONTAPが保護データオブジェクトを削除できるかぎり、書き込み処理は引き続き成功します。これは「ベストエフォート」書き込み保証と呼ばれます。

[NOTE]
====
セミシックプロビジョニングを使用するボリュームでは、Storage Efficiencyテクノロジ（重複排除、圧縮、コンパクションなど）を使用できません。

====
セミシックプロビジョニングFlexVol volumeを作成するには、その（サービスレベル目標）オプションをに `semi-thick`設定し `-space-slo`ます。



== スペースリザーブファイルおよびスペースリザーブLUNでの使用

スペースリザーブファイルまたはスペースリザーブLUNは、ストレージの作成時にストレージが割り当てられるファイルまたはLUNです。ネットアップではこれまで、スペース・リザベーションが無効になっている LUN （スペース・リザーブなしの LUN ）を「シン・プロビジョニング LUN 」と呼んできました。

[NOTE]
====
スペースリザーブなしのファイルは、一般に「シンプロビジョニングされたファイル」とは呼ばれません。

====
次の表に、スペースリザーブファイルおよびスペースリザーブLUNで使用できる3つのボリュームプロビジョニングオプションの主な違いを示します。

[cols="5*"]
|===
| ボリュームのプロビジョニング | LUN/file のスペースリザベーション | 上書き | 保護データ ^2^ | ストレージ効率 ^3^ 


 a| 
シック
 a| 
サポート対象
 a| 
保証された ^1
 a| 
保証
 a| 
サポート対象



 a| 
シン
 a| 
効果なし
 a| 
なし
 a| 
保証
 a| 
サポート対象



 a| 
セミシック
 a| 
サポート対象
 a| 
ベストエフォート ^1 ^
 a| 
ベストエフォート
 a| 
サポート対象外

|===
* メモ *

. 上書きを保証したり、ベストエフォートで上書きを保証できるようにするには、LUNまたはファイルでスペースリザベーションが有効になっている必要があります。
. 保護データには、Snapshot、自動削除の対象としてマークされたFlexCloneファイルおよびLUN（バックアップクローン）が含まれます。
. Storage Efficiencyには、重複排除、圧縮、自動削除の対象としてマークされていないFlexCloneファイルとLUN（アクティブクローン）、およびFlexCloneサブファイル（コピーオフロードに使用）が含まれます。




== SCSIシンプロビジョニングLUNのサポート

ONTAPは、T10 SCSIシンプロビジョニングLUNとNetAppシンプロビジョニングLUNをサポートしています。T10 SCSIシンプロビジョニングを使用すると、ホストアプリケーションは、ブロック環境向けのLUNのスペース再生機能やスペース監視機能などのSCSI機能をサポートできます。T10 SCSIシンプロビジョニングがSCSIホストソフトウェアでサポートされている必要があります。

LUNのT10シンプロビジョニングのサポートを有効または無効にするには、ONTAP設定を使用し `space-allocation`ます。ONTAPの設定を使用し `space-allocation enable`て、LUNでT10 SCSIシンプロビジョニングを有効にします。

 `[-space-allocation {enabled|disabled}]`のT10シンプロビジョニングのサポートを有効または無効にする方法、およびLUNでT10 SCSIシンプロビジョニングを有効にする方法の詳細については、『ONTAPコマンドリファレンスマニュアル』のコマンドを参照してください。

.関連情報
* https://docs.netapp.com/us-en/ontap-cli["ONTAPコマンド リファレンス"^]

