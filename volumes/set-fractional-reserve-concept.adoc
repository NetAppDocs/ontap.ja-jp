---
permalink: volumes/set-fractional-reserve-concept.html 
sidebar: sidebar 
keywords: considerations, setting, fractional, reserve, lun overwrite reserve 
summary: 部分予約を使用すると、FlexVol ボリューム内のスペース予約済み LUN およびファイルのオーバーライト リザーブをオフにして、ストレージ使用率を最大化できます。 
---
= フラクショナル リザーブを設定する場合の考慮事項
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
フラクショナル リザーブ（_LUN オーバーライト リザーブ_とも呼ばれます）を使用すると、FlexVolボリューム内のスペース リザベーションされたLUNとファイルに対するオーバーライト リザーブを無効にすることができます。これにより、ストレージ利用率を最大化できます。


CAUTION: スペース不足による書き込みエラーが悪影響を及ぼす環境では、この設定を利用する場合の要件を確認しておく必要があります。

フラクショナルリザーブ設定はパーセンテージで表されます。有効な値は `0`と `100`パーセントのみです。フラクショナルリザーブ設定はボリュームの属性です。フラクショナルリザーブを `0`に設定すると、ストレージ使用率が向上します。ただし、ボリュームギャランティを `volume`に設定していても、ボリュームの空き容量が不足している場合、ボリューム内のデータにアクセスするアプリケーションでデータ障害が発生する可能性があります。ただし、ボリュームを適切に設定して使用すれば、書き込みが失敗する可能性を最小限に抑えることができます。ONTAPは、フラクショナルリザーブを `0`に設定し、以下の要件を_すべて_満たすボリュームに対して、「ベストエフォート」の書き込み保証を提供します：

* 重複排除を使用していない
* 圧縮を使用していない
* FlexCloneサブファイルを使用していない
* すべてのFlexCloneファイルとFlexClone LUNで自動削除が有効になっている
+
これはデフォルト設定ではありません。FlexCloneファイルやFlexClone LUNの自動削除は、作成時に設定するか作成後に変更して明示的に有効にする必要があります。

* ODXコピー オフロードとFlexCloneコピー オフロードを使用していない
* ボリューム保証が `volume`に設定されています
* ファイルまたはLUNのスペース リザベーションは `enabled`
* ボリューム Snapshot リザーブは `0`に設定されています
* ボリュームスナップショットの自動削除は、 `enabled`コミットメントレベルが `destroy`、破棄リストが `lun_clone,vol_clone,cifs_share,file_clone,sfsr`、トリガーが `volume`で実行されます。
+
この設定では、必要に応じてFlexCloneファイルとFlexClone LUNも削除されます。



[NOTE]
====
* 上記の要件がすべて満たされていても変更率が高い場合、まれにスナップショットの自動削除が遅れ、ボリュームのスペースが不足する可能性があります。
* 上記の要件がすべて満たされ、スナップショットが使用されていない場合、ボリュームの書き込みでスペースが不足しないことが保証されます。


====
さらに、ボリュームの自動拡張機能をオプションで使用して、ボリュームのスナップショットを自動的に削除する必要が生じる可能性を減らすことができます。自動拡張機能を有効にする場合は、関連付けられたアグリゲートの空き容量を監視する必要があります。アグリゲートがいっぱいになり、ボリュームの拡張ができなくなると、ボリュームの空き容量が枯渇するにつれて、より多くのスナップショットが削除される可能性があります。

上記の構成要件をすべて満たすことができず、ボリュームの容量不足を回避する必要がある場合は、ボリュームのフラクショナルリザーブ設定を `100`に設定する必要があります。これにより、事前により多くの空き容量が必要になりますが、上記のテクノロジが使用されている場合でもデータ変更操作が成功することが保証されます。

フラクショナル リザーブ設定のデフォルト値と有効値は、ボリュームのギャランティによって異なります。

[cols="3*"]
|===
| ボリューム ギャランティ | デフォルトの部分リザーブ | 有効な値 


 a| 
Volume
 a| 
100
 a| 
0, 100



 a| 
なし
 a| 
0
 a| 
0, 100

|===