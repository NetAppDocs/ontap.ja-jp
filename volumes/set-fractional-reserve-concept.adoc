---
permalink: volumes/set-fractional-reserve-concept.html 
sidebar: sidebar 
keywords: considerations, setting, fractional, reserve, lun overwrite reserve 
summary: フラクショナルリザーブを使用すると、FlexVol volume内のスペースリザーブLUNおよびスペースリザーブファイルのオーバーライトリザーブを無効にして、ストレージ利用率を最大限に高めることができます。 
---
= フラクショナルリザーブヲセッテイスルサイノコウリョジコウ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
フラクショナルリザーブは、 _lun overwrite reserve _ とも呼ばれ、 FlexVol ボリューム内のスペースリザーブ LUN およびファイルのオーバーライトリザーブを無効にすることができます。これにより、ストレージ利用率を最大限に高めることができます。


CAUTION: スペース不足による書き込み処理の失敗が悪影響を及ぼす環境では、この構成で課される可能性のある要件を理解しておく必要があります。

フラクショナルリザーブ設定はパーセンテージで表され、有効な値は `0`と `100`パーセントのみです。フラクショナルリザーブ設定はボリュームの属性です。フラクショナルリザーブを設定して `0`ストレージ利用率を高めます。ただし、ボリュームの空きスペースがなくなると、ボリュームギャランティがに設定されていても、ボリュームに格納されたデータにアクセスするアプリケーションでデータを利用できなくなる可能性があります `volume`。ただし、ボリュームを適切に構成して使用すれば、書き込みが失敗する可能性を最小限に抑えることができます。次の要件の_all_が満たされている場合、ONTAPはフラクショナルリザーブがに設定されたボリュームに対して「ベストエフォート」書き込み保証を提供します `0`。

* 重複排除を使用していない
* 圧縮を使用していない
* FlexCloneサブファイルは使用されていません
* すべてのFlexCloneファイルとFlexClone LUNで自動削除が有効になっている
+
これはデフォルト設定ではありません。FlexCloneファイルやFlexClone LUNの自動削除は、作成時に設定するか作成後に変更して明示的に有効にする必要があります。

* ODXコピー オフロードとFlexCloneコピー オフロードを使用していない
* ボリュームギャランティがに設定されている `volume`
* ファイルまたはLUNのスペースリザベーション： `enabled`
* ボリュームのSnapshotリザーブの設定： `0`
* ボリュームSnapshotの自動削除は `enabled`、コミットメントレベルが、 `destroy`削除リストが、 `lun_clone,vol_clone,cifs_share,file_clone,sfsr`トリガーが `volume`
+
この設定では、必要に応じてFlexCloneファイルとFlexClone LUNも削除されます。



[NOTE]
====
* 上記の要件をすべて満たしていても変更率が高いと、まれにSnapshotの自動削除が遅れてボリュームのスペースが不足することがあります。
* 上記のすべての要件が満たされ、Snapshotが使用されていない場合、ボリューム書き込みでスペースが不足することはありません。


====
また、必要に応じてボリュームの自動拡張機能を使用することで、ボリュームSnapshotが自動的に削除される可能性を減らすことができます。自動拡張機能を有効にする場合は、関連付けられたアグリゲートの空きスペースを監視する必要があります。アグリゲートの空きスペースがなくなり、ボリュームを拡張できなくなると、ボリュームの空きスペースが不足したときに削除されるSnapshotが増える可能性があります。

上記の設定要件をすべて満たすことができず、ボリュームのスペース不足を防ぐ必要がある場合は、ボリュームのフラクショナルリザーブ設定をに設定する必要があります `100`。これにより、事前に確保する必要がある空きスペースは増えますが、上記のテクノロジを使用する場合でもデータ変更処理が確実に実行されるようになります。

フラクショナル リザーブ設定のデフォルト値と有効値は、ボリュームのギャランティによって異なります。

[cols="3*"]
|===
| ボリュームギャランティ | デフォルトのフラクショナルリザーブ | 有効な値 


 a| 
ボリューム
 a| 
100
 a| 
0、100



 a| 
なし
 a| 
0
 a| 
0、100

|===