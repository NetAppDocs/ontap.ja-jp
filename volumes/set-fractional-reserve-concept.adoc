---
permalink: volumes/set-fractional-reserve-concept.html 
sidebar: sidebar 
keywords: considerations, setting, fractional, reserve 
summary: フラクショナルリザーブは LUN オーバーライトリザーブとも呼ばれ、 FlexVol ボリュームでスペースリザーブ LUN およびスペースリザーブファイルのオーバーライトリザーブを無効にすることができます。これはストレージ利用率を最大限に高めるのに役立ちますが、スペース不足による書き込みエラーが悪影響を及ぼす環境では、この設定を利用する場合の要件を確認しておく必要があります。 
---
= フラクショナルリザーブの設定に関する考慮事項
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
フラクショナルリザーブは、 _lun overwrite reserve _ とも呼ばれ、 FlexVol ボリューム内のスペースリザーブ LUN およびファイルのオーバーライトリザーブを無効にすることができます。これはストレージ利用率を最大限に高めるのに役立ちますが、スペース不足による書き込みエラーが悪影響を及ぼす環境では、この設定を利用する場合の要件を確認しておく必要があります。

フラクショナル・リザーブ設定はパーセンテージで表され、有効な値は「 0 」と「 100 」パーセントのみです。フラクショナルリザーブ設定はボリュームの属性です。

フラクショナルリザーブを「 0 」に設定すると、ストレージの使用率が向上します。ただし ' ボリュームの空き領域がなくなると ' ボリューム・ギャランティが volume に設定されていても ' ボリュームに存在するデータにアクセスするアプリケーションがデータを停止する可能性がありますただし、ボリュームを適切に設定して使用することで、書き込みが失敗する可能性を最小限に抑えることができます。ONTAP は ' 以下の要件のうち ' フラクショナル・リザーブが 0 に設定されているボリュームに対して ' ベストエフォート型の書き込み保証を提供します

* 重複排除を使用していません
* 圧縮を使用していません
* FlexClone サブファイルが使用されていません
* すべての FlexClone ファイルと FlexClone LUN で自動削除が有効になっています
+
これはデフォルト設定ではありません。FlexClone ファイルや FlexClone LUN の自動削除は、作成時に設定するか作成後に変更して明示的に有効にする必要があります。

* ODX コピーオフロードと FlexClone コピーオフロードは使用されていません
* ボリューム・ギャランティは 'volume' に設定されています
* ファイルまたは LUN のスペース・リザベーションが「 enabled 」に設定されています
* ボリュームの Snapshot リザーブは「 0 」に設定されています
* ボリューム Snapshot コピーの自動削除は「 enabled 」に設定され、コミットメントレベルは「 destroy 」、削除リストは「 lun_clone 、 vol_clone 、 cifs_share 、 file_clone 、 sfsr 」、トリガーは「 volume 」です
+
この設定では、必要に応じて FlexClone ファイルと FlexClone LUN も削除されます。



変更率が高いと、上記の必要な設定をすべて行っていても、まれに Snapshot コピーの自動削除が追いつかなくなり、ボリュームのスペースが不足することがあります。

また、必要に応じてボリュームの自動拡張機能を使用することで、ボリュームの Snapshot コピーの自動削除が発生する可能性を抑えることができます。自動拡張機能を有効にする場合は、関連付けられたアグリゲートの空きスペースを監視する必要があります。アグリゲートの空きスペースがなくなり、ボリュームを拡張できなくなると、ボリュームの空きスペースがなくなったときに削除される Snapshot コピーが増える可能性があります。

上記のすべての構成要件を満たすことができず、ボリュームがスペース不足にならないようにするには、ボリュームのフラクショナル・リザーブ設定を「 100 」に設定する必要があります。これにより、事前に確保する必要がある空きスペースは増えますが、上記のテクノロジを使用する場合でもデータ変更処理が確実に実行されるようになります。

フラクショナルリザーブ設定のデフォルト値と有効値は、ボリュームのギャランティによって異なります。

[cols="3*"]
|===
| ボリュームギャランティ | デフォルトのフラクショナルリザーブ | 使用できる値 


 a| 
ボリューム
 a| 
100
 a| 
0 、 100



 a| 
なし
 a| 
0
 a| 
0 、 100

|===