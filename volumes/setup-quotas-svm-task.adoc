---
permalink: volumes/setup-quotas-svm-task.html 
sidebar: sidebar 
keywords: set up, quotas on svm 
summary: 新しいSVMにクォータを設定して、リソース利用率を管理および監視できます。 
---
= SVMでのクォータの設定
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
新しいSVMにクォータを設定して、リソース利用率を管理および監視できます。

.タスク概要
クォータを設定する場合の大まかな手順を示します。

. クォータ ポリシーを作成します。
. クォータ ルールをポリシーに追加します。
. SVMにポリシーを割り当てます。
. SVM上の各FlexVolでクォータを初期化します。


.手順
. SVM の作成時に自動的に作成されたデフォルトのクォータ ポリシーの名前を表示するには、 `vserver show -instance`コマンドを入力します。
+
SVMの作成時に名前が指定されていない場合、名前は「default」になります。 `vserver quota policy rename`コマンドを使用して、デフォルト ポリシーに名前を付けることができます。

+
[NOTE]
====
 `volume quota policy create`コマンドを使用して新しいポリシーを作成することもできます。

====
.  `volume quota policy rule create`コマンドを使用して、SVM上の各ボリュームに対して次のクォータ ルールの_いずれか_を作成します：
+
** すべてのユーザに対するデフォルトのクォータ ルール
** 特定のユーザに対する明示的なクォータ ルール
** すべてのグループのデフォルトのクォータ ルール
** 特定のグループに対する明示的なクォータ ルール
** すべてのqtreeのデフォルトのクォータ ルール
** 特定のqtreeに対する明示的なクォータ ルール


.  `volume quota policy rule show`コマンドを使用して、クォータルールが正しく設定されていることを確認します。
. 新しいポリシーを作成している場合は、 `vserver modify`コマンドを使用して新しいポリシーをSVMに割り当てます。
.  `volume quota on`コマンドを使用して、SVM上の各ボリュームのクォータを初期化します。
+
初期化処理は、次の方法で監視できます。

+
**  `volume quota on`コマンドを使用する際に、 `-foreground`パラメータを追加することで、クォータオンジョブをフォアグラウンドで実行できます。（デフォルトでは、ジョブはバックグラウンドで実行されます。）
+
ジョブがバックグラウンドで実行されている場合、 `job show`コマンドを使用して進行状況を監視できます。

**  `volume quota show`コマンドを使用して、クォータ初期化のステータスを監視できます。


.  `volume quota show -instance`コマンドを使用して、初期化に失敗したクォータルールなどの初期化エラーを確認します。
.  `volume quota report`コマンドを使用してクォータレポートを表示し、適用されたクォータが期待どおりであることを確認できます。


.関連情報
* link:https://docs.netapp.com/us-en/ontap-cli/vserver-show.html["vserver show"^]
* link:https://docs.netapp.com/us-en/ontap-cli/vserver-modify.html["vserver modify"^]
* link:https://docs.netapp.com/us-en/ontap-cli/job-show.html["job show"^]
* link:https://docs.netapp.com/us-en/ontap-cli/search.html?q=volume+quota["ボリュームクォータ"^]

