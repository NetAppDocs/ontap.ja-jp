---
permalink: volumes/split-flexclone-from-parent-task.html 
sidebar: sidebar 
keywords: split, flexclone, volume, parent, volume, clone 
summary: 読み書き可能FlexCloneボリュームで親ボリュームのディスクスペースではなく独自のディスクスペースを使用する場合は、FlexCloneボリュームを親ボリュームからスプリットできます。 
---
= FlexClone ボリュームを親ボリュームからスプリットします
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
読み書き可能FlexCloneボリュームで親ボリュームのディスクスペースではなく独自のディスクスペースを使用する場合は、FlexCloneボリュームを親ボリュームからスプリットできます。

.このタスクについて
親ボリュームからFlexCloneボリュームをスプリットすると、包含アグリゲートでリザーブされるスペースが増える可能性があります。アグリゲートの使用可能なスペースを表示するための十分な権限がない場合は、ストレージ管理者に問い合わせて、スプリット処理を完了できるだけの十分なスペースがアグリゲートにあることを確認する必要があります。

ONTAP 9.4 以降では、 AFF システム上のボリュームのギャランティが none である場合、 FlexClone ボリュームのスプリット処理では物理ブロックが共有され、データはコピーされません。そのため、ONTAP 9.4以降では、AFFシステムのFlexCloneボリュームのスプリットは、他のFASシステムのFlexCloneスプリット処理よりも高速です。AFF システムでの FlexClone スプリット処理の向上には、次の利点があります。

* 親からクローンをスプリットしたあともストレージ効率が維持されます。
* 既存の Snapshot コピーは削除されません。
* 処理時間が短縮されます。
* FlexClone ボリュームをクローン階層の任意のポイントからスプリットできます。


.手順
. スプリット処理を完了するために必要な空きスペースの量を確認します。
+
`volume clone show -estimate -vserver _vserver_name_ -flexclone _clone_volume_name_ -parent-volume _parent_vol_name_`

+
次の例は、FlexCloneボリューム「clone1」を親ボリューム「vol1」からスプリットするために必要な空きスペースに関する情報を表示します。

+
[listing]
----
cluster1::> volume clone show -estimate -vserver vs1 -flexclone clone1 -parent-volume volume1
                             Split
Vserver   FlexClone       Estimate
--------- ------------- ----------
vs1       clone1           40.73MB
----
. FlexClone ボリュームとその親が含まれているアグリゲートに十分なスペースがあることを確認します。
+
.. FlexClone ボリュームとその親が含まれているアグリゲートの空きスペースの量を確認します。
+
`storage aggregate show`

.. 包含アグリゲートで利用可能な空きスペースが不足している場合は、アグリゲートにストレージを追加します。
+
`storage aggregate add-disks`



. スプリット処理を開始します。
+
`volume clone split start -vserver _vserver_name_ -flexclone _clone_volume_name_`

+
次の例は、FlexCloneボリューム「Clone1」を親ボリューム「vol1」からスプリットするプロセスを開始する方法を示しています。

+
[listing]
----
cluster1::> volume clone split start -vserver vs1 -flexclone clone1

Warning: Are you sure you want to split clone volume clone1 in Vserver vs1 ?
{y|n}: y
[Job 1617] Job is queued: Split clone1.
----
. FlexClone スプリット処理のステータスを監視します。
+
`volume clone split show -vserver _vserver_name_ -flexclone _clone_volume_name_`

+
次の例は、 AFF システムでの FlexClone スプリット処理のステータスを表示します。

+
[listing]
----
cluster1::> volume clone split show -vserver vs1 -flexclone clone1
                                              Inodes                   Blocks
                                     ---------------------    ---------------------
Vserver   FlexClone    Processed Total    Scanned  Updated      % Inode   % Block
                                                                 Complete  Complete
vs1       clone1        0         0       411247   153600         0        37
----
. スプリットボリュームが FlexClone ボリュームでなくなったことを確認します。
+
`volume show -volume _volume_name_ -fields _clone-volume_`

+
の値 `clone-volume` FlexCloneボリューム以外のボリュームの場合、オプションは「false」です。

+
次の例は、親からスプリットしたボリューム「Clone1」がFlexCloneボリュームでないかどうかを確認する方法を示しています。

+
[listing]
----
cluster1::> volume show -volume clone1 -fields clone-volume
vserver volume **clone-volume**
------- ------ **------------**
vs1     clone1 **false**
----

